///////////////////////////////////////////////////////////////////////////////
//                                                                            /
// IAR C/C++ Compiler V8.10.1.10194/W32 for 8051        13/Dec/2014  13:30:07 /
// Copyright 2004-2011 IAR Systems AB.                                        /
//                                                                            /
//    Core               =  plain                                             /
//    Code model         =  banked                                            /
//    Data model         =  large                                             /
//    Calling convention =  xdata reentrant                                   /
//    Constant location  =  data_rom                                          /
//    Dptr setup         =  1,16                                              /
//    Source file        =  D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta /
//                          ck\Samples\SampleApp\Source\EN_WALL_SOKET_device\ /
//                          CS5463_spi.c                                      /
//    Command line       =  -f "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\ /
//                          zstack\Samples\SampleApp\CC2530DB\..\..\..\Tools\ /
//                          CC2530DB\f8wRouter.cfg" (-DCPU32MHZ               /
//                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TR /
//                          UE -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8     /
//                          -DMAC_CFG_RX_MAX=5 -DRTR_NWK) -f                  /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\Tools\CC2 /
//                          530DB\f8wConfig.cfg" (-DZIGBEEPRO -DSECURE=1      /
//                          -DZG_SECURE_DYNAMIC=0 -DREFLECTOR                 /
//                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                      /
//                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_M /
//                          ASK=0x007F -DBEACON_REQUEST_DELAY=100             /
//                          -DBEACON_REQ_DELAY_MASK=0x00FF                    /
//                          -DLINK_STATUS_JITTER_MASK=0x007F                  /
//                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_P /
//                          OLLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=60          /
//                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3   /
//                          -DNWK_MAX_DATA_RETRIES=2                          /
//                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9        /
//                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=30          /
//                          -DNWK_MAX_BINDING_ENTRIES=1                       /
//                          -DMAX_BINDING_CLUSTER_IDS=4 -DASSERT_RESET        /
//                          -DMAC_MAX_FRAME_SIZE=116                          /
//                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const    /
//                          __code" -DGENERIC=__generic                       /
//                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=8000       /
//                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=1000) /
//                           -DREJOIN_POLL_RATE=440                           /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\Source\EN_WALL_SOKET_device /
//                          \CS5463_spi.c" -D NV_INIT -D NV_RESTORE -D        /
//                          HOLD_AUTO_START -D MT_TASK -D MT_APP_FUNC -D      /
//                          MT_SYS_FUNC -D MT_ZDO_FUNC -D xMT_ZDO_MGMT -D     /
//                          ISR_KEYINTERRUPT -D xWDT_IN_PM1 -D                /
//                          xOSC32K_CRYSTAL_INSTALLED=0 -D xPOWER_PA -D       /
//                          IRR_ROUTER -D M_V332 -D xHAVE_TEST_FUN -lC        /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\IRR_ROUTER_STUDY_d /
//                          evice\List\" -lA "D:\RE_1_2_0_FORMAL_APP(251)-14- /
//                          12-8\Projects\zstack\Samples\SampleApp\CC2530DB\I /
//                          RR_ROUTER_STUDY_device\List\" --diag_suppress     /
//                          Pe001,Pa010 -o "D:\RE_1_2_0_FORMAL_APP(251)-14-12 /
//                          -8\Projects\zstack\Samples\SampleApp\CC2530DB\IRR /
//                          _ROUTER_STUDY_device\Obj\" -e --no_cse            /
//                          --no_unroll --no_inline --no_code_motion          /
//                          --no_tbaa --debug --core=plain --dptr=16,1        /
//                          --data_model=large --code_model=banked            /
//                          --calling_convention=xdata_reentrant              /
//                          --place_constants=data_rom --nr_virtual_regs 16   /
//                          -I "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\ /
//                          zstack\Samples\SampleApp\CC2530DB\" -I            /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\Source\" -I     /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\Source\rssi_tes /
//                          t\h\" -I "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Pro /
//                          jects\zstack\Samples\SampleApp\CC2530DB\..\Source /
//                          \IRR_router\" -I "D:\RE_1_2_0_FORMAL_APP(251)-14- /
//                          12-8\Projects\zstack\Samples\SampleApp\CC2530DB\. /
//                          .\..\..\ZMain\TI2530DB\" -I                       /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\hal\include\" -I                          /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\hal\target\CC2530EB\" -I                  /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\mac\include\" -I                          /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\mac\high_level\" -I                       /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\mac\low_level\srf04\" -I                  /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\mac\low_level\srf04\single_chip\" -I      /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\mt\" -I "D:\RE_1_2_0_FORMAL_APP(251)-14-1 /
//                          2-8\Projects\zstack\Samples\SampleApp\CC2530DB\.. /
//                          \..\..\..\..\Components\osal\include\" -I         /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\services\saddr\" -I                       /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\services\sdata\" -I                       /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\stack\af\" -I "D:\RE_1_2_0_FORMAL_APP(251 /
//                          )-14-12-8\Projects\zstack\Samples\SampleApp\CC253 /
//                          0DB\..\..\..\..\..\Components\stack\nwk\" -I      /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\stack\sapi\" -I                           /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\stack\sec\" -I "D:\RE_1_2_0_FORMAL_APP(25 /
//                          1)-14-12-8\Projects\zstack\Samples\SampleApp\CC25 /
//                          30DB\..\..\..\..\..\Components\stack\sys\" -I     /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\stack\zdo\" -I "D:\RE_1_2_0_FORMAL_APP(25 /
//                          1)-14-12-8\Projects\zstack\Samples\SampleApp\CC25 /
//                          30DB\..\..\..\..\..\Components\zmac\" -I          /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\zmac\f8w\" -On --require_prototypes       /
//    List file          =  D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta /
//                          ck\Samples\SampleApp\CC2530DB\IRR_ROUTER_STUDY_de /
//                          vice\List\CS5463_spi.s51                          /
//                                                                            /
//                                                                            /
///////////////////////////////////////////////////////////////////////////////

        NAME CS5463_spi

        RTMODEL "__SystemLibrary", "CLib"
        RTMODEL "__calling_convention", "xdata_reentrant"
        RTMODEL "__code_model", "banked"
        RTMODEL "__core", "plain"
        RTMODEL "__data_model", "large"
        RTMODEL "__dptr_size", "16"
        RTMODEL "__extended_stack", "disabled"
        RTMODEL "__location_for_constants", "data"
        RTMODEL "__number_of_dptrs", "1"
        RTMODEL "__rt_version", "1"

        RSEG DOVERLAY:DATA:NOROOT(0)
        RSEG IOVERLAY:IDATA:NOROOT(0)
        RSEG ISTACK:IDATA:NOROOT(0)
        RSEG PSTACK:XDATA:NOROOT(0)
        RSEG XSTACK:XDATA:NOROOT(0)

        EXTERN ?ALLOC_XSTACK8
        EXTERN ?BANKED_ENTER_XDATA
        EXTERN ?BANKED_LEAVE_XDATA
        EXTERN ?BDISPATCH
        EXTERN ?BRET
        EXTERN ?DEALLOC_XSTACK8
        EXTERN ?FLT_ADD
        EXTERN ?FLT_DIV
        EXTERN ?FLT_MUL
        EXTERN ?FLT_SUB
        EXTERN ?FLT_TO_UL
        EXTERN ?L_ADD_X
        EXTERN ?L_AND_X
        EXTERN ?L_IOR
        EXTERN ?L_IOR_X
        EXTERN ?L_MOV_TO_X
        EXTERN ?L_MOV_X
        EXTERN ?L_NOT
        EXTERN ?L_SHL
        EXTERN ?R2345_FLT_TO_UL
        EXTERN ?UL_SHR
        EXTERN ?UL_TO_FLT
        EXTERN ?V0
        EXTERN ?XLOAD_R2345
        EXTERN ?XSP
        EXTERN ?XSTACK_DISP0_8
        EXTERN ?XSTORE_R2345
        EXTERN __INIT_XDATA_I

        FUNCTION ??CfgRegToCC5463?relay,0203H
        FUNCTION ??ComplementToOriginalCode?relay,0203H
        PUBLIC ??ConfigCS5463?relay
        FUNCTION ??ConfigCS5463?relay,0203H
        FUNCTION ??Delay_1u?relay,0203H
        PUBLIC ??GetApparenPower?relay
        FUNCTION ??GetApparenPower?relay,0203H
        PUBLIC ??GetCalibrationVIoffOrGain?relay
        FUNCTION ??GetCalibrationVIoffOrGain?relay,0203H
        PUBLIC ??GetCurrentIrms?relay
        FUNCTION ??GetCurrentIrms?relay,0203H
        PUBLIC ??GetCurrentIvalue?relay
        FUNCTION ??GetCurrentIvalue?relay,0203H
        PUBLIC ??GetPactive?relay
        FUNCTION ??GetPactive?relay,0203H
        PUBLIC ??GetPowerFactor?relay
        FUNCTION ??GetPowerFactor?relay,0203H
        PUBLIC ??GetSamplingPeriod?relay
        FUNCTION ??GetSamplingPeriod?relay,0203H
        PUBLIC ??GetTemperature?relay
        FUNCTION ??GetTemperature?relay,0203H
        PUBLIC ??GetVoltageVrms?relay
        FUNCTION ??GetVoltageVrms?relay,0203H
        PUBLIC ??InitCS5463?relay
        FUNCTION ??InitCS5463?relay,0203H
        FUNCTION ??ReadMsgFromCC5463?relay,0203H
        PUBLIC ??Read_CFG_Regester?relay
        FUNCTION ??Read_CFG_Regester?relay,0203H
        FUNCTION ??Read_Cfg_FromCC5463?relay,0203H
        FUNCTION ??SPI_Configration?relay,0203H
        FUNCTION ??SPI_Receive_byte?relay,0203H
        FUNCTION ??SPI_Transfer_byte?relay,0203H
        FUNCTION ??Send_Command_To_Cs5463?relay,0203H
        PUBLIC CS543_CFG_DATA
        FUNCTION CfgRegToCC5463,021203H
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 16, STACK
        FUNCTION ComplementToOriginalCode,0203H
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 20, STACK
        PUBLIC ConfigCS5463
        FUNCTION ConfigCS5463,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        FUNCTION Delay_1u,080203H
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUBLIC GetApparenPower
        FUNCTION GetApparenPower,021203H
        ARGFRAME XSTACK, 8, STACK
        LOCFRAME XSTACK, 32, STACK
        PUBLIC GetCalibrationVIoffOrGain
        FUNCTION GetCalibrationVIoffOrGain,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        PUBLIC GetCurrentIrms
        FUNCTION GetCurrentIrms,021203H
        ARGFRAME XSTACK, 8, STACK
        LOCFRAME XSTACK, 32, STACK
        PUBLIC GetCurrentIvalue
        FUNCTION GetCurrentIvalue,021203H
        ARGFRAME XSTACK, 8, STACK
        LOCFRAME XSTACK, 32, STACK
        PUBLIC GetPactive
        FUNCTION GetPactive,021203H
        ARGFRAME XSTACK, 8, STACK
        LOCFRAME XSTACK, 32, STACK
        PUBLIC GetPowerFactor
        FUNCTION GetPowerFactor,021203H
        ARGFRAME XSTACK, 8, STACK
        LOCFRAME XSTACK, 32, STACK
        PUBLIC GetSamplingPeriod
        FUNCTION GetSamplingPeriod,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        PUBLIC GetTemperature
        FUNCTION GetTemperature,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        PUBLIC GetVoltageVrms
        FUNCTION GetVoltageVrms,021203H
        ARGFRAME XSTACK, 8, STACK
        LOCFRAME XSTACK, 32, STACK
        PUBLIC InitCS5463
        FUNCTION InitCS5463,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        PUBWEAK P0DIR
        PUBWEAK P1DIR
        FUNCTION ReadMsgFromCC5463,021203H
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 16, STACK
        PUBLIC Read_CFG_Regester
        FUNCTION Read_CFG_Regester,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        FUNCTION Read_Cfg_FromCC5463,021203H
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 16, STACK
        FUNCTION SPI_Configration,0203H
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCTION SPI_Receive_byte,021203H
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 9, STACK
        FUNCTION SPI_Transfer_byte,021203H
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 9, STACK
        FUNCTION Send_Command_To_Cs5463,021203H
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 9, STACK
        PUBWEAK _A_P0
        PUBWEAK _A_P1
        PUBWEAK __Constant_0
        PUBWEAK __Constant_1
        PUBWEAK __Constant_3b03126f
        PUBWEAK __Constant_3d4ccccd
        PUBWEAK __Constant_3e800000
        PUBWEAK __Constant_461c4000
        PUBWEAK __Constant_477fff00
        PUBWEAK __Constant_4afffffe
        PUBWEAK __Constant_4b7fffff
        PUBWEAK __Constant_7fffff
        PUBWEAK __Constant_800000
        PUBWEAK __Constant_fa0
        PUBWEAK __Constant_ffff
        
        CFI Names cfiNames0
        CFI StackFrame CFA_SP SP IDATA
        CFI StackFrame CFA_PSP16 PSP16 XDATA
        CFI StackFrame CFA_XSP16 XSP16 XDATA
        CFI StaticOverlayFrame CFA_IOVERLAY IOVERLAY
        CFI StaticOverlayFrame CFA_DOVERLAY DOVERLAY
        CFI Resource `PSW.CY`:1, `B.BR0`:1, `B.BR1`:1, `B.BR2`:1, `B.BR3`:1
        CFI Resource `B.BR4`:1, `B.BR5`:1, `B.BR6`:1, `B.BR7`:1, `VB.BR8`:1
        CFI Resource `VB.BR9`:1, `VB.BR10`:1, `VB.BR11`:1, `VB.BR12`:1
        CFI Resource `VB.BR13`:1, `VB.BR14`:1, `VB.BR15`:1, VB:8, B:8, A:8
        CFI Resource PSW:8, DPL0:8, DPH0:8, R0:8, R1:8, R2:8, R3:8, R4:8, R5:8
        CFI Resource R6:8, R7:8, V0:8, V1:8, V2:8, V3:8, V4:8, V5:8, V6:8, V7:8
        CFI Resource V8:8, V9:8, V10:8, V11:8, V12:8, V13:8, V14:8, V15:8, SP:8
        CFI Resource PSPH:8, PSPL:8, PSP16:16, XSPH:8, XSPL:8, XSP16:16
        CFI VirtualResource ?RET:24
        CFI Resource ?BRET_EXT:8
        CFI VirtualResource ?RET_HIGH:8, ?RET_LOW:8
        CFI ResourceParts PSP16 PSPH, PSPL
        CFI ResourceParts XSP16 XSPH, XSPL
        CFI ResourceParts ?RET ?BRET_EXT, ?RET_HIGH, ?RET_LOW
        CFI EndNames cfiNames0
        
        CFI Common cfiCommon0 Using cfiNames0
        CFI CodeAlign 1
        CFI DataAlign -1
        CFI ReturnAddress ?RET CODE
        CFI CFA_DOVERLAY Used
        CFI CFA_IOVERLAY Used
        CFI CFA_SP SP+-3
        CFI CFA_PSP16 PSP16+0
        CFI CFA_XSP16 XSP16+0
        CFI `PSW.CY` SameValue
        CFI `B.BR0` SameValue
        CFI `B.BR1` SameValue
        CFI `B.BR2` SameValue
        CFI `B.BR3` SameValue
        CFI `B.BR4` SameValue
        CFI `B.BR5` SameValue
        CFI `B.BR6` SameValue
        CFI `B.BR7` SameValue
        CFI `VB.BR8` SameValue
        CFI `VB.BR9` SameValue
        CFI `VB.BR10` SameValue
        CFI `VB.BR11` SameValue
        CFI `VB.BR12` SameValue
        CFI `VB.BR13` SameValue
        CFI `VB.BR14` SameValue
        CFI `VB.BR15` SameValue
        CFI VB SameValue
        CFI B Undefined
        CFI A Undefined
        CFI PSW SameValue
        CFI DPL0 SameValue
        CFI DPH0 SameValue
        CFI R0 Undefined
        CFI R1 Undefined
        CFI R2 Undefined
        CFI R3 Undefined
        CFI R4 Undefined
        CFI R5 Undefined
        CFI R6 SameValue
        CFI R7 SameValue
        CFI V0 SameValue
        CFI V1 SameValue
        CFI V2 SameValue
        CFI V3 SameValue
        CFI V4 SameValue
        CFI V5 SameValue
        CFI V6 SameValue
        CFI V7 SameValue
        CFI V8 SameValue
        CFI V9 SameValue
        CFI V10 SameValue
        CFI V11 SameValue
        CFI V12 SameValue
        CFI V13 SameValue
        CFI V14 SameValue
        CFI V15 SameValue
        CFI PSPH Undefined
        CFI PSPL Undefined
        CFI XSPH Undefined
        CFI XSPL Undefined
        CFI ?RET Concat
        CFI ?BRET_EXT Frame(CFA_SP, 3)
        CFI ?RET_HIGH Frame(CFA_SP, 2)
        CFI ?RET_LOW Frame(CFA_SP, 1)
        CFI EndCommon cfiCommon0
        
ConfigCS5463        SYMBOL "ConfigCS5463"
??ConfigCS5463?relay SYMBOL "?relay", ConfigCS5463
GetApparenPower     SYMBOL "GetApparenPower"
??GetApparenPower?relay SYMBOL "?relay", GetApparenPower
GetCalibrationVIoffOrGain SYMBOL "GetCalibrationVIoffOrGain"
??GetCalibrationVIoffOrGain?relay SYMBOL "?relay", GetCalibrationVIoffOrGain
GetCurrentIrms      SYMBOL "GetCurrentIrms"
??GetCurrentIrms?relay SYMBOL "?relay", GetCurrentIrms
GetCurrentIvalue    SYMBOL "GetCurrentIvalue"
??GetCurrentIvalue?relay SYMBOL "?relay", GetCurrentIvalue
GetPactive          SYMBOL "GetPactive"
??GetPactive?relay  SYMBOL "?relay", GetPactive
GetPowerFactor      SYMBOL "GetPowerFactor"
??GetPowerFactor?relay SYMBOL "?relay", GetPowerFactor
GetSamplingPeriod   SYMBOL "GetSamplingPeriod"
??GetSamplingPeriod?relay SYMBOL "?relay", GetSamplingPeriod
GetTemperature      SYMBOL "GetTemperature"
??GetTemperature?relay SYMBOL "?relay", GetTemperature
GetVoltageVrms      SYMBOL "GetVoltageVrms"
??GetVoltageVrms?relay SYMBOL "?relay", GetVoltageVrms
InitCS5463          SYMBOL "InitCS5463"
??InitCS5463?relay  SYMBOL "?relay", InitCS5463
Read_CFG_Regester   SYMBOL "Read_CFG_Regester"
??Read_CFG_Regester?relay SYMBOL "?relay", Read_CFG_Regester

// D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zstack\Samples\SampleApp\Source\EN_WALL_SOKET_device\CS5463_spi.c
//    1 /******************** (C) COPYRIGHT 2014 Owner************** *******************
//    2 * File Name		: CS5463_spi.c
//    3 * Author		: yukk@yuantuo.mobi
//    4 * Version		: V1.0.0
//    5 * Date			: 07/11/2014
//    6 * Description   : CC2530通过spi对CS5463 操作。
//    7 				功率最高+3000W  温度-128°C ~ +128 °C
//    8 *******************************************************************************/
//    9 
//   10 #include "CS5463_spi.h"

        ASEGN SFR_AN:DATA:NOROOT,080H
// union <unnamed> volatile __sfr _A_P0
_A_P0:
        DATA8
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,090H
// union <unnamed> volatile __sfr _A_P1
_A_P1:
        DATA8
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,0fdH
// unsigned char volatile __sfr P0DIR
P0DIR:
        DATA8
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,0feH
// unsigned char volatile __sfr P1DIR
P1DIR:
        DATA8
        DS 1
//   11 
//   12 //全局变量----------------------------------------------------------------------

        RSEG XDATA_I:XDATA:NOROOT(0)
//   13 uint32  CS543_CFG_DATA = 0X010001;
CS543_CFG_DATA:
        DATA32
        DS 4
        REQUIRE `?<Initializer for CS543_CFG_DATA>`
        REQUIRE __INIT_XDATA_I
//   14 
//   15 
//   16 /*******************************************************************************
//   17 * 函数名称：Delay_1u
//   18 * 功能描述：延时1us
//   19 * 入口参数：无
//   20 * 出口参数：无
//   21 * 注意事项：无
//   22 * 备注说明：无
//   23 *******************************************************************************/

        RSEG BANKED_CODE:CODE:NOROOT(0)
//   24 static void Delay_1u(uint8 k)
Delay_1u:
        CFI Block cfiBlock0 Using cfiCommon0
        CFI Function Delay_1u
        CODE
//   25 { 
        ; Saved register size: 0
        ; Auto size: 0
//   26   while(k--)
??Delay_1u_0:
        MOV     A,R1
        MOV     R0,A
        MOV     A,#-0x1
        ADD     A,R0
        MOV     R1,A
        MOV     A,R0
        JZ      ??Delay_1u_1
//   27   {
//   28     /* 32 NOPs == 1 usecs */
//   29     asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
        nop
        nop
        nop
        nop
        nop
//   30     asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
        nop
        nop
        nop
        nop
        nop
//   31     asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
        nop
        nop
        nop
        nop
        nop
//   32     asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
        nop
        nop
        nop
        nop
        nop
//   33     asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
        nop
        nop
        nop
        nop
        nop
//   34     asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
        nop
        nop
        nop
        nop
        nop
//   35     asm("nop"); asm("nop");
        nop
        nop
        SJMP    ??Delay_1u_0
//   36   }
//   37 }
??Delay_1u_1:
        LJMP    ?BRET
        CFI EndBlock cfiBlock0
//   38 /*******************************************************************************
//   39 * 函数名称：SPI_Configration
//   40 * 功能描述：配置SPI接口
//   41 * 入口参数：无
//   42 * 出口参数：无
//   43 * 注意事项：无
//   44 * 备注说明：无
//   45 *******************************************************************************/

        RSEG BANKED_CODE:CODE:NOROOT(0)
//   46 static void SPI_Configration(void) 
SPI_Configration:
        CFI Block cfiBlock1 Using cfiCommon0
        CFI Function SPI_Configration
        CODE
//   47 {  
        ; Saved register size: 0
        ; Auto size: 0
//   48 	P0DIR   |= 0X68;//P0.3，P0.5，P0.6设置为输出
        ORL     0xfd,#0x68
//   49 	P1DIR   |= 0x08;//reset脚P1.3，设置为输出	
        ORL     0xfe,#0x8
//   50 }
        LJMP    ?BRET
        CFI EndBlock cfiBlock1
        REQUIRE P0DIR
        REQUIRE P1DIR
//   51 
//   52 /*******************************************************************************
//   53 * 函数名称：SPI_Receive_byte
//   54 * 功能描述：读取一个字节的数据
//   55 * 入口参数：无
//   56 * 出口参数：RX_data：读取到的一个字节的数据
//   57 * 注意事项：无
//   58 * 备注说明：无
//   59 *******************************************************************************/

        RSEG BANKED_CODE:CODE:NOROOT(0)
//   60 static unsigned char SPI_Receive_byte(void)   // Read CS5464 DATA
SPI_Receive_byte:
        CFI Block cfiBlock2 Using cfiCommon0
        CFI Function SPI_Receive_byte
        CODE
//   61 {
        FUNCALL SPI_Receive_byte, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SPI_Receive_byte, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SPI_Receive_byte, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SPI_Receive_byte, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
//   62 	
//   63 	unsigned char RX_data;
//   64 	unsigned char i;
//   65 	
//   66 	RX_data=0;
        MOV     R6,#0x0
//   67 
//   68 	P0DIR   |= 0X68;//P0.3，P0.5，P0.6设置为输出，P0.2设置为输入
        ORL     0xfd,#0x68
//   69 	CS5463_SDI = 1;	//输入管脚设置为1，上拉    
        SETB    0x80.2
//   70     CS5463_SDO=1;//输出管脚设置为0
        SETB    0x80.3
//   71     
//   72 	for(i=0;i<8;i++)
        MOV     R7,#0x0
??SPI_Receive_byte_0:
        MOV     A,R7
        CLR     C
        SUBB    A,#0x8
        JNC     ??SPI_Receive_byte_1
//   73 	{   
//   74 	    CS5463_SCLK=0;
        CLR     0x80.5
//   75 		CS5463_SDI = 1;	//先输出1，上拉
        SETB    0x80.2
//   76 		Delay_1u(DELAY); 
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//   77 	    RX_data=RX_data<<1;
        MOV     A,R6
        CLR     C
        RLC     A
        MOV     R6,A
//   78 		Delay_1u(DELAY); 	
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//   79 	    CS5463_SCLK=1;
        SETB    0x80.5
//   80 		Delay_1u(DELAY); 
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//   81 	    if(CS5463_SDI) RX_data|=0x01;
        MOV     C,0x80.2
        JNC     ??SPI_Receive_byte_2
        SETB    C
        MOV     A,R6
        MOV     0xE0 /* A   */.0,C
        MOV     R6,A
//   82 	  	else RX_data|=0x00;
//   83 		Delay_1u(DELAY); 
??SPI_Receive_byte_2:
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//   84 	  		  	
//   85 	}
        INC     R7
        SJMP    ??SPI_Receive_byte_0
//   86 		
//   87 	return(RX_data);
??SPI_Receive_byte_1:
        MOV     A,R6
        MOV     R1,A
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock2
        REQUIRE P0DIR
        REQUIRE _A_P0
//   88 }
//   89 
//   90 /*******************************************************************************
//   91 * 函数名称：SPI_Transfer_byte
//   92 * 功能描述：向芯片写入一个字节数据
//   93 * 入口参数：无
//   94 * 出口参数：TX_data：待发送的一个字节的数据
//   95 * 注意事项：无
//   96 * 备注说明：无
//   97 *******************************************************************************/

        RSEG BANKED_CODE:CODE:NOROOT(0)
//   98 static void SPI_Transfer_byte(unsigned char TX_data)   // Write DATA TO CS5464
SPI_Transfer_byte:
        CFI Block cfiBlock3 Using cfiCommon0
        CFI Function SPI_Transfer_byte
        CODE
//   99 {
        FUNCALL SPI_Transfer_byte, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SPI_Transfer_byte, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SPI_Transfer_byte, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SPI_Transfer_byte, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
        MOV     A,R1
        MOV     R7,A
//  100 	unsigned char i;          
//  101 	P0DIR   |= 0X68;//P0.3，P0.5，P0.6设置为输出，P0.2设置为输入     
        ORL     0xfd,#0x68
//  102 	CS5463_SDI=1;//输入管脚设置为1
        SETB    0x80.2
//  103 	
//  104 	for(i=0;i<8;i++)
        MOV     R6,#0x0
??SPI_Transfer_byte_0:
        MOV     A,R6
        CLR     C
        SUBB    A,#0x8
        JNC     ??SPI_Transfer_byte_1
//  105 	{
//  106 	    CS5463_SCLK=0;
        CLR     0x80.5
//  107 		Delay_1u(DELAY);
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//  108 	   	if(TX_data&0x80) CS5463_SDO=1;
        MOV     A,R7
        MOV     C,0xE0 /* A   */.7
        JNC     ??SPI_Transfer_byte_2
        SETB    0x80.3
        SJMP    ??SPI_Transfer_byte_3
//  109       	else CS5463_SDO=0;
??SPI_Transfer_byte_2:
        CLR     0x80.3
//  110 		Delay_1u(DELAY);
??SPI_Transfer_byte_3:
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//  111         CS5463_SCLK=1;
        SETB    0x80.5
//  112 		Delay_1u(DELAY);
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//  113 	  	TX_data=TX_data<<1;
        MOV     A,R7
        CLR     C
        RLC     A
        MOV     R7,A
//  114 		Delay_1u(DELAY);     
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//  115    	}	
        INC     R6
        SJMP    ??SPI_Transfer_byte_0
//  116 }
??SPI_Transfer_byte_1:
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock3
        REQUIRE P0DIR
        REQUIRE _A_P0
//  117 /*******************************************************************************
//  118 * 函数名称：CfgRegToCC5463
//  119 * 功能描述：向CS5463芯片写入一个命令码，及命令数据
//  120 * 入口参数：cmd：命令码       data：命令数据
//  121 * 出口参数：无
//  122 * 注意事项：无
//  123 * 备注说明：无
//  124 *******************************************************************************/

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  125 static void CfgRegToCC5463(uint8 cmd,uint32 data)
CfgRegToCC5463:
        CFI Block cfiBlock4 Using cfiCommon0
        CFI Function CfgRegToCC5463
        CODE
//  126 { 
        FUNCALL CfgRegToCC5463, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL CfgRegToCC5463, SPI_Transfer_byte
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL CfgRegToCC5463, SPI_Transfer_byte
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL CfgRegToCC5463, SPI_Transfer_byte
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL CfgRegToCC5463, SPI_Transfer_byte
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL CfgRegToCC5463, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x10
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 16)
        ; Saved register size: 16
        ; Auto size: 0
        MOV     A,R1
        MOV     R6,A
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     ?V0 + 6,R4
        MOV     ?V0 + 7,R5
//  127 	
//  128 	CS5463_CS=0;
        CLR     0x80.6
//  129 	Delay_1u(DELAY); 
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//  130 	
//  131 	SPI_Transfer_byte(cmd);
        ; Setup parameters for call to function SPI_Transfer_byte
        MOV     A,R6
        MOV     R1,A
        LCALL   ??SPI_Transfer_byte?relay
//  132 	SPI_Transfer_byte(data >> 16);
        ; Setup parameters for call to function SPI_Transfer_byte
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        MOV     ?V0 + 2,?V0 + 6
        MOV     ?V0 + 3,?V0 + 7
        MOV     A,#0x10
        MOV     R0,#?V0 + 0
        LCALL   ?UL_SHR
        MOV     R1,?V0 + 0
        LCALL   ??SPI_Transfer_byte?relay
//  133 	SPI_Transfer_byte(data >> 8);
        ; Setup parameters for call to function SPI_Transfer_byte
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        CLR     A
        MOV     A,?V0 + 1
        MOV     ?V0 + 0,A
        MOV     R1,?V0 + 0
        LCALL   ??SPI_Transfer_byte?relay
//  134 	SPI_Transfer_byte(data);
        ; Setup parameters for call to function SPI_Transfer_byte
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        MOV     R1,?V0 + 0
        LCALL   ??SPI_Transfer_byte?relay
//  135 	
//  136 	
//  137 	CS5463_CS=1;
        SETB    0x80.6
//  138 	CS5463_SDO=1;
        SETB    0x80.3
//  139 	Delay_1u(DELAY); 
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//  140 }
        MOV     R7,#0x8
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock4
        REQUIRE _A_P0
//  141 /*******************************************************************************
//  142 * 函数名称：Send_Command_To_Cs5463
//  143 * 功能描述：向CS5463发送一个单字节命令
//  144 * 入口参数：cmd;命令码
//  145 * 出口参数：无
//  146 * 注意事项：无
//  147 * 备注说明：无
//  148 *******************************************************************************/

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  149 static void Send_Command_To_Cs5463(uint8 cmd)
Send_Command_To_Cs5463:
        CFI Block cfiBlock5 Using cfiCommon0
        CFI Function Send_Command_To_Cs5463
        CODE
//  150 { 
        FUNCALL Send_Command_To_Cs5463, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Send_Command_To_Cs5463, SPI_Transfer_byte
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Send_Command_To_Cs5463, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
        MOV     A,R1
        MOV     R6,A
//  151 	CS5463_CS=0;
        CLR     0x80.6
//  152     Delay_1u(DELAY); 
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//  153 	
//  154   	SPI_Transfer_byte(cmd);
        ; Setup parameters for call to function SPI_Transfer_byte
        MOV     A,R6
        MOV     R1,A
        LCALL   ??SPI_Transfer_byte?relay
//  155   	
//  156 	CS5463_CS=1;
        SETB    0x80.6
//  157 	CS5463_SDO=1;
        SETB    0x80.3
//  158 	Delay_1u(DELAY); 
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//  159 }
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock5
        REQUIRE _A_P0
//  160 /*******************************************************************************
//  161 * 函数名称：ReadMsgFromCC5463
//  162 * 功能描述：从CS5463中读取3字节的数据
//  163 * 入口参数：cmd：待读取的字节的地址
//  164 * 出口参数：value：读取到的3字节数据
//  165 * 注意事项：无
//  166 * 备注说明：无
//  167 *******************************************************************************/

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  168 static uint32 ReadMsgFromCC5463(uint8 cmd)
ReadMsgFromCC5463:
        CFI Block cfiBlock6 Using cfiCommon0
        CFI Function ReadMsgFromCC5463
        CODE
//  169 {
        FUNCALL ReadMsgFromCC5463, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ReadMsgFromCC5463, SPI_Transfer_byte
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ReadMsgFromCC5463, SPI_Receive_byte
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ReadMsgFromCC5463, SPI_Receive_byte
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ReadMsgFromCC5463, SPI_Receive_byte
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ReadMsgFromCC5463, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x10
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 16)
        ; Saved register size: 16
        ; Auto size: 0
        MOV     A,R1
        MOV     R6,A
//  170 	uint32 value = 0L;
        MOV     DPTR,#__Constant_0
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
//  171 	
//  172 	CS5463_CS=0;
        CLR     0x80.6
//  173 	Delay_1u(DELAY); 
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//  174 	
//  175 	SPI_Transfer_byte(cmd);
        ; Setup parameters for call to function SPI_Transfer_byte
        MOV     A,R6
        MOV     R1,A
        LCALL   ??SPI_Transfer_byte?relay
//  176 	value |= (uint32)SPI_Receive_byte() << 16;    //   high
        ; Setup parameters for call to function SPI_Receive_byte
        LCALL   ??SPI_Receive_byte?relay
        MOV     A,R1
        MOV     ?V0 + 0,A
        CLR     A
        MOV     ?V0 + 1,A
        MOV     ?V0 + 2,A
        MOV     ?V0 + 3,A
        MOV     A,#0x10
        MOV     R0,#?V0 + 0
        LCALL   ?L_SHL
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 0
        LCALL   ?L_IOR
//  177 	value |= (uint32)SPI_Receive_byte() << 8;     //  mid
        ; Setup parameters for call to function SPI_Receive_byte
        LCALL   ??SPI_Receive_byte?relay
        MOV     A,R1
        MOV     ?V0 + 0,A
        CLR     A
        MOV     ?V0 + 1,A
        MOV     ?V0 + 2,A
        MOV     ?V0 + 3,A
        MOV     A,#0x8
        MOV     R0,#?V0 + 0
        LCALL   ?L_SHL
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 0
        LCALL   ?L_IOR
//  178 	value |= (uint32)SPI_Receive_byte();    //   low
        ; Setup parameters for call to function SPI_Receive_byte
        LCALL   ??SPI_Receive_byte?relay
        MOV     A,R1
        MOV     ?V0 + 0,A
        CLR     A
        MOV     ?V0 + 1,A
        MOV     ?V0 + 2,A
        MOV     ?V0 + 3,A
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 0
        LCALL   ?L_IOR
//  179 	
//  180 	CS5463_CS=1;
        SETB    0x80.6
//  181 	CS5463_SDO=1;
        SETB    0x80.3
//  182 	Delay_1u(DELAY);
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//  183 	
//  184 	return value;
        MOV     R2,?V0 + 4
        MOV     R3,?V0 + 5
        MOV     R4,?V0 + 6
        MOV     R5,?V0 + 7
        MOV     R7,#0x8
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock6
        REQUIRE _A_P0
//  185 }
//  186 /*******************************************************************************
//  187 * 函数名称：Read_Cfg_FromCC5463
//  188 * 功能描述：从CS5463中读取3字节的数据
//  189 * 入口参数：cmd：待读取的字节的地址
//  190 * 出口参数：value：读取到的3字节数据
//  191 * 注意事项：无
//  192 * 备注说明：无
//  193 *******************************************************************************/

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  194 static uint32 Read_Cfg_FromCC5463(void)
Read_Cfg_FromCC5463:
        CFI Block cfiBlock7 Using cfiCommon0
        CFI Function Read_Cfg_FromCC5463
        CODE
//  195 {
        FUNCALL Read_Cfg_FromCC5463, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Read_Cfg_FromCC5463, SPI_Transfer_byte
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Read_Cfg_FromCC5463, SPI_Receive_byte
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Read_Cfg_FromCC5463, SPI_Receive_byte
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Read_Cfg_FromCC5463, SPI_Receive_byte
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Read_Cfg_FromCC5463, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x10
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 16)
        ; Saved register size: 16
        ; Auto size: 0
//  196 	uint32 value = 0L;
        MOV     DPTR,#__Constant_0
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
//  197 	
//  198 	CS5463_CS=0;
        CLR     0x80.6
//  199 	Delay_1u(DELAY); 
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//  200 	
//  201 	SPI_Transfer_byte(READ_CFG_CMD);
        ; Setup parameters for call to function SPI_Transfer_byte
        MOV     R1,#0x0
        LCALL   ??SPI_Transfer_byte?relay
//  202 	
//  203 	value |= (uint32)SPI_Receive_byte() << 16;    //   high
        ; Setup parameters for call to function SPI_Receive_byte
        LCALL   ??SPI_Receive_byte?relay
        MOV     A,R1
        MOV     ?V0 + 0,A
        CLR     A
        MOV     ?V0 + 1,A
        MOV     ?V0 + 2,A
        MOV     ?V0 + 3,A
        MOV     A,#0x10
        MOV     R0,#?V0 + 0
        LCALL   ?L_SHL
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 0
        LCALL   ?L_IOR
//  204 	value |= (uint32)SPI_Receive_byte() << 8;     //  mid
        ; Setup parameters for call to function SPI_Receive_byte
        LCALL   ??SPI_Receive_byte?relay
        MOV     A,R1
        MOV     ?V0 + 0,A
        CLR     A
        MOV     ?V0 + 1,A
        MOV     ?V0 + 2,A
        MOV     ?V0 + 3,A
        MOV     A,#0x8
        MOV     R0,#?V0 + 0
        LCALL   ?L_SHL
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 0
        LCALL   ?L_IOR
//  205 	value |= (uint32)SPI_Receive_byte();    //   low
        ; Setup parameters for call to function SPI_Receive_byte
        LCALL   ??SPI_Receive_byte?relay
        MOV     A,R1
        MOV     ?V0 + 0,A
        CLR     A
        MOV     ?V0 + 1,A
        MOV     ?V0 + 2,A
        MOV     ?V0 + 3,A
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 0
        LCALL   ?L_IOR
//  206 	
//  207 	CS5463_CS=1;
        SETB    0x80.6
//  208 	CS5463_SDO=1;
        SETB    0x80.3
//  209 	Delay_1u(DELAY);
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//  210 	
//  211 	return value;
        MOV     R2,?V0 + 4
        MOV     R3,?V0 + 5
        MOV     R4,?V0 + 6
        MOV     R5,?V0 + 7
        MOV     R7,#0x8
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock7
        REQUIRE _A_P0
//  212 }
//  213 /*******************************************************************************
//  214 * 函数名称：ComplementToOriginalCode
//  215 * 功能描述：补码转源码
//  216 * 入口参数：Complement：补码数据
//  217 * 出口参数：tmp：源码数据
//  218 * 注意事项：无
//  219 * 备注说明：无
//  220 *******************************************************************************/

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  221 static uint32 ComplementToOriginalCode(uint32 Complement)
ComplementToOriginalCode:
        CFI Block cfiBlock8 Using cfiCommon0
        CFI Function ComplementToOriginalCode
        CODE
//  222 {
        MOV     A,#-0x14
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-19)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-20)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 20)
        ; Saved register size: 20
        ; Auto size: 0
        MOV     ?V0 + 8,R2
        MOV     ?V0 + 9,R3
        MOV     ?V0 + 10,R4
        MOV     ?V0 + 11,R5
//  223 	uint32 tmp;
//  224 	
//  225 	tmp = Complement;
        MOV     ?V0 + 0,?V0 + 8
        MOV     ?V0 + 1,?V0 + 9
        MOV     ?V0 + 2,?V0 + 10
        MOV     ?V0 + 3,?V0 + 11
//  226 	
//  227 	if(Complement&(1L<<23)) //为负数则需要求原码
        MOV     ?V0 + 4,?V0 + 8
        MOV     ?V0 + 5,?V0 + 9
        MOV     ?V0 + 6,?V0 + 10
        MOV     ?V0 + 7,?V0 + 11
        MOV     DPTR,#__Constant_800000
        MOV     R0,#?V0 + 4
        LCALL   ?L_AND_X
        MOV     A,?V0 + 4
        ORL     A,?V0 + 5
        ORL     A,?V0 + 6
        ORL     A,?V0 + 7
        JZ      ??ComplementToOriginalCode_0
//  228 	{
//  229 		tmp  = ((~Complement)+1)&0x007FFFFF;   //按位取反后仅保留数据位，符号位取消
        MOV     ?V0 + 4,?V0 + 8
        MOV     ?V0 + 5,?V0 + 9
        MOV     ?V0 + 6,?V0 + 10
        MOV     ?V0 + 7,?V0 + 11
        MOV     R0,#?V0 + 4
        LCALL   ?L_NOT
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_X
        MOV     DPTR,#__Constant_7fffff
        MOV     R0,#?V0 + 4
        LCALL   ?L_AND_X
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        MOV     ?V0 + 2,?V0 + 6
        MOV     ?V0 + 3,?V0 + 7
//  230 		tmp |= (1L<<23);                       //将符号位填充在最高位(第24位)
        MOV     DPTR,#__Constant_800000
        MOV     R0,#?V0 + 0
        LCALL   ?L_IOR_X
//  231 	}
//  232 	
//  233 	return tmp;
??ComplementToOriginalCode_0:
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        MOV     R4,?V0 + 2
        MOV     R5,?V0 + 3
        MOV     R7,#0xc
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock8
//  234 }
//  235 /*******************************************************************************
//  236 * 函数名称：InitCS5463
//  237 * 功能描述：启动CS5463
//  238 * 入口参数：无
//  239 * 出口参数：无
//  240 * 注意事项：无
//  241 * 备注说明：无
//  242 *******************************************************************************/

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  243 void InitCS5463(void)
InitCS5463:
        CFI Block cfiBlock9 Using cfiCommon0
        CFI Function InitCS5463
        CODE
//  244 {
        FUNCALL InitCS5463, SPI_Configration
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL InitCS5463, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL InitCS5463, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL InitCS5463, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL InitCS5463, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL InitCS5463, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL InitCS5463, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL InitCS5463, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL InitCS5463, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL InitCS5463, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL InitCS5463, Delay_1u
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
//  245 	uint8 i;
//  246 	
//  247 	SPI_Configration();//初始化spi接口
        ; Setup parameters for call to function SPI_Configration
        LCALL   ??SPI_Configration?relay
//  248 	
//  249 	/*reset 5463*/
//  250     CS5463_RESET=1;
        SETB    0x90.3
//  251 	Delay_1u(DELAY); 
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//  252     CS5463_RESET=0;
        CLR     0x90.3
//  253 	Delay_1u(DELAY); 
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//  254     CS5463_RESET=1;
        SETB    0x90.3
//  255 	Delay_1u(DELAY); 
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//  256 
//  257 	
//  258 	/*spi io init*/
//  259 	P0DIR |= 0x04;  //SDI先设置成输出（p0.2）
        ORL     0xfd,#0x4
//  260 	
//  261 	CS5463_SDO=1;
        SETB    0x80.3
//  262 	CS5463_SDI=1;
        SETB    0x80.2
//  263 	CS5463_SCLK = 1;
        SETB    0x80.5
//  264 	CS5463_CS=0;
        CLR     0x80.6
//  265 	Delay_1u(DELAY); 
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//  266 		
//  267   	for(i=0;i<31;i++) 		// clock in 3 bytes of 0xff and then seven 1's
        MOV     R6,#0x0
??InitCS5463_0:
        MOV     A,R6
        CLR     C
        SUBB    A,#0x1f
        JNC     ??InitCS5463_1
//  268   	{
//  269   	   
//  270    	   	CS5463_SCLK=0;
        CLR     0x80.5
//  271 		Delay_1u(DELAY); 
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//  272    	   	CS5463_SCLK=1;
        SETB    0x80.5
//  273 		Delay_1u(DELAY); 
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//  274    	}
        INC     R6
        SJMP    ??InitCS5463_0
//  275   	CS5463_SDI=0;
??InitCS5463_1:
        CLR     0x80.2
//  276 	Delay_1u(DELAY); 
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//  277   	CS5463_SCLK=0;
        CLR     0x80.5
//  278 	Delay_1u(DELAY); 
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//  279   	CS5463_SCLK=1;
        SETB    0x80.5
//  280 	Delay_1u(DELAY); 
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//  281    	CS5463_CS=1;
        SETB    0x80.6
//  282 	Delay_1u(DELAY); 
        ; Setup parameters for call to function Delay_1u
        MOV     R1,#0x32
        LCALL   ??Delay_1u?relay
//  283 }
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock9
        REQUIRE _A_P1
        REQUIRE P0DIR
        REQUIRE _A_P0
//  284 
//  285 /*******************************************************************************
//  286 * 函数名称：ConfigCS5463
//  287 * 功能描述：初始化CS5463
//  288 * 入口参数：无
//  289 * 出口参数：无
//  290 * 注意事项：无
//  291 * 备注说明：无
//  292 *******************************************************************************/

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  293 void ConfigCS5463(void)
ConfigCS5463:
        CFI Block cfiBlock10 Using cfiCommon0
        CFI Function ConfigCS5463
        CODE
//  294 {
        FUNCALL ConfigCS5463, Send_Command_To_Cs5463
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ConfigCS5463, CfgRegToCC5463
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ConfigCS5463, CfgRegToCC5463
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ConfigCS5463, CfgRegToCC5463
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ConfigCS5463, CfgRegToCC5463
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ConfigCS5463, CfgRegToCC5463
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ConfigCS5463, Send_Command_To_Cs5463
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUSH    DPL
        CFI DPL0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        PUSH    DPH
        CFI DPH0 Frame(CFA_SP, 5)
        CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
//  295 	Send_Command_To_Cs5463(PWR_UP_HALT_CMD);//暂停
        ; Setup parameters for call to function Send_Command_To_Cs5463
        MOV     R1,#-0x60
        LCALL   ??Send_Command_To_Cs5463?relay
//  296 	
//  297 	CfgRegToCC5463(WRITE_STATUS_CMD     ,0x800000);//状态寄存器
        ; Setup parameters for call to function CfgRegToCC5463
        MOV     DPTR,#__Constant_800000
        LCALL   ?XLOAD_R2345
        MOV     R1,#0x5e
        LCALL   ??CfgRegToCC5463?relay
//  298 	CfgRegToCC5463(WRITE_CFG_CMD        ,CS543_CFG_DATA);//配置寄存器  K = 0,电流通道增益为10*
        ; Setup parameters for call to function CfgRegToCC5463
        MOV     DPTR,#CS543_CFG_DATA
        LCALL   ?XLOAD_R2345
        MOV     R1,#0x40
        LCALL   ??CfgRegToCC5463?relay
//  299 	CfgRegToCC5463(WRITE_CYCLE_CNT_CMD  ,0x000fa0);//周期计数寄存器:每一个计算周期长度 MCLK=4.096MHz, K=1, N=4000时，计算周期是一秒
        ; Setup parameters for call to function CfgRegToCC5463
        MOV     DPTR,#__Constant_fa0
        LCALL   ?XLOAD_R2345
        MOV     R1,#0x4a
        LCALL   ??CfgRegToCC5463?relay
//  300 	CfgRegToCC5463(WRITE_INT_MASK_CMD   ,0x000000);//屏蔽寄存器
        ; Setup parameters for call to function CfgRegToCC5463
        MOV     DPTR,#__Constant_0
        LCALL   ?XLOAD_R2345
        MOV     R1,#0x74
        LCALL   ??CfgRegToCC5463?relay
//  301 	CfgRegToCC5463(WRITE_MODE_CMD       ,0x000001);//操作模式寄存器   允许自动在线频率测量
        ; Setup parameters for call to function CfgRegToCC5463
        MOV     DPTR,#__Constant_1
        LCALL   ?XLOAD_R2345
        MOV     R1,#0x64
        LCALL   ??CfgRegToCC5463?relay
//  302 	
//  303 //	CfgRegToCC5463(WRITE_VDCOFF_CMD,VDCOFF_DATA );//写电压通道DC偏移寄存器值
//  304 //	CfgRegToCC5463(WRITE_VACOFF_CMD,VACOFF_DATA );//写电压通道AC偏移寄存器值
//  305 //	CfgRegToCC5463(WRITE_IDCOFF_CMD,IDCOFF_DATA );//写电流通道DC偏移寄存器值
//  306 //	CfgRegToCC5463(WRITE_IACOFF_CMD,IACOFF_DATA );//写电流通道AC偏移寄存器值	
//  307 //	CfgRegToCC5463(WRITE_VGN_CMD   ,VGN_DATA );//写电压通道AC增益寄存器值
//  308 //	CfgRegToCC5463(WRITE_IGN_CMD   ,IGN_DATA );//写电流通道AC增益寄存器值
//  309 	
//  310 	//把偏移数据从内存中取出来
//  311 		
//  312 	Send_Command_To_Cs5463(START_C31_CMD);	//开始连续计量
        ; Setup parameters for call to function Send_Command_To_Cs5463
        MOV     R1,#-0x18
        LCALL   ??Send_Command_To_Cs5463?relay
//  313 }
        POP     DPH
        CFI DPH0 SameValue
        CFI CFA_SP SP+-4
        POP     DPL
        CFI DPL0 SameValue
        CFI CFA_SP SP+-3
        LJMP    ?BRET
        CFI EndBlock cfiBlock10
//  314 
//  315 
//  316 
//  317 /*******************************************************************************
//  318 * 函数名称：GetSamplingPeriod
//  319 * 功能描述：获取采样周期,采样周期的倒数，用补码表示 -1 ~ -23 次方
//  320 * 入口参数：无
//  321 * 出口参数：无
//  322 * 注意事项：无
//  323 * 备注说明：例：K=1，MCLK=4.096MHz，Fi = 50Hz；则 ∈ = 0.0125
//  324 *******************************************************************************/

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  325 sint32 GetSamplingPeriod(void)
GetSamplingPeriod:
        CFI Block cfiBlock11 Using cfiCommon0
        CFI Function GetSamplingPeriod
        CODE
//  326 {
        FUNCALL GetSamplingPeriod, Send_Command_To_Cs5463
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL GetSamplingPeriod, ReadMsgFromCC5463
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL GetSamplingPeriod, ComplementToOriginalCode
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL GetSamplingPeriod, Send_Command_To_Cs5463
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x18
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V15 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V14 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-19)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-20)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-21)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-22)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-23)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-24)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 24)
        ; Saved register size: 24
        ; Auto size: 0
//  327 	float sampli_value;
//  328 	uint32 sampli_reg;
//  329 	
//  330 	Send_Command_To_Cs5463(PWR_UP_HALT_CMD);//暂停
        ; Setup parameters for call to function Send_Command_To_Cs5463
        MOV     R1,#-0x60
        LCALL   ??Send_Command_To_Cs5463?relay
//  331 	sampli_reg = ComplementToOriginalCode(ReadMsgFromCC5463(READ_SAMP_TIM_CMD));              
        ; Setup parameters for call to function ComplementToOriginalCode
        ; Setup parameters for call to function ReadMsgFromCC5463
        MOV     R1,#0x1a
        LCALL   ??ReadMsgFromCC5463?relay
        LCALL   ??ComplementToOriginalCode?relay
        MOV     ?V0 + 8,R2
        MOV     ?V0 + 9,R3
        MOV     ?V0 + 10,R4
        MOV     ?V0 + 11,R5
        MOV     ?V0 + 4,?V0 + 8
        MOV     ?V0 + 5,?V0 + 9
        MOV     ?V0 + 6,?V0 + 10
        MOV     ?V0 + 7,?V0 + 11
//  332 	Send_Command_To_Cs5463(START_C31_CMD);	//开启
        ; Setup parameters for call to function Send_Command_To_Cs5463
        MOV     R1,#-0x18
        LCALL   ??Send_Command_To_Cs5463?relay
//  333 	
//  334 	sampli_reg &= 0x007FFFFF;
        MOV     DPTR,#__Constant_7fffff
        MOV     R0,#?V0 + 4
        LCALL   ?L_AND_X
//  335 	sampli_value = (float)sampli_reg/8388607.0; // 分母为2^23 = 8388608-1
        MOV     ?V0 + 8,?V0 + 4
        MOV     ?V0 + 9,?V0 + 5
        MOV     ?V0 + 10,?V0 + 6
        MOV     ?V0 + 11,?V0 + 7
        MOV     R0,#?V0 + 8
        LCALL   ?UL_TO_FLT
        MOV     DPTR,#__Constant_4afffffe
        MOV     R0,#?V0 + 12
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 12
        LCALL   ?FLT_DIV
        MOV     ?V0 + 0,?V0 + 8
        MOV     ?V0 + 1,?V0 + 9
        MOV     ?V0 + 2,?V0 + 10
        MOV     ?V0 + 3,?V0 + 11
//  336 	sampli_value *= 10000;                      // 放大10000倍
        MOV     DPTR,#__Constant_461c4000
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_MUL
//  337 	
//  338 	if(1 == (sampli_reg&(1L<<23)))
//  339 	{
//  340 		return -((uint32)sampli_value);
//  341 	}
//  342 	
//  343 	return ((uint32)sampli_value);
        MOV     R0,#?V0 + 0
        LCALL   ?FLT_TO_UL
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        MOV     R4,?V0 + 2
        MOV     R5,?V0 + 3
        MOV     R7,#0x10
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock11
//  344 }
//  345 /*******************************************************************************
//  346 * 函数名称：GetCurrentIrms
//  347 * 功能描述：获取电流有效值 -1 ~ -24 次方
//  348 * 入口参数：ratioi:校正比例
//  349 * 出口参数：irms_value：实际电流值*10000
//  350 * 注意事项：无
//  351 * 备注说明：无
//  352 *******************************************************************************/

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  353 uint32 GetCurrentIrms(float ratioi, uint32 valueapp, uint32 valueapp_discrepancy)
GetCurrentIrms:
        CFI Block cfiBlock12 Using cfiCommon0
        CFI Function GetCurrentIrms
        CODE
//  354 {
        FUNCALL GetCurrentIrms, ReadMsgFromCC5463
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL GetCurrentIrms, ComplementToOriginalCode
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x18
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V15 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V14 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-19)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-20)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-21)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-22)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-23)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-24)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 24)
        ; Saved register size: 24
        ; Auto size: 8
        MOV     A,#-0x8
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 32)
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
        MOV     A,#0x24
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
//  355 	uint32 irms_reg;
//  356 	float  irms_value;
//  357 	
//  358 	irms_reg   = ComplementToOriginalCode(ReadMsgFromCC5463(READ_IRMS_CMD));
        ; Setup parameters for call to function ComplementToOriginalCode
        ; Setup parameters for call to function ReadMsgFromCC5463
        MOV     R1,#0x16
        LCALL   ??ReadMsgFromCC5463?relay
        LCALL   ??ComplementToOriginalCode?relay
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        LCALL   ?XSTORE_R2345
//  359 	irms_value = (float)irms_reg/16777215.0; // 2^24 -1
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        LCALL   ?UL_TO_FLT
        MOV     DPTR,#__Constant_4b7fffff
        MOV     R0,#?V0 + 12
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 12
        LCALL   ?FLT_DIV
        MOV     ?V0 + 8,?V0 + 0
        MOV     ?V0 + 9,?V0 + 1
        MOV     ?V0 + 10,?V0 + 2
        MOV     ?V0 + 11,?V0 + 3
//  360 	irms_value *= 0.05;//250mv满量程
        MOV     DPTR,#__Constant_3d4ccccd
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_MUL
//  361 	irms_value /= 0.002;//电压/电阻=电流，电阻等于0.002Ω
        MOV     DPTR,#__Constant_3b03126f
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_DIV
//  362 	irms_value *= ratioi;                // 与实际电路比值
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_MUL
//  363 	irms_value *= 10000;
        MOV     DPTR,#__Constant_461c4000
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_MUL
//  364 	irms_value -= valueapp_discrepancy;
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        MOV     ?V0 + 2,?V0 + 6
        MOV     ?V0 + 3,?V0 + 7
        MOV     R0,#?V0 + 0
        LCALL   ?UL_TO_FLT
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_SUB
//  365 	irms_value *= (float)valueapp / 10000.0; 
        MOV     A,#0x20
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        LCALL   ?UL_TO_FLT
        MOV     DPTR,#__Constant_461c4000
        MOV     R0,#?V0 + 12
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 12
        LCALL   ?FLT_DIV
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_MUL
        MOV     ?V0 + 8,?V0 + 0
        MOV     ?V0 + 9,?V0 + 1
        MOV     ?V0 + 10,?V0 + 2
        MOV     ?V0 + 11,?V0 + 3
//  366 	
//  367 	return (uint32)irms_value;
        MOV     R0,#?V0 + 8
        LCALL   ?FLT_TO_UL
        MOV     R2,?V0 + 8
        MOV     R3,?V0 + 9
        MOV     R4,?V0 + 10
        MOV     R5,?V0 + 11
        MOV     A,#0x8
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     R7,#0x10
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock12
//  368 }
//  369 
//  370 /*******************************************************************************
//  371 * 函数名称：GetCurrentIvalue
//  372 * 功能描述：获取电流瞬时值 -1 ~ -24 次方
//  373 * 入口参数：ratioi:校正比例
//  374 * 出口参数：irms_value：实际电流值*10000
//  375 * 注意事项：无
//  376 * 备注说明：无
//  377 *******************************************************************************/

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  378 uint32 GetCurrentIvalue(float ratioi, uint32 valueapp, uint32 valueapp_discrepancy)
GetCurrentIvalue:
        CFI Block cfiBlock13 Using cfiCommon0
        CFI Function GetCurrentIvalue
        CODE
//  379 {
        FUNCALL GetCurrentIvalue, ReadMsgFromCC5463
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL GetCurrentIvalue, ComplementToOriginalCode
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x18
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V15 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V14 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-19)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-20)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-21)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-22)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-23)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-24)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 24)
        ; Saved register size: 24
        ; Auto size: 8
        MOV     A,#-0x8
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 32)
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
        MOV     A,#0x24
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
//  380 	uint32 irms_reg;
//  381 	float  irms_value;
//  382 	
//  383 	irms_reg   = ComplementToOriginalCode(ReadMsgFromCC5463(READ_INS_I_CMD));//读取瞬时电流值
        ; Setup parameters for call to function ComplementToOriginalCode
        ; Setup parameters for call to function ReadMsgFromCC5463
        MOV     R1,#0xe
        LCALL   ??ReadMsgFromCC5463?relay
        LCALL   ??ComplementToOriginalCode?relay
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        LCALL   ?XSTORE_R2345
//  384 	irms_value = (float)irms_reg/16777215.0; // 2^24 -1
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        LCALL   ?UL_TO_FLT
        MOV     DPTR,#__Constant_4b7fffff
        MOV     R0,#?V0 + 12
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 12
        LCALL   ?FLT_DIV
        MOV     ?V0 + 8,?V0 + 0
        MOV     ?V0 + 9,?V0 + 1
        MOV     ?V0 + 10,?V0 + 2
        MOV     ?V0 + 11,?V0 + 3
//  385 	irms_value *= 0.05;//250mv满量程
        MOV     DPTR,#__Constant_3d4ccccd
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_MUL
//  386 	irms_value /= 0.002;//电压/电阻=电流，电阻等于0.002Ω
        MOV     DPTR,#__Constant_3b03126f
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_DIV
//  387 	irms_value *= ratioi;                // 与实际电路比值
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_MUL
//  388 	irms_value *= 10000;
        MOV     DPTR,#__Constant_461c4000
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_MUL
//  389 	irms_value -= valueapp_discrepancy;
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        MOV     ?V0 + 2,?V0 + 6
        MOV     ?V0 + 3,?V0 + 7
        MOV     R0,#?V0 + 0
        LCALL   ?UL_TO_FLT
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_SUB
//  390 	irms_value *= (float)valueapp / 10000.0; 
        MOV     A,#0x20
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        LCALL   ?UL_TO_FLT
        MOV     DPTR,#__Constant_461c4000
        MOV     R0,#?V0 + 12
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 12
        LCALL   ?FLT_DIV
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_MUL
        MOV     ?V0 + 8,?V0 + 0
        MOV     ?V0 + 9,?V0 + 1
        MOV     ?V0 + 10,?V0 + 2
        MOV     ?V0 + 11,?V0 + 3
//  391 	
//  392 	return (uint32)irms_value;
        MOV     R0,#?V0 + 8
        LCALL   ?FLT_TO_UL
        MOV     R2,?V0 + 8
        MOV     R3,?V0 + 9
        MOV     R4,?V0 + 10
        MOV     R5,?V0 + 11
        MOV     A,#0x8
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     R7,#0x10
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock13
//  393 }
//  394 /*******************************************************************************
//  395 * 函数名称：GetVoltageVrms
//  396 * 功能描述：获取电压有效值
//  397 * 入口参数：ratiov：采样电压比值
//  398 * 出口参数：vrms_value：实际电压值*10000
//  399 * 注意事项：无
//  400 * 备注说明：+250mv对应1      -250mv对应-1
//  401 		得到的数据其实质是1~-1之间的数据，此数据需要进行如下运算才能得到有效电压：
//  402 		（检测得到的数据 * 250mv） * （R1 + R2）/ R1 = V
//  403 *******************************************************************************/

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  404 uint32 GetVoltageVrms(float ratiov, uint32 valueapp, uint32 valueapp_discrepancy)
GetVoltageVrms:
        CFI Block cfiBlock14 Using cfiCommon0
        CFI Function GetVoltageVrms
        CODE
//  405 {
        FUNCALL GetVoltageVrms, ReadMsgFromCC5463
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL GetVoltageVrms, ComplementToOriginalCode
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x18
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V15 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V14 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-19)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-20)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-21)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-22)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-23)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-24)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 24)
        ; Saved register size: 24
        ; Auto size: 8
        MOV     A,#-0x8
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 32)
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
        MOV     A,#0x24
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
//  406 	uint32 vrms_reg;
//  407 	float  vrms_value;
//  408 	
//  409 	vrms_reg = ComplementToOriginalCode(ReadMsgFromCC5463(READ_VRMS_CMD));
        ; Setup parameters for call to function ComplementToOriginalCode
        ; Setup parameters for call to function ReadMsgFromCC5463
        MOV     R1,#0x18
        LCALL   ??ReadMsgFromCC5463?relay
        LCALL   ??ComplementToOriginalCode?relay
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        LCALL   ?XSTORE_R2345
//  410 	vrms_value = (float)vrms_reg/16777215.0; // 2^24 -1,得到实际的有效值数据
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        LCALL   ?UL_TO_FLT
        MOV     DPTR,#__Constant_4b7fffff
        MOV     R0,#?V0 + 12
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 12
        LCALL   ?FLT_DIV
        MOV     ?V0 + 8,?V0 + 0
        MOV     ?V0 + 9,?V0 + 1
        MOV     ?V0 + 10,?V0 + 2
        MOV     ?V0 + 11,?V0 + 3
//  411 	vrms_value *= 0.25;//250mv
        MOV     DPTR,#__Constant_3e800000
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_MUL
//  412 	vrms_value *= ratiov;                // 与实际电路比值	
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_MUL
//  413 	vrms_value *= 10000;
        MOV     DPTR,#__Constant_461c4000
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_MUL
//  414 	vrms_value -= valueapp_discrepancy;
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        MOV     ?V0 + 2,?V0 + 6
        MOV     ?V0 + 3,?V0 + 7
        MOV     R0,#?V0 + 0
        LCALL   ?UL_TO_FLT
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_SUB
//  415 	vrms_value *= (float)valueapp / 10000.0; 	
        MOV     A,#0x20
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        LCALL   ?UL_TO_FLT
        MOV     DPTR,#__Constant_461c4000
        MOV     R0,#?V0 + 12
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 12
        LCALL   ?FLT_DIV
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_MUL
        MOV     ?V0 + 8,?V0 + 0
        MOV     ?V0 + 9,?V0 + 1
        MOV     ?V0 + 10,?V0 + 2
        MOV     ?V0 + 11,?V0 + 3
//  416 	
//  417 	return (uint32)vrms_value;
        MOV     R0,#?V0 + 8
        LCALL   ?FLT_TO_UL
        MOV     R2,?V0 + 8
        MOV     R3,?V0 + 9
        MOV     R4,?V0 + 10
        MOV     R5,?V0 + 11
        MOV     A,#0x8
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     R7,#0x10
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock14
//  418 }
//  419 /*******************************************************************************
//  420 * 函数名称：GetPactive
//  421 * 功能描述：获取有功功率 有符号
//  422 * 入口参数：ratiop:校正比例
//  423 * 出口参数：pact_value：功率比例值*10000   
//  424 * 注意事项：无
//  425 * 备注说明：无
//  426 *******************************************************************************/

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  427 sint32 GetPactive(float ratiop, uint32 valueapp,uint32 valueapp_discrepancy)
GetPactive:
        CFI Block cfiBlock15 Using cfiCommon0
        CFI Function GetPactive
        CODE
//  428 {
        FUNCALL GetPactive, ReadMsgFromCC5463
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL GetPactive, ComplementToOriginalCode
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x18
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V15 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V14 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-19)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-20)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-21)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-22)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-23)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-24)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 24)
        ; Saved register size: 24
        ; Auto size: 8
        MOV     A,#-0x8
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 32)
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
        MOV     A,#0x24
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
//  429 	uint32 pact_reg;
//  430 	float  pact_value;
//  431 	
//  432 	pact_reg = ComplementToOriginalCode(ReadMsgFromCC5463(READ_PACTIVE_CMD));
        ; Setup parameters for call to function ComplementToOriginalCode
        ; Setup parameters for call to function ReadMsgFromCC5463
        MOV     R1,#0x14
        LCALL   ??ReadMsgFromCC5463?relay
        LCALL   ??ComplementToOriginalCode?relay
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        LCALL   ?XSTORE_R2345
//  433 	pact_value = (float)(pact_reg & 0x007FFFFF)/8388607.0;
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPTR,#__Constant_7fffff
        MOV     R0,#?V0 + 0
        LCALL   ?L_AND_X
        MOV     R0,#?V0 + 0
        LCALL   ?UL_TO_FLT
        MOV     DPTR,#__Constant_4afffffe
        MOV     R0,#?V0 + 12
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 12
        LCALL   ?FLT_DIV
        MOV     ?V0 + 8,?V0 + 0
        MOV     ?V0 + 9,?V0 + 1
        MOV     ?V0 + 10,?V0 + 2
        MOV     ?V0 + 11,?V0 + 3
//  434 	pact_value *= ratiop;
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_MUL
//  435 	pact_value *= 10000;
        MOV     DPTR,#__Constant_461c4000
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_MUL
//  436 	pact_value -= valueapp_discrepancy;	
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        MOV     ?V0 + 2,?V0 + 6
        MOV     ?V0 + 3,?V0 + 7
        MOV     R0,#?V0 + 0
        LCALL   ?UL_TO_FLT
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_SUB
//  437 	pact_value *= (float)valueapp / 10000.0;	
        MOV     A,#0x20
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        LCALL   ?UL_TO_FLT
        MOV     DPTR,#__Constant_461c4000
        MOV     R0,#?V0 + 12
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 12
        LCALL   ?FLT_DIV
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_MUL
        MOV     ?V0 + 8,?V0 + 0
        MOV     ?V0 + 9,?V0 + 1
        MOV     ?V0 + 10,?V0 + 2
        MOV     ?V0 + 11,?V0 + 3
//  438 	
//  439 	if(1 == (pact_reg & (1L<<23)))
//  440 	{
//  441 		return (-((uint32)pact_value));
//  442 	}
//  443 	
//  444 	return ((uint32)pact_value);
        MOV     R0,#?V0 + 8
        LCALL   ?FLT_TO_UL
        MOV     R2,?V0 + 8
        MOV     R3,?V0 + 9
        MOV     R4,?V0 + 10
        MOV     R5,?V0 + 11
        MOV     A,#0x8
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     R7,#0x10
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock15
//  445 }
//  446 /*******************************************************************************
//  447 * 函数名称：GetApparenPower
//  448 * 功能描述：获取视在功率(有功功率 + 无功功率)   无符号
//  449 * 入口参数：ratios：校正比例
//  450 * 出口参数：appa_value：功率比例值*10000
//  451 * 注意事项：无
//  452 * 备注说明：无
//  453 *******************************************************************************/

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  454 uint32 GetApparenPower(float ratios, uint32 valueapp,uint32 valueapp_discrepancy)
GetApparenPower:
        CFI Block cfiBlock16 Using cfiCommon0
        CFI Function GetApparenPower
        CODE
//  455 {
        FUNCALL GetApparenPower, ReadMsgFromCC5463
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL GetApparenPower, ComplementToOriginalCode
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x18
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V15 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V14 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-19)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-20)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-21)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-22)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-23)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-24)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 24)
        ; Saved register size: 24
        ; Auto size: 8
        MOV     A,#-0x8
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 32)
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
        MOV     A,#0x24
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
//  456 	uint32 appa_reg;
//  457 	float  appa_value;	
//  458 	
//  459 	appa_reg = ComplementToOriginalCode(ReadMsgFromCC5463(READ_S_CMD));
        ; Setup parameters for call to function ComplementToOriginalCode
        ; Setup parameters for call to function ReadMsgFromCC5463
        MOV     R1,#0x36
        LCALL   ??ReadMsgFromCC5463?relay
        LCALL   ??ComplementToOriginalCode?relay
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        LCALL   ?XSTORE_R2345
//  460 	appa_value = (float)(appa_reg&0x007FFFFF)/8388607.0;
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPTR,#__Constant_7fffff
        MOV     R0,#?V0 + 0
        LCALL   ?L_AND_X
        MOV     R0,#?V0 + 0
        LCALL   ?UL_TO_FLT
        MOV     DPTR,#__Constant_4afffffe
        MOV     R0,#?V0 + 12
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 12
        LCALL   ?FLT_DIV
        MOV     ?V0 + 8,?V0 + 0
        MOV     ?V0 + 9,?V0 + 1
        MOV     ?V0 + 10,?V0 + 2
        MOV     ?V0 + 11,?V0 + 3
//  461 	appa_value *= ratios;
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_MUL
//  462 	appa_value *= 10000;
        MOV     DPTR,#__Constant_461c4000
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_MUL
//  463 	appa_value -= valueapp_discrepancy;	
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        MOV     ?V0 + 2,?V0 + 6
        MOV     ?V0 + 3,?V0 + 7
        MOV     R0,#?V0 + 0
        LCALL   ?UL_TO_FLT
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_SUB
//  464 	appa_value *= (float)valueapp / 10000.0;		
        MOV     A,#0x20
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        LCALL   ?UL_TO_FLT
        MOV     DPTR,#__Constant_461c4000
        MOV     R0,#?V0 + 12
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 12
        LCALL   ?FLT_DIV
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_MUL
        MOV     ?V0 + 8,?V0 + 0
        MOV     ?V0 + 9,?V0 + 1
        MOV     ?V0 + 10,?V0 + 2
        MOV     ?V0 + 11,?V0 + 3
//  465 	
//  466 	return ((uint32)appa_value);
        MOV     R0,#?V0 + 8
        LCALL   ?FLT_TO_UL
        MOV     R2,?V0 + 8
        MOV     R3,?V0 + 9
        MOV     R4,?V0 + 10
        MOV     R5,?V0 + 11
        MOV     A,#0x8
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     R7,#0x10
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock16
//  467 }
//  468 /*******************************************************************************
//  469 * 函数名称：GetPowerFactor
//  470 * 功能描述：获取功率因数 功率因数是有功功率和视在功率的比值，即cosΦ=P/S. 有符号
//  471 * 入口参数：无
//  472 * 出口参数：pwr_value：功率因数*10000
//  473 * 注意事项：无
//  474 * 备注说明：无
//  475 *******************************************************************************/

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  476 sint32 GetPowerFactor(float ratios, uint32 valueapp,uint32 valueapp_discrepancy)
GetPowerFactor:
        CFI Block cfiBlock17 Using cfiCommon0
        CFI Function GetPowerFactor
        CODE
//  477 {
        FUNCALL GetPowerFactor, Send_Command_To_Cs5463
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL GetPowerFactor, ReadMsgFromCC5463
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL GetPowerFactor, ComplementToOriginalCode
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL GetPowerFactor, Send_Command_To_Cs5463
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x18
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V15 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V14 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-19)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-20)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-21)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-22)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-23)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-24)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 24)
        ; Saved register size: 24
        ; Auto size: 8
        MOV     A,#-0x8
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 32)
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
        MOV     A,#0x24
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
//  478 	uint32 pwr_reg;
//  479 	float  pwr_value;
//  480 
//  481 	Send_Command_To_Cs5463(PWR_UP_HALT_CMD);
        ; Setup parameters for call to function Send_Command_To_Cs5463
        MOV     R1,#-0x60
        LCALL   ??Send_Command_To_Cs5463?relay
//  482 	pwr_reg = ComplementToOriginalCode(ReadMsgFromCC5463(READ_PF_CMD));//
        ; Setup parameters for call to function ComplementToOriginalCode
        ; Setup parameters for call to function ReadMsgFromCC5463
        MOV     R1,#0x32
        LCALL   ??ReadMsgFromCC5463?relay
        LCALL   ??ComplementToOriginalCode?relay
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        LCALL   ?XSTORE_R2345
//  483 	Send_Command_To_Cs5463(START_C31_CMD);	
        ; Setup parameters for call to function Send_Command_To_Cs5463
        MOV     R1,#-0x18
        LCALL   ??Send_Command_To_Cs5463?relay
//  484 	
//  485 	pwr_value = (float)(pwr_reg&0x007FFFFF)/8388607.0;
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPTR,#__Constant_7fffff
        MOV     R0,#?V0 + 0
        LCALL   ?L_AND_X
        MOV     R0,#?V0 + 0
        LCALL   ?UL_TO_FLT
        MOV     DPTR,#__Constant_4afffffe
        MOV     R0,#?V0 + 12
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 12
        LCALL   ?FLT_DIV
        MOV     ?V0 + 8,?V0 + 0
        MOV     ?V0 + 9,?V0 + 1
        MOV     ?V0 + 10,?V0 + 2
        MOV     ?V0 + 11,?V0 + 3
//  486 	pwr_value *= ratios;	
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_MUL
//  487 	pwr_value *= 10000;
        MOV     DPTR,#__Constant_461c4000
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_MUL
//  488 	pwr_value -= valueapp_discrepancy;	
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        MOV     ?V0 + 2,?V0 + 6
        MOV     ?V0 + 3,?V0 + 7
        MOV     R0,#?V0 + 0
        LCALL   ?UL_TO_FLT
        MOV     R0,#?V0 + 8
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_SUB
//  489 	pwr_value *= (float)valueapp / 10000.0; 	
        MOV     A,#0x20
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        LCALL   ?UL_TO_FLT
        MOV     DPTR,#__Constant_461c4000
        MOV     R0,#?V0 + 12
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 12
        LCALL   ?FLT_DIV
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_MUL
        MOV     ?V0 + 8,?V0 + 0
        MOV     ?V0 + 9,?V0 + 1
        MOV     ?V0 + 10,?V0 + 2
        MOV     ?V0 + 11,?V0 + 3
//  490 	
//  491 	if(1 == (pwr_reg&(1L<<23)))
//  492 	{
//  493 		return (-((uint32)pwr_value));
//  494 	}
//  495 	
//  496 	return ((uint32)pwr_value);
        MOV     R0,#?V0 + 8
        LCALL   ?FLT_TO_UL
        MOV     R2,?V0 + 8
        MOV     R3,?V0 + 9
        MOV     R4,?V0 + 10
        MOV     R5,?V0 + 11
        MOV     A,#0x8
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     R7,#0x10
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock17
//  497 }
//  498 
//  499 /*******************************************************************************
//  500 * 函数名称：GetTemperature
//  501 * 功能描述：获取温度传感器值
//  502 * 入口参数：无
//  503 * 出口参数：value：实际温度值*10000
//  504 * 注意事项：无
//  505 * 备注说明：无
//  506 *******************************************************************************/

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  507 sint32 GetTemperature(uint32 Temper_App_Value)
GetTemperature:
        CFI Block cfiBlock18 Using cfiCommon0
        CFI Function GetTemperature
        CODE
//  508 {
        FUNCALL GetTemperature, CfgRegToCC5463
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL GetTemperature, ReadMsgFromCC5463
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL GetTemperature, ComplementToOriginalCode
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL GetTemperature, CfgRegToCC5463
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL GetTemperature, ReadMsgFromCC5463
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL GetTemperature, ComplementToOriginalCode
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x18
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V15 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V14 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-19)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-20)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-21)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-22)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-23)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-24)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 24)
        ; Saved register size: 24
        ; Auto size: 8
        MOV     A,#-0x8
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 32)
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
//  509 	uint32 temper_reg = 0;
        MOV     DPTR,#__Constant_0
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
//  510 	uint8 Integer_part = 0;
        MOV     R6,#0x0
//  511 	float decimal_part = 0.0;
        MOV     DPTR,#__Constant_0
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
//  512 	float value = 0.0;			
        MOV     DPTR,#__Constant_0
        LCALL   ?XLOAD_R2345
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        LCALL   ?XSTORE_R2345
//  513 	
//  514 	CfgRegToCC5463(OPER_PAGE_CMD,OPER_PAGE1_CMD );            // 温度传感器偏移寄存器 换页
        ; Setup parameters for call to function CfgRegToCC5463
        MOV     DPTR,#__Constant_1
        LCALL   ?XLOAD_R2345
        MOV     R1,#0x7e
        LCALL   ??CfgRegToCC5463?relay
//  515 	temper_reg = ComplementToOriginalCode(ReadMsgFromCC5463(READ_TOFF_CMD));
        ; Setup parameters for call to function ComplementToOriginalCode
        ; Setup parameters for call to function ReadMsgFromCC5463
        MOV     R1,#0x6
        LCALL   ??ReadMsgFromCC5463?relay
        LCALL   ??ComplementToOriginalCode?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     ?V0 + 2,R4
        MOV     ?V0 + 3,R5
        MOV     ?V0 + 4,?V0 + 0
        MOV     ?V0 + 5,?V0 + 1
        MOV     ?V0 + 6,?V0 + 2
        MOV     ?V0 + 7,?V0 + 3
//  516 	decimal_part = (float)(temper_reg&0x007FFFFF)/8388607.0;  // 分母为2^23 = 8388608-1
        MOV     ?V0 + 12,?V0 + 4
        MOV     ?V0 + 13,?V0 + 5
        MOV     ?V0 + 14,?V0 + 6
        MOV     ?V0 + 15,?V0 + 7
        MOV     DPTR,#__Constant_7fffff
        MOV     R0,#?V0 + 12
        LCALL   ?L_AND_X
        MOV     R0,#?V0 + 12
        LCALL   ?UL_TO_FLT
        MOV     DPTR,#__Constant_4afffffe
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 12
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_DIV
        MOV     ?V0 + 8,?V0 + 12
        MOV     ?V0 + 9,?V0 + 13
        MOV     ?V0 + 10,?V0 + 14
        MOV     ?V0 + 11,?V0 + 15
//  517 	value = decimal_part;
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_TO_X
//  518 	CfgRegToCC5463(OPER_PAGE_CMD,OPER_PAGE0_CMD );            // 温度传感器偏移寄存器 换页	
        ; Setup parameters for call to function CfgRegToCC5463
        MOV     DPTR,#__Constant_0
        LCALL   ?XLOAD_R2345
        MOV     R1,#0x7e
        LCALL   ??CfgRegToCC5463?relay
//  519 	temper_reg = ComplementToOriginalCode(ReadMsgFromCC5463(READ_TEMPER_CMD));
        ; Setup parameters for call to function ComplementToOriginalCode
        ; Setup parameters for call to function ReadMsgFromCC5463
        MOV     R1,#0x26
        LCALL   ??ReadMsgFromCC5463?relay
        LCALL   ??ComplementToOriginalCode?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     ?V0 + 2,R4
        MOV     ?V0 + 3,R5
        MOV     ?V0 + 4,?V0 + 0
        MOV     ?V0 + 5,?V0 + 1
        MOV     ?V0 + 6,?V0 + 2
        MOV     ?V0 + 7,?V0 + 3
//  520 	Integer_part = (temper_reg>>16)&0x7F;                     // 高8位 整数部分不含符号位
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        MOV     ?V0 + 2,?V0 + 6
        MOV     ?V0 + 3,?V0 + 7
        MOV     A,#0x10
        MOV     R0,#?V0 + 0
        LCALL   ?UL_SHR
        MOV     A,?V0 + 0
        ANL     A,#0x7f
        MOV     R6,A
//  521 	decimal_part = (float)(temper_reg&0x0000FFFF)/65535.0;    // 低16位 2^16-1   小数部分
        MOV     ?V0 + 12,?V0 + 4
        MOV     ?V0 + 13,?V0 + 5
        MOV     ?V0 + 14,?V0 + 6
        MOV     ?V0 + 15,?V0 + 7
        MOV     DPTR,#__Constant_ffff
        MOV     R0,#?V0 + 12
        LCALL   ?L_AND_X
        MOV     R0,#?V0 + 12
        LCALL   ?UL_TO_FLT
        MOV     DPTR,#__Constant_477fff00
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 12
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_DIV
        MOV     ?V0 + 8,?V0 + 12
        MOV     ?V0 + 9,?V0 + 13
        MOV     ?V0 + 10,?V0 + 14
        MOV     ?V0 + 11,?V0 + 15
//  522 	value += ((float)Integer_part + decimal_part);
        MOV     ?V0 + 12,R6
        CLR     A
        MOV     ?V0 + 13,A
        MOV     ?V0 + 14,A
        MOV     ?V0 + 15,A
        MOV     R0,#?V0 + 12
        LCALL   ?UL_TO_FLT
        MOV     R0,#?V0 + 12
        MOV     R1,#?V0 + 8
        LCALL   ?FLT_ADD
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 12
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_ADD
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,#?V0 + 12
        LCALL   ?L_MOV_TO_X
//  523 	value *= 10000;	
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,#?V0 + 12
        LCALL   ?L_MOV_X
        MOV     DPTR,#__Constant_461c4000
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 12
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_MUL
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,#?V0 + 12
        LCALL   ?L_MOV_TO_X
//  524 	value -= Temper_App_Value;//偏移校准	
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,#?V0 + 12
        LCALL   ?L_MOV_X
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R0,#?V0 + 0
        LCALL   ?UL_TO_FLT
        MOV     R0,#?V0 + 12
        MOV     R1,#?V0 + 0
        LCALL   ?FLT_SUB
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,#?V0 + 12
        LCALL   ?L_MOV_TO_X
//  525 	if(1 == (temper_reg&(1L<<23)))
//  526 	{
//  527 		return (-(uint32)value);
//  528 	}
//  529 	
//  530 	return ((uint32)value);
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        LCALL   ?XLOAD_R2345
        LCALL   ?R2345_FLT_TO_UL
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        MOV     R4,?V0 + 2
        MOV     R5,?V0 + 3
        MOV     A,#0x8
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     R7,#0x10
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock18
//  531 }
//  532 /*******************************************************************************
//  533 * 函数名称：Read_CFG_Regester
//  534 * 功能描述：获取配置寄存器的值
//  535 * 入口参数：无
//  536 * 出口参数：
//  537 * 注意事项：无
//  538 * 备注说明：无
//  539 *******************************************************************************/

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  540 uint32 Read_CFG_Regester(void)
Read_CFG_Regester:
        CFI Block cfiBlock19 Using cfiCommon0
        CFI Function Read_CFG_Regester
        CODE
//  541 {
        FUNCALL Read_CFG_Regester, Send_Command_To_Cs5463
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Read_CFG_Regester, Read_Cfg_FromCC5463
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Read_CFG_Regester, Send_Command_To_Cs5463
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x10
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 16)
        ; Saved register size: 16
        ; Auto size: 0
//  542 	uint32 temper_reg = 0;	
        MOV     DPTR,#__Constant_0
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
//  543 	Send_Command_To_Cs5463(PWR_UP_HALT_CMD);//暂停	
        ; Setup parameters for call to function Send_Command_To_Cs5463
        MOV     R1,#-0x60
        LCALL   ??Send_Command_To_Cs5463?relay
//  544 	temper_reg = Read_Cfg_FromCC5463();
        ; Setup parameters for call to function Read_Cfg_FromCC5463
        LCALL   ??Read_Cfg_FromCC5463?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     ?V0 + 6,R4
        MOV     ?V0 + 7,R5
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        MOV     ?V0 + 2,?V0 + 6
        MOV     ?V0 + 3,?V0 + 7
//  545 	Send_Command_To_Cs5463(START_C31_CMD);	//开始连续计量	
        ; Setup parameters for call to function Send_Command_To_Cs5463
        MOV     R1,#-0x18
        LCALL   ??Send_Command_To_Cs5463?relay
//  546 	return temper_reg;
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        MOV     R4,?V0 + 2
        MOV     R5,?V0 + 3
        MOV     R7,#0x8
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock19
//  547 }
//  548 /*******************************************************************************
//  549 偏移量校准
//  550 校准电压V电流I通道DC偏移量
//  551 要求把芯片的VIN±和IIN±接地。
//  552 
//  553 增益校准
//  554 在指定电压范围内输入交流信号到芯片的VIN±、IIN±脚。 例如：电压/电流通道最大
//  555 输入电压为±250mV,为适应更大的电压范围，系数取0.6, 则输入交流信号为150mV，实
//  556 际上一般取110mV
//  557   cali_vdcoff,
//  558   cali_vacoff,
//  559   cali_idcoff,
//  560   cali_iacoff,
//  561   cali_vacgain,
//  562   cali_iacgain
//  563 *******************************************************************************/

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  564 uint32 GetCalibrationVIoffOrGain(CALI_TypeDef cali_num)
GetCalibrationVIoffOrGain:
        CFI Block cfiBlock20 Using cfiCommon0
        CFI Function GetCalibrationVIoffOrGain
        CODE
//  565 {
        FUNCALL GetCalibrationVIoffOrGain, Send_Command_To_Cs5463
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL GetCalibrationVIoffOrGain, Send_Command_To_Cs5463
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL GetCalibrationVIoffOrGain, ReadMsgFromCC5463
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL GetCalibrationVIoffOrGain, CfgRegToCC5463
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL GetCalibrationVIoffOrGain, ReadMsgFromCC5463
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x10
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 16)
        ; Saved register size: 16
        ; Auto size: 0
        MOV     ?V0 + 0,R1
//  566 	uint8 calix_cmd;
//  567 	uint8 readx_cmd;
//  568 	
//  569 	Send_Command_To_Cs5463(PWR_UP_HALT_CMD);
        ; Setup parameters for call to function Send_Command_To_Cs5463
        MOV     R1,#-0x60
        LCALL   ??Send_Command_To_Cs5463?relay
//  570 	
//  571 	//电压通道DC偏移校准命令,读电压通道DC偏移寄存器值
//  572 	if     (cali_vdcoff  == cali_num){calix_cmd =CAL_VDCOFF_CMD; readx_cmd = READ_VDCOFF_CMD;}
        MOV     A,?V0 + 0
        JNZ     ??GetCalibrationVIoffOrGain_0
        MOV     R7,#-0x2f
        MOV     R6,#0x6
        SJMP    ??GetCalibrationVIoffOrGain_1
//  573 	//电压通道AC偏移校准命令,读电压通道AC偏移寄存器值
//  574 	else if(cali_vacoff  == cali_num){calix_cmd =CAL_VACOFF_CMD; readx_cmd = READ_VACOFF_CMD;}
??GetCalibrationVIoffOrGain_0:
        MOV     A,#0x1
        XRL     A,?V0 + 0
        JNZ     ??GetCalibrationVIoffOrGain_2
        MOV     R7,#-0x2b
        MOV     R6,#0x22
        SJMP    ??GetCalibrationVIoffOrGain_1
//  575 	//电流通道DC偏移校准命令,读电流通道DC偏移寄存器值
//  576 	else if(cali_idcoff  == cali_num){calix_cmd =CAL_IDCOFF_CMD; readx_cmd = READ_IDCOFF_CMD;}
??GetCalibrationVIoffOrGain_2:
        MOV     A,#0x2
        XRL     A,?V0 + 0
        JNZ     ??GetCalibrationVIoffOrGain_3
        MOV     R7,#-0x37
        MOV     R6,#0x2
        SJMP    ??GetCalibrationVIoffOrGain_1
//  577 	//电流通道AC偏移校准命令,读电流通道AC偏移寄存器值
//  578 	else if(cali_iacoff  == cali_num){calix_cmd =CAL_IACOFF_CMD; readx_cmd = READ_IACOFF_CMD;}
??GetCalibrationVIoffOrGain_3:
        MOV     A,#0x3
        XRL     A,?V0 + 0
        JNZ     ??GetCalibrationVIoffOrGain_4
        MOV     R7,#-0x33
        MOV     R6,#0x20
        SJMP    ??GetCalibrationVIoffOrGain_1
//  579 	//电压通道AC增益校准命令,读电压通道AC增益寄存器值
//  580 	else if(cali_vacgain == cali_num){calix_cmd =CAL_VACGN_CMD ; readx_cmd = READ_VGN_CMD   ;}
??GetCalibrationVIoffOrGain_4:
        MOV     A,#0x4
        XRL     A,?V0 + 0
        JNZ     ??GetCalibrationVIoffOrGain_5
        MOV     R7,#-0x2a
        MOV     R6,#0x8
        SJMP    ??GetCalibrationVIoffOrGain_1
//  581 	//电流通道AC增益校准命令,读电流通道AC增益寄存器值
//  582 	else if(cali_iacgain == cali_num){calix_cmd =CAL_IACGN_CMD ; readx_cmd = READ_IGN_CMD   ;}
??GetCalibrationVIoffOrGain_5:
        MOV     A,#0x5
        XRL     A,?V0 + 0
        JNZ     ??GetCalibrationVIoffOrGain_1
        MOV     R7,#-0x32
        MOV     R6,#0x4
//  583 	else{;}
//  584 	
//  585 	Send_Command_To_Cs5463(calix_cmd);
??GetCalibrationVIoffOrGain_1:
        ; Setup parameters for call to function Send_Command_To_Cs5463
        MOV     A,R7
        MOV     R1,A
        LCALL   ??Send_Command_To_Cs5463?relay
//  586 	while(!(ReadMsgFromCC5463(READ_STATUS_CMD) & INT_DRDY))        //读状态寄存器内的DRDY位,等待完成
??GetCalibrationVIoffOrGain_6:
        ; Setup parameters for call to function ReadMsgFromCC5463
        MOV     R1,#0x1e
        LCALL   ??ReadMsgFromCC5463?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     ?V0 + 6,R4
        MOV     ?V0 + 7,R5
        MOV     DPTR,#__Constant_800000
        MOV     R0,#?V0 + 4
        LCALL   ?L_AND_X
        MOV     A,?V0 + 4
        ORL     A,?V0 + 5
        ORL     A,?V0 + 6
        ORL     A,?V0 + 7
        JZ      ??GetCalibrationVIoffOrGain_6
//  587 	{
//  588 	}
//  589 	CfgRegToCC5463(WRITE_STATUS_CMD ,0x800000);//清除状态寄存器
        ; Setup parameters for call to function CfgRegToCC5463
        MOV     DPTR,#__Constant_800000
        LCALL   ?XLOAD_R2345
        MOV     R1,#0x5e
        LCALL   ??CfgRegToCC5463?relay
//  590 	
//  591 	return ReadMsgFromCC5463(readx_cmd);
        ; Setup parameters for call to function ReadMsgFromCC5463
        MOV     A,R6
        MOV     R1,A
        LCALL   ??ReadMsgFromCC5463?relay
        MOV     R7,#0x8
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock20
//  592 }

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for CS543_CFG_DATA>`:
        DATA32
        DD 65537

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_0:
        DD 0

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_800000:
        DD 8388608

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_1:
        DD 1

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_7fffff:
        DD 8388607

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_fa0:
        DD 4000

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_4afffffe:
        DD 4AFFFFFEH

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_461c4000:
        DD 461C4000H

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_4b7fffff:
        DD 4B7FFFFFH

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_3d4ccccd:
        DD 3D4CCCCDH

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_3b03126f:
        DD 3B03126FH

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_3e800000:
        DD 3E800000H

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_ffff:
        DD 65535

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_477fff00:
        DD 477FFF00H

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??Delay_1u?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    Delay_1u

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??SPI_Configration?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    SPI_Configration

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??SPI_Receive_byte?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    SPI_Receive_byte

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??SPI_Transfer_byte?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    SPI_Transfer_byte

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??CfgRegToCC5463?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    CfgRegToCC5463

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??Send_Command_To_Cs5463?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    Send_Command_To_Cs5463

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ReadMsgFromCC5463?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ReadMsgFromCC5463

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??Read_Cfg_FromCC5463?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    Read_Cfg_FromCC5463

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ComplementToOriginalCode?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ComplementToOriginalCode

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??InitCS5463?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    InitCS5463

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ConfigCS5463?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ConfigCS5463

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??GetSamplingPeriod?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    GetSamplingPeriod

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??GetCurrentIrms?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    GetCurrentIrms

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??GetCurrentIvalue?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    GetCurrentIvalue

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??GetVoltageVrms?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    GetVoltageVrms

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??GetPactive?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    GetPactive

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??GetApparenPower?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    GetApparenPower

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??GetPowerFactor?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    GetPowerFactor

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??GetTemperature?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    GetTemperature

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??Read_CFG_Regester?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    Read_CFG_Regester

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??GetCalibrationVIoffOrGain?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    GetCalibrationVIoffOrGain

        END
//  593 
//  594 
//  595 
//  596 
//  597 
//  598 
//  599 
//  600 
//  601 
//  602 
//  603 
//  604 
//  605 
//  606 
//  607 
//  608 
//  609 
//  610 
//  611 
//  612 
// 
// 3 076 bytes in segment BANKED_CODE
//   126 bytes in segment BANK_RELAYS
//     4 bytes in segment SFR_AN
//     4 bytes in segment XDATA_I
//     4 bytes in segment XDATA_ID
//    52 bytes in segment XDATA_ROM_C
// 
// 3 206 bytes of CODE  memory
//     0 bytes of CONST memory (+ 52 bytes shared)
//     0 bytes of DATA  memory (+  4 bytes shared)
//     4 bytes of XDATA memory
//
//Errors: none
//Warnings: none
