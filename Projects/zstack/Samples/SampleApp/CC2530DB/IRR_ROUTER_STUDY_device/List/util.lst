###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.1.10194/W32 for 8051         10/Dec/2014  17:47:08 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zstac #
#                          k\Samples\SampleApp\Source\rssi_test\c\util.c      #
#    Command line       =  -f "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\z #
#                          stack\Samples\SampleApp\CC2530DB\..\..\..\Tools\CC #
#                          2530DB\f8wRouter.cfg" (-DCPU32MHZ                  #
#                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRU #
#                          E -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8       #
#                          -DMAC_CFG_RX_MAX=5 -DRTR_NWK) -f                   #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\Tools\CC253 #
#                          0DB\f8wConfig.cfg" (-DZIGBEEPRO -DSECURE=1         #
#                          -DZG_SECURE_DYNAMIC=0 -DREFLECTOR                  #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=60            #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=30           #
#                          -DNWK_MAX_BINDING_ENTRIES=8                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 -DASSERT_RESET         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=8000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=1000)  #
#                          -DREJOIN_POLL_RATE=440 "D:\RE_1_2_0_FORMAL_APP(251 #
#                          )-14-12-8\Projects\zstack\Samples\SampleApp\Source #
#                          \rssi_test\c\util.c" -D NV_INIT -D NV_RESTORE -D   #
#                          HOLD_AUTO_START -D MT_TASK -D MT_APP_FUNC -D       #
#                          MT_SYS_FUNC -D MT_ZDO_FUNC -D MT_ZDO_MGMT -D       #
#                          ISR_KEYINTERRUPT -D xWDT_IN_PM1 -D                 #
#                          xOSC32K_CRYSTAL_INSTALLED=0 -D xLARGER_NETWORK -D  #
#                          xPOWER_PA -D IRR_ROUTER -D HAVE_TEST_FUN -lC       #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\IRR_ROUTER_STUDY_dev #
#                          ice\List\" -lA "D:\RE_1_2_0_FORMAL_APP(251)-14-12- #
#                          8\Projects\zstack\Samples\SampleApp\CC2530DB\IRR_R #
#                          OUTER_STUDY_device\List\" --diag_suppress          #
#                          Pe001,Pa010 -o "D:\RE_1_2_0_FORMAL_APP(251)-14-12- #
#                          8\Projects\zstack\Samples\SampleApp\CC2530DB\IRR_R #
#                          OUTER_STUDY_device\Obj\" -e --no_cse --no_unroll   #
#                          --no_inline --no_code_motion --no_tbaa --debug     #
#                          --core=plain --dptr=16,1 --data_model=large        #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I "D:\RE_1_2_0_FORMAL_APP(25 #
#                          1)-14-12-8\Projects\zstack\Samples\SampleApp\CC253 #
#                          0DB\" -I "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\Source\" #
#                           -I "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\ #
#                          zstack\Samples\SampleApp\CC2530DB\..\Source\rssi_t #
#                          est\h\" -I "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\Source #
#                          \IRR_router\" -I "D:\RE_1_2_0_FORMAL_APP(251)-14-1 #
#                          2-8\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\ZMain\TI2530DB\" -I                          #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\hal\include\" -I "D:\RE_1_2_0_FORMAL_APP(251 #
#                          )-14-12-8\Projects\zstack\Samples\SampleApp\CC2530 #
#                          DB\..\..\..\..\..\Components\hal\target\CC2530EB\" #
#                           -I "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\ #
#                          zstack\Samples\SampleApp\CC2530DB\..\..\..\..\..\C #
#                          omponents\mac\include\" -I                         #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\mac\high_level\" -I                          #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\mac\low_level\srf04\" -I                     #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\mac\low_level\srf04\single_chip\" -I         #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\mt\" -I "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8 #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\osal\include\" -I              #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\services\saddr\" -I                          #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\services\sdata\" -I                          #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\stack\af\" -I "D:\RE_1_2_0_FORMAL_APP(251)-1 #
#                          4-12-8\Projects\zstack\Samples\SampleApp\CC2530DB\ #
#                          ..\..\..\..\..\Components\stack\nwk\" -I           #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\stack\sapi\" -I "D:\RE_1_2_0_FORMAL_APP(251) #
#                          -14-12-8\Projects\zstack\Samples\SampleApp\CC2530D #
#                          B\..\..\..\..\..\Components\stack\sec\" -I         #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\stack\sys\" -I "D:\RE_1_2_0_FORMAL_APP(251)- #
#                          14-12-8\Projects\zstack\Samples\SampleApp\CC2530DB #
#                          \..\..\..\..\..\Components\stack\zdo\" -I          #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\zmac\" -I "D:\RE_1_2_0_FORMAL_APP(251)-14-12 #
#                          -8\Projects\zstack\Samples\SampleApp\CC2530DB\..\. #
#                          .\..\..\..\Components\zmac\f8w\" -On               #
#                          --require_prototypes                               #
#    List file          =  D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zstac #
#                          k\Samples\SampleApp\CC2530DB\IRR_ROUTER_STUDY_devi #
#                          ce\List\util.lst                                   #
#    Object file        =  D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zstac #
#                          k\Samples\SampleApp\CC2530DB\IRR_ROUTER_STUDY_devi #
#                          ce\Obj\util.r51                                    #
#                                                                             #
#                                                                             #
###############################################################################

D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zstack\Samples\SampleApp\Source\rssi_test\c\util.c
      1          /***********************************************************************************
      2          
      3              Filename:     util.c
      4          
      5              Description:  Utility library
      6          
      7          ***********************************************************************************/
      8          
      9          /***********************************************************************************
     10          * INCLUDES
     11          */
     12          
     13          #include "util.h"
     14          #include "hal_defs.h"
     15          #include "rf.h"
     16          
     17          /***********************************************************************************
     18          * GLOBAL FUNCTIONS
     19          */
     20          
     21          /***********************************************************************************
     22          * @fn          utilChipIdToStr
     23          *
     24          * @brief       Converts a chip ID to a text string.
     25          *
     26          * @param       uint8 chipID
     27          *
     28          * @return      none
     29          */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     30          const char* utilChipIdToStr(uint8 chipID)
   \                     utilChipIdToStr:
     31          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
     32              const char* szId;
     33          
     34              switch(chipID) {
   \   000000   E9           MOV     A,R1
   \   000001   14           DEC     A
   \   000002   6054         JZ      ??utilChipIdToStr_0
   \   000004   14           DEC     A
   \   000005   6021         JZ      ??utilChipIdToStr_1
   \   000007   24F1         ADD     A,#-0xf
   \   000009   6053         JZ      ??utilChipIdToStr_2
   \   00000B   2490         ADD     A,#-0x70
   \   00000D   603D         JZ      ??utilChipIdToStr_3
   \   00000F   24FD         ADD     A,#-0x3
   \   000011   6027         JZ      ??utilChipIdToStr_4
   \   000013   14           DEC     A
   \   000014   6018         JZ      ??utilChipIdToStr_5
   \   000016   24FC         ADD     A,#-0x4
   \   000018   601A         JZ      ??utilChipIdToStr_6
   \   00001A   24F8         ADD     A,#-0x8
   \   00001C   6034         JZ      ??utilChipIdToStr_7
   \   00001E   24EC         ADD     A,#-0x14
   \   000020   601E         JZ      ??utilChipIdToStr_8
   \   000022   24F0         ADD     A,#-0x10
   \   000024   6020         JZ      ??utilChipIdToStr_9
   \   000026   803C         SJMP    ??utilChipIdToStr_10
     35              case HAL_RF_CHIP_ID_CC2420:
     36                  szId= "2420";
   \                     ??utilChipIdToStr_1:
   \   000028   7A..         MOV     R2,#`?<Constant "2420">` & 0xff
   \   00002A   7B..         MOV     R3,#(`?<Constant "2420">` >> 8) & 0xff
     37                  break;
   \   00002C   803A         SJMP    ??utilChipIdToStr_11
     38              case HAL_RF_CHIP_ID_CC2430:
     39                  szId= "2430";
   \                     ??utilChipIdToStr_5:
   \   00002E   7A..         MOV     R2,#`?<Constant "2430">` & 0xff
   \   000030   7B..         MOV     R3,#(`?<Constant "2430">` >> 8) & 0xff
     40                  break;
   \   000032   8034         SJMP    ??utilChipIdToStr_11
     41              case HAL_RF_CHIP_ID_CC2431:
     42                  szId= "2431";
   \                     ??utilChipIdToStr_6:
   \   000034   7A..         MOV     R2,#`?<Constant "2431">` & 0xff
   \   000036   7B..         MOV     R3,#(`?<Constant "2431">` >> 8) & 0xff
     43                  break;
   \   000038   802E         SJMP    ??utilChipIdToStr_11
     44              case HAL_RF_CHIP_ID_CC2520:
     45                  szId= "2520";
   \                     ??utilChipIdToStr_4:
   \   00003A   7A..         MOV     R2,#`?<Constant "2520">` & 0xff
   \   00003C   7B..         MOV     R3,#(`?<Constant "2520">` >> 8) & 0xff
     46                  break;
   \   00003E   8028         SJMP    ??utilChipIdToStr_11
     47              case HAL_RF_CHIP_ID_CC2530:
     48                  szId= "2530";
   \                     ??utilChipIdToStr_8:
   \   000040   7A..         MOV     R2,#`?<Constant "2530">` & 0xff
   \   000042   7B..         MOV     R3,#(`?<Constant "2530">` >> 8) & 0xff
     49                  break;
   \   000044   8022         SJMP    ??utilChipIdToStr_11
     50              case HAL_RF_CHIP_ID_CC2531:
     51                  szId= "2531";
   \                     ??utilChipIdToStr_9:
   \   000046   7A..         MOV     R2,#`?<Constant "2531">` & 0xff
   \   000048   7B..         MOV     R3,#(`?<Constant "2531">` >> 8) & 0xff
     52                  break;
   \   00004A   801C         SJMP    ??utilChipIdToStr_11
     53              case HAL_RF_CHIP_ID_CC2510:
     54                  szId= "2510";
   \                     ??utilChipIdToStr_3:
   \   00004C   7A..         MOV     R2,#`?<Constant "2510">` & 0xff
   \   00004E   7B..         MOV     R3,#(`?<Constant "2510">` >> 8) & 0xff
     55                  break;
   \   000050   8016         SJMP    ??utilChipIdToStr_11
     56              case HAL_RF_CHIP_ID_CC2511:
     57                  szId= "2511";
   \                     ??utilChipIdToStr_7:
   \   000052   7A..         MOV     R2,#`?<Constant "2511">` & 0xff
   \   000054   7B..         MOV     R3,#(`?<Constant "2511">` >> 8) & 0xff
     58                  break;
   \   000056   8010         SJMP    ??utilChipIdToStr_11
     59              case HAL_RF_CHIP_ID_CC1110:
     60                  szId= "1110";
   \                     ??utilChipIdToStr_0:
   \   000058   7A..         MOV     R2,#`?<Constant "1110">` & 0xff
   \   00005A   7B..         MOV     R3,#(`?<Constant "1110">` >> 8) & 0xff
     61                  break;
   \   00005C   800A         SJMP    ??utilChipIdToStr_11
     62              case HAL_RF_CHIP_ID_CC1111:
     63                  szId= "1111";
   \                     ??utilChipIdToStr_2:
   \   00005E   7A..         MOV     R2,#`?<Constant "1111">` & 0xff
   \   000060   7B..         MOV     R3,#(`?<Constant "1111">` >> 8) & 0xff
     64                  break;
   \   000062   8004         SJMP    ??utilChipIdToStr_11
     65              default:
     66                  szId= "----";
   \                     ??utilChipIdToStr_10:
   \   000064   7A..         MOV     R2,#`?<Constant "----">` & 0xff
   \   000066   7B..         MOV     R3,#(`?<Constant "----">` >> 8) & 0xff
     67              };
     68          
     69              return szId;
   \                     ??utilChipIdToStr_11:
   \   000068   02....       LJMP    ?BRET
     70          }
     71          
     72          /***********************************************************************************
     73          * @fn          convInt32ToText
     74          *
     75          * @brief       Converts 32 bit int to text
     76          *
     77          * @param       int32 value
     78          *
     79          * @return      char* - pointer to text buffer which is a file scope allocated array
     80          */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     81          char* convInt32ToText(int32 value)
   \                     convInt32ToText:
     82          {
   \   000000   74EA         MOV     A,#-0x16
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 22
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V0 + 4,R2
   \   00000C   8B..         MOV     ?V0 + 5,R3
   \   00000E   8C..         MOV     ?V0 + 6,R4
   \   000010   8D..         MOV     ?V0 + 7,R5
     83              static char pValueToTextBuffer[12];
     84              char *pLast;
     85              char *pFirst;
     86              char last;
     87              uint8 negative;
     88          
     89              pLast = pValueToTextBuffer;
   \   000012   7C..         MOV     R4,#??pValueToTextBuffer & 0xff
   \   000014   7D..         MOV     R5,#(??pValueToTextBuffer >> 8) & 0xff
     90          
     91              // Record the sign of the value
     92              negative = (value < 0);
   \   000016   90....       MOV     DPTR,#__Constant_0
   \   000019   78..         MOV     R0,#?V0 + 4
   \   00001B   12....       LCALL   ?SL_GE_X
   \   00001E   400B         JC      ??convInt32ToText_0
   \   000020   85..82       MOV     DPL,?XSP + 0
   \   000023   85..83       MOV     DPH,?XSP + 1
   \   000026   7401         MOV     A,#0x1
   \   000028   F0           MOVX    @DPTR,A
   \   000029   8009         SJMP    ??convInt32ToText_1
   \                     ??convInt32ToText_0:
   \   00002B   85..82       MOV     DPL,?XSP + 0
   \   00002E   85..83       MOV     DPH,?XSP + 1
   \   000031   7400         MOV     A,#0x0
   \   000033   F0           MOVX    @DPTR,A
   \                     ??convInt32ToText_1:
   \   000034   85..82       MOV     DPL,?XSP + 0
   \   000037   85..83       MOV     DPH,?XSP + 1
   \   00003A   E0           MOVX    A,@DPTR
   \   00003B   F5..         MOV     ?V0 + 13,A
     93              value = ABS(value);
   \   00003D   90....       MOV     DPTR,#__Constant_0
   \   000040   78..         MOV     R0,#?V0 + 4
   \   000042   12....       LCALL   ?SL_GE_X
   \   000045   4005         JC      ??convInt32ToText_2
   \   000047   78..         MOV     R0,#?V0 + 4
   \   000049   12....       LCALL   ?L_NEG
     94          
     95              // Print the value in the reverse order
     96              do {
     97                  *(pLast++) = '0' + (uint8)(value % 10);
   \                     ??convInt32ToText_2:
   \   00004C   85....       MOV     ?V0 + 0,?V0 + 4
   \   00004F   85....       MOV     ?V0 + 1,?V0 + 5
   \   000052   85....       MOV     ?V0 + 2,?V0 + 6
   \   000055   85....       MOV     ?V0 + 3,?V0 + 7
   \   000058   90....       MOV     DPTR,#__Constant_a
   \   00005B   78..         MOV     R0,#?V0 + 8
   \   00005D   12....       LCALL   ?L_MOV_X
   \   000060   78..         MOV     R0,#?V0 + 0
   \   000062   79..         MOV     R1,#?V0 + 8
   \   000064   12....       LCALL   ?L_DIV_MOD
   \   000067   E5..         MOV     A,?V0 + 8
   \   000069   2430         ADD     A,#0x30
   \   00006B   8C82         MOV     DPL,R4
   \   00006D   8D83         MOV     DPH,R5
   \   00006F   F0           MOVX    @DPTR,A
   \   000070   8C82         MOV     DPL,R4
   \   000072   8D83         MOV     DPH,R5
   \   000074   A3           INC     DPTR
   \   000075   AC82         MOV     R4,DPL
   \   000077   AD83         MOV     R5,DPH
     98                  value /= 10;
   \   000079   90....       MOV     DPTR,#__Constant_a
   \   00007C   78..         MOV     R0,#?V0 + 0
   \   00007E   12....       LCALL   ?L_MOV_X
   \   000081   78..         MOV     R0,#?V0 + 4
   \   000083   79..         MOV     R1,#?V0 + 0
   \   000085   12....       LCALL   ?L_DIV_MOD
     99              } while (value);
   \   000088   E5..         MOV     A,?V0 + 4
   \   00008A   45..         ORL     A,?V0 + 5
   \   00008C   45..         ORL     A,?V0 + 6
   \   00008E   45..         ORL     A,?V0 + 7
   \   000090   70BA         JNZ     ??convInt32ToText_2
    100          
    101              // Add the '-' when the number is negative, and terminate the string
    102              if (negative) *(pLast++) = '-';
   \   000092   E5..         MOV     A,?V0 + 13
   \   000094   6010         JZ      ??convInt32ToText_3
   \   000096   8C82         MOV     DPL,R4
   \   000098   8D83         MOV     DPH,R5
   \   00009A   742D         MOV     A,#0x2d
   \   00009C   F0           MOVX    @DPTR,A
   \   00009D   8C82         MOV     DPL,R4
   \   00009F   8D83         MOV     DPH,R5
   \   0000A1   A3           INC     DPTR
   \   0000A2   AC82         MOV     R4,DPL
   \   0000A4   AD83         MOV     R5,DPH
    103              *(pLast--) = 0x00;
   \                     ??convInt32ToText_3:
   \   0000A6   8C82         MOV     DPL,R4
   \   0000A8   8D83         MOV     DPH,R5
   \   0000AA   7400         MOV     A,#0x0
   \   0000AC   F0           MOVX    @DPTR,A
   \   0000AD   EC           MOV     A,R4
   \   0000AE   24FF         ADD     A,#-0x1
   \   0000B0   FC           MOV     R4,A
   \   0000B1   ED           MOV     A,R5
   \   0000B2   34FF         ADDC    A,#-0x1
   \   0000B4   FD           MOV     R5,A
    104          
    105              // Now reverse the string
    106              pFirst = pValueToTextBuffer;
   \   0000B5   7E..         MOV     R6,#??pValueToTextBuffer & 0xff
   \   0000B7   7F..         MOV     R7,#(??pValueToTextBuffer >> 8) & 0xff
    107              while (pLast > pFirst) {
   \                     ??convInt32ToText_4:
   \   0000B9   C3           CLR     C
   \   0000BA   EE           MOV     A,R6
   \   0000BB   9C           SUBB    A,R4
   \   0000BC   EF           MOV     A,R7
   \   0000BD   9D           SUBB    A,R5
   \   0000BE   502D         JNC     ??convInt32ToText_5
    108                  last = *pLast;
   \   0000C0   8C82         MOV     DPL,R4
   \   0000C2   8D83         MOV     DPH,R5
   \   0000C4   E0           MOVX    A,@DPTR
   \   0000C5   F5..         MOV     ?V0 + 12,A
    109                  *(pLast--) = *pFirst;
   \   0000C7   8E82         MOV     DPL,R6
   \   0000C9   8F83         MOV     DPH,R7
   \   0000CB   E0           MOVX    A,@DPTR
   \   0000CC   8C82         MOV     DPL,R4
   \   0000CE   8D83         MOV     DPH,R5
   \   0000D0   F0           MOVX    @DPTR,A
   \   0000D1   EC           MOV     A,R4
   \   0000D2   24FF         ADD     A,#-0x1
   \   0000D4   FC           MOV     R4,A
   \   0000D5   ED           MOV     A,R5
   \   0000D6   34FF         ADDC    A,#-0x1
   \   0000D8   FD           MOV     R5,A
    110                  *(pFirst++) = last;
   \   0000D9   E5..         MOV     A,?V0 + 12
   \   0000DB   8E82         MOV     DPL,R6
   \   0000DD   8F83         MOV     DPH,R7
   \   0000DF   E5..         MOV     A,?V0 + 12
   \   0000E1   F0           MOVX    @DPTR,A
   \   0000E2   8E82         MOV     DPL,R6
   \   0000E4   8F83         MOV     DPH,R7
   \   0000E6   A3           INC     DPTR
   \   0000E7   AE82         MOV     R6,DPL
   \   0000E9   AF83         MOV     R7,DPH
   \   0000EB   80CC         SJMP    ??convInt32ToText_4
    111              }
    112          
    113              return pValueToTextBuffer;
   \                     ??convInt32ToText_5:
   \   0000ED   7A..         MOV     R2,#??pValueToTextBuffer & 0xff
   \   0000EF   7B..         MOV     R3,#(??pValueToTextBuffer >> 8) & 0xff
   \   0000F1   7401         MOV     A,#0x1
   \   0000F3   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000F6   7F0E         MOV     R7,#0xe
   \   0000F8   02....       LJMP    ?BANKED_LEAVE_XDATA
    114          }

   \                                 In  segment XDATA_Z, align 1, keep-with-next
   \                     ??pValueToTextBuffer:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z
    115          
    116          #ifndef WIN32
    117          /***********************************************************************************
    118          * @fn          min
    119          *
    120          * @brief       Return minimum of two values
    121          *
    122          * @param       uint8 v1 - value 1
    123          *              uint8 v2 - value 2
    124          *
    125          * @return      uint8 - minimum of two values
    126          */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    127          uint8 min(uint8 v1, uint8 v2)
   \                     min:
    128          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
   \   000000   E9           MOV     A,R1
   \   000001   F8           MOV     R0,A
    129              if(v1 < v2)
   \   000002   E8           MOV     A,R0
   \   000003   C3           CLR     C
   \   000004   9A           SUBB    A,R2
   \   000005   5004         JNC     ??min_0
    130                  return v1;
   \   000007   E8           MOV     A,R0
   \   000008   F9           MOV     R1,A
   \   000009   8002         SJMP    ??min_1
    131              else return v2;
   \                     ??min_0:
   \   00000B   EA           MOV     A,R2
   \   00000C   F9           MOV     R1,A
   \                     ??min_1:
   \   00000D   02....       LJMP    ?BRET
    132          }
    133          
    134          /***********************************************************************************
    135          * @fn          utilReverseBuf
    136          *
    137          * @brief       reverse buffer
    138          *
    139          * @param       uint8 pBuf - pointer to buffer
    140          *              uint8 length - length of buffer
    141          *
    142          * @return      void
    143          */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    144          void utilReverseBuf(uint8* pBuf, uint8 length)
   \                     utilReverseBuf:
    145          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FC           MOV     R4,A
    146             uint8 temp;
    147             uint8* pBufLast = (pBuf + length - 1);
   \   000007   8C..         MOV     ?V0 + 0,R4
   \   000009   75..00       MOV     ?V0 + 1,#0x0
   \   00000C   EA           MOV     A,R2
   \   00000D   25..         ADD     A,?V0 + 0
   \   00000F   F8           MOV     R0,A
   \   000010   EB           MOV     A,R3
   \   000011   35..         ADDC    A,?V0 + 1
   \   000013   F9           MOV     R1,A
   \   000014   E8           MOV     A,R0
   \   000015   24FF         ADD     A,#-0x1
   \   000017   F8           MOV     R0,A
   \   000018   E9           MOV     A,R1
   \   000019   34FF         ADDC    A,#-0x1
   \   00001B   F9           MOV     R1,A
    148          
    149             while(pBufLast > pBuf){
   \                     ??utilReverseBuf_0:
   \   00001C   C3           CLR     C
   \   00001D   EA           MOV     A,R2
   \   00001E   98           SUBB    A,R0
   \   00001F   EB           MOV     A,R3
   \   000020   99           SUBB    A,R1
   \   000021   5029         JNC     ??utilReverseBuf_1
    150               temp = *pBuf;
   \   000023   8A82         MOV     DPL,R2
   \   000025   8B83         MOV     DPH,R3
   \   000027   E0           MOVX    A,@DPTR
   \   000028   FD           MOV     R5,A
    151               *pBuf++ = *pBufLast;
   \   000029   8882         MOV     DPL,R0
   \   00002B   8983         MOV     DPH,R1
   \   00002D   E0           MOVX    A,@DPTR
   \   00002E   8A82         MOV     DPL,R2
   \   000030   8B83         MOV     DPH,R3
   \   000032   F0           MOVX    @DPTR,A
   \   000033   8A82         MOV     DPL,R2
   \   000035   8B83         MOV     DPH,R3
   \   000037   A3           INC     DPTR
   \   000038   AA82         MOV     R2,DPL
   \   00003A   AB83         MOV     R3,DPH
    152               *pBufLast-- = temp;	
   \   00003C   ED           MOV     A,R5
   \   00003D   8882         MOV     DPL,R0
   \   00003F   8983         MOV     DPH,R1
   \   000041   F0           MOVX    @DPTR,A
   \   000042   E8           MOV     A,R0
   \   000043   24FF         ADD     A,#-0x1
   \   000045   F8           MOV     R0,A
   \   000046   E9           MOV     A,R1
   \   000047   34FF         ADDC    A,#-0x1
   \   000049   F9           MOV     R1,A
   \   00004A   80D0         SJMP    ??utilReverseBuf_0
    153            }
    154          }
   \                     ??utilReverseBuf_1:
   \   00004C   7F02         MOV     R7,#0x2
   \   00004E   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??utilChipIdToStr?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    utilChipIdToStr

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??convInt32ToText?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    convInt32ToText

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??min?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    min

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??utilReverseBuf?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    utilReverseBuf

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "2420">`:
   \   000000   32343230     DB "2420"
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "2430">`:
   \   000000   32343330     DB "2430"
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "2431">`:
   \   000000   32343331     DB "2431"
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "2520">`:
   \   000000   32353230     DB "2520"
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "2530">`:
   \   000000   32353330     DB "2530"
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "2531">`:
   \   000000   32353331     DB "2531"
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "2510">`:
   \   000000   32353130     DB "2510"
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "2511">`:
   \   000000   32353131     DB "2511"
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "1110">`:
   \   000000   31313130     DB "1110"
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "1111">`:
   \   000000   31313131     DB "1111"
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "----">`:
   \   000000   2D2D2D2D     DB "----"
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_0:
   \   000000   00000000     DD 0

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_a:
   \   000000   0A000000     DD 10
    155          #endif
    156          
    157          
    158          /***********************************************************************************
    159            Copyright 2007 Texas Instruments Incorporated. All rights reserved.
    160          
    161            IMPORTANT: Your use of this Software is limited to those specific rights
    162            granted under the terms of a software license agreement between the user
    163            who downloaded the software, his/her employer (which must be your employer)
    164            and Texas Instruments Incorporated (the "License").  You may not use this
    165            Software unless you agree to abide by the terms of the License. The License
    166            limits your use, and you acknowledge, that the Software may not be modified,
    167            copied or distributed unless embedded on a Texas Instruments microcontroller
    168            or used solely and exclusively in conjunction with a Texas Instruments radio
    169            frequency transceiver, which is integrated into your product.  Other than for
    170            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
    171            works of, modify, distribute, perform, display or sell this Software and/or
    172            its documentation for any purpose.
    173          
    174            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
    175            PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
    176            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
    177            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
    178            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
    179            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
    180            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
    181            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
    182            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
    183            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
    184            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
    185          
    186            Should you have any questions regarding your right to use this Software,
    187            contact Texas Instruments Incorporated at www.TI.com.
    188          ***********************************************************************************/

   Maximum stack usage in bytes:

     Function        ISTACK PSTACK XSTACK
     --------        ------ ------ ------
     convInt32ToText     1      0     23
     min                 0      0      0
     utilChipIdToStr     0      0      0
     utilReverseBuf      1      0     10


   Segment part sizes:

     Function/Label          Bytes
     --------------          -----
     utilChipIdToStr          107
     convInt32ToText          251
     pValueToTextBuffer        12
     min                       16
     utilReverseBuf            81
     ??utilChipIdToStr?relay    6
     ??convInt32ToText?relay    6
     ??min?relay                6
     ??utilReverseBuf?relay     6
     ?<Constant "2420">         5
     ?<Constant "2430">         5
     ?<Constant "2431">         5
     ?<Constant "2520">         5
     ?<Constant "2530">         5
     ?<Constant "2531">         5
     ?<Constant "2510">         5
     ?<Constant "2511">         5
     ?<Constant "1110">         5
     ?<Constant "1111">         5
     ?<Constant "----">         5
     __Constant_0               4
     __Constant_a               4

 
 455 bytes in segment BANKED_CODE
  24 bytes in segment BANK_RELAYS
  63 bytes in segment XDATA_ROM_C
  12 bytes in segment XDATA_Z
 
 479 bytes of CODE  memory
  55 bytes of CONST memory (+ 8 bytes shared)
  12 bytes of XDATA memory

Errors: none
Warnings: none
