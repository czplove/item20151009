///////////////////////////////////////////////////////////////////////////////
//                                                                            /
// IAR C/C++ Compiler V8.10.1.10194/W32 for 8051        05/Dec/2014  10:43:49 /
// Copyright 2004-2011 IAR Systems AB.                                        /
//                                                                            /
//    Core               =  plain                                             /
//    Code model         =  banked                                            /
//    Data model         =  large                                             /
//    Calling convention =  xdata reentrant                                   /
//    Constant location  =  data_rom                                          /
//    Dptr setup         =  1,16                                              /
//    Source file        =  G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(2 /
//                          51)\Projects\zstack\Samples\SampleApp\Source\zdo_ /
//                          sample.c                                          /
//    Command line       =  -f "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_A /
//                          PP(251)\Projects\zstack\Samples\SampleApp\CC2530D /
//                          B\..\..\..\Tools\CC2530DB\f8wRouter.cfg"          /
//                          (-DCPU32MHZ -DROOT=__near_func                    /
//                          -DMAC_CFG_APP_PENDING_QUEUE=TRUE                  /
//                          -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8        /
//                          -DMAC_CFG_RX_MAX=5 -DRTR_NWK) -f                  /
//                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP( /
//                          251)\Projects\zstack\Samples\SampleApp\CC2530DB\. /
//                          .\..\..\Tools\CC2530DB\f8wConfig.cfg"             /
//                          (-DZIGBEEPRO -DSECURE=1 -DZG_SECURE_DYNAMIC=0     /
//                          -DREFLECTOR -DZDAPP_CONFIG_PAN_ID=0xFFFF          /
//                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_M /
//                          ASK=0x007F -DBEACON_REQUEST_DELAY=100             /
//                          -DBEACON_REQ_DELAY_MASK=0x00FF                    /
//                          -DLINK_STATUS_JITTER_MASK=0x007F                  /
//                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_P /
//                          OLLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=60          /
//                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3   /
//                          -DNWK_MAX_DATA_RETRIES=2                          /
//                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9        /
//                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=30          /
//                          -DNWK_MAX_BINDING_ENTRIES=8                       /
//                          -DMAX_BINDING_CLUSTER_IDS=4 -DASSERT_RESET        /
//                          -DMAC_MAX_FRAME_SIZE=116                          /
//                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const    /
//                          __code" -DGENERIC=__generic                       /
//                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=8000       /
//                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=1000) /
//                           -DREJOIN_POLL_RATE=440                           /
//                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP( /
//                          251)\Projects\zstack\Samples\SampleApp\Source\zdo /
//                          _sample.c" -D NV_INIT -D NV_RESTORE -D            /
//                          HOLD_AUTO_START -D MT_TASK -D MT_APP_FUNC -D      /
//                          MT_SYS_FUNC -D MT_ZDO_FUNC -D MT_ZDO_MGMT -D      /
//                          ISR_KEYINTERRUPT -D xWDT_IN_PM1 -D                /
//                          xOSC32K_CRYSTAL_INSTALLED=0 -D xLARGER_NETWORK    /
//                          -D xPOWER_PA -D SR_SOKET -lC                      /
//                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP( /
//                          251)\Projects\zstack\Samples\SampleApp\CC2530DB\S /
//                          R_SOKET_device\List\" -lA                         /
//                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP( /
//                          251)\Projects\zstack\Samples\SampleApp\CC2530DB\S /
//                          R_SOKET_device\List\" --diag_suppress             /
//                          Pe001,Pa010 -o "G:\TI\Package_libary\FORMAL\RE_1_ /
//                          2_0_FORMAL_APP(251)\Projects\zstack\Samples\Sampl /
//                          eApp\CC2530DB\SR_SOKET_device\Obj\" -e --no_cse   /
//                          --no_unroll --no_inline --no_code_motion          /
//                          --no_tbaa --debug --core=plain --dptr=16,1        /
//                          --data_model=large --code_model=banked            /
//                          --calling_convention=xdata_reentrant              /
//                          --place_constants=data_rom --nr_virtual_regs 16   /
//                          -I "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_A /
//                          PP(251)\Projects\zstack\Samples\SampleApp\CC2530D /
//                          B\" -I "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORM /
//                          AL_APP(251)\Projects\zstack\Samples\SampleApp\CC2 /
//                          530DB\..\Source\" -I "G:\TI\Package_libary\FORMAL /
//                          \RE_1_2_0_FORMAL_APP(251)\Projects\zstack\Samples /
//                          \SampleApp\CC2530DB\..\..\..\ZMain\TI2530DB\" -I  /
//                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP( /
//                          251)\Projects\zstack\Samples\SampleApp\CC2530DB\. /
//                          .\..\..\..\..\Components\hal\include\" -I         /
//                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP( /
//                          251)\Projects\zstack\Samples\SampleApp\CC2530DB\. /
//                          .\..\..\..\..\Components\hal\target\CC2530EB\"    /
//                          -I "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_A /
//                          PP(251)\Projects\zstack\Samples\SampleApp\CC2530D /
//                          B\..\..\..\..\..\Components\mac\include\" -I      /
//                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP( /
//                          251)\Projects\zstack\Samples\SampleApp\CC2530DB\. /
//                          .\..\..\..\..\Components\mac\high_level\" -I      /
//                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP( /
//                          251)\Projects\zstack\Samples\SampleApp\CC2530DB\. /
//                          .\..\..\..\..\Components\mac\low_level\srf04\"    /
//                          -I "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_A /
//                          PP(251)\Projects\zstack\Samples\SampleApp\CC2530D /
//                          B\..\..\..\..\..\Components\mac\low_level\srf04\s /
//                          ingle_chip\" -I "G:\TI\Package_libary\FORMAL\RE_1 /
//                          _2_0_FORMAL_APP(251)\Projects\zstack\Samples\Samp /
//                          leApp\CC2530DB\..\..\..\..\..\Components\mt\" -I  /
//                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP( /
//                          251)\Projects\zstack\Samples\SampleApp\CC2530DB\. /
//                          .\..\..\..\..\Components\osal\include\" -I        /
//                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP( /
//                          251)\Projects\zstack\Samples\SampleApp\CC2530DB\. /
//                          .\..\..\..\..\Components\services\saddr\" -I      /
//                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP( /
//                          251)\Projects\zstack\Samples\SampleApp\CC2530DB\. /
//                          .\..\..\..\..\Components\services\sdata\" -I      /
//                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP( /
//                          251)\Projects\zstack\Samples\SampleApp\CC2530DB\. /
//                          .\..\..\..\..\Components\stack\af\" -I            /
//                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP( /
//                          251)\Projects\zstack\Samples\SampleApp\CC2530DB\. /
//                          .\..\..\..\..\Components\stack\nwk\" -I           /
//                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP( /
//                          251)\Projects\zstack\Samples\SampleApp\CC2530DB\. /
//                          .\..\..\..\..\Components\stack\sapi\" -I          /
//                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP( /
//                          251)\Projects\zstack\Samples\SampleApp\CC2530DB\. /
//                          .\..\..\..\..\Components\stack\sec\" -I           /
//                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP( /
//                          251)\Projects\zstack\Samples\SampleApp\CC2530DB\. /
//                          .\..\..\..\..\Components\stack\sys\" -I           /
//                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP( /
//                          251)\Projects\zstack\Samples\SampleApp\CC2530DB\. /
//                          .\..\..\..\..\Components\stack\zdo\" -I           /
//                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP( /
//                          251)\Projects\zstack\Samples\SampleApp\CC2530DB\. /
//                          .\..\..\..\..\Components\zmac\" -I                /
//                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP( /
//                          251)\Projects\zstack\Samples\SampleApp\CC2530DB\. /
//                          .\..\..\..\..\Components\zmac\f8w\" -On           /
//                          --require_prototypes                              /
//    List file          =  G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(2 /
//                          51)\Projects\zstack\Samples\SampleApp\CC2530DB\SR /
//                          _SOKET_device\List\zdo_sample.s51                 /
//                                                                            /
//                                                                            /
///////////////////////////////////////////////////////////////////////////////

        NAME zdo_sample

        RTMODEL "__SystemLibrary", "CLib"
        RTMODEL "__calling_convention", "xdata_reentrant"
        RTMODEL "__code_model", "banked"
        RTMODEL "__core", "plain"
        RTMODEL "__data_model", "large"
        RTMODEL "__dptr_size", "16"
        RTMODEL "__extended_stack", "disabled"
        RTMODEL "__location_for_constants", "data"
        RTMODEL "__number_of_dptrs", "1"
        RTMODEL "__rt_version", "1"

        RSEG DOVERLAY:DATA:NOROOT(0)
        RSEG IOVERLAY:IDATA:NOROOT(0)
        RSEG ISTACK:IDATA:NOROOT(0)
        RSEG PSTACK:XDATA:NOROOT(0)
        RSEG XSTACK:XDATA:NOROOT(0)

        EXTERN ?ALLOC_XSTACK8
        EXTERN ?BANKED_ENTER_XDATA
        EXTERN ?BANKED_LEAVE_XDATA
        EXTERN ?BDISPATCH
        EXTERN ?BRET
        EXTERN ?DEALLOC_XSTACK8
        EXTERN ?L_MOV_TO_X
        EXTERN ?L_SHL
        EXTERN ?MOVE_LONG8_XDATA_XDATA
        EXTERN ?PUSH_XSTACK8_X_TWO
        EXTERN ?PUSH_XSTACK_I_ONE
        EXTERN ?PUSH_XSTACK_I_TWO
        EXTERN ?US_DIV_MOD
        EXTERN ?V0
        EXTERN ?XLOAD_R2345
        EXTERN ?XSP
        EXTERN ?XSTACK_DISP0_8
        EXTERN ?XSTORE_R2345
        EXTERN __INIT_XDATA_I
        EXTERN __INIT_XDATA_Z

        PUBLIC ??APPLY_TO_JOIN_OF_KEY?relay
        FUNCTION ??APPLY_TO_JOIN_OF_KEY?relay,0203H
        PUBLIC ??APP_DEAL_WITH_ASSOCIATED?relay
        FUNCTION ??APP_DEAL_WITH_ASSOCIATED?relay,0203H
        PUBLIC ??APP_ENDDEVICE_ACK?relay
        FUNCTION ??APP_ENDDEVICE_ACK?relay,0203H
        PUBLIC ??APP_JOIN_DEAL_WITH?relay
        FUNCTION ??APP_JOIN_DEAL_WITH?relay,0203H
        PUBLIC ??APP_JOIN_INIT?relay
        FUNCTION ??APP_JOIN_INIT?relay,0203H
        PUBLIC ??APP_JOIN_START_EVT?relay
        FUNCTION ??APP_JOIN_START_EVT?relay,0203H
        PUBLIC ??APP_NORMAL_COMMAND?relay
        FUNCTION ??APP_NORMAL_COMMAND?relay,0203H
        PUBLIC ??APP_OS_DEAL_WITH?relay
        FUNCTION ??APP_OS_DEAL_WITH?relay,0203H
        PUBLIC ??Change_Net_Set?relay
        FUNCTION ??Change_Net_Set?relay,0203H
        PUBLIC ??RESTORE_TO_FACTORY?relay
        FUNCTION ??RESTORE_TO_FACTORY?relay,0203H
        PUBLIC ??RemoveStaleNode?relay
        FUNCTION ??RemoveStaleNode?relay,0203H
        PUBLIC ??RemoveStaleRouter?relay
        FUNCTION ??RemoveStaleRouter?relay,0203H
        PUBLIC ??SampleApp_GetExtendAddr?relay
        FUNCTION ??SampleApp_GetExtendAddr?relay,0203H
        PUBLIC ??SampleApp_GetShortAddr?relay
        FUNCTION ??SampleApp_GetShortAddr?relay,0203H
        PUBLIC ??SampleApp_ProcessNwkaddrMessage?relay
        FUNCTION ??SampleApp_ProcessNwkaddrMessage?relay,0203H
        PUBLIC ??SampleApp_ROUTER_ProcessPeriodicMessage_Data?
        FUNCTION ??SampleApp_ROUTER_ProcessPeriodicMessage_Data?,0203H
        PUBLIC ??SampleApp_SendNwkaddrMessage?relay
        FUNCTION ??SampleApp_SendNwkaddrMessage?relay,0203H
        PUBLIC ??SampleApp_SendPeriodicMessage?relay
        FUNCTION ??SampleApp_SendPeriodicMessage?relay,0203H
        PUBLIC ??ZDApp_NwkDescListProcessing?relay
        FUNCTION ??ZDApp_NwkDescListProcessing?relay,0203H
        PUBLIC ??ZDO_ACK_DEAL_WITH?relay
        FUNCTION ??ZDO_ACK_DEAL_WITH?relay,0203H
        PUBLIC ??ZDO_DEVICE_DISC?relay
        FUNCTION ??ZDO_DEVICE_DISC?relay,0203H
        PUBLIC ??ZDO_REJOIN_ERROR?relay
        FUNCTION ??ZDO_REJOIN_ERROR?relay,0203H
        PUBLIC ??hextoword1?relay
        FUNCTION ??hextoword1?relay,0203H
        PUBLIC ??hextoword2?relay
        FUNCTION ??hextoword2?relay,0203H
        PUBLIC ??sampleAPP_sendRS_periodMessage?relay
        FUNCTION ??sampleAPP_sendRS_periodMessage?relay,0203H
        PUBLIC ??wordtohex?relay
        FUNCTION ??wordtohex?relay,0203H
        PUBLIC ??zb_ReadConfiguration?relay
        FUNCTION ??zb_ReadConfiguration?relay,0203H
        PUBLIC ??zb_StartRequest?relay
        FUNCTION ??zb_StartRequest?relay,0203H
        PUBLIC ??zb_WriteConfiguration?relay
        FUNCTION ??zb_WriteConfiguration?relay,0203H
        PUBLIC APPLY_TO_JOIN_OF_KEY
        FUNCTION APPLY_TO_JOIN_OF_KEY,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME XSTACK, 1, STACK
        PUBLIC APP_DEAL_WITH_ASSOCIATED
        FUNCTION APP_DEAL_WITH_ASSOCIATED,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        PUBLIC APP_ENDDEVICE_ACK
        FUNCTION APP_ENDDEVICE_ACK,0203H
        ARGFRAME XSTACK, 0, STACK
        PUBLIC APP_JOIN_DEAL_WITH
        FUNCTION APP_JOIN_DEAL_WITH,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 23, STACK
        PUBLIC APP_JOIN_INIT
        FUNCTION APP_JOIN_INIT,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 15, STACK
        PUBLIC APP_JOIN_START_EVT
        FUNCTION APP_JOIN_START_EVT,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME XSTACK, 1, STACK
        PUBLIC APP_NORMAL_COMMAND
        FUNCTION APP_NORMAL_COMMAND,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME XSTACK, 93, STACK
        PUBLIC APP_OS_DEAL_WITH
        FUNCTION APP_OS_DEAL_WITH,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        PUBLIC Change_Net_Set
        FUNCTION Change_Net_Set,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC Child_list
        PUBLIC DEEP_POLL_FLAG
        PUBLIC HEART_NEED_ACK_FLAG
        PUBLIC Heart_mesg_flag
        PUBLIC Join_isset_flag
        PUBLIC LEAVE_NET_SET_FLAG
        PUBLIC Minitue_join_delay_time
        PUBLIC New_Channel_list
        PUBLIC New_Net_flag
        PUBLIC New_Panid
        PUBLIC New_join_delay_time
        PUBLIC New_join_role_flag
        PUBLIC OS_FLAG
        PUBLIC POWER_PA_FLAG
        PUBLIC POWER_SAVING_FLAG
        PUBLIC RESTORE_TO_FACTORY
        FUNCTION RESTORE_TO_FACTORY,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 33, STACK
        PUBLIC RTR_NWK_FLAG
        PUBLIC RemoveStaleNode
        FUNCTION RemoveStaleNode,021203H
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 27, STACK
        PUBLIC RemoveStaleRouter
        FUNCTION RemoveStaleRouter,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 27, STACK
        PUBLIC SampleApp_GetExtendAddr
        FUNCTION SampleApp_GetExtendAddr,021203H
        ARGFRAME XSTACK, 64, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 14, STACK
        PUBLIC SampleApp_GetShortAddr
        FUNCTION SampleApp_GetShortAddr,021203H
        ARGFRAME XSTACK, 64, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 14, STACK
        PUBLIC SampleApp_ProcessNwkaddrMessage
        FUNCTION SampleApp_ProcessNwkaddrMessage,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME XSTACK, 26, STACK
        PUBLIC SampleApp_ROUTER_ProcessPeriodicMessage_Data
        FUNCTION SampleApp_ROUTER_ProcessPeriodicMessage_Data,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME XSTACK, 35, STACK
        PUBLIC SampleApp_SendNwkaddrMessage
        FUNCTION SampleApp_SendNwkaddrMessage,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 51, STACK
        PUBLIC SampleApp_SendPeriodicMessage
        FUNCTION SampleApp_SendPeriodicMessage,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 26, STACK
        PUBLIC SampleApp_TaskID
        PUBLIC SampleApp_TransID
        PUBLIC SampleApp_epDesc
        PUBLIC Second_join_delay_time
        PUBWEAK WDCTL
        PUBLIC ZDApp_NwkDescListProcessing
        FUNCTION ZDApp_NwkDescListProcessing,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        PUBLIC ZDO_ACK_DEAL_WITH
        FUNCTION ZDO_ACK_DEAL_WITH,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC ZDO_DEVICE_DISC
        FUNCTION ZDO_DEVICE_DISC,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        PUBLIC ZDO_REJOIN_ERROR
        FUNCTION ZDO_REJOIN_ERROR,021203H
        ARGFRAME XSTACK, 0, STACK
        PUBWEAK _A_IEN0
        PUBWEAK __Constant_318c800
        PUBLIC defaultKey
        PUBLIC extendaddr_mem
        PUBLIC hextoword1
        FUNCTION hextoword1,0203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUBLIC hextoword2
        FUNCTION hextoword2,0203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 1, STACK
        PUBLIC sampleAPP_sendRS_periodMessage
        FUNCTION sampleAPP_sendRS_periodMessage,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 73, STACK
        PUBLIC shortddr_mem
        PUBLIC wordtohex
        FUNCTION wordtohex,0203H
        ARGFRAME XSTACK, 17, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUBLIC zb_ReadConfiguration
        FUNCTION zb_ReadConfiguration,021203H
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 17, STACK
        PUBLIC zb_StartRequest
        FUNCTION zb_StartRequest,021203H
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 10, STACK
        PUBLIC zb_WriteConfiguration
        FUNCTION zb_WriteConfiguration,021203H
        ARGFRAME XSTACK, 1, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 16, STACK
        
        CFI Names cfiNames0
        CFI StackFrame CFA_SP SP IDATA
        CFI StackFrame CFA_PSP16 PSP16 XDATA
        CFI StackFrame CFA_XSP16 XSP16 XDATA
        CFI StaticOverlayFrame CFA_IOVERLAY IOVERLAY
        CFI StaticOverlayFrame CFA_DOVERLAY DOVERLAY
        CFI Resource `PSW.CY`:1, `B.BR0`:1, `B.BR1`:1, `B.BR2`:1, `B.BR3`:1
        CFI Resource `B.BR4`:1, `B.BR5`:1, `B.BR6`:1, `B.BR7`:1, `VB.BR8`:1
        CFI Resource `VB.BR9`:1, `VB.BR10`:1, `VB.BR11`:1, `VB.BR12`:1
        CFI Resource `VB.BR13`:1, `VB.BR14`:1, `VB.BR15`:1, VB:8, B:8, A:8
        CFI Resource PSW:8, DPL0:8, DPH0:8, R0:8, R1:8, R2:8, R3:8, R4:8, R5:8
        CFI Resource R6:8, R7:8, V0:8, V1:8, V2:8, V3:8, V4:8, V5:8, V6:8, V7:8
        CFI Resource V8:8, V9:8, V10:8, V11:8, V12:8, V13:8, V14:8, V15:8, SP:8
        CFI Resource PSPH:8, PSPL:8, PSP16:16, XSPH:8, XSPL:8, XSP16:16
        CFI VirtualResource ?RET:24
        CFI Resource ?BRET_EXT:8
        CFI VirtualResource ?RET_HIGH:8, ?RET_LOW:8
        CFI ResourceParts PSP16 PSPH, PSPL
        CFI ResourceParts XSP16 XSPH, XSPL
        CFI ResourceParts ?RET ?BRET_EXT, ?RET_HIGH, ?RET_LOW
        CFI EndNames cfiNames0
        
        CFI Common cfiCommon0 Using cfiNames0
        CFI CodeAlign 1
        CFI DataAlign -1
        CFI ReturnAddress ?RET CODE
        CFI CFA_DOVERLAY Used
        CFI CFA_IOVERLAY Used
        CFI CFA_SP SP+-3
        CFI CFA_PSP16 PSP16+0
        CFI CFA_XSP16 XSP16+0
        CFI `PSW.CY` SameValue
        CFI `B.BR0` SameValue
        CFI `B.BR1` SameValue
        CFI `B.BR2` SameValue
        CFI `B.BR3` SameValue
        CFI `B.BR4` SameValue
        CFI `B.BR5` SameValue
        CFI `B.BR6` SameValue
        CFI `B.BR7` SameValue
        CFI `VB.BR8` SameValue
        CFI `VB.BR9` SameValue
        CFI `VB.BR10` SameValue
        CFI `VB.BR11` SameValue
        CFI `VB.BR12` SameValue
        CFI `VB.BR13` SameValue
        CFI `VB.BR14` SameValue
        CFI `VB.BR15` SameValue
        CFI VB SameValue
        CFI B Undefined
        CFI A Undefined
        CFI PSW SameValue
        CFI DPL0 SameValue
        CFI DPH0 SameValue
        CFI R0 Undefined
        CFI R1 Undefined
        CFI R2 Undefined
        CFI R3 Undefined
        CFI R4 Undefined
        CFI R5 Undefined
        CFI R6 SameValue
        CFI R7 SameValue
        CFI V0 SameValue
        CFI V1 SameValue
        CFI V2 SameValue
        CFI V3 SameValue
        CFI V4 SameValue
        CFI V5 SameValue
        CFI V6 SameValue
        CFI V7 SameValue
        CFI V8 SameValue
        CFI V9 SameValue
        CFI V10 SameValue
        CFI V11 SameValue
        CFI V12 SameValue
        CFI V13 SameValue
        CFI V14 SameValue
        CFI V15 SameValue
        CFI PSPH Undefined
        CFI PSPL Undefined
        CFI XSPH Undefined
        CFI XSPL Undefined
        CFI ?RET Concat
        CFI ?BRET_EXT Frame(CFA_SP, 3)
        CFI ?RET_HIGH Frame(CFA_SP, 2)
        CFI ?RET_LOW Frame(CFA_SP, 1)
        CFI EndCommon cfiCommon0
        
nwk_getNwkDescList  SYMBOL "nwk_getNwkDescList"
nwk_ExtPANIDValid   SYMBOL "nwk_ExtPANIDValid"
sAddrExtCmp         SYMBOL "sAddrExtCmp"
osal_pwrmgr_device  SYMBOL "osal_pwrmgr_device"
osal_rand           SYMBOL "osal_rand"
ZDApp_NetworkInit   SYMBOL "ZDApp_NetworkInit"
nwkNeighborInitTable SYMBOL "nwkNeighborInitTable"
ZDApp_SendMsg       SYMBOL "ZDApp_SendMsg"
osal_nv_item_init   SYMBOL "osal_nv_item_init"
osal_nv_read        SYMBOL "osal_nv_read"
osal_start_timerEx  SYMBOL "osal_start_timerEx"
NLME_PermitJoiningRequest SYMBOL "NLME_PermitJoiningRequest"
ZDP_MgmtPermitJoinReq SYMBOL "ZDP_MgmtPermitJoinReq"
osal_nv_write       SYMBOL "osal_nv_write"
osal_mem_free       SYMBOL "osal_mem_free"
NLME_GetCoordShortAddr SYMBOL "NLME_GetCoordShortAddr"
AF_DataRequest      SYMBOL "AF_DataRequest"
osal_nv_item_len    SYMBOL "osal_nv_item_len"
osal_mem_alloc      SYMBOL "osal_mem_alloc"
NLME_GetShortAddr   SYMBOL "NLME_GetShortAddr"
NLME_GetExtAddr     SYMBOL "NLME_GetExtAddr"
AssocCount          SYMBOL "AssocCount"
HalLedBlink         SYMBOL "HalLedBlink"
ZMacSetTransmitPower SYMBOL "ZMacSetTransmitPower"
NLME_SetPollRate    SYMBOL "NLME_SetPollRate"
ZDOInitDevice       SYMBOL "ZDOInitDevice"
AddrMgrEntryGet     SYMBOL "AddrMgrEntryGet"
NLME_LeaveReq       SYMBOL "NLME_LeaveReq"
ZMacSetReq          SYMBOL "ZMacSetReq"
ZDApp_NwkStateUpdateCB SYMBOL "ZDApp_NwkStateUpdateCB"
nwkTransmissionFailures SYMBOL "nwkTransmissionFailures"
??AF_DataRequest?relay SYMBOL "?relay", AF_DataRequest
??AddrMgrEntryGet?relay SYMBOL "?relay", AddrMgrEntryGet
??AssocCount?relay  SYMBOL "?relay", AssocCount
??HalLedBlink?relay SYMBOL "?relay", HalLedBlink
??NLME_GetCoordShortAddr?relay SYMBOL "?relay", NLME_GetCoordShortAddr
??NLME_GetExtAddr?relay SYMBOL "?relay", NLME_GetExtAddr
??NLME_GetShortAddr?relay SYMBOL "?relay", NLME_GetShortAddr
??NLME_LeaveReq?relay SYMBOL "?relay", NLME_LeaveReq
??NLME_PermitJoiningRequest?relay SYMBOL "?relay", NLME_PermitJoiningRequest
??NLME_SetPollRate?relay SYMBOL "?relay", NLME_SetPollRate
??ZDApp_NetworkInit?relay SYMBOL "?relay", ZDApp_NetworkInit
??ZDApp_NwkStateUpdateCB?relay SYMBOL "?relay", ZDApp_NwkStateUpdateCB
??ZDApp_SendMsg?relay SYMBOL "?relay", ZDApp_SendMsg
??ZDOInitDevice?relay SYMBOL "?relay", ZDOInitDevice
??ZDP_MgmtPermitJoinReq?relay SYMBOL "?relay", ZDP_MgmtPermitJoinReq
??ZMacSetReq?relay  SYMBOL "?relay", ZMacSetReq
??ZMacSetTransmitPower?relay SYMBOL "?relay", ZMacSetTransmitPower
??nwkNeighborInitTable?relay SYMBOL "?relay", nwkNeighborInitTable
??nwkTransmissionFailures?relay SYMBOL "?relay", nwkTransmissionFailures
??nwk_ExtPANIDValid?relay SYMBOL "?relay", nwk_ExtPANIDValid
??nwk_getNwkDescList?relay SYMBOL "?relay", nwk_getNwkDescList
??osal_mem_alloc?relay SYMBOL "?relay", osal_mem_alloc
??osal_mem_free?relay SYMBOL "?relay", osal_mem_free
??osal_nv_item_init?relay SYMBOL "?relay", osal_nv_item_init
??osal_nv_item_len?relay SYMBOL "?relay", osal_nv_item_len
??osal_nv_read?relay SYMBOL "?relay", osal_nv_read
??osal_nv_write?relay SYMBOL "?relay", osal_nv_write
??osal_pwrmgr_device?relay SYMBOL "?relay", osal_pwrmgr_device
??osal_rand?relay   SYMBOL "?relay", osal_rand
??osal_start_timerEx?relay SYMBOL "?relay", osal_start_timerEx
??sAddrExtCmp?relay SYMBOL "?relay", sAddrExtCmp
APPLY_TO_JOIN_OF_KEY SYMBOL "APPLY_TO_JOIN_OF_KEY"
??APPLY_TO_JOIN_OF_KEY?relay SYMBOL "?relay", APPLY_TO_JOIN_OF_KEY
APP_DEAL_WITH_ASSOCIATED SYMBOL "APP_DEAL_WITH_ASSOCIATED"
??APP_DEAL_WITH_ASSOCIATED?relay SYMBOL "?relay", APP_DEAL_WITH_ASSOCIATED
APP_ENDDEVICE_ACK   SYMBOL "APP_ENDDEVICE_ACK"
??APP_ENDDEVICE_ACK?relay SYMBOL "?relay", APP_ENDDEVICE_ACK
APP_JOIN_DEAL_WITH  SYMBOL "APP_JOIN_DEAL_WITH"
??APP_JOIN_DEAL_WITH?relay SYMBOL "?relay", APP_JOIN_DEAL_WITH
APP_JOIN_INIT       SYMBOL "APP_JOIN_INIT"
??APP_JOIN_INIT?relay SYMBOL "?relay", APP_JOIN_INIT
APP_JOIN_START_EVT  SYMBOL "APP_JOIN_START_EVT"
??APP_JOIN_START_EVT?relay SYMBOL "?relay", APP_JOIN_START_EVT
APP_NORMAL_COMMAND  SYMBOL "APP_NORMAL_COMMAND"
??APP_NORMAL_COMMAND?relay SYMBOL "?relay", APP_NORMAL_COMMAND
APP_OS_DEAL_WITH    SYMBOL "APP_OS_DEAL_WITH"
??APP_OS_DEAL_WITH?relay SYMBOL "?relay", APP_OS_DEAL_WITH
Change_Net_Set      SYMBOL "Change_Net_Set"
??Change_Net_Set?relay SYMBOL "?relay", Change_Net_Set
RESTORE_TO_FACTORY  SYMBOL "RESTORE_TO_FACTORY"
??RESTORE_TO_FACTORY?relay SYMBOL "?relay", RESTORE_TO_FACTORY
RemoveStaleNode     SYMBOL "RemoveStaleNode"
??RemoveStaleNode?relay SYMBOL "?relay", RemoveStaleNode
RemoveStaleRouter   SYMBOL "RemoveStaleRouter"
??RemoveStaleRouter?relay SYMBOL "?relay", RemoveStaleRouter
SampleApp_GetExtendAddr SYMBOL "SampleApp_GetExtendAddr"
??SampleApp_GetExtendAddr?relay SYMBOL "?relay", SampleApp_GetExtendAddr
SampleApp_GetShortAddr SYMBOL "SampleApp_GetShortAddr"
??SampleApp_GetShortAddr?relay SYMBOL "?relay", SampleApp_GetShortAddr
SampleApp_ProcessNwkaddrMessage SYMBOL "SampleApp_ProcessNwkaddrMessage"
??SampleApp_ProcessNwkaddrMessage?relay SYMBOL "?relay", SampleApp_ProcessNwkaddrMessage
SampleApp_ROUTER_ProcessPeriodicMessage_Data SYMBOL "SampleApp_ROUTER_ProcessPeriodicMessage_Data"
??SampleApp_ROUTER_ProcessPeriodicMessage_Data? SYMBOL "?relay", SampleApp_ROUTER_ProcessPeriodicMessage_Data
SampleApp_SendNwkaddrMessage SYMBOL "SampleApp_SendNwkaddrMessage"
??SampleApp_SendNwkaddrMessage?relay SYMBOL "?relay", SampleApp_SendNwkaddrMessage
SampleApp_SendPeriodicMessage SYMBOL "SampleApp_SendPeriodicMessage"
??SampleApp_SendPeriodicMessage?relay SYMBOL "?relay", SampleApp_SendPeriodicMessage
ZDApp_NwkDescListProcessing SYMBOL "ZDApp_NwkDescListProcessing"
??ZDApp_NwkDescListProcessing?relay SYMBOL "?relay", ZDApp_NwkDescListProcessing
ZDO_ACK_DEAL_WITH   SYMBOL "ZDO_ACK_DEAL_WITH"
??ZDO_ACK_DEAL_WITH?relay SYMBOL "?relay", ZDO_ACK_DEAL_WITH
ZDO_DEVICE_DISC     SYMBOL "ZDO_DEVICE_DISC"
??ZDO_DEVICE_DISC?relay SYMBOL "?relay", ZDO_DEVICE_DISC
ZDO_REJOIN_ERROR    SYMBOL "ZDO_REJOIN_ERROR"
??ZDO_REJOIN_ERROR?relay SYMBOL "?relay", ZDO_REJOIN_ERROR
hextoword1          SYMBOL "hextoword1"
??hextoword1?relay  SYMBOL "?relay", hextoword1
hextoword2          SYMBOL "hextoword2"
??hextoword2?relay  SYMBOL "?relay", hextoword2
sampleAPP_sendRS_periodMessage SYMBOL "sampleAPP_sendRS_periodMessage"
??sampleAPP_sendRS_periodMessage?relay SYMBOL "?relay", sampleAPP_sendRS_periodMessage
wordtohex           SYMBOL "wordtohex"
??wordtohex?relay   SYMBOL "?relay", wordtohex
zb_ReadConfiguration SYMBOL "zb_ReadConfiguration"
??zb_ReadConfiguration?relay SYMBOL "?relay", zb_ReadConfiguration
zb_StartRequest     SYMBOL "zb_StartRequest"
??zb_StartRequest?relay SYMBOL "?relay", zb_StartRequest
zb_WriteConfiguration SYMBOL "zb_WriteConfiguration"
??zb_WriteConfiguration?relay SYMBOL "?relay", zb_WriteConfiguration

        EXTERN nwk_getNwkDescList
        FUNCTION nwk_getNwkDescList,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN nwk_ExtPANIDValid
        FUNCTION nwk_ExtPANIDValid,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN sAddrExtCmp
        FUNCTION sAddrExtCmp,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_pwrmgr_device
        FUNCTION osal_pwrmgr_device,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_rand
        FUNCTION osal_rand,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 19, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDApp_NetworkInit
        FUNCTION ZDApp_NetworkInit,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN Onboard_soft_reset
        FUNCTION Onboard_soft_reset,0202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN nwkNeighborInitTable
        FUNCTION nwkNeighborInitTable,0202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDApp_SendMsg
        FUNCTION ZDApp_SendMsg,0202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_nv_item_init
        FUNCTION osal_nv_item_init,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 86, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_nv_read
        FUNCTION osal_nv_read,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 17, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_start_timerEx
        FUNCTION osal_start_timerEx,0202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_PermitJoiningRequest
        FUNCTION NLME_PermitJoiningRequest,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 19, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDP_MgmtPermitJoinReq
        FUNCTION ZDP_MgmtPermitJoinReq,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 19, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_nv_write
        FUNCTION osal_nv_write,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 88, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_mem_free
        FUNCTION osal_mem_free,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_GetCoordShortAddr
        FUNCTION NLME_GetCoordShortAddr,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN AF_DataRequest
        FUNCTION AF_DataRequest,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 93, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_nv_item_len
        FUNCTION osal_nv_item_len,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_mem_alloc
        FUNCTION osal_mem_alloc,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_GetShortAddr
        FUNCTION NLME_GetShortAddr,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 26, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_GetExtAddr
        FUNCTION NLME_GetExtAddr,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN AssocCount
        FUNCTION AssocCount,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN HalLedBlink
        FUNCTION HalLedBlink,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZMacSetTransmitPower
        FUNCTION ZMacSetTransmitPower,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_SetPollRate
        FUNCTION NLME_SetPollRate,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDOInitDevice
        FUNCTION ZDOInitDevice,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN AddrMgrEntryGet
        FUNCTION AddrMgrEntryGet,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 27, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_LeaveReq
        FUNCTION NLME_LeaveReq,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 27, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZMacSetReq
        FUNCTION ZMacSetReq,0202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDApp_NwkStateUpdateCB
        FUNCTION ZDApp_NwkStateUpdateCB,0202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN nwkTransmissionFailures
        FUNCTION nwkTransmissionFailures,0202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ??AF_DataRequest?relay
        FUNCTION ??AF_DataRequest?relay,00H
        EXTERN ??AddrMgrEntryGet?relay
        FUNCTION ??AddrMgrEntryGet?relay,00H
        EXTERN ??AssocCount?relay
        FUNCTION ??AssocCount?relay,00H
        EXTERN ??HalLedBlink?relay
        FUNCTION ??HalLedBlink?relay,00H
        EXTERN ??NLME_GetCoordShortAddr?relay
        FUNCTION ??NLME_GetCoordShortAddr?relay,00H
        EXTERN ??NLME_GetExtAddr?relay
        FUNCTION ??NLME_GetExtAddr?relay,00H
        EXTERN ??NLME_GetShortAddr?relay
        FUNCTION ??NLME_GetShortAddr?relay,00H
        EXTERN ??NLME_LeaveReq?relay
        FUNCTION ??NLME_LeaveReq?relay,00H
        EXTERN ??NLME_PermitJoiningRequest?relay
        FUNCTION ??NLME_PermitJoiningRequest?relay,00H
        EXTERN ??NLME_SetPollRate?relay
        FUNCTION ??NLME_SetPollRate?relay,00H
        EXTERN ??ZDApp_NetworkInit?relay
        FUNCTION ??ZDApp_NetworkInit?relay,00H
        EXTERN ??ZDApp_NwkStateUpdateCB?relay
        FUNCTION ??ZDApp_NwkStateUpdateCB?relay,00H
        EXTERN ??ZDApp_SendMsg?relay
        FUNCTION ??ZDApp_SendMsg?relay,00H
        EXTERN ??ZDOInitDevice?relay
        FUNCTION ??ZDOInitDevice?relay,00H
        EXTERN ??ZDP_MgmtPermitJoinReq?relay
        FUNCTION ??ZDP_MgmtPermitJoinReq?relay,00H
        EXTERN ??ZMacSetReq?relay
        FUNCTION ??ZMacSetReq?relay,00H
        EXTERN ??ZMacSetTransmitPower?relay
        FUNCTION ??ZMacSetTransmitPower?relay,00H
        EXTERN ??nwkNeighborInitTable?relay
        FUNCTION ??nwkNeighborInitTable?relay,00H
        EXTERN ??nwkTransmissionFailures?relay
        FUNCTION ??nwkTransmissionFailures?relay,00H
        EXTERN ??nwk_ExtPANIDValid?relay
        FUNCTION ??nwk_ExtPANIDValid?relay,00H
        EXTERN ??nwk_getNwkDescList?relay
        FUNCTION ??nwk_getNwkDescList?relay,00H
        EXTERN ??osal_mem_alloc?relay
        FUNCTION ??osal_mem_alloc?relay,00H
        EXTERN ??osal_mem_free?relay
        FUNCTION ??osal_mem_free?relay,00H
        EXTERN ??osal_nv_item_init?relay
        FUNCTION ??osal_nv_item_init?relay,00H
        EXTERN ??osal_nv_item_len?relay
        FUNCTION ??osal_nv_item_len?relay,00H
        EXTERN ??osal_nv_read?relay
        FUNCTION ??osal_nv_read?relay,00H
        EXTERN ??osal_nv_write?relay
        FUNCTION ??osal_nv_write?relay,00H
        EXTERN ??osal_pwrmgr_device?relay
        FUNCTION ??osal_pwrmgr_device?relay,00H
        EXTERN ??osal_rand?relay
        FUNCTION ??osal_rand?relay,00H
        EXTERN ??osal_start_timerEx?relay
        FUNCTION ??osal_start_timerEx?relay,00H
        EXTERN ??sAddrExtCmp?relay
        FUNCTION ??sAddrExtCmp?relay,00H
        EXTERN AssociatedDevList
        EXTERN SampleApp_Addr_SendData_DstAddr
        EXTERN SampleApp_Flash_DstAddr
        EXTERN SampleApp_Periodic_DstAddr
        EXTERN SampleApp_SPI_SendCommand_DstAddr
        EXTERN ZDAppTaskID
        EXTERN ZDO_FIRST_join_flag
        EXTERN ZDO_UseExtendedPANID
        EXTERN _NIB
        EXTERN devStartMode
        EXTERN devState
        EXTERN gMAX_NEIGHBOR_ENTRIES
        EXTERN gNWK_MAX_DEVICE_LIST
        EXTERN neighborTable
        EXTERN zdoDiscCounter
        EXTERN zgConfigPANID
        EXTERN zgDefaultChannelList
        EXTERN zgNwkMgrMinTransmissions
        EXTERN zgStackProfile

// G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(251)\Projects\zstack\Samples\SampleApp\Source\zdo_sample.c
//    1 #include "ZComDef.h"
//    2 #include "ZMac.h"
//    3 //#include "OSAL.h"
//    4 //#include "OSAL_Tasks.h"
//    5 #include "OSAL_PwrMgr.h"
//    6 //#include "OSAL_Nv.h"
//    7 //#include "AF.h"
//    8 #include "APSMEDE.h"
//    9 #include "NLMEDE.h"
//   10 #include "AddrMgr.h"
//   11 #include "ZDProfile.h"
//   12 #include "ZDObject.h"
//   13 #include "ZDConfig.h"
//   14 #include "ZDSecMgr.h"
//   15 #include "ZDApp.h"
//   16 //#include "DebugTrace.h"
//   17 #include "nwk_util.h"
//   18 #include "OnBoard.h"

        ASEGN SFR_AN:DATA:NOROOT,0a8H
// union <unnamed> volatile __sfr _A_IEN0
_A_IEN0:
        DATA8
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,0c9H
// unsigned char volatile __sfr WDCTL
WDCTL:
        DATA8
        DS 1
//   19 #include "ZGlobals.h"
//   20 #include "ZDNwkMgr.h"
//   21 #include "rtg.h"
//   22 #include "ssp.h"
//   23 /* HAL */
//   24 #include "hal_led.h"
//   25 //#include "hal_lcd.h"
//   26 #include "hal_key.h"
//   27 //#include "my_time.h"
//   28 //#include "MT_UART.h"
//   29 #include "ZDO_LIB.h"
//   30 #include "OSAL_Nv.h"
//   31 #include "common_device.h"
//   32 #include "AF.h"
//   33 
//   34 

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   35 uint8 SampleApp_TransID;  // This is the unique message ID (counter)
SampleApp_TransID:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   36 uint8 SampleApp_TaskID;
SampleApp_TaskID:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   37 endPointDesc_t SampleApp_epDesc;
SampleApp_epDesc:
        DS 6
        REQUIRE __INIT_XDATA_Z
//   38 

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA16
//   39 uint8 *shortddr_mem;  
shortddr_mem:
        DS 2
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA16
//   40 uint8 *extendaddr_mem;
extendaddr_mem:
        DS 2
        REQUIRE __INIT_XDATA_Z
//   41 
//   42 

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   43 uint8 OS_FLAG=0;
OS_FLAG:
        DS 1
        REQUIRE __INIT_XDATA_Z
//   44 extern  uint8 ZDO_FIRST_join_flag ; //见NOTE

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   45  uint8 RTR_NWK_FLAG ;        //表示宏定义里定义了RTR_NWK
RTR_NWK_FLAG:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   46   uint8 POWER_SAVING_FLAG ;   //表示宏定义里定义了POWER_SAVING
POWER_SAVING_FLAG:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   47  uint8 POWER_PA_FLAG ;       //表示宏定义里定义了POWER_PA
POWER_PA_FLAG:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   48   uint8 LEAVE_NET_SET_FLAG;       //如果定义了自组网功能 则直接启动入网流程,上位机能直接干预控制
LEAVE_NET_SET_FLAG:
        DS 1
        REQUIRE __INIT_XDATA_Z
//   49 //extern  uint8 LEAVE_NET_SET;       //如果定义了自组网功能 则直接启动入网流程,上位机能直接干预控制
//   50 

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   51 uint8 New_join_role_flag = 0;   // 入网角色 
New_join_role_flag:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   52 uint8 New_join_delay_time = 0;  // 启动后 多少时间启动入网流程
New_join_delay_time:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   53 uint8 Minitue_join_delay_time =0;
Minitue_join_delay_time:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   54 uint8 Second_join_delay_time =0;
Second_join_delay_time:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   55 uint8 Join_isset_flag =0;
Join_isset_flag:
        DS 1
        REQUIRE __INIT_XDATA_Z
//   56 

        RSEG XDATA_I:XDATA:NOROOT(0)
//   57 uint8 Heart_mesg_flag = 1;
Heart_mesg_flag:
        DATA8
        DS 1
        REQUIRE `?<Initializer for Heart_mesg_flag>`
        REQUIRE __INIT_XDATA_I

        RSEG XDATA_I:XDATA:NOROOT(0)
//   58 uint8 defaultKey[SEC_KEY_LEN] =
defaultKey:
        DATA8
        DS 16
        REQUIRE `?<Initializer for defaultKey>`
        REQUIRE __INIT_XDATA_I
//   59 {
//   60   0x03, 0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 
//   61   0x02, 0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D
//   62 };
//   63 
//   64 typedef struct
//   65 {
//   66   
//   67   uint8 isActive;
//   68   uint8 heart_count;
//   69 } Child_device_t;  

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   70 Child_device_t Child_list[21];
Child_list:
        DS 42
        REQUIRE __INIT_XDATA_Z
//   71 
//   72 

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA16
//   73 uint16 New_Panid=0;
New_Panid:
        DS 2
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   74 uint8 New_Channel_list =0;
New_Channel_list:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   75 uint8 New_Net_flag=0; // 区分是调频还是调PAN
New_Net_flag:
        DS 1
        REQUIRE __INIT_XDATA_Z
//   76 

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   77 uint8 DEEP_POLL_FLAG=0;
DEEP_POLL_FLAG:
        DS 1
        REQUIRE __INIT_XDATA_Z
//   78 
//   79 
//   80 
//   81 void ZDO_DEVICE_DISC(void);
//   82 networkDesc_t* ZDApp_NwkDescListProcessing(void);
//   83 void APP_JOIN_INIT(void);
//   84 void APP_JOIN_DEAL_WITH(void);
//   85 void APP_JOIN_START_EVT(void);
//   86 void SampleApp_SendNwkaddrMessage(uint8 type1_id,uint8 type2_id);
//   87 void APPLY_TO_JOIN_OF_KEY(void);
//   88 void RESTORE_TO_FACTORY(void);
//   89 void SampleApp_SendPeriodicMessage( void );
//   90 uint8 zb_ReadConfiguration( uint8 configId, uint8 len, void *pValue );
//   91 uint8 zb_WriteConfiguration( uint8 configId, uint8 len, void *pValue );
//   92 uint8 *SampleApp_GetExtendAddr(void);
//   93 uint8 *SampleApp_GetShortAddr(void);
//   94 uint8 hextoword1(uint8 t );
//   95 uint8 hextoword2(uint8 t);
//   96 void zb_StartRequest(void);
//   97 void APP_DEAL_WITH_ASSOCIATED(void);
//   98 void SampleApp_ProcessNwkaddrMessage(afIncomingMSGPacket_t *pkt);
//   99 uint8 RemoveStaleNode(uint8 index);
//  100 uint8 RemoveStaleRouter(uint8 index);
//  101 void SampleApp_ROUTER_ProcessPeriodicMessage_Data(afIncomingMSGPacket_t *pkt);
//  102 void APP_OS_DEAL_WITH(uint16 poll_rate_value);
//  103 uint8 APP_ENDDEVICE_ACK(uint8 a,uint8 b,uint8 c);

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  104 uint8 HEART_NEED_ACK_FLAG=0;
HEART_NEED_ACK_FLAG:
        DS 1
        REQUIRE __INIT_XDATA_Z
//  105 
//  106 
//  107 extern void ZDApp_SendMsg( uint8 taskID, uint8 cmd, uint8 len, uint8 *buf );
//  108 
//  109 void sampleAPP_sendRS_periodMessage(uint8 type1_id,uint8 type2_id,uint8 data_len,uint8 *data);
//  110 
//  111 
//  112 #define STACK_PROFILE_MAX 2

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  113 networkDesc_t* ZDApp_NwkDescListProcessing(void)
ZDApp_NwkDescListProcessing:
        CFI Block cfiBlock0 Using cfiCommon0
        CFI Function ZDApp_NwkDescListProcessing
        CODE
//  114 {
        FUNCALL ZDApp_NwkDescListProcessing, nwk_getNwkDescList
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_NwkDescListProcessing, nwk_getNwkDescList
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_NwkDescListProcessing, nwk_getNwkDescList
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_NwkDescListProcessing, nwk_ExtPANIDValid
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_NwkDescListProcessing, sAddrExtCmp
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x18
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V15 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V14 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-19)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-20)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-21)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-22)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-23)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-24)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 24)
        ; Saved register size: 24
        ; Auto size: 0
//  115   networkDesc_t *pNwkDesc;
//  116   uint8 i, ResultCount = 0;
        MOV     ?V0 + 1,#0x0
//  117   uint8 stackProfile;
//  118   uint8 stackProfilePro;
//  119   uint8 selected;
//  120   
//  121   networkDesc_t *test_pNwkDesc;
//  122   uint8 MaxLinkQuality=0;
        MOV     ?V0 + 8,#0x0
//  123   uint8 MaxLinkQuality_Channel=0x0B;
        MOV     ?V0 + 9,#0xb
//  124   uint16 MaxLinkQuality_Panid=0xFFFF;
        MOV     ?V0 + 12,#-0x1
        MOV     ?V0 + 13,#-0x1
//  125   
//  126   // Count the number of nwk descriptors in the list
//  127   pNwkDesc = nwk_getNwkDescList();
        ; Setup parameters for call to function nwk_getNwkDescList
        LCALL   ??nwk_getNwkDescList?relay
        MOV     ?V0 + 2,R2
        MOV     ?V0 + 3,R3
        MOV     R6,?V0 + 2
        MOV     R7,?V0 + 3
//  128   while (pNwkDesc)
??ZDApp_NwkDescListProcessing_0:
        MOV     A,R6
        ORL     A,R7
        JZ      ??ZDApp_NwkDescListProcessing_1
//  129   {
//  130     ResultCount++;
        INC     ?V0 + 1
//  131     pNwkDesc = pNwkDesc->nextDesc;
        MOV     A,R6
        ADD     A,#0x14
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R6,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R7,A
        SJMP    ??ZDApp_NwkDescListProcessing_0
//  132   }
//  133   
//  134   // process discovery results
//  135   stackProfilePro = FALSE;
??ZDApp_NwkDescListProcessing_1:
        MOV     ?V0 + 6,#0x0
//  136   selected = FALSE;
        MOV     ?V0 + 7,#0x0
//  137   
//  138   if ( devStartMode == MODE_JOIN )
        MOV     DPTR,#devStartMode
        MOVX    A,@DPTR
        JZ      $+5
        LJMP    ??ZDApp_NwkDescListProcessing_2 & 0xFFFF
//  139   {  
//  140     pNwkDesc = nwk_getNwkDescList();
        ; Setup parameters for call to function nwk_getNwkDescList
        LCALL   ??nwk_getNwkDescList?relay
        MOV     ?V0 + 2,R2
        MOV     ?V0 + 3,R3
        MOV     R6,?V0 + 2
        MOV     R7,?V0 + 3
//  141     MaxLinkQuality=pNwkDesc->chosenRouterLinkQuality;
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 8,A
//  142     MaxLinkQuality_Channel=pNwkDesc->logicalChannel;
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 9,A
//  143     MaxLinkQuality_Panid = pNwkDesc->panId;
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     ?V0 + 12,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 13,A
//  144     for(uint8 j=0;j<ResultCount-1;j++,pNwkDesc = pNwkDesc->nextDesc)
        MOV     R2,#0x0
??ZDApp_NwkDescListProcessing_3:
        MOV     ?V0 + 2,R2
        MOV     ?V0 + 3,#0x0
        MOV     ?V0 + 4,?V0 + 1
        MOV     ?V0 + 5,#0x0
        MOV     A,?V0 + 4
        ADD     A,#-0x1
        MOV     R0,A
        MOV     A,?V0 + 5
        ADDC    A,#-0x1
        MOV     R1,A
        CLR     C
        MOV     A,?V0 + 2
        SUBB    A,R0
        MOV     A,?V0 + 3
        SUBB    A,R1
        MOV     C,0xD0 /* PSW */.2
        XRL     A,PSW
        RLC     A
        JNC     ??ZDApp_NwkDescListProcessing_2
//  145     {
//  146       test_pNwkDesc=pNwkDesc->nextDesc;
        MOV     A,R6
        ADD     A,#0x14
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     ?V0 + 14,R0
        MOV     ?V0 + 15,R1
//  147       if(test_pNwkDesc!=NULL)
        MOV     A,?V0 + 14
        ORL     A,?V0 + 15
        JZ      ??ZDApp_NwkDescListProcessing_4
//  148       {
//  149         if(MaxLinkQuality <=test_pNwkDesc->chosenRouterLinkQuality )
        MOV     DPL,?V0 + 14
        MOV     DPH,?V0 + 15
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,?V0 + 8
        JC      ??ZDApp_NwkDescListProcessing_4
//  150         {
//  151           MaxLinkQuality=test_pNwkDesc->chosenRouterLinkQuality;
        MOV     DPL,?V0 + 14
        MOV     DPH,?V0 + 15
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 8,A
//  152           MaxLinkQuality_Channel=test_pNwkDesc->logicalChannel;
        MOV     DPL,?V0 + 14
        MOV     DPH,?V0 + 15
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 9,A
//  153           MaxLinkQuality_Panid = test_pNwkDesc->panId;
        MOV     DPL,?V0 + 14
        MOV     DPH,?V0 + 15
        MOVX    A,@DPTR
        MOV     ?V0 + 12,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 13,A
//  154         }
//  155       }
//  156       
//  157     }
??ZDApp_NwkDescListProcessing_4:
        INC     R2
        MOV     A,R6
        ADD     A,#0x14
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R6,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R7,A
        LJMP    ??ZDApp_NwkDescListProcessing_3 & 0xFFFF
//  158   }
//  159   
//  160   for ( stackProfile = 0; stackProfile < STACK_PROFILE_MAX; stackProfile++ )
??ZDApp_NwkDescListProcessing_2:
        MOV     ?V0 + 10,#0x0
??ZDApp_NwkDescListProcessing_5:
        MOV     A,?V0 + 10
        CLR     C
        SUBB    A,#0x2
        JC      $+5
        LJMP    ??ZDApp_NwkDescListProcessing_6 & 0xFFFF
//  161   {
//  162     pNwkDesc = nwk_getNwkDescList();
        ; Setup parameters for call to function nwk_getNwkDescList
        LCALL   ??nwk_getNwkDescList?relay
        MOV     ?V0 + 2,R2
        MOV     ?V0 + 3,R3
        MOV     R6,?V0 + 2
        MOV     R7,?V0 + 3
//  163     for ( i = 0; i < ResultCount; i++, pNwkDesc = pNwkDesc->nextDesc )
        MOV     ?V0 + 0,#0x0
??ZDApp_NwkDescListProcessing_7:
        MOV     A,?V0 + 0
        CLR     C
        SUBB    A,?V0 + 1
        JC      $+5
        LJMP    ??ZDApp_NwkDescListProcessing_8 & 0xFFFF
//  164     {
//  165       if ( zgConfigPANID != 0xFFFF )
        MOV     DPTR,#zgConfigPANID
        MOVX    A,@DPTR
        XRL     A,#0xff
        JNZ     ??ZDApp_NwkDescListProcessing_9
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0xff
??ZDApp_NwkDescListProcessing_9:
        JZ      ??ZDApp_NwkDescListProcessing_10
//  166       {
//  167         if ( pNwkDesc->panId != zgConfigPANID )
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     DPTR,#zgConfigPANID
        MOVX    A,@DPTR
        XRL     A,R0
        JNZ     ??ZDApp_NwkDescListProcessing_11
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,R1
??ZDApp_NwkDescListProcessing_11:
        JZ      $+5
        LJMP    ??ZDApp_NwkDescListProcessing_12 & 0xFFFF
//  168           continue;
//  169       }
//  170       
//  171       if( devStartMode == MODE_REJOIN )
??ZDApp_NwkDescListProcessing_10:
        MOV     DPTR,#devStartMode
        MOVX    A,@DPTR
        XRL     A,#0x3
        JNZ     ??ZDApp_NwkDescListProcessing_13
//  172       {
//  173         if ( _NIB.nwkPanId != INVALID_PAN_ID )
        MOV     DPTR,#_NIB + 33
        MOVX    A,@DPTR
        XRL     A,#0xfe
        JNZ     ??ZDApp_NwkDescListProcessing_14
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0xff
??ZDApp_NwkDescListProcessing_14:
        JZ      ??ZDApp_NwkDescListProcessing_13
//  174         {
//  175           if ( pNwkDesc->panId != _NIB.nwkPanId )
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     DPTR,#_NIB + 33
        MOVX    A,@DPTR
        XRL     A,R0
        JNZ     ??ZDApp_NwkDescListProcessing_15
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,R1
??ZDApp_NwkDescListProcessing_15:
        JZ      $+5
        LJMP    ??ZDApp_NwkDescListProcessing_12 & 0xFFFF
//  176             continue;
//  177         }
//  178       }
//  179       
//  180       
//  181       if ( nwk_ExtPANIDValid( ZDO_UseExtendedPANID) == true )
??ZDApp_NwkDescListProcessing_13:
        ; Setup parameters for call to function nwk_ExtPANIDValid
        MOV     R2,#ZDO_UseExtendedPANID & 0xff
        MOV     R3,#(ZDO_UseExtendedPANID >> 8) & 0xff
        LCALL   ??nwk_ExtPANIDValid?relay
        MOV     A,R1
        XRL     A,#0x1
        JNZ     ??ZDApp_NwkDescListProcessing_16
//  182       {
//  183         if ( osal_ExtAddrEqual( ZDO_UseExtendedPANID, pNwkDesc->extendedPANID) == false )
        ; Setup parameters for call to function sAddrExtCmp
        MOV     A,R6
        ADD     A,#0xb
        MOV     R4,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     R5,A
        MOV     R2,#ZDO_UseExtendedPANID & 0xff
        MOV     R3,#(ZDO_UseExtendedPANID >> 8) & 0xff
        LCALL   ??sAddrExtCmp?relay
        MOV     A,R1
        JNZ     $+5
        LJMP    ??ZDApp_NwkDescListProcessing_12 & 0xFFFF
//  184           continue;
//  185         
//  186       }
//  187       
//  188       if ( ZSTACK_ROUTER_BUILD )
//  189       {
//  190         if ( stackProfilePro == FALSE )
??ZDApp_NwkDescListProcessing_16:
        MOV     A,?V0 + 6
        JNZ     ??ZDApp_NwkDescListProcessing_17
//  191         {
//  192           if ( !pNwkDesc->routerCapacity )
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        JNZ     ??ZDApp_NwkDescListProcessing_18
//  193           {
//  194             continue;
        LJMP    ??ZDApp_NwkDescListProcessing_12 & 0xFFFF
//  195           }
//  196         }
//  197         else
//  198         {
//  199           if ( !pNwkDesc->deviceCapacity )
??ZDApp_NwkDescListProcessing_17:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        JZ      ??ZDApp_NwkDescListProcessing_12
//  200           {
//  201             continue;
//  202           }
//  203         }
//  204       }
//  205       else if ( ZSTACK_END_DEVICE_BUILD )
//  206       {
//  207         if ( !pNwkDesc->deviceCapacity )
//  208         {
//  209           continue;
//  210         }
//  211       }
//  212       
//  213       // check version of zigbee protocol
//  214       if ( pNwkDesc->version != _NIB.nwkProtocolVersion )
??ZDApp_NwkDescListProcessing_18:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     DPTR,#_NIB + 17
        MOVX    A,@DPTR
        XRL     A,R0
        JNZ     ??ZDApp_NwkDescListProcessing_12
//  215         continue;
//  216       
//  217       // check version of stack profile
//  218       if ( pNwkDesc->stackProfile != zgStackProfile  )
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     DPTR,#zgStackProfile
        MOVX    A,@DPTR
        XRL     A,R0
        JZ      ??ZDApp_NwkDescListProcessing_19
//  219       {
//  220         if ( ((zgStackProfile == HOME_CONTROLS) && (pNwkDesc->stackProfile == ZIGBEEPRO_PROFILE))
//  221             || ((zgStackProfile == ZIGBEEPRO_PROFILE) && (pNwkDesc->stackProfile == HOME_CONTROLS))  )
        MOV     DPTR,#zgStackProfile
        MOVX    A,@DPTR
        XRL     A,#0x1
        JNZ     ??ZDApp_NwkDescListProcessing_20
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x2
        JZ      ??ZDApp_NwkDescListProcessing_21
??ZDApp_NwkDescListProcessing_20:
        MOV     DPTR,#zgStackProfile
        MOVX    A,@DPTR
        XRL     A,#0x2
        JNZ     ??ZDApp_NwkDescListProcessing_22
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x1
        JNZ     ??ZDApp_NwkDescListProcessing_22
//  222         {
//  223           stackProfilePro = TRUE;
??ZDApp_NwkDescListProcessing_21:
        MOV     ?V0 + 6,#0x1
//  224         }
//  225         
//  226         if ( stackProfile == 0 )
??ZDApp_NwkDescListProcessing_22:
        MOV     A,?V0 + 10
        JZ      ??ZDApp_NwkDescListProcessing_12
//  227         {
//  228           continue;
//  229         }
//  230       }
//  231       
//  232       
//  233       // break;
//  234       
//  235       if ( devStartMode == MODE_JOIN )
??ZDApp_NwkDescListProcessing_19:
        MOV     DPTR,#devStartMode
        MOVX    A,@DPTR
        JNZ     ??ZDApp_NwkDescListProcessing_8
//  236       {  
//  237         if( (pNwkDesc->logicalChannel==MaxLinkQuality_Channel) && (pNwkDesc->panId==MaxLinkQuality_Panid) )
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,?V0 + 9
        JNZ     ??ZDApp_NwkDescListProcessing_12
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        XRL     A,?V0 + 12
        JNZ     ??ZDApp_NwkDescListProcessing_23
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,?V0 + 13
??ZDApp_NwkDescListProcessing_23:
        JZ      ??ZDApp_NwkDescListProcessing_8
//  238         {
//  239           break;
//  240         }
//  241         else
//  242         {
//  243           continue;
//  244         }
//  245       }
//  246       else
//  247       {
//  248         break; 
//  249       }
//  250     }
??ZDApp_NwkDescListProcessing_12:
        INC     ?V0 + 0
        MOV     A,R6
        ADD     A,#0x14
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R6,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R7,A
        LJMP    ??ZDApp_NwkDescListProcessing_7 & 0xFFFF
//  251     
//  252     if (i < ResultCount)
??ZDApp_NwkDescListProcessing_8:
        MOV     A,?V0 + 0
        CLR     C
        SUBB    A,?V0 + 1
        JNC     ??ZDApp_NwkDescListProcessing_24
//  253     {
//  254       selected = TRUE;
        MOV     ?V0 + 7,#0x1
//  255       break;
        SJMP    ??ZDApp_NwkDescListProcessing_6
//  256     }
//  257     
//  258     // break if selected or stack profile pro wasn't found
//  259     if ( (selected == TRUE) || (stackProfilePro == FALSE) )
??ZDApp_NwkDescListProcessing_24:
        MOV     A,#0x1
        XRL     A,?V0 + 7
        JZ      ??ZDApp_NwkDescListProcessing_6
        MOV     A,?V0 + 6
        JZ      ??ZDApp_NwkDescListProcessing_6
//  260     {
//  261       break;
//  262     }
//  263   }
        INC     ?V0 + 10
        LJMP    ??ZDApp_NwkDescListProcessing_5 & 0xFFFF
//  264   
//  265   if ( i == ResultCount )
??ZDApp_NwkDescListProcessing_6:
        MOV     A,?V0 + 1
        XRL     A,?V0 + 0
        JNZ     ??ZDApp_NwkDescListProcessing_25
//  266   {
//  267     return (NULL);   // couldn't find appropriate PAN to join !
        MOV     R2,#0x0
        MOV     R3,#0x0
        SJMP    ??ZDApp_NwkDescListProcessing_26
//  268   }
//  269   else
//  270   {
//  271     return (pNwkDesc);
??ZDApp_NwkDescListProcessing_25:
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
??ZDApp_NwkDescListProcessing_26:
        MOV     R7,#0x10
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock0
//  272   }
//  273   
//  274 }// ZDApp_NwkDescListProcessing()
//  275 
//  276 

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  277 void ZDO_DEVICE_DISC(void)
ZDO_DEVICE_DISC:
        CFI Block cfiBlock1 Using cfiCommon0
        CFI Function ZDO_DEVICE_DISC
        CODE
//  278 {
        FUNCALL ZDO_DEVICE_DISC, osal_pwrmgr_device
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDO_DEVICE_DISC, osal_rand
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDO_DEVICE_DISC, ZDApp_NetworkInit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDO_DEVICE_DISC, osal_pwrmgr_device
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDO_DEVICE_DISC, osal_rand
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDO_DEVICE_DISC, ZDApp_NetworkInit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDO_DEVICE_DISC, osal_pwrmgr_device
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDO_DEVICE_DISC, osal_rand
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDO_DEVICE_DISC, ZDApp_NetworkInit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xc
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 12)
        ; Saved register size: 12
        ; Auto size: 0
//  279   if(zdoDiscCounter<=10)
        MOV     DPTR,#zdoDiscCounter
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0xb
        JNC     ??ZDO_DEVICE_DISC_0
//  280   {
//  281     
//  282 
//  283   if ( POWER_SAVING_FLAG == 1)
        MOV     DPTR,#POWER_SAVING_FLAG
        MOVX    A,@DPTR
        XRL     A,#0x1
        JNZ     ??ZDO_DEVICE_DISC_1
//  284     osal_pwrmgr_device( PWRMGR_BATTERY );
        ; Setup parameters for call to function osal_pwrmgr_device
        MOV     R1,#0x1
        LCALL   ??osal_pwrmgr_device?relay
//  285 
//  286     if( devStartMode == MODE_JOIN )
??ZDO_DEVICE_DISC_1:
        MOV     DPTR,#devStartMode
        MOVX    A,@DPTR
        JNZ     ??ZDO_DEVICE_DISC_2
//  287     {
//  288       zgDefaultChannelList =0x0318C800;
        MOV     DPTR,#__Constant_318c800
        LCALL   ?XLOAD_R2345
        MOV     DPTR,#zgDefaultChannelList
        LCALL   ?XSTORE_R2345
        SJMP    ??ZDO_DEVICE_DISC_3
//  289     }
//  290     else if(devStartMode == MODE_REJOIN)
??ZDO_DEVICE_DISC_2:
        MOV     DPTR,#devStartMode
        MOVX    A,@DPTR
        XRL     A,#0x3
        JNZ     ??ZDO_DEVICE_DISC_3
//  291     {
//  292       zgDefaultChannelList =((uint32)0x00000001)<<_NIB.nwkLogicalChannel;
        MOV     ?V0 + 0,#0x1
        MOV     ?V0 + 1,#0x0
        MOV     ?V0 + 2,#0x0
        MOV     ?V0 + 3,#0x0
        MOV     DPTR,#_NIB + 22
        MOVX    A,@DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_SHL
        MOV     DPTR,#zgDefaultChannelList
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_TO_X
//  293       
//  294     } 
//  295     zdoDiscCounter++;
??ZDO_DEVICE_DISC_3:
        MOV     DPTR,#zdoDiscCounter
        MOVX    A,@DPTR
        ADD     A,#0x1
        MOVX    @DPTR,A
//  296     
//  297     ZDApp_NetworkInit(500 + (osal_rand()& 0x007F) );
        ; Setup parameters for call to function ZDApp_NetworkInit
        ; Setup parameters for call to function osal_rand
        LCALL   ??osal_rand?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     A,?V0 + 0
        ANL     A,#0x7f
        MOV     R0,A
        MOV     A,?V0 + 1
        ANL     A,#0x0
        MOV     R1,A
        MOV     A,R0
        ADD     A,#-0xc
        MOV     R2,A
        MOV     A,R1
        ADDC    A,#0x1
        MOV     R3,A
        LCALL   ??ZDApp_NetworkInit?relay
        LJMP    ??ZDO_DEVICE_DISC_4 & 0xFFFF
//  298     
//  299   }  
//  300   
//  301   else if((zdoDiscCounter>10) && (zdoDiscCounter<20) )//
??ZDO_DEVICE_DISC_0:
        MOV     DPTR,#zdoDiscCounter
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0xb
        JC      ??ZDO_DEVICE_DISC_5
        MOV     DPTR,#zdoDiscCounter
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0x14
        JNC     ??ZDO_DEVICE_DISC_5
//  302   {
//  303     
//  304 
//  305    if ( POWER_SAVING_FLAG == 1)
        MOV     DPTR,#POWER_SAVING_FLAG
        MOVX    A,@DPTR
        XRL     A,#0x1
        JNZ     ??ZDO_DEVICE_DISC_6
//  306     osal_pwrmgr_device( PWRMGR_BATTERY );
        ; Setup parameters for call to function osal_pwrmgr_device
        MOV     R1,#0x1
        LCALL   ??osal_pwrmgr_device?relay
//  307 
//  308     if( devStartMode == MODE_JOIN )
??ZDO_DEVICE_DISC_6:
        MOV     DPTR,#devStartMode
        MOVX    A,@DPTR
        JNZ     ??ZDO_DEVICE_DISC_7
//  309     {
//  310       zgDefaultChannelList =0x0318C800;
        MOV     DPTR,#__Constant_318c800
        LCALL   ?XLOAD_R2345
        MOV     DPTR,#zgDefaultChannelList
        LCALL   ?XSTORE_R2345
        SJMP    ??ZDO_DEVICE_DISC_8
//  311     }
//  312     
//  313     else if(devStartMode == MODE_REJOIN)
??ZDO_DEVICE_DISC_7:
        MOV     DPTR,#devStartMode
        MOVX    A,@DPTR
        XRL     A,#0x3
        JNZ     ??ZDO_DEVICE_DISC_8
//  314     {
//  315       zgDefaultChannelList =((uint32)0x00000001)<<_NIB.nwkLogicalChannel;
        MOV     ?V0 + 0,#0x1
        MOV     ?V0 + 1,#0x0
        MOV     ?V0 + 2,#0x0
        MOV     ?V0 + 3,#0x0
        MOV     DPTR,#_NIB + 22
        MOVX    A,@DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_SHL
        MOV     DPTR,#zgDefaultChannelList
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_TO_X
//  316     }     
//  317     zdoDiscCounter++;
??ZDO_DEVICE_DISC_8:
        MOV     DPTR,#zdoDiscCounter
        MOVX    A,@DPTR
        ADD     A,#0x1
        MOVX    @DPTR,A
//  318     
//  319     ZDApp_NetworkInit(500 + (osal_rand()& 0x007F) );
        ; Setup parameters for call to function ZDApp_NetworkInit
        ; Setup parameters for call to function osal_rand
        LCALL   ??osal_rand?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     A,?V0 + 0
        ANL     A,#0x7f
        MOV     R0,A
        MOV     A,?V0 + 1
        ANL     A,#0x0
        MOV     R1,A
        MOV     A,R0
        ADD     A,#-0xc
        MOV     R2,A
        MOV     A,R1
        ADDC    A,#0x1
        MOV     R3,A
        LCALL   ??ZDApp_NetworkInit?relay
        LJMP    ??ZDO_DEVICE_DISC_4 & 0xFFFF
//  320     
//  321   }
//  322   
//  323   else if(zdoDiscCounter==20)
??ZDO_DEVICE_DISC_5:
        MOV     DPTR,#zdoDiscCounter
        MOVX    A,@DPTR
        XRL     A,#0x14
        JNZ     ??ZDO_DEVICE_DISC_4
//  324   {
//  325 
//  326    if ( POWER_SAVING_FLAG == 1)
        MOV     DPTR,#POWER_SAVING_FLAG
        MOVX    A,@DPTR
        XRL     A,#0x1
        JNZ     ??ZDO_DEVICE_DISC_9
//  327     osal_pwrmgr_device( PWRMGR_BATTERY ); 
        ; Setup parameters for call to function osal_pwrmgr_device
        MOV     R1,#0x1
        LCALL   ??osal_pwrmgr_device?relay
//  328     
//  329     if(devStartMode == MODE_REJOIN)
??ZDO_DEVICE_DISC_9:
        MOV     DPTR,#devStartMode
        MOVX    A,@DPTR
        XRL     A,#0x3
        JNZ     ??ZDO_DEVICE_DISC_10
//  330       ZDApp_NetworkInit(60000 + 5*(osal_rand()& 0x007F) );
        ; Setup parameters for call to function ZDApp_NetworkInit
        ; Setup parameters for call to function osal_rand
        LCALL   ??osal_rand?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     A,?V0 + 0
        ANL     A,#0x7f
        MOV     R0,A
        MOV     A,?V0 + 1
        ANL     A,#0x0
        MOV     R1,A
        MOV     A,R0
        MOV     B,#0x5
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x5
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,R0
        ADD     A,#0x60
        MOV     R2,A
        MOV     A,R1
        ADDC    A,#-0x16
        MOV     R3,A
        LCALL   ??ZDApp_NetworkInit?relay
//  331     
//  332     if( devStartMode == MODE_JOIN )
??ZDO_DEVICE_DISC_10:
        MOV     DPTR,#devStartMode
        MOVX    A,@DPTR
        JNZ     ??ZDO_DEVICE_DISC_11
//  333     {
//  334       zgDefaultChannelList =0x0318C800;
        MOV     DPTR,#__Constant_318c800
        LCALL   ?XLOAD_R2345
        MOV     DPTR,#zgDefaultChannelList
        LCALL   ?XSTORE_R2345
        SJMP    ??ZDO_DEVICE_DISC_4
//  335     }
//  336     else if(devStartMode == MODE_REJOIN)
??ZDO_DEVICE_DISC_11:
        MOV     DPTR,#devStartMode
        MOVX    A,@DPTR
        XRL     A,#0x3
        JNZ     ??ZDO_DEVICE_DISC_4
//  337     {
//  338       zgDefaultChannelList =((uint32)0x00000001)<<_NIB.nwkLogicalChannel;
        MOV     ?V0 + 0,#0x1
        MOV     ?V0 + 1,#0x0
        MOV     ?V0 + 2,#0x0
        MOV     ?V0 + 3,#0x0
        MOV     DPTR,#_NIB + 22
        MOVX    A,@DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_SHL
        MOV     DPTR,#zgDefaultChannelList
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_TO_X
//  339     }
//  340     
//  341   }
//  342   
//  343 }
??ZDO_DEVICE_DISC_4:
        MOV     R7,#0x4
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock1
//  344 

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  345 void ZDO_REJOIN_ERROR(void)
ZDO_REJOIN_ERROR:
        CFI Block cfiBlock2 Using cfiCommon0
        CFI Function ZDO_REJOIN_ERROR
        CODE
//  346 {
        FUNCALL ZDO_REJOIN_ERROR, Onboard_soft_reset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        ; Saved register size: 0
        ; Auto size: 0
//  347          SystemResetSoft();
        ; Setup parameters for call to function Onboard_soft_reset
        LCALL   Onboard_soft_reset & 0xFFFF
//  348 }
        LJMP    ?BRET
        CFI EndBlock cfiBlock2
//  349 

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  350 void ZDO_ACK_DEAL_WITH(void)
ZDO_ACK_DEAL_WITH:
        CFI Block cfiBlock3 Using cfiCommon0
        CFI Function ZDO_ACK_DEAL_WITH
        CODE
//  351 {
        FUNCALL ZDO_ACK_DEAL_WITH, nwkNeighborInitTable
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDO_ACK_DEAL_WITH, ZDApp_SendMsg
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUSH    DPL
        CFI DPL0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        PUSH    DPH
        CFI DPH0 Frame(CFA_SP, 5)
        CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
//  352     nwkNeighborInitTable();
        ; Setup parameters for call to function nwkNeighborInitTable
        LCALL   ??nwkNeighborInitTable?relay
//  353     ZDApp_SendMsg( ZDAppTaskID, ZDO_NWK_JOIN_REQ, sizeof(osal_event_hdr_t), NULL );
        ; Setup parameters for call to function ZDApp_SendMsg
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R3,#0x2
        MOV     R2,#0x3
        MOV     DPTR,#ZDAppTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??ZDApp_SendMsg?relay
//  354 
//  355 }
        POP     DPH
        CFI DPH0 SameValue
        CFI CFA_SP SP+-4
        POP     DPL
        CFI DPL0 SameValue
        CFI CFA_SP SP+-3
        LJMP    ?BRET
        CFI EndBlock cfiBlock3
//  356 
//  357 // app 初始化的时候处理JOIN事宜

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  358 void APP_JOIN_INIT(void)
APP_JOIN_INIT:
        CFI Block cfiBlock4 Using cfiCommon0
        CFI Function APP_JOIN_INIT
        CODE
//  359 {
        FUNCALL APP_JOIN_INIT, zb_ReadConfiguration
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_JOIN_INIT, zb_StartRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_JOIN_INIT, osal_nv_item_init
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 13, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_JOIN_INIT, osal_nv_read
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 15, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 15, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_JOIN_INIT, osal_nv_item_init
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 13, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_JOIN_INIT, osal_nv_read
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 15, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 15, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_JOIN_INIT, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_JOIN_INIT, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_JOIN_INIT, osal_nv_item_init
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 13, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_JOIN_INIT, osal_nv_read
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 15, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 15, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xa
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 1
        MOV     A,#-0x1
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 11)
//  360   
//  361   
//  362  
//  363  if ( RTR_NWK_FLAG == 1)
        MOV     DPTR,#RTR_NWK_FLAG
        MOVX    A,@DPTR
        XRL     A,#0x1
        JNZ     ??APP_JOIN_INIT_0
//  364  {
//  365     for(uint8 i=0;i<NWK_MAX_DEVICES;i++)
        MOV     R3,#0x0
??APP_JOIN_INIT_1:
        MOV     A,R3
        CLR     C
        SUBB    A,#0x15
        JNC     ??APP_JOIN_INIT_0
//  366     { 
//  367       Child_list[i].heart_count=0;
        MOV     A,R3
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x2
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x2
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(Child_list + 1) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((Child_list + 1) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOV     A,#0x0
        MOVX    @DPTR,A
//  368     }
        INC     R3
        SJMP    ??APP_JOIN_INIT_1
//  369  }
//  370   
//  371   
//  372   uint8 startOptions= 0;
??APP_JOIN_INIT_0:
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,#0x0
        MOVX    @DPTR,A
//  373   zb_ReadConfiguration( ZCD_NV_STARTUP_OPTION, sizeof(uint8), &startOptions );
        ; Setup parameters for call to function zb_ReadConfiguration
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R4,DPL
        MOV     R5,DPH
        MOV     R2,#0x1
        MOV     R1,#0x3
        LCALL   ??zb_ReadConfiguration?relay
        MOV     A,R1
//  374   if ( startOptions & ZCD_STARTOPT_AUTO_START )
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     C,0xE0 /* A   */.2
        JNC     ??APP_JOIN_INIT_2
//  375   {
//  376     zb_StartRequest();
        ; Setup parameters for call to function zb_StartRequest
        LCALL   ??zb_StartRequest?relay
        LJMP    ??APP_JOIN_INIT_3 & 0xFFFF
//  377   }
//  378   
//  379   else
//  380   {  
//  381     osal_nv_item_init(ZCD_NV_JOIN_ISSET_FLAG, 1, &Join_isset_flag);  // 判断是否为通过软件控制的入网机制
??APP_JOIN_INIT_2:
        ; Setup parameters for call to function osal_nv_item_init
        MOV     ?V0 + 0,#Join_isset_flag & 0xff
        MOV     ?V0 + 1,#(Join_isset_flag >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 13)
        MOV     R4,#0x1
        MOV     R5,#0x0
        MOV     R2,#0x38
        MOV     R3,#0x4
        LCALL   ??osal_nv_item_init?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 11)
        MOV     A,R1
//  382     osal_nv_read(ZCD_NV_JOIN_ISSET_FLAG, 0, 1, &Join_isset_flag);
        ; Setup parameters for call to function osal_nv_read
        MOV     ?V0 + 0,#Join_isset_flag & 0xff
        MOV     ?V0 + 1,#(Join_isset_flag >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 13)
        MOV     ?V0 + 0,#0x1
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 15)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R2,#0x38
        MOV     R3,#0x4
        LCALL   ??osal_nv_read?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 11)
        MOV     A,R1
//  383     
//  384     if(Join_isset_flag == 1)  //如果是的话 则读取上次离开网络后 被设置的参数，包括这次入网的角色定义和入网延迟时间
        MOV     DPTR,#Join_isset_flag
        MOVX    A,@DPTR
        XRL     A,#0x1
        JNZ     ??APP_JOIN_INIT_4
//  385     { 
//  386       
//  387       osal_nv_item_init(ZCD_NV_JOIN_START_TIME_VALUE, 1, &New_join_delay_time); 
        ; Setup parameters for call to function osal_nv_item_init
        MOV     ?V0 + 0,#New_join_delay_time & 0xff
        MOV     ?V0 + 1,#(New_join_delay_time >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 13)
        MOV     R4,#0x1
        MOV     R5,#0x0
        MOV     R2,#0x35
        MOV     R3,#0x4
        LCALL   ??osal_nv_item_init?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 11)
        MOV     A,R1
//  388       osal_nv_read(ZCD_NV_JOIN_START_TIME_VALUE, 0, 1, &New_join_delay_time); 
        ; Setup parameters for call to function osal_nv_read
        MOV     ?V0 + 0,#New_join_delay_time & 0xff
        MOV     ?V0 + 1,#(New_join_delay_time >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 13)
        MOV     ?V0 + 0,#0x1
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 15)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R2,#0x35
        MOV     R3,#0x4
        LCALL   ??osal_nv_read?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 11)
        MOV     A,R1
        SJMP    ??APP_JOIN_INIT_5
//  389     }
//  390     
//  391     else  //如果不是从命令启动的则按照默认的启动路径  
//  392     {
//  393       
//  394       if(LEAVE_NET_SET_FLAG==1)
??APP_JOIN_INIT_4:
        MOV     DPTR,#LEAVE_NET_SET_FLAG
        MOVX    A,@DPTR
        XRL     A,#0x1
        JNZ     ??APP_JOIN_INIT_6
//  395       {
//  396          New_join_delay_time = 0;
        MOV     DPTR,#New_join_delay_time
        MOV     A,#0x0
        MOVX    @DPTR,A
        SJMP    ??APP_JOIN_INIT_5
//  397       }
//  398       else
//  399       {
//  400         New_join_delay_time = 0xFF;  //没有定义的话 继续HOLD住 等待按键事件
??APP_JOIN_INIT_6:
        MOV     DPTR,#New_join_delay_time
        MOV     A,#-0x1
        MOVX    @DPTR,A
//  401       }
//  402       
//  403     } 
//  404     
//  405     
//  406     if( (New_join_delay_time<255) && (New_join_delay_time>0))
??APP_JOIN_INIT_5:
        MOV     DPTR,#New_join_delay_time
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#-0x1
        JNC     ??APP_JOIN_INIT_7
        MOV     DPTR,#New_join_delay_time
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0x1
        JC      ??APP_JOIN_INIT_7
//  407     {
//  408       Minitue_join_delay_time =New_join_delay_time / 60;
        MOV     B,#0x3c
        MOV     DPTR,#New_join_delay_time
        MOVX    A,@DPTR
        DIV     AB
        MOV     DPTR,#Minitue_join_delay_time
        MOVX    @DPTR,A
//  409       Second_join_delay_time =New_join_delay_time % 60;
        MOV     DPTR,#New_join_delay_time
        MOVX    A,@DPTR
        MOV     B,#0x3c
        DIV     AB
        MOV     A,B
        MOV     DPTR,#Second_join_delay_time
        MOVX    @DPTR,A
//  410       uint16 Second_time_temp=0;
        MOV     R6,#0x0
        MOV     R7,#0x0
//  411       Second_time_temp = (Second_join_delay_time *1000) + 10;
        MOV     DPTR,#Second_join_delay_time
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#-0x18
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x3
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#-0x18
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,R0
        ADD     A,#0xa
        MOV     R0,A
        MOV     A,R1
        ADDC    A,#0x0
        MOV     R1,A
        MOV     A,R0
        MOV     R6,A
        MOV     A,R1
        MOV     R7,A
//  412       osal_start_timerEx( SampleApp_TaskID, NEW_JOIN_ROLE_EVT,Second_time_temp );//先处理掉秒
        ; Setup parameters for call to function osal_start_timerEx
        MOV     A,R6
        MOV     R4,A
        MOV     A,R7
        MOV     R5,A
        MOV     R2,#0x20
        MOV     R3,#0x0
        MOV     DPTR,#SampleApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
        SJMP    ??APP_JOIN_INIT_3
//  413       
//  414     }
//  415     else if(New_join_delay_time == 0)
??APP_JOIN_INIT_7:
        MOV     DPTR,#New_join_delay_time
        MOVX    A,@DPTR
        JNZ     ??APP_JOIN_INIT_8
//  416     {
//  417       osal_start_timerEx( SampleApp_TaskID, NEW_JOIN_ROLE_EVT,10 );//先处理掉秒
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#0xa
        MOV     R5,#0x0
        MOV     R2,#0x20
        MOV     R3,#0x0
        MOV     DPTR,#SampleApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
        SJMP    ??APP_JOIN_INIT_3
//  418     }
//  419     else
//  420     {
//  421       devState = DEV_HOLD;
??APP_JOIN_INIT_8:
        MOV     DPTR,#devState
        MOV     A,#0x0
        MOVX    @DPTR,A
//  422       //hold住  不启动网络
//  423     }  
//  424   }
//  425     osal_nv_item_init(ZCD_NV_HEART_MESG_FLAG, 1, &Heart_mesg_flag);  // 判断是否为通过软件控制的入网机制
??APP_JOIN_INIT_3:
        ; Setup parameters for call to function osal_nv_item_init
        MOV     ?V0 + 0,#Heart_mesg_flag & 0xff
        MOV     ?V0 + 1,#(Heart_mesg_flag >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 13)
        MOV     R4,#0x1
        MOV     R5,#0x0
        MOV     R2,#0x10
        MOV     R3,#0x5
        LCALL   ??osal_nv_item_init?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 11)
        MOV     A,R1
//  426   osal_nv_read(ZCD_NV_HEART_MESG_FLAG, 0, 1, &Heart_mesg_flag);
        ; Setup parameters for call to function osal_nv_read
        MOV     ?V0 + 0,#Heart_mesg_flag & 0xff
        MOV     ?V0 + 1,#(Heart_mesg_flag >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 13)
        MOV     ?V0 + 0,#0x1
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 15)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R2,#0x10
        MOV     R3,#0x5
        LCALL   ??osal_nv_read?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 11)
        MOV     A,R1
//  427   if( (Heart_mesg_flag<1) || (Heart_mesg_flag>10))
        MOV     DPTR,#Heart_mesg_flag
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0x1
        JC      ??APP_JOIN_INIT_9
        MOV     DPTR,#Heart_mesg_flag
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0xb
        JC      ??APP_JOIN_INIT_10
//  428   {
//  429     Heart_mesg_flag = 1;
??APP_JOIN_INIT_9:
        MOV     DPTR,#Heart_mesg_flag
        MOV     A,#0x1
        MOVX    @DPTR,A
//  430   }
//  431 
//  432   
//  433   
//  434 }
??APP_JOIN_INIT_10:
        MOV     A,#0x1
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 10)
        MOV     R7,#0x2
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock4
//  435 
//  436 

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  437 void APP_JOIN_DEAL_WITH(void)
APP_JOIN_DEAL_WITH:
        CFI Block cfiBlock5 Using cfiCommon0
        CFI Function APP_JOIN_DEAL_WITH
        CODE
//  438 {
        FUNCALL APP_JOIN_DEAL_WITH, NLME_PermitJoiningRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 19, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 19, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_JOIN_DEAL_WITH, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 19, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 19, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_JOIN_DEAL_WITH, osal_rand
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 19, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 19, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_JOIN_DEAL_WITH, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 19, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 19, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_JOIN_DEAL_WITH, osal_rand
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 19, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 19, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_JOIN_DEAL_WITH, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 19, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 19, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_JOIN_DEAL_WITH, NLME_PermitJoiningRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 19, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 19, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_JOIN_DEAL_WITH, ZDP_MgmtPermitJoinReq
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 19, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 19, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_JOIN_DEAL_WITH, osal_nv_item_init
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 21, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 21, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_JOIN_DEAL_WITH, osal_nv_write
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 23, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 23, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_JOIN_DEAL_WITH, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 19, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 19, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xa
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 9
        MOV     A,#-0x9
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 19)
//  439   // ROUTER 只发送RS ENDDEVICE先发送RS后发送OS
//  440  if ( RTR_NWK_FLAG == 1)
        MOV     DPTR,#RTR_NWK_FLAG
        MOVX    A,@DPTR
        XRL     A,#0x1
        JNZ     ??APP_JOIN_DEAL_WITH_0
//  441  {
//  442    NLME_PermitJoiningRequest(0); 
        ; Setup parameters for call to function NLME_PermitJoiningRequest
        MOV     R1,#0x0
        LCALL   ??NLME_PermitJoiningRequest?relay
        MOV     A,R1
//  443    osal_start_timerEx( SampleApp_TaskID,ASSOCIA_MENTAIN_EVT, 60000 );//2011_10_22 暂时关闭此功能 测试                  
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#0x60
        MOV     R5,#-0x16
        MOV     R2,#0x2
        MOV     R3,#0x0
        MOV     DPTR,#SampleApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
//  444 
//  445  }
//  446  
//  447   osal_start_timerEx( SampleApp_TaskID,SAMPLEAPP_SEND_RS_EVT, 2000+ 5*(osal_rand() & 0x00FF) );//8S后再发送
??APP_JOIN_DEAL_WITH_0:
        ; Setup parameters for call to function osal_rand
        LCALL   ??osal_rand?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     R0,?V0 + 0
        MOV     R1,?V0 + 1
        ; Setup parameters for call to function osal_start_timerEx
        MOV     A,?V0 + 0
        ANL     A,#0xff
        MOV     R0,A
        MOV     A,?V0 + 1
        ANL     A,#0x0
        MOV     R1,A
        MOV     A,R0
        MOV     B,#0x5
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x5
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,R0
        ADD     A,#-0x30
        MOV     R4,A
        MOV     A,R1
        ADDC    A,#0x7
        MOV     R5,A
        MOV     R2,#0x0
        MOV     R3,#0x40
        MOV     DPTR,#SampleApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
//  448   osal_start_timerEx( SampleApp_TaskID,SAMPLEAPP_SEND_NWKADDR_EVT, 8000+ 5*(osal_rand() & 0x00FF) );//8S后再发送
        ; Setup parameters for call to function osal_rand
        LCALL   ??osal_rand?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     R0,?V0 + 0
        MOV     R1,?V0 + 1
        ; Setup parameters for call to function osal_start_timerEx
        MOV     A,?V0 + 0
        ANL     A,#0xff
        MOV     R0,A
        MOV     A,?V0 + 1
        ANL     A,#0x0
        MOV     R1,A
        MOV     A,R0
        MOV     B,#0x5
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x5
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,R0
        ADD     A,#0x40
        MOV     R4,A
        MOV     A,R1
        ADDC    A,#0x1f
        MOV     R5,A
        MOV     R2,#0x4
        MOV     R3,#0x0
        MOV     DPTR,#SampleApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
//  449 
//  450   
//  451   if(ZDO_FIRST_join_flag == 1)
        MOV     DPTR,#ZDO_FIRST_join_flag
        MOVX    A,@DPTR
        XRL     A,#0x1
        JNZ     ??APP_JOIN_DEAL_WITH_1
//  452   { 
//  453     NLME_PermitJoiningRequest(180);
        ; Setup parameters for call to function NLME_PermitJoiningRequest
        MOV     R1,#-0x4c
        LCALL   ??NLME_PermitJoiningRequest?relay
        MOV     A,R1
//  454     ZDO_FIRST_join_flag = 0;
        MOV     DPTR,#ZDO_FIRST_join_flag
        MOV     A,#0x0
        MOVX    @DPTR,A
//  455     zAddrType_t dstAddr;
//  456     dstAddr.addrMode = AddrBroadcast;
        MOV     A,#0x8
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0xf
        MOVX    @DPTR,A
//  457     dstAddr.addr.shortAddr = 0XFFFC;   // Coordinator makes the match
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,#-0x4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#-0x1
        MOVX    @DPTR,A
//  458     //ZDP_MgmtPermitJoinReq( &dstAddr, 180, 1, 0);
//  459     ZDP_MgmtPermitJoinReq( &dstAddr, 180, 0, 0);
        ; Setup parameters for call to function ZDP_MgmtPermitJoinReq
        MOV     R5,#0x0
        MOV     R4,#0x0
        MOV     R1,#-0x4c
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??ZDP_MgmtPermitJoinReq?relay
        MOV     A,R1
//  460     
//  461     Join_isset_flag = 0;
        MOV     DPTR,#Join_isset_flag
        MOV     A,#0x0
        MOVX    @DPTR,A
//  462     osal_nv_item_init(ZCD_NV_JOIN_ISSET_FLAG, 1, &Join_isset_flag);  // 判断是否为通过按键控制的入网机制
        ; Setup parameters for call to function osal_nv_item_init
        MOV     ?V0 + 0,#Join_isset_flag & 0xff
        MOV     ?V0 + 1,#(Join_isset_flag >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 21)
        MOV     R4,#0x1
        MOV     R5,#0x0
        MOV     R2,#0x38
        MOV     R3,#0x4
        LCALL   ??osal_nv_item_init?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 19)
        MOV     A,R1
//  463     osal_nv_write(ZCD_NV_JOIN_ISSET_FLAG, 0, 1, &Join_isset_flag);
        ; Setup parameters for call to function osal_nv_write
        MOV     ?V0 + 0,#Join_isset_flag & 0xff
        MOV     ?V0 + 1,#(Join_isset_flag >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 21)
        MOV     ?V0 + 0,#0x1
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 23)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R2,#0x38
        MOV     R3,#0x4
        LCALL   ??osal_nv_write?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 19)
        MOV     A,R1
//  464     
//  465   }
//  466   
//  467   osal_start_timerEx( SampleApp_TaskID, SAMPLEAPP_SEND_PERIODIC_MSG_EVT,30000 );//心跳信息 
??APP_JOIN_DEAL_WITH_1:
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#0x30
        MOV     R5,#0x75
        MOV     R2,#0x1
        MOV     R3,#0x0
        MOV     DPTR,#SampleApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
//  468 
//  469   
//  470   
//  471 }
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 10)
        MOV     R7,#0x2
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock5
//  472 
//  473 
//  474 

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  475 void APP_JOIN_START_EVT(void)
APP_JOIN_START_EVT:
        CFI Block cfiBlock6 Using cfiCommon0
        CFI Function APP_JOIN_START_EVT
        CODE
//  476 {
        FUNCALL APP_JOIN_START_EVT, zb_ReadConfiguration
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 1, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 1, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_JOIN_START_EVT, zb_WriteConfiguration
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 1, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 1, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_JOIN_START_EVT, Onboard_soft_reset
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 1, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 1, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_JOIN_START_EVT, osal_start_timerEx
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 1, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 1, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUSH    DPL
        CFI DPL0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        PUSH    DPH
        CFI DPH0 Frame(CFA_SP, 5)
        CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 1
        MOV     A,#-0x1
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 1)
//  477   if(Minitue_join_delay_time == 0)
        MOV     DPTR,#Minitue_join_delay_time
        MOVX    A,@DPTR
        JNZ     ??APP_JOIN_START_EVT_0
//  478   {
//  479     uint8 startOptions = 0;
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,#0x0
        MOVX    @DPTR,A
//  480     zb_ReadConfiguration( ZCD_NV_STARTUP_OPTION, sizeof(uint8), &startOptions );
        ; Setup parameters for call to function zb_ReadConfiguration
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R4,DPL
        MOV     R5,DPH
        MOV     R2,#0x1
        MOV     R1,#0x3
        LCALL   ??zb_ReadConfiguration?relay
        MOV     A,R1
//  481     startOptions = ZCD_STARTOPT_AUTO_START;
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,#0x4
        MOVX    @DPTR,A
//  482     zb_WriteConfiguration( ZCD_NV_STARTUP_OPTION, sizeof(uint8), &startOptions );
        ; Setup parameters for call to function zb_WriteConfiguration
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R4,DPL
        MOV     R5,DPH
        MOV     R2,#0x1
        MOV     R1,#0x3
        LCALL   ??zb_WriteConfiguration?relay
        MOV     A,R1
//  483     SystemResetSoft(); 
        ; Setup parameters for call to function Onboard_soft_reset
        LCALL   Onboard_soft_reset & 0xFFFF
        SJMP    ??APP_JOIN_START_EVT_1
//  484     
//  485   }
//  486   
//  487   else 
//  488   {
//  489     Minitue_join_delay_time--;
??APP_JOIN_START_EVT_0:
        MOV     DPTR,#Minitue_join_delay_time
        MOVX    A,@DPTR
        ADD     A,#-0x1
        MOVX    @DPTR,A
//  490     osal_start_timerEx( SampleApp_TaskID, NEW_JOIN_ROLE_EVT, 60000);
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#0x60
        MOV     R5,#-0x16
        MOV     R2,#0x20
        MOV     R3,#0x0
        MOV     DPTR,#SampleApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
//  491   }
//  492   
//  493 }
??APP_JOIN_START_EVT_1:
        MOV     A,#0x1
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 XSP16+0
        POP     DPH
        CFI DPH0 SameValue
        CFI CFA_SP SP+-4
        POP     DPL
        CFI DPL0 SameValue
        CFI CFA_SP SP+-3
        LJMP    ?BRET
        CFI EndBlock cfiBlock6
//  494 
//  495 
//  496 

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  497 void SampleApp_SendNwkaddrMessage(uint8 type1_id,uint8 type2_id)
SampleApp_SendNwkaddrMessage:
        CFI Block cfiBlock7 Using cfiCommon0
        CFI Function SampleApp_SendNwkaddrMessage
        CODE
//  498 {
        FUNCALL SampleApp_SendNwkaddrMessage, SampleApp_GetShortAddr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 42, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 42, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_SendNwkaddrMessage, osal_mem_free
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 42, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 42, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_SendNwkaddrMessage, SampleApp_GetExtendAddr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 42, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 42, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_SendNwkaddrMessage, osal_mem_free
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 42, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 42, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_SendNwkaddrMessage, NLME_GetCoordShortAddr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 42, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 42, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_SendNwkaddrMessage, AF_DataRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 51, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 51, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x12
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 18)
        ; Saved register size: 18
        ; Auto size: 24
        MOV     A,#-0x18
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 42)
        MOV     ?V0 + 6,R1
        MOV     ?V0 + 5,R2
//  499   
//  500   //  extern uint8 *shortddr_mem;
//  501   uint8 *Sample_myshort;
//  502   uint8 *Sample_extendaddr;
//  503   uint8 str[23];
//  504   uint8 i;
//  505   uint16 parent_short_adress=0;
        MOV     ?V0 + 0,#0x0
        MOV     ?V0 + 1,#0x0
//  506   
//  507   str[0]=type1_id;
        MOV     A,?V0 + 6
        MOV     A,#0x1
        LCALL   ?XSTACK_DISP0_8
        MOV     A,?V0 + 6
        MOVX    @DPTR,A
//  508   str[1]=type2_id;//
        MOV     A,?V0 + 5
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOV     A,?V0 + 5
        MOVX    @DPTR,A
//  509   
//  510   Sample_myshort=SampleApp_GetShortAddr();
        ; Setup parameters for call to function SampleApp_GetShortAddr
        LCALL   ??SampleApp_GetShortAddr?relay
        MOV     ?V0 + 8,R2
        MOV     ?V0 + 9,R3
        MOV     R6,?V0 + 8
        MOV     R7,?V0 + 9
//  511   str[2]=*Sample_myshort++;
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x3
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOV     R6,DPL
        MOV     R7,DPH
//  512   str[3]=*Sample_myshort++;
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOV     R6,DPL
        MOV     R7,DPH
//  513   str[4]=*Sample_myshort++;
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x5
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOV     R6,DPL
        MOV     R7,DPH
//  514   str[5]=*Sample_myshort;
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x6
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
//  515   osal_mem_free( shortddr_mem );
        ; Setup parameters for call to function osal_mem_free
        MOV     DPTR,#shortddr_mem
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??osal_mem_free?relay
//  516   
//  517   Sample_extendaddr=SampleApp_GetExtendAddr();
        ; Setup parameters for call to function SampleApp_GetExtendAddr
        LCALL   ??SampleApp_GetExtendAddr?relay
        MOV     ?V0 + 8,R2
        MOV     ?V0 + 9,R3
        MOV     ?V0 + 2,?V0 + 8
        MOV     ?V0 + 3,?V0 + 9
//  518   for(i=0;i<16;i++)
        MOV     ?V0 + 4,#0x0
??SampleApp_SendNwkaddrMessage_0:
        MOV     A,?V0 + 4
        CLR     C
        SUBB    A,#0x10
        JNC     ??SampleApp_SendNwkaddrMessage_1
//  519   {
//  520     str[i+6]=*Sample_extendaddr++;
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     ?V0 + 8,?V0 + 4
        MOV     ?V0 + 9,#0x0
        MOV     A,#0x1
        LCALL   ?XSTACK_DISP0_8
        MOV     A,DPL
        ADD     A,?V0 + 8
        MOV     DPL,A
        MOV     A,DPH
        ADDC    A,?V0 + 9
        MOV     DPH,A
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        MOV     ?V0 + 2,DPL
        MOV     ?V0 + 3,DPH
//  521   }
        INC     ?V0 + 4
        SJMP    ??SampleApp_SendNwkaddrMessage_0
//  522   osal_mem_free( extendaddr_mem );
??SampleApp_SendNwkaddrMessage_1:
        ; Setup parameters for call to function osal_mem_free
        MOV     DPTR,#extendaddr_mem
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??osal_mem_free?relay
//  523   
//  524     if(RTR_NWK_FLAG==1)
        MOV     DPTR,#RTR_NWK_FLAG
        MOVX    A,@DPTR
        XRL     A,#0x1
        JNZ     ??SampleApp_SendNwkaddrMessage_2
//  525     {
//  526       parent_short_adress=0X0000;
        MOV     ?V0 + 0,#0x0
        MOV     ?V0 + 1,#0x0
        SJMP    ??SampleApp_SendNwkaddrMessage_3
//  527     }   
//  528     else
//  529     {
//  530       parent_short_adress= NLME_GetCoordShortAddr();
??SampleApp_SendNwkaddrMessage_2:
        ; Setup parameters for call to function NLME_GetCoordShortAddr
        LCALL   ??NLME_GetCoordShortAddr?relay
        MOV     ?V0 + 8,R2
        MOV     ?V0 + 9,R3
        MOV     ?V0 + 0,?V0 + 8
        MOV     ?V0 + 1,?V0 + 9
//  531     }  
//  532     
//  533   SampleApp_Addr_SendData_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
??SampleApp_SendNwkaddrMessage_3:
        MOV     DPTR,#SampleApp_Addr_SendData_DstAddr + 8
        MOV     A,#0x2
        MOVX    @DPTR,A
//  534   SampleApp_Addr_SendData_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
        MOV     DPTR,#SampleApp_Addr_SendData_DstAddr + 9
        MOV     A,#0x14
        MOVX    @DPTR,A
//  535   SampleApp_Addr_SendData_DstAddr.addr.shortAddr = parent_short_adress;
        MOV     DPTR,#SampleApp_Addr_SendData_DstAddr
        MOV     A,?V0 + 0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,?V0 + 1
        MOVX    @DPTR,A
//  536   
//  537   /*修改完成*/
//  538   if ( AF_DataRequest( &SampleApp_Addr_SendData_DstAddr,
//  539                       (endPointDesc_t *)&SampleApp_epDesc,
//  540                       SAMPLEAPP_ADDR_CLUSTERID ,
//  541                       23, str,
//  542                       &SampleApp_TransID, 
//  543                       AF_DISCV_ROUTE, 
//  544                       AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
        ; Setup parameters for call to function AF_DataRequest
        MOV     ?V0 + 7,#0xf
        MOV     R0,#?V0 + 7
        LCALL   ?PUSH_XSTACK_I_ONE
        CFI CFA_XSP16 add(XSP16, 43)
        MOV     ?V0 + 8,#SampleApp_TransID & 0xff
        MOV     ?V0 + 9,#(SampleApp_TransID >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 45)
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     ?V0 + 8,DPL
        MOV     ?V0 + 9,DPH
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 47)
        MOV     ?V0 + 8,#0x17
        MOV     ?V0 + 9,#0x0
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 49)
        MOV     ?V0 + 8,#0x3
        MOV     ?V0 + 9,#0x0
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 51)
        MOV     R1,#0x20
        MOV     R4,#SampleApp_epDesc & 0xff
        MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
        MOV     R2,#SampleApp_Addr_SendData_DstAddr & 0xff
        MOV     R3,#(SampleApp_Addr_SendData_DstAddr >> 8) & 0xff
        LCALL   ??AF_DataRequest?relay
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 42)
        MOV     A,R1
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    @DPTR,A
//  545   {
//  546   }
//  547   else
//  548   {   
//  549   }
//  550   
//  551 }
        MOV     A,#0x18
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 18)
        MOV     R7,#0xa
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock7
//  552 
//  553 
//  554 
//  555 
//  556 
//  557 
//  558 

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  559 void APPLY_TO_JOIN_OF_KEY(void)
APPLY_TO_JOIN_OF_KEY:
        CFI Block cfiBlock8 Using cfiCommon0
        CFI Function APPLY_TO_JOIN_OF_KEY
        CODE
//  560 {
        FUNCALL APPLY_TO_JOIN_OF_KEY, zb_ReadConfiguration
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 1, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 1, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APPLY_TO_JOIN_OF_KEY, zb_WriteConfiguration
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 1, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 1, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APPLY_TO_JOIN_OF_KEY, osal_start_timerEx
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 1, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 1, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUSH    DPL
        CFI DPL0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        PUSH    DPH
        CFI DPH0 Frame(CFA_SP, 5)
        CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 1
        MOV     A,#-0x1
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 1)
//  561   uint8 startOptions;
//  562   zb_ReadConfiguration( ZCD_NV_STARTUP_OPTION, sizeof(uint8), &startOptions );
        ; Setup parameters for call to function zb_ReadConfiguration
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R4,DPL
        MOV     R5,DPH
        MOV     R2,#0x1
        MOV     R1,#0x3
        LCALL   ??zb_ReadConfiguration?relay
        MOV     A,R1
//  563   startOptions = ZCD_STARTOPT_AUTO_START;
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,#0x4
        MOVX    @DPTR,A
//  564   zb_WriteConfiguration( ZCD_NV_STARTUP_OPTION, sizeof(uint8), &startOptions );
        ; Setup parameters for call to function zb_WriteConfiguration
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R4,DPL
        MOV     R5,DPH
        MOV     R2,#0x1
        MOV     R1,#0x3
        LCALL   ??zb_WriteConfiguration?relay
        MOV     A,R1
//  565  // SystemResetSoft();  
//  566   
//  567   //HAL_SYSTEM_RESET();   
//  568    osal_start_timerEx( SampleApp_TaskID,SAMPLEAPP_RESTORE_EVT,1000 );
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#-0x18
        MOV     R5,#0x3
        MOV     R2,#0x10
        MOV     R3,#0x0
        MOV     DPTR,#SampleApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
//  569   
//  570 }
        MOV     A,#0x1
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 XSP16+0
        POP     DPH
        CFI DPH0 SameValue
        CFI CFA_SP SP+-4
        POP     DPL
        CFI DPL0 SameValue
        CFI CFA_SP SP+-3
        LJMP    ?BRET
        CFI EndBlock cfiBlock8
//  571 

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  572 void RESTORE_TO_FACTORY(void)
RESTORE_TO_FACTORY:
        CFI Block cfiBlock9 Using cfiCommon0
        CFI Function RESTORE_TO_FACTORY
        CODE
//  573 {
        FUNCALL RESTORE_TO_FACTORY, SampleApp_GetShortAddr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL RESTORE_TO_FACTORY, AF_DataRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 33, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 33, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL RESTORE_TO_FACTORY, osal_nv_item_init
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 26, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 26, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL RESTORE_TO_FACTORY, osal_nv_write
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 28, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 28, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL RESTORE_TO_FACTORY, osal_nv_item_init
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 26, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 26, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL RESTORE_TO_FACTORY, osal_nv_write
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 28, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 28, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL RESTORE_TO_FACTORY, osal_nv_item_init
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 26, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 26, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL RESTORE_TO_FACTORY, osal_nv_write
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 28, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 28, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xb
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 11)
        ; Saved register size: 11
        ; Auto size: 13
        MOV     A,#-0xd
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
//  574   uint8 startOptions;
//  575   startOptions=0;    
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,#0x0
        MOVX    @DPTR,A
//  576   uint8 quit_str[12];
//  577   uint8 *Sample_Cmd_shorAddr;
//  578   Sample_Cmd_shorAddr=SampleApp_GetShortAddr();
        ; Setup parameters for call to function SampleApp_GetShortAddr
        LCALL   ??SampleApp_GetShortAddr?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     R6,?V0 + 0
        MOV     R7,?V0 + 1
//  579   quit_str[0]=*Sample_Cmd_shorAddr++;
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x1
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOV     R6,DPL
        MOV     R7,DPH
//  580   quit_str[1]=*Sample_Cmd_shorAddr++;
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOV     R6,DPL
        MOV     R7,DPH
//  581   quit_str[2]=*Sample_Cmd_shorAddr++;
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x3
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOV     R6,DPL
        MOV     R7,DPH
//  582   quit_str[3]=*Sample_Cmd_shorAddr;
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
//  583   quit_str[4]='/';
        MOV     A,#0x5
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x2f
        MOVX    @DPTR,A
//  584   quit_str[5]='C';
        MOV     A,#0x6
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x43
        MOVX    @DPTR,A
//  585   quit_str[6]='/';
        MOV     A,#0x7
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x2f
        MOVX    @DPTR,A
//  586   quit_str[7]='U';
        MOV     A,#0x8
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x55
        MOVX    @DPTR,A
//  587   quit_str[8]='U';
        MOV     A,#0x9
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x55
        MOVX    @DPTR,A
//  588   quit_str[9]=0xA0;
        MOV     A,#0xa
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#-0x60
        MOVX    @DPTR,A
//  589   quit_str[10]=0xBB;
        MOV     A,#0xb
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#-0x45
        MOVX    @DPTR,A
//  590   quit_str[11]=0;
        MOV     A,#0xc
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x0
        MOVX    @DPTR,A
//  591   SampleApp_SPI_SendCommand_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 8
        MOV     A,#0x2
        MOVX    @DPTR,A
//  592   SampleApp_SPI_SendCommand_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 9
        MOV     A,#0x14
        MOVX    @DPTR,A
//  593   SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;//发送给来的设备
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
//  594   if ( AF_DataRequest( &SampleApp_SPI_SendCommand_DstAddr,
//  595            (endPointDesc_t *)&SampleApp_epDesc,
//  596             SAMPLEAPP_COMMAND_CLUSTERID, //终端传过去，协调器处理了
//  597             12, quit_str,
//  598             &SampleApp_TransID, 
//  599             AF_DISCV_ROUTE, 
//  600             AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
        ; Setup parameters for call to function AF_DataRequest
        MOV     ?V0 + 0,#0xf
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_ONE
        CFI CFA_XSP16 add(XSP16, 25)
        MOV     ?V0 + 0,#SampleApp_TransID & 0xff
        MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 27)
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     ?V0 + 0,DPL
        MOV     ?V0 + 1,DPH
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 29)
        MOV     ?V0 + 0,#0xc
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 31)
        MOV     ?V0 + 0,#0x4
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 33)
        MOV     R1,#0x20
        MOV     R4,#SampleApp_epDesc & 0xff
        MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
        MOV     R2,#SampleApp_SPI_SendCommand_DstAddr & 0xff
        MOV     R3,#(SampleApp_SPI_SendCommand_DstAddr >> 8) & 0xff
        LCALL   ??AF_DataRequest?relay
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     A,R1
        MOV     ?V0 + 2,A
//  601   {
//  602   }
//  603   else
//  604   {
//  605   
//  606   }  
//  607   
//  608   osal_nv_item_init(ZCD_NV_STARTUP_OPTION, 1, &startOptions);    
        ; Setup parameters for call to function osal_nv_item_init
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     ?V0 + 0,DPL
        MOV     ?V0 + 1,DPH
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 26)
        MOV     R4,#0x1
        MOV     R5,#0x0
        MOV     R2,#0x3
        MOV     R3,#0x0
        LCALL   ??osal_nv_item_init?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     A,R1
//  609   startOptions |= ZCD_STARTOPT_DEFAULT_NETWORK_STATE;
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        SETB    0xE0 /* A   */.1
        MOVX    @DPTR,A
//  610   startOptions &= ~ZCD_STARTOPT_AUTO_START;
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        CLR     0xE0 /* A   */.2
        MOVX    @DPTR,A
//  611   osal_nv_write(ZCD_NV_STARTUP_OPTION, 0, 1, &startOptions); 
        ; Setup parameters for call to function osal_nv_write
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     ?V0 + 0,DPL
        MOV     ?V0 + 1,DPH
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 26)
        MOV     ?V0 + 0,#0x1
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 28)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R2,#0x3
        MOV     R3,#0x0
        LCALL   ??osal_nv_write?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     A,R1
//  612   
//  613   Join_isset_flag  =1; 
        MOV     DPTR,#Join_isset_flag
        MOV     A,#0x1
        MOVX    @DPTR,A
//  614   osal_nv_item_init(ZCD_NV_JOIN_ISSET_FLAG, 1, &Join_isset_flag); 
        ; Setup parameters for call to function osal_nv_item_init
        MOV     ?V0 + 0,#Join_isset_flag & 0xff
        MOV     ?V0 + 1,#(Join_isset_flag >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 26)
        MOV     R4,#0x1
        MOV     R5,#0x0
        MOV     R2,#0x38
        MOV     R3,#0x4
        LCALL   ??osal_nv_item_init?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     A,R1
//  615   osal_nv_write(ZCD_NV_JOIN_ISSET_FLAG, 0, 1, &Join_isset_flag);
        ; Setup parameters for call to function osal_nv_write
        MOV     ?V0 + 0,#Join_isset_flag & 0xff
        MOV     ?V0 + 1,#(Join_isset_flag >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 26)
        MOV     ?V0 + 0,#0x1
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 28)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R2,#0x38
        MOV     R3,#0x4
        LCALL   ??osal_nv_write?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     A,R1
//  616   
//  617   New_join_delay_time = 0xff;
        MOV     DPTR,#New_join_delay_time
        MOV     A,#-0x1
        MOVX    @DPTR,A
//  618   osal_nv_item_init(ZCD_NV_JOIN_START_TIME_VALUE, 1, &New_join_delay_time); 
        ; Setup parameters for call to function osal_nv_item_init
        MOV     ?V0 + 0,#New_join_delay_time & 0xff
        MOV     ?V0 + 1,#(New_join_delay_time >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 26)
        MOV     R4,#0x1
        MOV     R5,#0x0
        MOV     R2,#0x35
        MOV     R3,#0x4
        LCALL   ??osal_nv_item_init?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     A,R1
//  619   osal_nv_write(ZCD_NV_JOIN_START_TIME_VALUE, 0, 1, &New_join_delay_time); 
        ; Setup parameters for call to function osal_nv_write
        MOV     ?V0 + 0,#New_join_delay_time & 0xff
        MOV     ?V0 + 1,#(New_join_delay_time >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 26)
        MOV     ?V0 + 0,#0x1
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 28)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R2,#0x35
        MOV     R3,#0x4
        LCALL   ??osal_nv_write?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     A,R1
//  620   
//  621 }
        MOV     A,#0xd
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 11)
        MOV     R7,#0x3
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock9
//  622 

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  623 void SampleApp_SendPeriodicMessage( void )
SampleApp_SendPeriodicMessage:
        CFI Block cfiBlock10 Using cfiCommon0
        CFI Function SampleApp_SendPeriodicMessage
        CODE
//  624 {
        FUNCALL SampleApp_SendPeriodicMessage, SampleApp_GetShortAddr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 17, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 17, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_SendPeriodicMessage, osal_mem_free
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 17, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 17, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_SendPeriodicMessage, AF_DataRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 26, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 26, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_SendPeriodicMessage, NLME_GetCoordShortAddr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 17, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 17, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_SendPeriodicMessage, AF_DataRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 26, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 26, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xd
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 13)
        ; Saved register size: 13
        ; Auto size: 4
        MOV     A,#-0x4
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 17)
//  625   /*##########################################*/
//  626   
//  627   uint8 buffer[4];
//  628   uint8 *Sample_Cmd_shorAddr;
//  629   uint16 parent_short_adress;
//  630   
//  631   Sample_Cmd_shorAddr=SampleApp_GetShortAddr();
        ; Setup parameters for call to function SampleApp_GetShortAddr
        LCALL   ??SampleApp_GetShortAddr?relay
        MOV     ?V0 + 2,R2
        MOV     ?V0 + 3,R3
        MOV     R6,?V0 + 2
        MOV     R7,?V0 + 3
//  632   buffer[0]=*Sample_Cmd_shorAddr++;
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    @DPTR,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOV     R6,DPL
        MOV     R7,DPH
//  633   buffer[1]=*Sample_Cmd_shorAddr++;
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x1
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOV     R6,DPL
        MOV     R7,DPH
//  634   buffer[2]=*Sample_Cmd_shorAddr++;
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOV     R6,DPL
        MOV     R7,DPH
//  635   buffer[3]=*Sample_Cmd_shorAddr;
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x3
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
//  636   
//  637   osal_mem_free( shortddr_mem );
        ; Setup parameters for call to function osal_mem_free
        MOV     DPTR,#shortddr_mem
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??osal_mem_free?relay
//  638   
//  639   
//  640 
//  641   if(RTR_NWK_FLAG==1)
        MOV     DPTR,#RTR_NWK_FLAG
        MOVX    A,@DPTR
        XRL     A,#0x1
        JNZ     ??SampleApp_SendPeriodicMessage_0
//  642   {
//  643       parent_short_adress=0X0000;//如果是路由的话则直接发给协调器
        MOV     ?V0 + 0,#0x0
        MOV     ?V0 + 1,#0x0
//  644       SampleApp_Addr_SendData_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
        MOV     DPTR,#SampleApp_Addr_SendData_DstAddr + 8
        MOV     A,#0x2
        MOVX    @DPTR,A
//  645       SampleApp_Addr_SendData_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
        MOV     DPTR,#SampleApp_Addr_SendData_DstAddr + 9
        MOV     A,#0x14
        MOVX    @DPTR,A
//  646       SampleApp_Addr_SendData_DstAddr.addr.shortAddr = parent_short_adress;
        MOV     DPTR,#SampleApp_Addr_SendData_DstAddr
        MOV     A,?V0 + 0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,?V0 + 1
        MOVX    @DPTR,A
//  647       
//  648       if ( AF_DataRequest( &SampleApp_Addr_SendData_DstAddr, &SampleApp_epDesc,
//  649                       SAMPLEAPP_PERIODIC_CLUSTERID,
//  650                       4,  //数据长度
//  651                       buffer,//###添加的发送数据        
//  652                       &SampleApp_TransID,
//  653                       AF_DISCV_ROUTE,
//  654                       AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
        ; Setup parameters for call to function AF_DataRequest
        MOV     ?V0 + 2,#0xf
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_ONE
        CFI CFA_XSP16 add(XSP16, 18)
        MOV     ?V0 + 2,#SampleApp_TransID & 0xff
        MOV     ?V0 + 3,#(SampleApp_TransID >> 8) & 0xff
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 20)
        MOV     A,#0x3
        LCALL   ?XSTACK_DISP0_8
        MOV     ?V0 + 2,DPL
        MOV     ?V0 + 3,DPH
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 22)
        MOV     ?V0 + 2,#0x4
        MOV     ?V0 + 3,#0x0
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     ?V0 + 2,#0x5
        MOV     ?V0 + 3,#0x0
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 26)
        MOV     R1,#0x20
        MOV     R4,#SampleApp_epDesc & 0xff
        MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
        MOV     R2,#SampleApp_Addr_SendData_DstAddr & 0xff
        MOV     R3,#(SampleApp_Addr_SendData_DstAddr >> 8) & 0xff
        LCALL   ??AF_DataRequest?relay
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 17)
        MOV     A,R1
        LJMP    ??SampleApp_SendPeriodicMessage_1 & 0xFFFF
//  655       {
//  656       }
//  657       else
//  658       {
//  659       
//  660       }
//  661   }
//  662   else
//  663   {
//  664       parent_short_adress= NLME_GetCoordShortAddr();//如果是终端的话先转发给父节点get the parent adress
??SampleApp_SendPeriodicMessage_0:
        ; Setup parameters for call to function NLME_GetCoordShortAddr
        LCALL   ??NLME_GetCoordShortAddr?relay
        MOV     ?V0 + 2,R2
        MOV     ?V0 + 3,R3
        MOV     ?V0 + 0,?V0 + 2
        MOV     ?V0 + 1,?V0 + 3
//  665       SampleApp_Addr_SendData_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
        MOV     DPTR,#SampleApp_Addr_SendData_DstAddr + 8
        MOV     A,#0x2
        MOVX    @DPTR,A
//  666       SampleApp_Addr_SendData_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
        MOV     DPTR,#SampleApp_Addr_SendData_DstAddr + 9
        MOV     A,#0x14
        MOVX    @DPTR,A
//  667       SampleApp_Addr_SendData_DstAddr.addr.shortAddr = parent_short_adress;
        MOV     DPTR,#SampleApp_Addr_SendData_DstAddr
        MOV     A,?V0 + 0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,?V0 + 1
        MOVX    @DPTR,A
//  668       
//  669       uint8 OPTION_AF=0;
        MOV     ?V0 + 4,#0x0
//  670      if(HEART_NEED_ACK_FLAG==1)
        MOV     DPTR,#HEART_NEED_ACK_FLAG
        MOVX    A,@DPTR
        XRL     A,#0x1
        JNZ     ??SampleApp_SendPeriodicMessage_2
//  671      { 
//  672        HEART_NEED_ACK_FLAG = 0;
        MOV     DPTR,#HEART_NEED_ACK_FLAG
        MOV     A,#0x0
        MOVX    @DPTR,A
//  673        OPTION_AF = AF_DISCV_ROUTE|AF_ACK_REQUEST;
        MOV     ?V0 + 4,#0x30
        SJMP    ??SampleApp_SendPeriodicMessage_3
//  674      }
//  675      else
//  676      {
//  677       OPTION_AF = AF_DISCV_ROUTE;
??SampleApp_SendPeriodicMessage_2:
        MOV     ?V0 + 4,#0x20
//  678      } 
//  679       
//  680       
//  681       if ( AF_DataRequest( &SampleApp_Addr_SendData_DstAddr, &SampleApp_epDesc,
//  682                           SAMPLEAPP_PERIODIC_CLUSTERID,
//  683                           4,  //数据长度
//  684                           buffer,//###添加的发送数据        
//  685                           &SampleApp_TransID,
//  686                           OPTION_AF,
//  687                           AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
??SampleApp_SendPeriodicMessage_3:
        ; Setup parameters for call to function AF_DataRequest
        MOV     ?V0 + 2,#0xf
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_ONE
        CFI CFA_XSP16 add(XSP16, 18)
        MOV     ?V0 + 2,#SampleApp_TransID & 0xff
        MOV     ?V0 + 3,#(SampleApp_TransID >> 8) & 0xff
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 20)
        MOV     A,#0x3
        LCALL   ?XSTACK_DISP0_8
        MOV     ?V0 + 2,DPL
        MOV     ?V0 + 3,DPH
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 22)
        MOV     ?V0 + 2,#0x4
        MOV     ?V0 + 3,#0x0
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     ?V0 + 2,#0x5
        MOV     ?V0 + 3,#0x0
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 26)
        MOV     R1,?V0 + 4
        MOV     R4,#SampleApp_epDesc & 0xff
        MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
        MOV     R2,#SampleApp_Addr_SendData_DstAddr & 0xff
        MOV     R3,#(SampleApp_Addr_SendData_DstAddr >> 8) & 0xff
        LCALL   ??AF_DataRequest?relay
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 17)
        MOV     A,R1
//  688       {
//  689       }
//  690       else
//  691       {
//  692         
//  693       }
//  694 
//  695   }   
//  696 
//  697   
//  698   
//  699 }
??SampleApp_SendPeriodicMessage_1:
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 13)
        MOV     R7,#0x5
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock10
//  700 
//  701 
//  702 /******************************************************************************
//  703 * @fn          zb_ReadConfiguration
//  704 *
//  705 * @brief       The zb_ReadConfiguration function is used to get a
//  706 *              Configuration Protperty from Nonvolatile memory.
//  707 *
//  708 * @param       configId - The identifier for the configuration property
//  709 *              len - The size of the pValue buffer in bytes
//  710 *              pValue - A buffer to hold the configuration property
//  711 *
//  712 * @return      none
//  713 */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  714 uint8 zb_ReadConfiguration( uint8 configId, uint8 len, void *pValue )
zb_ReadConfiguration:
        CFI Block cfiBlock11 Using cfiCommon0
        CFI Function zb_ReadConfiguration
        CODE
//  715 {
        FUNCALL zb_ReadConfiguration, osal_nv_item_len
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 13, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL zb_ReadConfiguration, osal_nv_read
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 17, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 17, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xd
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 13)
        ; Saved register size: 13
        ; Auto size: 0
        MOV     ?V0 + 4,R1
        MOV     A,R2
        MOV     R6,A
        MOV     ?V0 + 2,R4
        MOV     ?V0 + 3,R5
//  716   uint8 size;
//  717   
//  718   size = (uint8)osal_nv_item_len( configId );
        ; Setup parameters for call to function osal_nv_item_len
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,#0x0
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        LCALL   ??osal_nv_item_len?relay
        MOV     A,R2
        MOV     R7,A
//  719   if ( size > len )
        MOV     A,R6
        CLR     C
        SUBB    A,R7
        JNC     ??zb_ReadConfiguration_0
//  720   {
//  721     return ZFailure;
        MOV     R1,#0x1
        SJMP    ??zb_ReadConfiguration_1
//  722   }
//  723   else
//  724   {
//  725     return( osal_nv_read(configId, 0, size, pValue) );
??zb_ReadConfiguration_0:
        ; Setup parameters for call to function osal_nv_read
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 15)
        MOV     ?V0 + 0,R7
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 17)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,#0x0
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        LCALL   ??osal_nv_read?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 13)
??zb_ReadConfiguration_1:
        MOV     R7,#0x5
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock11
//  726   }
//  727 }
//  728 
//  729 /******************************************************************************
//  730 * @fn          zb_WriteConfiguration
//  731 *
//  732 * @brief       The zb_WriteConfiguration function is used to write a
//  733 *              Configuration Property to nonvolatile memory.
//  734 *
//  735 * @param       configId - The identifier for the configuration property
//  736 *              len - The size of the pValue buffer in bytes
//  737 *              pValue - A buffer containing the new value of the
//  738 *                       configuration property
//  739 *
//  740 * @return      none
//  741 */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  742 uint8 zb_WriteConfiguration( uint8 configId, uint8 len, void *pValue )
zb_WriteConfiguration:
        CFI Block cfiBlock12 Using cfiCommon0
        CFI Function zb_WriteConfiguration
        CODE
//  743 {
        FUNCALL zb_WriteConfiguration, osal_nv_write
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xc
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 12)
        ; Saved register size: 12
        ; Auto size: 0
        MOV     A,R1
        MOV     R7,A
        MOV     A,R2
        MOV     R6,A
        MOV     ?V0 + 2,R4
        MOV     ?V0 + 3,R5
//  744   return( osal_nv_write(configId, 0, len, pValue) );
        ; Setup parameters for call to function osal_nv_write
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 14)
        MOV     ?V0 + 0,R6
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 16)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     ?V0 + 0,R7
        MOV     ?V0 + 1,#0x0
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        LCALL   ??osal_nv_write?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 12)
        MOV     R7,#0x4
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock12
//  745 }
//  746 
//  747 

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  748 uint8 *SampleApp_GetShortAddr(void)
SampleApp_GetShortAddr:
        CFI Block cfiBlock13 Using cfiCommon0
        CFI Function SampleApp_GetShortAddr
        CODE
//  749 {
        FUNCALL SampleApp_GetShortAddr, osal_mem_alloc
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_GetShortAddr, NLME_GetShortAddr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_GetShortAddr, hextoword1
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_GetShortAddr, hextoword2
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_GetShortAddr, hextoword1
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_GetShortAddr, hextoword2
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xe
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 14)
        ; Saved register size: 14
        ; Auto size: 0
//  750   uint16 short_ddr;
//  751   uint8 *shortddr;
//  752   uint8 yy1;
//  753   uint8 yy2; 
//  754   //  uint8 *shortddr_mem;
//  755   
//  756   shortddr_mem=osal_mem_alloc(4); 
        ; Setup parameters for call to function osal_mem_alloc
        MOV     R2,#0x4
        MOV     R3,#0x0
        LCALL   ??osal_mem_alloc?relay
        MOV     DPTR,#shortddr_mem
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
//  757   short_ddr=NLME_GetShortAddr();
        ; Setup parameters for call to function NLME_GetShortAddr
        LCALL   ??NLME_GetShortAddr?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
//  758   yy1=(uint8)((short_ddr&0xff00)>>8);
        MOV     R0,?V0 + 0
        MOV     R1,?V0 + 1
        CLR     A
        MOV     A,?V0 + 1
        MOV     R0,?V0 + 1
        MOV     A,?V0 + 1
        MOV     ?V0 + 2,A
//  759   yy2=(uint8)short_ddr;
        MOV     A,?V0 + 0
        MOV     ?V0 + 3,A
//  760   shortddr_mem[0]=hextoword1(yy1);
        ; Setup parameters for call to function hextoword1
        MOV     R1,?V0 + 2
        LCALL   ??hextoword1?relay
        MOV     A,R1
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     DPTR,#shortddr_mem
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
//  761   shortddr_mem[1]=hextoword2(yy1);
        ; Setup parameters for call to function hextoword2
        MOV     R1,?V0 + 2
        LCALL   ??hextoword2?relay
        MOV     A,R1
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     DPTR,#shortddr_mem
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
//  762   shortddr_mem[2]=hextoword1(yy2);
        ; Setup parameters for call to function hextoword1
        MOV     R1,?V0 + 3
        LCALL   ??hextoword1?relay
        MOV     A,R1
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     DPTR,#shortddr_mem
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        INC     DPTR
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
//  763   shortddr_mem[3]=hextoword2(yy2);
        ; Setup parameters for call to function hextoword2
        MOV     R1,?V0 + 3
        LCALL   ??hextoword2?relay
        MOV     A,R1
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     DPTR,#shortddr_mem
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        INC     DPTR
        INC     DPTR
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
//  764   shortddr=shortddr_mem;
        MOV     DPTR,#shortddr_mem
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        MOV     R6,A
        MOV     A,R1
        MOV     R7,A
//  765   
//  766   return shortddr;
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        MOV     R7,#0x6
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock13
//  767 }
//  768 
//  769 
//  770 /*********************************************************************
//  771 * @fn      SampleApp_GetExtendAddr()
//  772 *
//  773 * @brief   get the entendaddr
//  774 *
//  775 * @param   none
//  776 *
//  777 * @return  uin8 *my_extendaddr
//  778 */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  779 uint8 *SampleApp_GetExtendAddr(void)
SampleApp_GetExtendAddr:
        CFI Block cfiBlock14 Using cfiCommon0
        CFI Function SampleApp_GetExtendAddr
        CODE
//  780 {
        FUNCALL SampleApp_GetExtendAddr, osal_mem_alloc
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_GetExtendAddr, NLME_GetExtAddr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_GetExtendAddr, hextoword1
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_GetExtendAddr, hextoword2
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xe
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 14)
        ; Saved register size: 14
        ; Auto size: 0
//  781   uint8 i;
//  782   uint8 *ext_addr;
//  783   uint8 *extaddr;
//  784   //  uint8 *extendaddr_mem;
//  785   
//  786   extendaddr_mem=osal_mem_alloc(16);
        ; Setup parameters for call to function osal_mem_alloc
        MOV     R2,#0x10
        MOV     R3,#0x0
        LCALL   ??osal_mem_alloc?relay
        MOV     DPTR,#extendaddr_mem
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
//  787   ext_addr=NLME_GetExtAddr();
        ; Setup parameters for call to function NLME_GetExtAddr
        LCALL   ??NLME_GetExtAddr?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     R6,?V0 + 4
        MOV     R7,?V0 + 5
//  788   for(i=0;i<15;i=i+2)
        MOV     ?V0 + 2,#0x0
??SampleApp_GetExtendAddr_0:
        MOV     A,?V0 + 2
        CLR     C
        SUBB    A,#0xf
        JNC     ??SampleApp_GetExtendAddr_1
//  789   {
//  790     extendaddr_mem[i]=hextoword1(*ext_addr);
        ; Setup parameters for call to function hextoword1
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??hextoword1?relay
        MOV     A,R1
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,?V0 + 2
        MOV     R0,?V0 + 2
        MOV     R1,#0x0
        MOV     DPTR,#extendaddr_mem
        MOVX    A,@DPTR
        ADD     A,R0
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,R1
        MOV     DPL,R2
        MOV     DPH,A
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
//  791     extendaddr_mem[i+1]=hextoword2(*ext_addr++);
        ; Setup parameters for call to function hextoword2
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??hextoword2?relay
        MOV     A,R1
        MOV     R0,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOV     R6,DPL
        MOV     R7,DPH
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,?V0 + 2
        MOV     R0,?V0 + 2
        MOV     R1,#0x0
        MOV     DPTR,#extendaddr_mem
        MOVX    A,@DPTR
        ADD     A,R0
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,R1
        MOV     DPL,R2
        MOV     DPH,A
        INC     DPTR
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
//  792   }
        INC     ?V0 + 2
        INC     ?V0 + 2
        SJMP    ??SampleApp_GetExtendAddr_0
//  793   extaddr=extendaddr_mem;
??SampleApp_GetExtendAddr_1:
        MOV     DPTR,#extendaddr_mem
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     ?V0 + 0,R0
        MOV     ?V0 + 1,R1
//  794   return extaddr;
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        MOV     R7,#0x6
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock14
//  795 }
//  796 
//  797 
//  798 /*********************************************************************
//  799 * @fn      hextoword1/2
//  800 *
//  801 * @brief   translate the hex to word.
//  802 *
//  803 * @param   uint8 t
//  804 *
//  805 * @return  none
//  806 */
//  807 //十六进制转字符函数

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  808 uint8 hextoword1(uint8 t )
hextoword1:
        CFI Block cfiBlock15 Using cfiCommon0
        CFI Function hextoword1
        CODE
//  809 {
        ; Saved register size: 0
        ; Auto size: 0
        MOV     A,R1
        MOV     R0,A
//  810   uint8 abc;
//  811   uint8 cba;
//  812   uint8 xx1;
//  813   abc=t;
        MOV     R2,A
//  814   cba=0xf0;
        MOV     R3,#-0x10
//  815   abc=(abc&cba)>>4;
        ANL     A,R3
        SWAP    A
        ANL     A,#0xf
        MOV     R2,A
//  816   if(abc<10)
        MOV     A,R2
        CLR     C
        SUBB    A,#0xa
        JNC     ??hextoword1_0
//  817   {
//  818     xx1=abc+48;
        MOV     A,#0x30
        ADD     A,R2
        MOV     R1,A
        SJMP    ??hextoword1_1
//  819   }
//  820   else
//  821   {
//  822     xx1=abc+55;
??hextoword1_0:
        MOV     A,#0x37
        ADD     A,R2
        MOV     R1,A
//  823   }
//  824   return xx1;
??hextoword1_1:
        LJMP    ?BRET
        CFI EndBlock cfiBlock15
//  825 }
//  826 

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  827 uint8 hextoword2(uint8 t)
hextoword2:
        CFI Block cfiBlock16 Using cfiCommon0
        CFI Function hextoword2
        CODE
//  828 {
        PUSH    ?V0 + 0
        CFI V0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        ; Saved register size: 1
        ; Auto size: 0
        MOV     A,R1
        MOV     R0,A
//  829   uint8 abc;
//  830   uint8 cba;
//  831   uint8 xx2;
//  832   abc=t;
        MOV     ?V0 + 0,R0
//  833   cba=0x0f;
        MOV     R2,#0xf
//  834   abc=abc&cba;
        MOV     A,R2
        ANL     ?V0 + 0,A
//  835   if(abc<10)
        MOV     A,?V0 + 0
        CLR     C
        SUBB    A,#0xa
        JNC     ??hextoword2_0
//  836   {
//  837     xx2=abc+48;
        MOV     A,#0x30
        ADD     A,?V0 + 0
        MOV     R1,A
        SJMP    ??hextoword2_1
//  838   }
//  839   else
//  840   {
//  841     xx2=abc+55;
??hextoword2_0:
        MOV     A,#0x37
        ADD     A,?V0 + 0
        MOV     R1,A
//  842   }
//  843   return xx2;
??hextoword2_1:
        POP     ?V0 + 0
        CFI V0 SameValue
        CFI CFA_SP SP+-3
        LJMP    ?BRET
        CFI EndBlock cfiBlock16
//  844 }
//  845 
//  846 

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  847 uint8 wordtohex(uint8 x,uint8 y)
wordtohex:
        CFI Block cfiBlock17 Using cfiCommon0
        CFI Function wordtohex
        CODE
//  848 {
        ; Saved register size: 0
        ; Auto size: 0
        MOV     A,R1
        MOV     R0,A
//  849   uint8 z;
//  850   if(x>0x39)
        MOV     A,R0
        CLR     C
        SUBB    A,#0x3a
        JC      ??wordtohex_0
//  851   {x=x-0x37;}		//针对16进制中的A B C D E F ASICII码A对应16进制的0X41 B对应0X42   所以 转换为16进制时应该减去0X37  (0X41-0X0A)
        MOV     A,#-0x37
        ADD     A,R0
        MOV     R0,A
        SJMP    ??wordtohex_1
//  852   else
//  853   {x=x-0x30;}		 //ASICII码0~9  对应的十六进制为0X30~0X39    减去0X30  即得到转换
??wordtohex_0:
        MOV     A,#-0x30
        ADD     A,R0
        MOV     R0,A
//  854   if(y>0x39)
??wordtohex_1:
        MOV     A,R2
        CLR     C
        SUBB    A,#0x3a
        JC      ??wordtohex_2
//  855   {y=y-0x37;}
        MOV     A,#-0x37
        ADD     A,R2
        MOV     R2,A
        SJMP    ??wordtohex_3
//  856   else
//  857   {y=y-0x30;}
??wordtohex_2:
        MOV     A,#-0x30
        ADD     A,R2
        MOV     R2,A
//  858   x=x<<4;			    //放到高位上，因为232通信的范围（除了前面的w r : n）就是在0~F几个数字之间 ，转换成16进制后，最多至为4位，半字节
??wordtohex_3:
        MOV     A,R0
        SWAP    A
        ANL     A,#0xf0
        MOV     R0,A
//  859   x=x&0xf0;
        XCH     A,R0
        ANL     A,#0xf0
        MOV     R0,A
//  860   z=y|x;
        MOV     A,R2
        ORL     A,R0
        MOV     R1,A
//  861   return(z);
        LJMP    ?BRET
        CFI EndBlock cfiBlock17
//  862 }
//  863 
//  864 /*
//  865 4位地址
//  866 uint8 command_flag_8,uint8 command_flag_13,uint8 command_flag_14,uint8 command_flag_15,uint8 command_flag_16
//  867 RSSI
//  868 
//  869 */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  870 void APP_NORMAL_COMMAND(uint8 *command_str)
APP_NORMAL_COMMAND:
        CFI Block cfiBlock18 Using cfiCommon0
        CFI Function APP_NORMAL_COMMAND
        CODE
//  871 {
        FUNCALL APP_NORMAL_COMMAND, AssocCount
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 84, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, osal_mem_alloc
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 84, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, osal_mem_alloc
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 84, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, NLME_GetCoordShortAddr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 84, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, AF_DataRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 93, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 93, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, osal_mem_free
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 84, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, osal_mem_free
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 84, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, osal_mem_alloc
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 84, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, AF_DataRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 93, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 93, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, osal_mem_free
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 84, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, osal_mem_free
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 84, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 84, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, HalLedBlink
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 84, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, osal_nv_item_init
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 86, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 86, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, osal_nv_write
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 88, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 88, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, osal_nv_item_init
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 86, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 86, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, osal_nv_write
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 88, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 88, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, osal_nv_item_init
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 86, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 86, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, osal_nv_write
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 88, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 88, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, AF_DataRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 93, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 93, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, osal_nv_item_init
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 86, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 86, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, osal_nv_write
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 88, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 88, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 84, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, ZMacSetTransmitPower
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 84, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, ZMacSetTransmitPower
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 84, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, ZMacSetTransmitPower
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 84, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, ZMacSetTransmitPower
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 84, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, NLME_SetPollRate
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 84, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 84, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, osal_nv_item_init
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 86, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 86, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, osal_nv_write
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 88, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 88, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, AF_DataRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 93, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 93, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, AF_DataRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 93, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 93, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 84, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, AF_DataRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 93, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 93, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 84, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_NORMAL_COMMAND, AF_DataRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 93, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 93, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x12
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 18)
        ; Saved register size: 18
        ; Auto size: 66
        MOV     A,#-0x42
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 84)
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
//  872   uint8 *SET_str;
//  873   //test 读取关联表信息发送到网关
//  874   
//  875   
//  876   
//  877   if(  command_str[4]==97)//a:97 读取关联表
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x61
        JZ      $+5
        LJMP    ??APP_NORMAL_COMMAND_0 & 0xFFFF
//  878   {
//  879     uint8 assi_count;
//  880     uint8 active_assi_count=0;
        MOV     ?V0 + 6,#0x0
//  881     uint8 total_count=0;
        MOV     ?V0 + 0,#0x0
//  882     
//  883     
//  884 //#if defined(RTR_NWK)
//  885 //#ifdef  RTR_NWK_ZDO 
//  886 //#if ( RTR_NWK_ZDO == 1)
//  887 if ( RTR_NWK_FLAG == 1)
        MOV     DPTR,#RTR_NWK_FLAG
        MOVX    A,@DPTR
        XRL     A,#0x1
        JZ      $+5
        LJMP    ??APP_NORMAL_COMMAND_1 & 0xFFFF
//  888     {
//  889     assi_count = AssocCount( (command_str[5]-0x30), (command_str[6]-0x30) );
        ; Setup parameters for call to function AssocCount
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        ADD     A,#-0x30
        MOV     R2,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        ADD     A,#-0x30
        MOV     R1,A
        LCALL   ??AssocCount?relay
        MOV     A,R2
        MOV     ?V0 + 1,A
//  890     total_count=12+(assi_count*2);
        MOV     B,#0x2
        MOV     A,?V0 + 1
        MUL     AB
        ADD     A,#0xc
        MOV     ?V0 + 0,A
//  891     SET_str=osal_mem_alloc(total_count);
        ; Setup parameters for call to function osal_mem_alloc
        MOV     ?V0 + 4,?V0 + 0
        MOV     ?V0 + 5,#0x0
        MOV     R2,?V0 + 4
        MOV     R3,?V0 + 5
        LCALL   ??osal_mem_alloc?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     ?V0 + 2,?V0 + 4
        MOV     ?V0 + 3,?V0 + 5
//  892     SET_str[0]=command_str[0];
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        MOVX    @DPTR,A
//  893     SET_str[1]=command_str[1];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        MOVX    @DPTR,A
//  894     SET_str[2]=command_str[2];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        MOVX    @DPTR,A
//  895     SET_str[3]=command_str[3];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    @DPTR,A
//  896     SET_str[4]='/';
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#0x2f
        MOVX    @DPTR,A
//  897     SET_str[5]='C';
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#0x43
        MOVX    @DPTR,A
//  898     SET_str[6]='/';
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#0x2f
        MOVX    @DPTR,A
//  899     SET_str[7]='U';
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#0x55
        MOVX    @DPTR,A
//  900     SET_str[8]='U';
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#0x55
        MOVX    @DPTR,A
//  901     SET_str[9]=0xA0; 
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#-0x60
        MOVX    @DPTR,A
//  902     SET_str[10]=3;
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#0x3
        MOVX    @DPTR,A
//  903     SET_str[11]=assi_count;
        MOV     A,?V0 + 1
        MOV     A,?V0 + 2
        ADD     A,#0xb
        MOV     DPL,A
        MOV     A,?V0 + 3
        ADDC    A,#0x0
        MOV     DPH,A
        MOV     A,?V0 + 1
        MOVX    @DPTR,A
//  904     for(uint8 i=0;i<NWK_MAX_DEVICES;i++)
        MOV     R2,#0x0
??APP_NORMAL_COMMAND_2:
        MOV     A,R2
        CLR     C
        SUBB    A,#0x15
        JC      $+5
        LJMP    ??APP_NORMAL_COMMAND_3 & 0xFFFF
//  905     {
//  906       if(AssociatedDevList[i].nodeRelation!=0xff)
        MOV     A,R2
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x12
        MUL     AB
        XCH     A,R0
        MOV     R3,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R3
        MOV     R3,A
        MOV     B,#0x12
        MOV     A,R1
        MUL     AB
        ADD     A,R3
        MOV     R1,A
        MOV     A,#(AssociatedDevList + 4) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((AssociatedDevList + 4) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOVX    A,@DPTR
        XRL     A,#0xff
        JNZ     $+5
        LJMP    ??APP_NORMAL_COMMAND_4 & 0xFFFF
//  907       {   
//  908         
//  909         SET_str[12+(2*active_assi_count)]=HI_UINT16(AssociatedDevList[i].shortAddr);
        MOV     A,R2
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x12
        MUL     AB
        XCH     A,R0
        MOV     R3,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R3
        MOV     R3,A
        MOV     B,#0x12
        MOV     A,R1
        MUL     AB
        ADD     A,R3
        MOV     R1,A
        MOV     A,#AssociatedDevList & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#(AssociatedDevList >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        CLR     A
        MOV     A,R1
        MOV     R0,A
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,?V0 + 6
        MOV     R0,?V0 + 6
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x2
        MUL     AB
        XCH     A,R0
        MOV     R3,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R3
        MOV     R3,A
        MOV     B,#0x2
        MOV     A,R1
        MUL     AB
        ADD     A,R3
        MOV     R1,A
        MOV     A,?V0 + 2
        ADD     A,R0
        MOV     R0,A
        MOV     A,?V0 + 3
        ADDC    A,R1
        MOV     R1,A
        MOV     A,R0
        ADD     A,#0xc
        MOV     DPL,A
        MOV     A,R1
        ADDC    A,#0x0
        MOV     DPH,A
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
//  910         SET_str[13+(2*active_assi_count)]=LO_UINT16(AssociatedDevList[i].shortAddr);
        MOV     A,R2
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x12
        MUL     AB
        XCH     A,R0
        MOV     R3,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R3
        MOV     R3,A
        MOV     B,#0x12
        MOV     A,R1
        MUL     AB
        ADD     A,R3
        MOV     R1,A
        MOV     A,#AssociatedDevList & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#(AssociatedDevList >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,?V0 + 6
        MOV     R0,?V0 + 6
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x2
        MUL     AB
        XCH     A,R0
        MOV     R3,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R3
        MOV     R3,A
        MOV     B,#0x2
        MOV     A,R1
        MUL     AB
        ADD     A,R3
        MOV     R1,A
        MOV     A,?V0 + 2
        ADD     A,R0
        MOV     R0,A
        MOV     A,?V0 + 3
        ADDC    A,R1
        MOV     R1,A
        MOV     A,R0
        ADD     A,#0xd
        MOV     DPL,A
        MOV     A,R1
        ADDC    A,#0x0
        MOV     DPH,A
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
//  911         active_assi_count++;
        INC     ?V0 + 6
//  912       }
//  913     }
??APP_NORMAL_COMMAND_4:
        INC     R2
        LJMP    ??APP_NORMAL_COMMAND_2 & 0xFFFF
//  914     }
//  915     else     
//  916     {
//  917     uint16 parent_short_adress;
//  918     assi_count=1;
??APP_NORMAL_COMMAND_1:
        MOV     ?V0 + 1,#0x1
//  919     total_count=14;
        MOV     ?V0 + 0,#0xe
//  920     
//  921     SET_str=osal_mem_alloc(total_count);
        ; Setup parameters for call to function osal_mem_alloc
        MOV     ?V0 + 8,?V0 + 0
        MOV     ?V0 + 9,#0x0
        MOV     R2,?V0 + 8
        MOV     R3,?V0 + 9
        LCALL   ??osal_mem_alloc?relay
        MOV     ?V0 + 8,R2
        MOV     ?V0 + 9,R3
        MOV     ?V0 + 2,?V0 + 8
        MOV     ?V0 + 3,?V0 + 9
//  922     SET_str[0]=command_str[0];
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        MOVX    @DPTR,A
//  923     SET_str[1]=command_str[1];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        MOVX    @DPTR,A
//  924     SET_str[2]=command_str[2];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        MOVX    @DPTR,A
//  925     SET_str[3]=command_str[3];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    @DPTR,A
//  926     SET_str[4]='/';
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#0x2f
        MOVX    @DPTR,A
//  927     SET_str[5]='C';
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#0x43
        MOVX    @DPTR,A
//  928     SET_str[6]='/';
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#0x2f
        MOVX    @DPTR,A
//  929     SET_str[7]='U';
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#0x55
        MOVX    @DPTR,A
//  930     SET_str[8]='U';
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#0x55
        MOVX    @DPTR,A
//  931     SET_str[9]=0xA0;
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#-0x60
        MOVX    @DPTR,A
//  932     SET_str[10]=3;
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#0x3
        MOVX    @DPTR,A
//  933     SET_str[11]=assi_count;
        MOV     A,?V0 + 1
        MOV     A,?V0 + 2
        ADD     A,#0xb
        MOV     DPL,A
        MOV     A,?V0 + 3
        ADDC    A,#0x0
        MOV     DPH,A
        MOV     A,?V0 + 1
        MOVX    @DPTR,A
//  934     parent_short_adress=NLME_GetCoordShortAddr();
        ; Setup parameters for call to function NLME_GetCoordShortAddr
        LCALL   ??NLME_GetCoordShortAddr?relay
        MOV     ?V0 + 8,R2
        MOV     ?V0 + 9,R3
        MOV     ?V0 + 4,?V0 + 8
        MOV     ?V0 + 5,?V0 + 9
//  935     SET_str[12]=HI_UINT16(parent_short_adress);
        MOV     R0,?V0 + 4
        MOV     R1,?V0 + 5
        CLR     A
        MOV     A,?V0 + 5
        MOV     R0,?V0 + 5
        MOV     A,?V0 + 5
        MOV     A,?V0 + 2
        ADD     A,#0xc
        MOV     DPL,A
        MOV     A,?V0 + 3
        ADDC    A,#0x0
        MOV     DPH,A
        MOV     A,?V0 + 5
        MOVX    @DPTR,A
//  936     SET_str[13]=LO_UINT16(parent_short_adress);
        MOV     A,?V0 + 4
        MOV     A,?V0 + 2
        ADD     A,#0xd
        MOV     DPL,A
        MOV     A,?V0 + 3
        ADDC    A,#0x0
        MOV     DPH,A
        MOV     A,?V0 + 4
        MOVX    @DPTR,A
//  937     }
//  938 
//  939     
//  940     
//  941     //   if(data_sucess_flag==2)
//  942     {    
//  943       SampleApp_SPI_SendCommand_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
??APP_NORMAL_COMMAND_3:
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 8
        MOV     A,#0x2
        MOVX    @DPTR,A
//  944       SampleApp_SPI_SendCommand_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 9
        MOV     A,#0x14
        MOVX    @DPTR,A
//  945       SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
//  946       //   SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = pkt->srcAddr.addr.shortAddr;//发送给来的设备
//  947       
//  948       if ( AF_DataRequest( &SampleApp_SPI_SendCommand_DstAddr,
//  949                           (endPointDesc_t *)&SampleApp_epDesc,
//  950                           SAMPLEAPP_COMMAND_CLUSTERID, //终端传过去，协调器处理了
//  951                           total_count, SET_str,
//  952                           &SampleApp_TransID, 
//  953                           AF_DISCV_ROUTE, 
//  954                           AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
        ; Setup parameters for call to function AF_DataRequest
        MOV     ?V0 + 4,#0xf
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_ONE
        CFI CFA_XSP16 add(XSP16, 85)
        MOV     ?V0 + 4,#SampleApp_TransID & 0xff
        MOV     ?V0 + 5,#(SampleApp_TransID >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 87)
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 89)
        MOV     ?V0 + 4,?V0 + 0
        MOV     ?V0 + 5,#0x0
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 91)
        MOV     ?V0 + 4,#0x4
        MOV     ?V0 + 5,#0x0
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 93)
        MOV     R1,#0x20
        MOV     R4,#SampleApp_epDesc & 0xff
        MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
        MOV     R2,#SampleApp_SPI_SendCommand_DstAddr & 0xff
        MOV     R3,#(SampleApp_SPI_SendCommand_DstAddr >> 8) & 0xff
        LCALL   ??AF_DataRequest?relay
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 84)
        MOV     A,R1
        JNZ     ??APP_NORMAL_COMMAND_5
//  955       {
//  956         osal_mem_free(SET_str);
        ; Setup parameters for call to function osal_mem_free
        MOV     R2,?V0 + 2
        MOV     R3,?V0 + 3
        LCALL   ??osal_mem_free?relay
        LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
//  957       }
//  958       else
//  959       {
//  960         osal_mem_free(SET_str);
??APP_NORMAL_COMMAND_5:
        ; Setup parameters for call to function osal_mem_free
        MOV     R2,?V0 + 2
        MOV     R3,?V0 + 3
        LCALL   ??osal_mem_free?relay
        LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
//  961       }  
//  962     }
//  963   }
//  964   
//  965   
//  966   else if(command_str[4]=='f')//f
??APP_NORMAL_COMMAND_0:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x66
        JZ      $+5
        LJMP    ??APP_NORMAL_COMMAND_7 & 0xFFFF
//  967   {
//  968     
//  969     SET_str=osal_mem_alloc(12);
        ; Setup parameters for call to function osal_mem_alloc
        MOV     R2,#0xc
        MOV     R3,#0x0
        LCALL   ??osal_mem_alloc?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     ?V0 + 2,?V0 + 0
        MOV     ?V0 + 3,?V0 + 1
//  970     SET_str[0]=command_str[0];
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        MOVX    @DPTR,A
//  971     SET_str[1]=command_str[1];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        MOVX    @DPTR,A
//  972     SET_str[2]=command_str[2];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        MOVX    @DPTR,A
//  973     SET_str[3]=command_str[3];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    @DPTR,A
//  974     SET_str[4]='/';
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#0x2f
        MOVX    @DPTR,A
//  975     SET_str[5]='C';
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#0x43
        MOVX    @DPTR,A
//  976     SET_str[6]='/';
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#0x2f
        MOVX    @DPTR,A
//  977     SET_str[7]='U';
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#0x55
        MOVX    @DPTR,A
//  978     SET_str[8]='U';
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#0x55
        MOVX    @DPTR,A
//  979     SET_str[9]=0xA0;
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#-0x60
        MOVX    @DPTR,A
//  980     SET_str[10]=2;
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#0x2
        MOVX    @DPTR,A
//  981     SET_str[11]=command_str[9];//get the rssi
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,?V0 + 2
        ADD     A,#0xb
        MOV     DPL,A
        MOV     A,?V0 + 3
        ADDC    A,#0x0
        MOV     DPH,A
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
//  982     //   if(data_sucess_flag==3)
//  983     {    
//  984       SampleApp_SPI_SendCommand_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 8
        MOV     A,#0x2
        MOVX    @DPTR,A
//  985       SampleApp_SPI_SendCommand_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 9
        MOV     A,#0x14
        MOVX    @DPTR,A
//  986       SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
//  987     //   SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = pkt->srcAddr.addr.shortAddr;//发送给来的设备
//  988       
//  989       if ( AF_DataRequest( &SampleApp_SPI_SendCommand_DstAddr,
//  990                           (endPointDesc_t *)&SampleApp_epDesc,
//  991                           SAMPLEAPP_COMMAND_CLUSTERID, //终端传过去，协调器处理了
//  992                           12, SET_str,
//  993                           &SampleApp_TransID, 
//  994                           AF_DISCV_ROUTE, 
//  995                           AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
        ; Setup parameters for call to function AF_DataRequest
        MOV     ?V0 + 0,#0xf
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_ONE
        CFI CFA_XSP16 add(XSP16, 85)
        MOV     ?V0 + 0,#SampleApp_TransID & 0xff
        MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 87)
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 89)
        MOV     ?V0 + 0,#0xc
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 91)
        MOV     ?V0 + 0,#0x4
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 93)
        MOV     R1,#0x20
        MOV     R4,#SampleApp_epDesc & 0xff
        MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
        MOV     R2,#SampleApp_SPI_SendCommand_DstAddr & 0xff
        MOV     R3,#(SampleApp_SPI_SendCommand_DstAddr >> 8) & 0xff
        LCALL   ??AF_DataRequest?relay
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 84)
        MOV     A,R1
        JNZ     ??APP_NORMAL_COMMAND_8
//  996       {
//  997         osal_mem_free(SET_str);
        ; Setup parameters for call to function osal_mem_free
        MOV     R2,?V0 + 2
        MOV     R3,?V0 + 3
        LCALL   ??osal_mem_free?relay
        LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
//  998       }
//  999       else
// 1000       {
// 1001         osal_mem_free(SET_str);
??APP_NORMAL_COMMAND_8:
        ; Setup parameters for call to function osal_mem_free
        MOV     R2,?V0 + 2
        MOV     R3,?V0 + 3
        LCALL   ??osal_mem_free?relay
        LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
// 1002       }  
// 1003     }
// 1004   }
// 1005   
// 1006   
// 1007   
// 1008   
// 1009   else if(command_str[4]=='F')
??APP_NORMAL_COMMAND_7:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x46
        JNZ     ??APP_NORMAL_COMMAND_9
// 1010   {
// 1011     osal_start_timerEx( SampleApp_TaskID,SAMPLEAPP_RESTORE_EVT,2000 );
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#-0x30
        MOV     R5,#0x7
        MOV     R2,#0x10
        MOV     R3,#0x0
        MOV     DPTR,#SampleApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
        LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
// 1012   }
// 1013   
// 1014   else if(command_str[4]=='Q')
??APP_NORMAL_COMMAND_9:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x51
        JZ      $+5
        LJMP    ??APP_NORMAL_COMMAND_10 & 0xFFFF
// 1015   {
// 1016     uint8 startOptions =0;
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1017     
// 1018     HalLedBlink ( HAL_LED_1, 4, 50, 1000 );
        ; Setup parameters for call to function HalLedBlink
        MOV     R4,#-0x18
        MOV     R5,#0x3
        MOV     R3,#0x32
        MOV     R2,#0x4
        MOV     R1,#0x1
        LCALL   ??HalLedBlink?relay
// 1019     startOptions=0;    
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1020     
// 1021     New_join_role_flag = command_str[5]-'0';
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        ADD     A,#-0x30
        MOV     DPTR,#New_join_role_flag
        MOVX    @DPTR,A
// 1022     New_join_delay_time = 100*(command_str[6]-'0')+10*(command_str[7]-'0')+command_str[8]-'0';
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        PUSH    DPL
        CFI CFA_SP SP+-1
        PUSH    DPH
        CFI CFA_SP SP+-2
        MOV     B,#0xa
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MUL     AB
        MOV     R0,A
        MOV     B,#0x64
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MUL     AB
        ADD     A,R0
        POP     DPH
        CFI CFA_SP SP+-1
        POP     DPL
        CFI CFA_SP SP+0
        MOV     R0,A
        MOVX    A,@DPTR
        ADD     A,R0
        ADD     A,#0x30
        MOV     DPTR,#New_join_delay_time
        MOVX    @DPTR,A
// 1023     
// 1024     Join_isset_flag  =1; //确保能够切换角色
        MOV     DPTR,#Join_isset_flag
        MOV     A,#0x1
        MOVX    @DPTR,A
// 1025     osal_nv_item_init(ZCD_NV_JOIN_ISSET_FLAG, 1, &Join_isset_flag); 
        ; Setup parameters for call to function osal_nv_item_init
        MOV     ?V0 + 0,#Join_isset_flag & 0xff
        MOV     ?V0 + 1,#(Join_isset_flag >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 86)
        MOV     R4,#0x1
        MOV     R5,#0x0
        MOV     R2,#0x38
        MOV     R3,#0x4
        LCALL   ??osal_nv_item_init?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 84)
        MOV     A,R1
// 1026     osal_nv_write(ZCD_NV_JOIN_ISSET_FLAG, 0, 1, &Join_isset_flag);
        ; Setup parameters for call to function osal_nv_write
        MOV     ?V0 + 0,#Join_isset_flag & 0xff
        MOV     ?V0 + 1,#(Join_isset_flag >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 86)
        MOV     ?V0 + 0,#0x1
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 88)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R2,#0x38
        MOV     R3,#0x4
        LCALL   ??osal_nv_write?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 84)
        MOV     A,R1
// 1027     
// 1028     osal_nv_item_init(ZCD_NV_JOIN_ROLE_FLAG, 1, &New_join_role_flag); 
        ; Setup parameters for call to function osal_nv_item_init
        MOV     ?V0 + 0,#New_join_role_flag & 0xff
        MOV     ?V0 + 1,#(New_join_role_flag >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 86)
        MOV     R4,#0x1
        MOV     R5,#0x0
        MOV     R2,#0x30
        MOV     R3,#0x4
        LCALL   ??osal_nv_item_init?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 84)
        MOV     A,R1
// 1029     osal_nv_write(ZCD_NV_JOIN_ROLE_FLAG, 0, 1, &New_join_role_flag);
        ; Setup parameters for call to function osal_nv_write
        MOV     ?V0 + 0,#New_join_role_flag & 0xff
        MOV     ?V0 + 1,#(New_join_role_flag >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 86)
        MOV     ?V0 + 0,#0x1
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 88)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R2,#0x30
        MOV     R3,#0x4
        LCALL   ??osal_nv_write?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 84)
        MOV     A,R1
// 1030     
// 1031     osal_nv_item_init(ZCD_NV_JOIN_START_TIME_VALUE, 1, &New_join_delay_time); 
        ; Setup parameters for call to function osal_nv_item_init
        MOV     ?V0 + 0,#New_join_delay_time & 0xff
        MOV     ?V0 + 1,#(New_join_delay_time >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 86)
        MOV     R4,#0x1
        MOV     R5,#0x0
        MOV     R2,#0x35
        MOV     R3,#0x4
        LCALL   ??osal_nv_item_init?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 84)
        MOV     A,R1
// 1032     osal_nv_write(ZCD_NV_JOIN_START_TIME_VALUE, 0, 1, &New_join_delay_time); 
        ; Setup parameters for call to function osal_nv_write
        MOV     ?V0 + 0,#New_join_delay_time & 0xff
        MOV     ?V0 + 1,#(New_join_delay_time >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 86)
        MOV     ?V0 + 0,#0x1
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 88)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R2,#0x35
        MOV     R3,#0x4
        LCALL   ??osal_nv_write?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 84)
        MOV     A,R1
// 1033     
// 1034     
// 1035     uint8 quit_str[12];
// 1036     
// 1037     quit_str[0]=command_str[0];
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x36
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1038     quit_str[1]=command_str[1];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x37
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1039     quit_str[2]=command_str[2];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x38
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1040     quit_str[3]=command_str[3];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x39
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1041     
// 1042     quit_str[4]='/';
        MOV     A,#0x3a
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x2f
        MOVX    @DPTR,A
// 1043     quit_str[5]='C';
        MOV     A,#0x3b
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x43
        MOVX    @DPTR,A
// 1044     quit_str[6]='/';
        MOV     A,#0x3c
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x2f
        MOVX    @DPTR,A
// 1045     quit_str[7]='U';
        MOV     A,#0x3d
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x55
        MOVX    @DPTR,A
// 1046     quit_str[8]='U';
        MOV     A,#0x3e
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x55
        MOVX    @DPTR,A
// 1047     quit_str[9]=0xA0;
        MOV     A,#0x3f
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#-0x60
        MOVX    @DPTR,A
// 1048     quit_str[10]=0xBB;
        MOV     A,#0x40
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#-0x45
        MOVX    @DPTR,A
// 1049     quit_str[11]=0;
        MOV     A,#0x41
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1050     
// 1051     SampleApp_SPI_SendCommand_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 8
        MOV     A,#0x2
        MOVX    @DPTR,A
// 1052     SampleApp_SPI_SendCommand_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 9
        MOV     A,#0x14
        MOVX    @DPTR,A
// 1053     SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1054     if ( AF_DataRequest( &SampleApp_SPI_SendCommand_DstAddr,
// 1055                         (endPointDesc_t *)&SampleApp_epDesc,
// 1056                         SAMPLEAPP_COMMAND_CLUSTERID, //终端传过去，协调器处理了
// 1057                         12, quit_str,
// 1058                         &SampleApp_TransID, 
// 1059                         AF_DISCV_ROUTE, 
// 1060                         AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
        ; Setup parameters for call to function AF_DataRequest
        MOV     ?V0 + 0,#0xf
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_ONE
        CFI CFA_XSP16 add(XSP16, 85)
        MOV     ?V0 + 0,#SampleApp_TransID & 0xff
        MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 87)
        MOV     A,#0x39
        LCALL   ?XSTACK_DISP0_8
        MOV     ?V0 + 0,DPL
        MOV     ?V0 + 1,DPH
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 89)
        MOV     ?V0 + 0,#0xc
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 91)
        MOV     ?V0 + 0,#0x4
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 93)
        MOV     R1,#0x20
        MOV     R4,#SampleApp_epDesc & 0xff
        MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
        MOV     R2,#SampleApp_SPI_SendCommand_DstAddr & 0xff
        MOV     R3,#(SampleApp_SPI_SendCommand_DstAddr >> 8) & 0xff
        LCALL   ??AF_DataRequest?relay
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 84)
        MOV     A,R1
        MOV     ?V0 + 0,A
// 1061     {
// 1062     }
// 1063     else
// 1064     {
// 1065       
// 1066     }  
// 1067     
// 1068     osal_nv_item_init(ZCD_NV_STARTUP_OPTION, 1, &startOptions);    
        ; Setup parameters for call to function osal_nv_item_init
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     ?V0 + 4,DPL
        MOV     ?V0 + 5,DPH
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 86)
        MOV     R4,#0x1
        MOV     R5,#0x0
        MOV     R2,#0x3
        MOV     R3,#0x0
        LCALL   ??osal_nv_item_init?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 84)
        MOV     A,R1
// 1069     startOptions |= ZCD_STARTOPT_DEFAULT_NETWORK_STATE;
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        SETB    0xE0 /* A   */.1
        MOVX    @DPTR,A
// 1070     startOptions &= ~ZCD_STARTOPT_AUTO_START;
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        CLR     0xE0 /* A   */.2
        MOVX    @DPTR,A
// 1071     osal_nv_write(ZCD_NV_STARTUP_OPTION, 0, 1, &startOptions);
        ; Setup parameters for call to function osal_nv_write
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     ?V0 + 4,DPL
        MOV     ?V0 + 5,DPH
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 86)
        MOV     ?V0 + 4,#0x1
        MOV     ?V0 + 5,#0x0
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 88)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R2,#0x3
        MOV     R3,#0x0
        LCALL   ??osal_nv_write?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 84)
        MOV     A,R1
// 1072     osal_start_timerEx( SampleApp_TaskID,SAMPLEAPP_RESTORE_EVT,5000 );
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#-0x78
        MOV     R5,#0x13
        MOV     R2,#0x10
        MOV     R3,#0x0
        MOV     DPTR,#SampleApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
        LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
// 1073   }
// 1074   
// 1075   
// 1076   else if(command_str[4]=='g')//发射功率 调整   后面跟发射功率 为 YXX Y表示正负 XX表示功率 Y为1表示负 为0表示正
??APP_NORMAL_COMMAND_10:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x67
        JZ      $+5
        LJMP    ??APP_NORMAL_COMMAND_11 & 0xFFFF
// 1077   {
// 1078     uint8 fuhao_temp=0;
        MOV     ?V0 + 1,#0x0
// 1079     int8 transmitpower = 0;
        MOV     ?V0 + 0,#0x0
// 1080     fuhao_temp = command_str[5]-'0';
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        ADD     A,#-0x30
        MOV     ?V0 + 1,A
// 1081     transmitpower = 10*(command_str[6]-'0')+command_str[7]-'0';
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        PUSH    DPL
        CFI CFA_SP SP+-1
        PUSH    DPH
        CFI CFA_SP SP+-2
        MOV     B,#0xa
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MUL     AB
        POP     DPH
        CFI CFA_SP SP+-1
        POP     DPL
        CFI CFA_SP SP+0
        MOV     R0,A
        MOVX    A,@DPTR
        ADD     A,R0
        ADD     A,#-0x10
        MOV     ?V0 + 0,A
// 1082 
// 1083 if ( POWER_PA_FLAG == 1)
        MOV     DPTR,#POWER_PA_FLAG
        MOVX    A,@DPTR
        XRL     A,#0x1
        JNZ     ??APP_NORMAL_COMMAND_12
// 1084 {
// 1085     if (fuhao_temp == 1) //负值
        MOV     A,#0x1
        XRL     A,?V0 + 1
        JNZ     ??APP_NORMAL_COMMAND_13
// 1086     {
// 1087       transmitpower = 0 - transmitpower;
        MOV     A,?V0 + 0
        CPL     A
        INC     A
        MOV     ?V0 + 0,A
// 1088       ZMacSetTransmitPower((ZMacTransmitPower_t)transmitpower);
        ; Setup parameters for call to function ZMacSetTransmitPower
        MOV     R1,?V0 + 0
        LCALL   ??ZMacSetTransmitPower?relay
        MOV     A,R1
        LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
// 1089     }
// 1090     else
// 1091     {
// 1092       ZMacSetTransmitPower ((ZMacTransmitPower_t)transmitpower);
??APP_NORMAL_COMMAND_13:
        ; Setup parameters for call to function ZMacSetTransmitPower
        MOV     R1,?V0 + 0
        LCALL   ??ZMacSetTransmitPower?relay
        MOV     A,R1
        LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
// 1093     } 
// 1094 }
// 1095 //#else
// 1096   else
// 1097   {
// 1098     
// 1099     if (fuhao_temp == 1) //负值
??APP_NORMAL_COMMAND_12:
        MOV     A,#0x1
        XRL     A,?V0 + 1
        JNZ     ??APP_NORMAL_COMMAND_14
// 1100     {
// 1101       transmitpower = 0 - transmitpower;
        MOV     A,?V0 + 0
        CPL     A
        INC     A
        MOV     ?V0 + 0,A
// 1102       ZMacSetTransmitPower((ZMacTransmitPower_t)transmitpower);
        ; Setup parameters for call to function ZMacSetTransmitPower
        MOV     R1,?V0 + 0
        LCALL   ??ZMacSetTransmitPower?relay
        MOV     A,R1
        LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
// 1103     }
// 1104     else 
// 1105     {
// 1106       if(transmitpower >4)
??APP_NORMAL_COMMAND_14:
        MOV     A,?V0 + 0
        CLR     C
        SUBB    A,#0x5
        MOV     C,0xD0 /* PSW */.2
        XRL     A,PSW
        RLC     A
        JC      ??APP_NORMAL_COMMAND_15
// 1107       {
// 1108         transmitpower = 4;
        MOV     ?V0 + 0,#0x4
// 1109       }
// 1110       ZMacSetTransmitPower ((ZMacTransmitPower_t)transmitpower);
??APP_NORMAL_COMMAND_15:
        ; Setup parameters for call to function ZMacSetTransmitPower
        MOV     R1,?V0 + 0
        LCALL   ??ZMacSetTransmitPower?relay
        MOV     A,R1
        LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
// 1111     } 
// 1112   }
// 1113 //#endif
// 1114     
// 1115   }
// 1116   
// 1117       else if(command_str[4]=='O')//设置设备的POLL RATE时间
??APP_NORMAL_COMMAND_11:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x4f
        JZ      $+5
        LJMP    ??APP_NORMAL_COMMAND_16 & 0xFFFF
// 1118   {
// 1119      if ( RTR_NWK_FLAG == 0)
        MOV     DPTR,#RTR_NWK_FLAG
        MOVX    A,@DPTR
        JZ      $+5
        LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
// 1120      {
// 1121           uint16 pollrate_time =0 ;
        MOV     ?V0 + 0,#0x0
        MOV     ?V0 + 1,#0x0
// 1122           pollrate_time = 10*(command_str[5]-'0')+command_str[6]-'0';
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0xa
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0xa
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     R3,#0x0
        MOV     A,R0
        ADD     A,R2
        MOV     R0,A
        MOV     A,R1
        ADDC    A,R3
        MOV     R1,A
        MOV     A,R0
        ADD     A,#-0x10
        MOV     R0,A
        MOV     A,R1
        ADDC    A,#-0x3
        MOV     R1,A
        MOV     ?V0 + 0,R0
        MOV     ?V0 + 1,R1
// 1123           if(pollrate_time >60 )
        CLR     C
        MOV     A,?V0 + 0
        SUBB    A,#0x3d
        MOV     A,?V0 + 1
        SUBB    A,#0x0
        JC      ??APP_NORMAL_COMMAND_17
// 1124           {
// 1125           pollrate_time = 60;
        MOV     ?V0 + 0,#0x3c
        MOV     ?V0 + 1,#0x0
// 1126           }
// 1127           
// 1128           pollrate_time = pollrate_time *1000;
??APP_NORMAL_COMMAND_17:
        MOV     A,?V0 + 0
        MOV     B,#-0x18
        MUL     AB
        XCH     A,?V0 + 0
        MOV     R0,B
        MOV     B,#0x3
        MUL     AB
        ADD     A,R0
        MOV     R0,A
        MOV     B,#-0x18
        MOV     A,?V0 + 1
        MUL     AB
        ADD     A,R0
        MOV     ?V0 + 1,A
// 1129           
// 1130           NLME_SetPollRate( pollrate_time );
        ; Setup parameters for call to function NLME_SetPollRate
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        LCALL   ??NLME_SetPollRate?relay
// 1131           DEEP_POLL_FLAG =0; 
        MOV     DPTR,#DEEP_POLL_FLAG
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1132           osal_start_timerEx( SampleApp_TaskID, HALF_HOUR_NO_POLL_EVT,60000);//10分钟
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#0x60
        MOV     R5,#-0x16
        MOV     R2,#0x0
        MOV     R3,#0x20
        MOV     DPTR,#SampleApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
        LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
// 1133      }
// 1134      
// 1135   }
// 1136   
// 1137     else if(command_str[4]=='b')//修改设备的心跳上报时间
??APP_NORMAL_COMMAND_16:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x62
        JZ      $+5
        LJMP    ??APP_NORMAL_COMMAND_18 & 0xFFFF
// 1138   {
// 1139     //uint8 startOptions =0;
// 1140     Heart_mesg_flag = 100*(command_str[5]-'0')+10*(command_str[6]-'0')+command_str[7]-'0';
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        PUSH    DPL
        CFI CFA_SP SP+-1
        PUSH    DPH
        CFI CFA_SP SP+-2
        MOV     B,#0xa
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MUL     AB
        MOV     R0,A
        MOV     B,#0x64
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MUL     AB
        ADD     A,R0
        POP     DPH
        CFI CFA_SP SP+-1
        POP     DPL
        CFI CFA_SP SP+0
        MOV     R0,A
        MOVX    A,@DPTR
        ADD     A,R0
        ADD     A,#0x30
        MOV     DPTR,#Heart_mesg_flag
        MOVX    @DPTR,A
// 1141     
// 1142      if( (Heart_mesg_flag<1) || (Heart_mesg_flag>10))
        MOV     DPTR,#Heart_mesg_flag
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0x1
        JC      ??APP_NORMAL_COMMAND_19
        MOV     DPTR,#Heart_mesg_flag
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0xb
        JC      ??APP_NORMAL_COMMAND_20
// 1143      {
// 1144        Heart_mesg_flag = 10;
??APP_NORMAL_COMMAND_19:
        MOV     DPTR,#Heart_mesg_flag
        MOV     A,#0xa
        MOVX    @DPTR,A
// 1145      }
// 1146      
// 1147     osal_nv_item_init(ZCD_NV_HEART_MESG_FLAG, 1, &Heart_mesg_flag); 
??APP_NORMAL_COMMAND_20:
        ; Setup parameters for call to function osal_nv_item_init
        MOV     ?V0 + 0,#Heart_mesg_flag & 0xff
        MOV     ?V0 + 1,#(Heart_mesg_flag >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 86)
        MOV     R4,#0x1
        MOV     R5,#0x0
        MOV     R2,#0x10
        MOV     R3,#0x5
        LCALL   ??osal_nv_item_init?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 84)
        MOV     A,R1
// 1148     osal_nv_write(ZCD_NV_HEART_MESG_FLAG, 0, 1, &Heart_mesg_flag); 
        ; Setup parameters for call to function osal_nv_write
        MOV     ?V0 + 0,#Heart_mesg_flag & 0xff
        MOV     ?V0 + 1,#(Heart_mesg_flag >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 86)
        MOV     ?V0 + 0,#0x1
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 88)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R2,#0x10
        MOV     R3,#0x5
        LCALL   ??osal_nv_write?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 84)
        MOV     A,R1
// 1149     
// 1150     
// 1151        uint8 HEART_str[12];
// 1152        
// 1153           HEART_str[0]=command_str[0];
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x2a
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1154           HEART_str[1]=command_str[1];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x2b
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1155           HEART_str[2]=command_str[2];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x2c
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1156           HEART_str[3]=command_str[3];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x2d
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1157 
// 1158           HEART_str[4]='/';
        MOV     A,#0x2e
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x2f
        MOVX    @DPTR,A
// 1159           HEART_str[5]='C';
        MOV     A,#0x2f
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x43
        MOVX    @DPTR,A
// 1160           HEART_str[6]='/';
        MOV     A,#0x30
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x2f
        MOVX    @DPTR,A
// 1161           HEART_str[7]='U';
        MOV     A,#0x31
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x55
        MOVX    @DPTR,A
// 1162           HEART_str[8]='U';
        MOV     A,#0x32
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x55
        MOVX    @DPTR,A
// 1163           HEART_str[9]=0xA0;
        MOV     A,#0x33
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#-0x60
        MOVX    @DPTR,A
// 1164           HEART_str[10]=0xBC;
        MOV     A,#0x34
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#-0x44
        MOVX    @DPTR,A
// 1165           HEART_str[11]=Heart_mesg_flag;
        MOV     DPTR,#Heart_mesg_flag
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x35
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1166           
// 1167           SampleApp_SPI_SendCommand_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 8
        MOV     A,#0x2
        MOVX    @DPTR,A
// 1168           SampleApp_SPI_SendCommand_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 9
        MOV     A,#0x14
        MOVX    @DPTR,A
// 1169           // SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;
// 1170           SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;//发送给来的设备
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1171           if ( AF_DataRequest( &SampleApp_SPI_SendCommand_DstAddr,
// 1172                          (endPointDesc_t *)&SampleApp_epDesc,
// 1173                           SAMPLEAPP_COMMAND_CLUSTERID, //终端传过去，协调器处理了
// 1174                           12, HEART_str,
// 1175                           &SampleApp_TransID, 
// 1176                           AF_DISCV_ROUTE, 
// 1177                           AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
        ; Setup parameters for call to function AF_DataRequest
        MOV     ?V0 + 0,#0xf
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_ONE
        CFI CFA_XSP16 add(XSP16, 85)
        MOV     ?V0 + 0,#SampleApp_TransID & 0xff
        MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 87)
        MOV     A,#0x2d
        LCALL   ?XSTACK_DISP0_8
        MOV     ?V0 + 0,DPL
        MOV     ?V0 + 1,DPH
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 89)
        MOV     ?V0 + 0,#0xc
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 91)
        MOV     ?V0 + 0,#0x4
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 93)
        MOV     R1,#0x20
        MOV     R4,#SampleApp_epDesc & 0xff
        MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
        MOV     R2,#SampleApp_SPI_SendCommand_DstAddr & 0xff
        MOV     R3,#(SampleApp_SPI_SendCommand_DstAddr >> 8) & 0xff
        LCALL   ??AF_DataRequest?relay
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 84)
        MOV     A,R1
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x1
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
// 1178           {
// 1179           }
// 1180           else
// 1181           {
// 1182           
// 1183           }  
// 1184     
// 1185   }
// 1186   
// 1187    else if(command_str[4]=='c')//变频 
??APP_NORMAL_COMMAND_18:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x63
        JZ      $+5
        LJMP    ??APP_NORMAL_COMMAND_21 & 0xFFFF
// 1188   {
// 1189    
// 1190     uint8 NETSET_str[12];
// 1191     NETSET_str[0]=command_str[0];
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x1e
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1192     NETSET_str[1]=command_str[1];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x1f
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1193     NETSET_str[2]=command_str[2];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x20
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1194     NETSET_str[3]=command_str[3];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x21
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1195 
// 1196     NETSET_str[4]='/';
        MOV     A,#0x22
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x2f
        MOVX    @DPTR,A
// 1197     NETSET_str[5]='C';
        MOV     A,#0x23
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x43
        MOVX    @DPTR,A
// 1198     NETSET_str[6]='/';
        MOV     A,#0x24
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x2f
        MOVX    @DPTR,A
// 1199     NETSET_str[7]='U';
        MOV     A,#0x25
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x55
        MOVX    @DPTR,A
// 1200     NETSET_str[8]='U';
        MOV     A,#0x26
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x55
        MOVX    @DPTR,A
// 1201     NETSET_str[9]=0xA0;
        MOV     A,#0x27
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#-0x60
        MOVX    @DPTR,A
// 1202     NETSET_str[10]=0x31;
        MOV     A,#0x28
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x31
        MOVX    @DPTR,A
// 1203     
// 1204     New_Channel_list = 10*(command_str[5]-'0')+(command_str[6]-'0');
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        PUSH    DPL
        CFI CFA_SP SP+-1
        PUSH    DPH
        CFI CFA_SP SP+-2
        MOV     B,#0xa
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MUL     AB
        POP     DPH
        CFI CFA_SP SP+-1
        POP     DPL
        CFI CFA_SP SP+0
        MOV     R0,A
        MOVX    A,@DPTR
        ADD     A,R0
        ADD     A,#-0x10
        MOV     DPTR,#New_Channel_list
        MOVX    @DPTR,A
// 1205     
// 1206      if((New_Channel_list>=0x0B) && (New_Channel_list<=0x1A))
        MOV     DPTR,#New_Channel_list
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0xb
        JC      ??APP_NORMAL_COMMAND_22
        MOV     DPTR,#New_Channel_list
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0x1b
        JNC     ??APP_NORMAL_COMMAND_22
// 1207      {
// 1208       NETSET_str[11]=New_Channel_list;
        MOV     DPTR,#New_Channel_list
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x29
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        SJMP    ??APP_NORMAL_COMMAND_23
// 1209      }
// 1210      else
// 1211      {
// 1212        NETSET_str[11]=0;
??APP_NORMAL_COMMAND_22:
        MOV     A,#0x29
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1213      }  
// 1214     
// 1215           SampleApp_SPI_SendCommand_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
??APP_NORMAL_COMMAND_23:
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 8
        MOV     A,#0x2
        MOVX    @DPTR,A
// 1216           SampleApp_SPI_SendCommand_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 9
        MOV     A,#0x14
        MOVX    @DPTR,A
// 1217           // SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;
// 1218           SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;//发送给来的设备
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1219           if ( AF_DataRequest( &SampleApp_SPI_SendCommand_DstAddr,
// 1220                          (endPointDesc_t *)&SampleApp_epDesc,
// 1221                           SAMPLEAPP_COMMAND_CLUSTERID, //终端传过去，协调器处理了
// 1222                           12, NETSET_str,
// 1223                           &SampleApp_TransID, 
// 1224                         AF_DISCV_ROUTE, 
// 1225                           AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
        ; Setup parameters for call to function AF_DataRequest
        MOV     ?V0 + 0,#0xf
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_ONE
        CFI CFA_XSP16 add(XSP16, 85)
        MOV     ?V0 + 0,#SampleApp_TransID & 0xff
        MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 87)
        MOV     A,#0x21
        LCALL   ?XSTACK_DISP0_8
        MOV     ?V0 + 0,DPL
        MOV     ?V0 + 1,DPH
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 89)
        MOV     ?V0 + 0,#0xc
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 91)
        MOV     ?V0 + 0,#0x4
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 93)
        MOV     R1,#0x20
        MOV     R4,#SampleApp_epDesc & 0xff
        MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
        MOV     R2,#SampleApp_SPI_SendCommand_DstAddr & 0xff
        MOV     R3,#(SampleApp_SPI_SendCommand_DstAddr >> 8) & 0xff
        LCALL   ??AF_DataRequest?relay
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 84)
        MOV     A,R1
        MOV     ?V0 + 0,A
// 1226           {
// 1227           }
// 1228           else
// 1229           {
// 1230           
// 1231           }  
// 1232           
// 1233           
// 1234           New_Net_flag = 1;
        MOV     DPTR,#New_Net_flag
        MOV     A,#0x1
        MOVX    @DPTR,A
// 1235           
// 1236           osal_start_timerEx( SampleApp_TaskID,SAMPLEAPP_RESTORE_EVT,5000 );
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#-0x78
        MOV     R5,#0x13
        MOV     R2,#0x10
        MOV     R3,#0x0
        MOV     DPTR,#SampleApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
        LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
// 1237           
// 1238        
// 1239   }
// 1240   
// 1241   
// 1242    else if(command_str[4]=='p')//变PANID
??APP_NORMAL_COMMAND_21:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x70
        JZ      $+5
        LJMP    ??APP_NORMAL_COMMAND_24 & 0xFFFF
// 1243   {
// 1244   
// 1245    
// 1246       uint8 NETSET_str[13];
// 1247       NETSET_str[0]=command_str[0];
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x11
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1248       NETSET_str[1]=command_str[1];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x12
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1249       NETSET_str[2]=command_str[2];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x13
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1250       NETSET_str[3]=command_str[3];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x14
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1251       NETSET_str[4]='/';
        MOV     A,#0x15
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x2f
        MOVX    @DPTR,A
// 1252       NETSET_str[5]='C';
        MOV     A,#0x16
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x43
        MOVX    @DPTR,A
// 1253       NETSET_str[6]='/';
        MOV     A,#0x17
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x2f
        MOVX    @DPTR,A
// 1254       NETSET_str[7]='U';
        MOV     A,#0x18
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x55
        MOVX    @DPTR,A
// 1255       NETSET_str[8]='U';
        MOV     A,#0x19
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x55
        MOVX    @DPTR,A
// 1256       NETSET_str[9]=0xA0;
        MOV     A,#0x1a
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#-0x60
        MOVX    @DPTR,A
// 1257       NETSET_str[10]=0x32;
        MOV     A,#0x1b
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x32
        MOVX    @DPTR,A
// 1258     
// 1259       New_Panid=  10000*(command_str[5]-'0')+1000*(command_str[6]-'0')+100*(command_str[7]-'0')+10*(command_str[8]-'0')+(command_str[9]-'0');
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x10
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x27
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x10
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     R3,#0x0
        MOV     A,R2
        MOV     B,#-0x18
        MUL     AB
        XCH     A,R2
        MOV     R4,B
        MOV     B,#0x3
        MUL     AB
        ADD     A,R4
        MOV     R4,A
        MOV     B,#-0x18
        MOV     A,R3
        MUL     AB
        ADD     A,R4
        MOV     R3,A
        MOV     A,R0
        ADD     A,R2
        MOV     R0,A
        MOV     A,R1
        ADDC    A,R3
        MOV     R1,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     R3,#0x0
        MOV     A,R2
        MOV     B,#0x64
        MUL     AB
        XCH     A,R2
        MOV     R4,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R4
        MOV     R4,A
        MOV     B,#0x64
        MOV     A,R3
        MUL     AB
        ADD     A,R4
        MOV     R3,A
        MOV     A,R0
        ADD     A,R2
        MOV     R0,A
        MOV     A,R1
        ADDC    A,R3
        MOV     R1,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     R3,#0x0
        MOV     A,R2
        MOV     B,#0xa
        MUL     AB
        XCH     A,R2
        MOV     R4,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R4
        MOV     R4,A
        MOV     B,#0xa
        MOV     A,R3
        MUL     AB
        ADD     A,R4
        MOV     R3,A
        MOV     A,R0
        ADD     A,R2
        MOV     R0,A
        MOV     A,R1
        ADDC    A,R3
        MOV     R1,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     R3,#0x0
        MOV     A,R0
        ADD     A,R2
        MOV     R0,A
        MOV     A,R1
        ADDC    A,R3
        MOV     R1,A
        MOV     A,R0
        ADD     A,#-0x50
        MOV     R0,A
        MOV     A,R1
        ADDC    A,#-0x24
        MOV     R1,A
        MOV     DPTR,#New_Panid
        MOV     A,R0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R1
        MOVX    @DPTR,A
// 1260       if ( (New_Panid != 0xFFFF) || (New_Panid != INVALID_PAN_ID) )
        MOV     DPTR,#New_Panid
        MOVX    A,@DPTR
        XRL     A,#0xff
        JNZ     ??APP_NORMAL_COMMAND_25
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0xff
??APP_NORMAL_COMMAND_25:
        JNZ     ??APP_NORMAL_COMMAND_26
        MOV     DPTR,#New_Panid
        MOVX    A,@DPTR
        XRL     A,#0xfe
        JNZ     ??APP_NORMAL_COMMAND_27
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0xff
??APP_NORMAL_COMMAND_27:
        JZ      ??APP_NORMAL_COMMAND_28
// 1261       {  
// 1262           NETSET_str[11]=New_Panid/256;
??APP_NORMAL_COMMAND_26:
        MOV     DPTR,#New_Panid
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        CLR     A
        MOV     A,R1
        MOV     R0,A
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x1c
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1263           NETSET_str[12]=New_Panid%256;
        MOV     DPTR,#New_Panid
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     R2,#0x0
        MOV     R3,#0x1
        LCALL   ?US_DIV_MOD
        MOV     A,R2
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x1d
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        SJMP    ??APP_NORMAL_COMMAND_29
// 1264       }
// 1265       else
// 1266       {
// 1267         NETSET_str[11]=0xff;
??APP_NORMAL_COMMAND_28:
        MOV     A,#0x1c
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#-0x1
        MOVX    @DPTR,A
// 1268         NETSET_str[12]=0xff;
        MOV     A,#0x1d
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#-0x1
        MOVX    @DPTR,A
// 1269       }  
// 1270 
// 1271           SampleApp_SPI_SendCommand_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
??APP_NORMAL_COMMAND_29:
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 8
        MOV     A,#0x2
        MOVX    @DPTR,A
// 1272           SampleApp_SPI_SendCommand_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 9
        MOV     A,#0x14
        MOVX    @DPTR,A
// 1273           // SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;
// 1274           SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;//发送给来的设备
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1275           if ( AF_DataRequest( &SampleApp_SPI_SendCommand_DstAddr,
// 1276                          (endPointDesc_t *)&SampleApp_epDesc,
// 1277                           SAMPLEAPP_COMMAND_CLUSTERID, //终端传过去，协调器处理了
// 1278                           13, NETSET_str,
// 1279                           &SampleApp_TransID, 
// 1280                         AF_DISCV_ROUTE, 
// 1281                           AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
        ; Setup parameters for call to function AF_DataRequest
        MOV     ?V0 + 0,#0xf
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_ONE
        CFI CFA_XSP16 add(XSP16, 85)
        MOV     ?V0 + 0,#SampleApp_TransID & 0xff
        MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 87)
        MOV     A,#0x14
        LCALL   ?XSTACK_DISP0_8
        MOV     ?V0 + 0,DPL
        MOV     ?V0 + 1,DPH
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 89)
        MOV     ?V0 + 0,#0xd
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 91)
        MOV     ?V0 + 0,#0x4
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 93)
        MOV     R1,#0x20
        MOV     R4,#SampleApp_epDesc & 0xff
        MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
        MOV     R2,#SampleApp_SPI_SendCommand_DstAddr & 0xff
        MOV     R3,#(SampleApp_SPI_SendCommand_DstAddr >> 8) & 0xff
        LCALL   ??AF_DataRequest?relay
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 84)
        MOV     A,R1
        MOV     ?V0 + 0,A
// 1282           {
// 1283           }
// 1284           else
// 1285           {
// 1286           
// 1287           }  
// 1288           
// 1289             New_Net_flag = 2;
        MOV     DPTR,#New_Net_flag
        MOV     A,#0x2
        MOVX    @DPTR,A
// 1290            osal_start_timerEx( SampleApp_TaskID,SAMPLEAPP_RESTORE_EVT,5000 );
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#-0x78
        MOV     R5,#0x13
        MOV     R2,#0x10
        MOV     R3,#0x0
        MOV     DPTR,#SampleApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
        LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
// 1291           
// 1292         
// 1293   }
// 1294   
// 1295    //2014 9 28 test 
// 1296   else if(command_str[4]=='t') //test 设置设备的干扰上报阀值参数，1 超过多少值开始计算 2 超过多少失败率开始上报 失败率是不能配置的，在协议站里已经写死
??APP_NORMAL_COMMAND_24:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x74
        JZ      $+5
        LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
// 1297   {  
// 1298        uint8 active_count=0;
        MOV     ?V0 + 0,#0x0
// 1299       uint8 TX_failure_str[15];
// 1300       TX_failure_str[0]=command_str[0];
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1301       TX_failure_str[1]=command_str[1];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x3
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1302       TX_failure_str[2]=command_str[2];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1303       TX_failure_str[3]=command_str[3];
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x5
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1304       TX_failure_str[4]='/';
        MOV     A,#0x6
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x2f
        MOVX    @DPTR,A
// 1305       TX_failure_str[5]='C';
        MOV     A,#0x7
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x43
        MOVX    @DPTR,A
// 1306       TX_failure_str[6]='/';
        MOV     A,#0x8
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x2f
        MOVX    @DPTR,A
// 1307       TX_failure_str[7]='U';
        MOV     A,#0x9
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x55
        MOVX    @DPTR,A
// 1308       TX_failure_str[8]='U';
        MOV     A,#0xa
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x55
        MOVX    @DPTR,A
// 1309       TX_failure_str[9]=0xA0;
        MOV     A,#0xb
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#-0x60
        MOVX    @DPTR,A
// 1310   
// 1311    
// 1312 
// 1313   if(command_str[5]=='1') //读取
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x31
        JZ      $+5
        LJMP    ??APP_NORMAL_COMMAND_30 & 0xFFFF
// 1314   {
// 1315   TX_failure_str[10]=0x41; 
        MOV     A,#0xc
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x41
        MOVX    @DPTR,A
// 1316   TX_failure_str[11]= _NIB.nwkTotalTransmissions/256;
        MOV     DPTR,#_NIB + 107
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        CLR     A
        MOV     A,R1
        MOV     R0,A
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0xd
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1317   TX_failure_str[12]= _NIB.nwkTotalTransmissions%256;
        MOV     DPTR,#_NIB + 107
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     R2,#0x0
        MOV     R3,#0x1
        LCALL   ?US_DIV_MOD
        MOV     A,R2
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0xe
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1318   
// 1319   uint16 app_txFailure=0;
        MOV     R4,#0x0
        MOV     R5,#0x0
// 1320      for ( uint8 i = 0; i < gNWK_MAX_DEVICE_LIST; i++ )
        MOV     R3,#0x0
??APP_NORMAL_COMMAND_31:
        MOV     ?V0 + 4,R3
        MOV     ?V0 + 5,#0x0
        MOV     DPTR,#gNWK_MAX_DEVICE_LIST
        CLR     A
        MOVC    A,@A+DPTR
        MOV     R0,A
        MOV     A,#0x1
        MOVC    A,@A+DPTR
        MOV     R1,A
        CLR     C
        MOV     A,?V0 + 4
        SUBB    A,R0
        MOV     A,?V0 + 5
        SUBB    A,R1
        JC      $+5
        LJMP    ??APP_NORMAL_COMMAND_32 & 0xFFFF
// 1321     {
// 1322       if ( AssociatedDevList[i].nodeRelation != NOTUSED
// 1323            && AssociatedDevList[i].linkInfo.txFailure > 0 )
        MOV     A,R3
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x12
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x12
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(AssociatedDevList + 4) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((AssociatedDevList + 4) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOVX    A,@DPTR
        XRL     A,#0xff
        JZ      ??APP_NORMAL_COMMAND_33
        MOV     A,R3
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x12
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x12
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(AssociatedDevList + 16) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((AssociatedDevList + 16) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JZ      ??APP_NORMAL_COMMAND_33
// 1324       {
// 1325           app_txFailure += AssociatedDevList[i].linkInfo.txFailure;
        MOV     A,R3
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x12
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x12
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(AssociatedDevList + 16) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((AssociatedDevList + 16) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOVX    A,@DPTR
        ADD     A,R4
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,R5
        MOV     R5,A
// 1326       }
// 1327     }
??APP_NORMAL_COMMAND_33:
        INC     R3
        LJMP    ??APP_NORMAL_COMMAND_31 & 0xFFFF
// 1328 
// 1329     // Sum up the transmission failures in the neighbor table
// 1330     for ( uint8 i = 0; i < gMAX_NEIGHBOR_ENTRIES; i++ )
??APP_NORMAL_COMMAND_32:
        MOV     R3,#0x0
??APP_NORMAL_COMMAND_34:
        MOV     DPTR,#gMAX_NEIGHBOR_ENTRIES
        CLR     A
        MOVC    A,@A+DPTR
        MOV     R0,A
        MOV     A,R3
        CLR     C
        SUBB    A,R0
        JC      $+5
        LJMP    ??APP_NORMAL_COMMAND_35 & 0xFFFF
// 1331     {
// 1332       if ( neighborTable[i].neighborAddress != INVALID_NODE_ADDR
// 1333            /*&& neighborTable[i].linkInfo.txCost > 0
// 1334            && neighborTable[i].linkInfo.txCost < MAX_LINK_COST*/
// 1335            && neighborTable[i].linkInfo.txFailure > 0 )
        MOV     A,R3
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x17
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x17
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#neighborTable & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#(neighborTable >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOVX    A,@DPTR
        XRL     A,#0xfe
        JNZ     ??APP_NORMAL_COMMAND_36
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0xff
??APP_NORMAL_COMMAND_36:
        JZ      ??APP_NORMAL_COMMAND_37
        MOV     A,R3
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x17
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x17
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(neighborTable + 21) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((neighborTable + 21) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JZ      ??APP_NORMAL_COMMAND_37
// 1336       {
// 1337           app_txFailure += neighborTable[i].linkInfo.txFailure;
        MOV     A,R3
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x17
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x17
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(neighborTable + 21) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((neighborTable + 21) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOVX    A,@DPTR
        ADD     A,R4
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,R5
        MOV     R5,A
// 1338       }
// 1339     }
??APP_NORMAL_COMMAND_37:
        INC     R3
        LJMP    ??APP_NORMAL_COMMAND_34 & 0xFFFF
// 1340 
// 1341   
// 1342   TX_failure_str[13]= app_txFailure/256;
??APP_NORMAL_COMMAND_35:
        MOV     A,R4
        MOV     R0,A
        MOV     A,R5
        MOV     R1,A
        CLR     A
        MOV     A,R1
        MOV     R0,A
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0xf
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1343   TX_failure_str[14]= app_txFailure%256;
        MOV     A,R4
        MOV     R0,A
        MOV     A,R5
        MOV     R1,A
        MOV     R2,#0x0
        MOV     R3,#0x1
        LCALL   ?US_DIV_MOD
        MOV     A,R2
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x10
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1344   active_count = 15;
        MOV     ?V0 + 0,#0xf
        LJMP    ??APP_NORMAL_COMMAND_38 & 0xFFFF
// 1345     
// 1346   }
// 1347   else if(command_str[5]=='2') //配置
??APP_NORMAL_COMMAND_30:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x32
        JZ      $+5
        LJMP    ??APP_NORMAL_COMMAND_38 & 0xFFFF
// 1348   {
// 1349   uint16 set_tx_total_count=0;
        MOV     R4,#0x0
        MOV     R5,#0x0
// 1350   TX_failure_str[10]=0x42; 
        MOV     A,#0xc
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x42
        MOVX    @DPTR,A
// 1351   set_tx_total_count = (command_str[6]-0x30)*100 + (command_str[7]-0x30)*10 + (command_str[8]-0x30);
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x64
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x64
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     R3,#0x0
        MOV     A,R2
        MOV     B,#0xa
        MUL     AB
        XCH     A,R2
        MOV     ?V0 + 1,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,?V0 + 1
        MOV     ?V0 + 1,A
        MOV     B,#0xa
        MOV     A,R3
        MUL     AB
        ADD     A,?V0 + 1
        MOV     R3,A
        MOV     A,R0
        ADD     A,R2
        MOV     R0,A
        MOV     A,R1
        ADDC    A,R3
        MOV     R1,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     R3,#0x0
        MOV     A,R0
        ADD     A,R2
        MOV     R0,A
        MOV     A,R1
        ADDC    A,R3
        MOV     R1,A
        MOV     A,R0
        ADD     A,#0x30
        MOV     R0,A
        MOV     A,R1
        ADDC    A,#-0x15
        MOV     R1,A
        MOV     A,R0
        MOV     R4,A
        MOV     A,R1
        MOV     R5,A
// 1352  // set_CI_TX_FAILURE = (pkt->cmd.Data[16]-0x30)*100 + (pkt->cmd.Data[17]-0x30)*10 + (pkt->cmd.Data[18]-0x30);
// 1353   
// 1354   zgNwkMgrMinTransmissions = set_tx_total_count;
        MOV     A,R4
        MOV     DPTR,#zgNwkMgrMinTransmissions
        MOVX    @DPTR,A
// 1355   TX_failure_str[11]= set_tx_total_count/256;
        MOV     A,R4
        MOV     R0,A
        MOV     A,R5
        MOV     R1,A
        CLR     A
        MOV     A,R1
        MOV     R0,A
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0xd
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1356   TX_failure_str[12]= set_tx_total_count%256;
        MOV     A,R4
        MOV     R0,A
        MOV     A,R5
        MOV     R1,A
        MOV     R2,#0x0
        MOV     R3,#0x1
        LCALL   ?US_DIV_MOD
        MOV     A,R2
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0xe
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1357   TX_failure_str[13]= 0;
        MOV     A,#0xf
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1358   TX_failure_str[14]= 25;
        MOV     A,#0x10
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x19
        MOVX    @DPTR,A
// 1359   active_count = 15;
        MOV     ?V0 + 0,#0xf
// 1360   }
// 1361   
// 1362   /*
// 1363    else if(pkt->cmd.Data[13]=='3') //test
// 1364    {  
// 1365       Period_Time_Set = 100*(pkt->cmd.Data[14]-'0')+10*(pkt->cmd.Data[15]-'0')+pkt->cmd.Data[16]-'0';
// 1366       Period_Time_minute = Period_Time_Set/60;
// 1367       Period_Time_second = Period_Time_Set%60;
// 1368 
// 1369       if(Period_Time_Set > 0)
// 1370       {  
// 1371         Second_expend_flag =0 ;
// 1372         osal_start_timerEx( SampleApp_TaskID, PERIOD_SEND_TXTEST_VALUE_EVT,100 );
// 1373       }
// 1374       else 
// 1375       {
// 1376         osal_stop_timerEx( SampleApp_TaskID, PERIOD_SEND_TXTEST_VALUE_EVT);
// 1377       } 
// 1378    }
// 1379          
// 1380   }  
// 1381 */
// 1382   
// 1383       SampleApp_SPI_SendCommand_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
??APP_NORMAL_COMMAND_38:
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 8
        MOV     A,#0x2
        MOVX    @DPTR,A
// 1384       SampleApp_SPI_SendCommand_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 9
        MOV     A,#0x14
        MOVX    @DPTR,A
// 1385       SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1386     //   SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = pkt->srcAddr.addr.shortAddr;//发送给来的设备
// 1387       
// 1388       if ( AF_DataRequest( &SampleApp_SPI_SendCommand_DstAddr,
// 1389                           (endPointDesc_t *)&SampleApp_epDesc,
// 1390                           SAMPLEAPP_COMMAND_CLUSTERID, //终端传过去，协调器处理了
// 1391                           active_count, TX_failure_str,
// 1392                           &SampleApp_TransID, 
// 1393                           AF_DISCV_ROUTE, 
// 1394                           AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
        ; Setup parameters for call to function AF_DataRequest
        MOV     ?V0 + 1,#0xf
        MOV     R0,#?V0 + 1
        LCALL   ?PUSH_XSTACK_I_ONE
        CFI CFA_XSP16 add(XSP16, 85)
        MOV     ?V0 + 4,#SampleApp_TransID & 0xff
        MOV     ?V0 + 5,#(SampleApp_TransID >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 87)
        MOV     A,#0x5
        LCALL   ?XSTACK_DISP0_8
        MOV     ?V0 + 4,DPL
        MOV     ?V0 + 5,DPH
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 89)
        MOV     ?V0 + 4,?V0 + 0
        MOV     ?V0 + 5,#0x0
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 91)
        MOV     ?V0 + 4,#0x4
        MOV     ?V0 + 5,#0x0
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 93)
        MOV     R1,#0x20
        MOV     R4,#SampleApp_epDesc & 0xff
        MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
        MOV     R2,#SampleApp_SPI_SendCommand_DstAddr & 0xff
        MOV     R3,#(SampleApp_SPI_SendCommand_DstAddr >> 8) & 0xff
        LCALL   ??AF_DataRequest?relay
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 84)
        MOV     A,R1
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x1
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1395       {
// 1396       }
// 1397       else
// 1398       {
// 1399       }  
// 1400   }
// 1401 
// 1402   
// 1403 
// 1404 
// 1405   
// 1406 }
??APP_NORMAL_COMMAND_6:
        MOV     A,#0x42
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 18)
        MOV     R7,#0xa
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock18
// 1407 
// 1408 

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1409 void zb_StartRequest()
zb_StartRequest:
        CFI Block cfiBlock19 Using cfiCommon0
        CFI Function zb_StartRequest
        CODE
// 1410 {
        FUNCALL zb_StartRequest, ZDOInitDevice
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xa
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 0
// 1411   // uint8 logicalType1;
// 1412   uint8 zgStartDelay = START_DELAY;
        MOV     R6,#0xa
// 1413   
// 1414   devState = DEV_INIT;
        MOV     DPTR,#devState
        MOV     A,#0x1
        MOVX    @DPTR,A
// 1415   ZDOInitDevice(zgStartDelay);
        ; Setup parameters for call to function ZDOInitDevice
        MOV     ?V0 + 0,R6
        MOV     ?V0 + 1,#0x0
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        LCALL   ??ZDOInitDevice?relay
        MOV     A,R1
// 1416   
// 1417   // }
// 1418   
// 1419   
// 1420   return;
        MOV     R7,#0x2
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock19
// 1421 }
// 1422 

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1423 void APP_DEAL_WITH_ASSOCIATED(void)
APP_DEAL_WITH_ASSOCIATED:
        CFI Block cfiBlock20 Using cfiCommon0
        CFI Function APP_DEAL_WITH_ASSOCIATED
        CODE
// 1424 {
        FUNCALL APP_DEAL_WITH_ASSOCIATED, RemoveStaleNode
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_DEAL_WITH_ASSOCIATED, RemoveStaleNode
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_DEAL_WITH_ASSOCIATED, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
// 1425   uint8 nr;
// 1426   for(uint8 i=0;i<NWK_MAX_DEVICES;i++)
        MOV     R7,#0x0
??APP_DEAL_WITH_ASSOCIATED_0:
        MOV     A,R7
        CLR     C
        SUBB    A,#0x15
        JC      $+5
        LJMP    ??APP_DEAL_WITH_ASSOCIATED_1 & 0xFFFF
// 1427   {
// 1428     nr =  AssociatedDevList[i].nodeRelation;
        MOV     A,R7
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x12
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x12
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(AssociatedDevList + 4) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((AssociatedDevList + 4) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R6,A
// 1429     if (nr == CHILD_RFD || nr == CHILD_RFD_RX_IDLE)// || nr == CHILD_FFD || nr == CHILD_FFD_RX_IDLE)
        MOV     A,#0x1
        XRL     A,R6
        JZ      ??APP_DEAL_WITH_ASSOCIATED_2
        MOV     A,#0x2
        XRL     A,R6
        JZ      $+5
        LJMP    ??APP_DEAL_WITH_ASSOCIATED_3 & 0xFFFF
// 1430     {
// 1431       Child_list[i].heart_count++;
??APP_DEAL_WITH_ASSOCIATED_2:
        MOV     A,R7
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x2
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x2
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(Child_list + 1) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((Child_list + 1) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOVX    A,@DPTR
        ADD     A,#0x1
        MOVX    @DPTR,A
// 1432       
// 1433       if  (Child_list[i].heart_count>=4)
        MOV     A,R7
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x2
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x2
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(Child_list + 1) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((Child_list + 1) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0x4
        JNC     $+5
        LJMP    ??APP_DEAL_WITH_ASSOCIATED_4 & 0xFFFF
// 1434       {  
// 1435         if(RemoveStaleNode(AssociatedDevList[i].addrIdx))
        ; Setup parameters for call to function RemoveStaleNode
        MOV     A,R7
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x12
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x12
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(AssociatedDevList + 2) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((AssociatedDevList + 2) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        MOV     R1,A
        LCALL   ??RemoveStaleNode?relay
        MOV     A,R1
        JNZ     $+5
        LJMP    ??APP_DEAL_WITH_ASSOCIATED_4 & 0xFFFF
// 1436         {
// 1437           Child_list[i].heart_count=0;
        MOV     A,R7
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x2
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x2
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(Child_list + 1) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((Child_list + 1) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOV     A,#0x0
        MOVX    @DPTR,A
        LJMP    ??APP_DEAL_WITH_ASSOCIATED_4 & 0xFFFF
// 1438           //   break;  //test 删除一个后先跳出，等待下一次删除另外一个。错开时间
// 1439         }
// 1440       }
// 1441     }
// 1442     
// 1443     else if( nr == CHILD_FFD || nr == CHILD_FFD_RX_IDLE)
??APP_DEAL_WITH_ASSOCIATED_3:
        MOV     A,#0x3
        XRL     A,R6
        JZ      ??APP_DEAL_WITH_ASSOCIATED_5
        MOV     A,#0x4
        XRL     A,R6
        JNZ     ??APP_DEAL_WITH_ASSOCIATED_4
// 1444     {
// 1445       //对于FFD设备需要通过LINK STATE的信号来判断AGE的值从而达到清除的目的 也就是4*15=60S,60S内没收到这个设备的LINK STATE 则清除 2012 8 12 
// 1446       if ( AssociatedDevList[i].age > 8 )//对于FFD设备需要通过LINK STATE的信号来判断AGE的值从而达到清除的目的 2012 8 12
??APP_DEAL_WITH_ASSOCIATED_5:
        MOV     A,R7
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x12
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x12
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(AssociatedDevList + 7) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((AssociatedDevList + 7) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0x9
        JC      ??APP_DEAL_WITH_ASSOCIATED_4
// 1447       {    
// 1448         if(RemoveStaleNode(AssociatedDevList[i].addrIdx))//do noting,because router can,t be removed now
        ; Setup parameters for call to function RemoveStaleNode
        MOV     A,R7
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x12
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x12
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(AssociatedDevList + 2) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((AssociatedDevList + 2) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        MOV     R1,A
        LCALL   ??RemoveStaleNode?relay
        MOV     A,R1
        JZ      ??APP_DEAL_WITH_ASSOCIATED_4
// 1449         {
// 1450           Child_list[i].heart_count=0;
        MOV     A,R7
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x2
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x2
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(Child_list + 1) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((Child_list + 1) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1451         }
// 1452         
// 1453       }
// 1454     }
// 1455   }
??APP_DEAL_WITH_ASSOCIATED_4:
        INC     R7
        LJMP    ??APP_DEAL_WITH_ASSOCIATED_0 & 0xFFFF
// 1456   osal_start_timerEx( SampleApp_TaskID,ASSOCIA_MENTAIN_EVT, 60000 );  
??APP_DEAL_WITH_ASSOCIATED_1:
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#0x60
        MOV     R5,#-0x16
        MOV     R2,#0x2
        MOV     R3,#0x0
        MOV     DPTR,#SampleApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
// 1457 }
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock20
// 1458 
// 1459 
// 1460 
// 1461 /* 3 7 添加*/

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1462 void SampleApp_ProcessNwkaddrMessage(afIncomingMSGPacket_t *pkt)
SampleApp_ProcessNwkaddrMessage:
        CFI Block cfiBlock21 Using cfiCommon0
        CFI Function SampleApp_ProcessNwkaddrMessage
        CODE
// 1463 {
        FUNCALL SampleApp_ProcessNwkaddrMessage, AF_DataRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 26, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 26, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_ProcessNwkaddrMessage, wordtohex
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 17, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 17, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_ProcessNwkaddrMessage, wordtohex
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 17, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 17, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_ProcessNwkaddrMessage, AF_DataRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 26, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 26, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xe
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 14)
        ; Saved register size: 14
        ; Auto size: 3
        MOV     A,#-0x3
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 17)
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
// 1464   
// 1465   uint16 short_adress=0;
        MOV     ?V0 + 0,#0x0
        MOV     ?V0 + 1,#0x0
// 1466 //  uint8 *ieee_adress;
// 1467   
// 1468   
// 1469 
// 1470   SampleApp_Periodic_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
        MOV     DPTR,#SampleApp_Periodic_DstAddr + 8
        MOV     A,#0x2
        MOVX    @DPTR,A
// 1471   SampleApp_Periodic_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
        MOV     DPTR,#SampleApp_Periodic_DstAddr + 9
        MOV     A,#0x14
        MOVX    @DPTR,A
// 1472   SampleApp_Periodic_DstAddr.addr.shortAddr = 0X0000;  //give the coodinator
        MOV     DPTR,#SampleApp_Periodic_DstAddr
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1473   //  SampleApp_Periodic_DstAddr.addr.shortAddr = parent_short_adress;//test
// 1474   
// 1475   if ( AF_DataRequest( &SampleApp_Periodic_DstAddr, &SampleApp_epDesc,
// 1476                       SAMPLEAPP_ADDR_CLUSTERID,
// 1477                       23,  //数据长度
// 1478                       pkt->cmd.Data,//###添加的发送数据        
// 1479                       &SampleApp_TransID,
// 1480                       AF_DISCV_ROUTE,
// 1481                       AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
        ; Setup parameters for call to function AF_DataRequest
        MOV     ?V0 + 2,#0xf
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_ONE
        CFI CFA_XSP16 add(XSP16, 18)
        MOV     ?V0 + 2,#SampleApp_TransID & 0xff
        MOV     ?V0 + 3,#(SampleApp_TransID >> 8) & 0xff
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 20)
        MOV     A,R6
        ADD     A,#0x22
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        LCALL   ?PUSH_XSTACK8_X_TWO
        CFI CFA_XSP16 add(XSP16, 22)
        MOV     ?V0 + 2,#0x17
        MOV     ?V0 + 3,#0x0
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     ?V0 + 2,#0x3
        MOV     ?V0 + 3,#0x0
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 26)
        MOV     R1,#0x20
        MOV     R4,#SampleApp_epDesc & 0xff
        MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
        MOV     R2,#SampleApp_Periodic_DstAddr & 0xff
        MOV     R3,#(SampleApp_Periodic_DstAddr >> 8) & 0xff
        LCALL   ??AF_DataRequest?relay
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 17)
        MOV     A,R1
        MOV     ?V0 + 4,A
// 1482   {
// 1483   }
// 1484   else
// 1485   {
// 1486     // Error occurred in request to send.
// 1487   }
// 1488 
// 1489   
// 1490   
// 1491   short_adress = BUILD_UINT16 (wordtohex(pkt->cmd.Data[4],pkt->cmd.Data[5]),wordtohex(pkt->cmd.Data[2],pkt->cmd.Data[3]));
        ; Setup parameters for call to function wordtohex
        MOV     A,R6
        ADD     A,#0x22
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     A,R6
        ADD     A,#0x22
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??wordtohex?relay
        MOV     A,R1
        MOV     ?V0 + 2,A
        MOV     ?V0 + 3,#0x0
        ; Setup parameters for call to function wordtohex
        MOV     A,R6
        ADD     A,#0x22
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     A,R6
        ADD     A,#0x22
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??wordtohex?relay
        MOV     A,R1
        MOV     R0,A
        MOV     R1,#0x0
        CLR     A
        XCH     A,R0
        MOV     R1,A
        MOV     A,?V0 + 2
        ADD     A,R0
        MOV     R0,A
        MOV     A,?V0 + 3
        ADDC    A,R1
        MOV     R1,A
        MOV     ?V0 + 0,R0
        MOV     ?V0 + 1,R1
// 1492   
// 1493   
// 1494   
// 1495   if (  (pkt->cmd.Data[0]%2)==1)
        MOV     A,R6
        ADD     A,#0x22
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        MOVX    A,@DPTR
        MOV     B,#0x2
        DIV     AB
        MOV     A,B
        XRL     A,#0x1
        JZ      $+5
        LJMP    ??SampleApp_ProcessNwkaddrMessage_0 & 0xFFFF
// 1496   {  
// 1497     
// 1498     uint8 osack[3]={1,2,3};
        MOV     DPTR,#`?<Constant {1, 2, 3}>`
        PUSH    DPL
        CFI CFA_SP SP+-1
        PUSH    DPH
        CFI CFA_SP SP+-2
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R4,DPL
        MOV     R5,DPH
        POP     DPH
        CFI CFA_SP SP+-1
        POP     DPL
        CFI CFA_SP SP+0
        MOV     A,#0x3
        LCALL   ?MOVE_LONG8_XDATA_XDATA
// 1499     uint8 nr=0;
        MOV     ?V0 + 2,#0x0
// 1500     
// 1501     SampleApp_Flash_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;//
        MOV     DPTR,#SampleApp_Flash_DstAddr + 8
        MOV     A,#0x2
        MOVX    @DPTR,A
// 1502     SampleApp_Flash_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;//
        MOV     DPTR,#SampleApp_Flash_DstAddr + 9
        MOV     A,#0x14
        MOVX    @DPTR,A
// 1503     SampleApp_Flash_DstAddr.addr.shortAddr = short_adress;//
        MOV     DPTR,#SampleApp_Flash_DstAddr
        MOV     A,?V0 + 0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,?V0 + 1
        MOVX    @DPTR,A
// 1504     
// 1505     if ( AF_DataRequest( &SampleApp_Flash_DstAddr, &SampleApp_epDesc,
// 1506                         SAMPLEAPP_FLASH_CLUSTERID,
// 1507                         3,  //数据长度
// 1508                         osack,//###添加的发送数据        
// 1509                         &SampleApp_TransID,
// 1510                         AF_DISCV_ROUTE,
// 1511                         AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
        ; Setup parameters for call to function AF_DataRequest
        MOV     ?V0 + 3,#0xf
        MOV     R0,#?V0 + 3
        LCALL   ?PUSH_XSTACK_I_ONE
        CFI CFA_XSP16 add(XSP16, 18)
        MOV     ?V0 + 4,#SampleApp_TransID & 0xff
        MOV     ?V0 + 5,#(SampleApp_TransID >> 8) & 0xff
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 20)
        MOV     A,#0x3
        LCALL   ?XSTACK_DISP0_8
        MOV     ?V0 + 4,DPL
        MOV     ?V0 + 5,DPH
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 22)
        MOV     ?V0 + 4,#0x3
        MOV     ?V0 + 5,#0x0
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     ?V0 + 4,#0x2
        MOV     ?V0 + 5,#0x0
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 26)
        MOV     R1,#0x20
        MOV     R4,#SampleApp_epDesc & 0xff
        MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
        MOV     R2,#SampleApp_Flash_DstAddr & 0xff
        MOV     R3,#(SampleApp_Flash_DstAddr >> 8) & 0xff
        LCALL   ??AF_DataRequest?relay
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 17)
        MOV     A,R1
// 1512     {
// 1513     }
// 1514     else
// 1515     {
// 1516       // Error occurred in request to send.
// 1517     }
// 1518     
// 1519     for(uint8 j=0;j<NWK_MAX_DEVICES;j++)
        MOV     R3,#0x0
??SampleApp_ProcessNwkaddrMessage_1:
        MOV     A,R3
        CLR     C
        SUBB    A,#0x15
        JC      $+5
        LJMP    ??SampleApp_ProcessNwkaddrMessage_0 & 0xFFFF
// 1520     {
// 1521       nr =  AssociatedDevList[j].nodeRelation;
        MOV     A,R3
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x12
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x12
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(AssociatedDevList + 4) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((AssociatedDevList + 4) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     ?V0 + 2,A
// 1522       if (nr == CHILD_RFD || nr == CHILD_RFD_RX_IDLE)// || nr == CHILD_FFD || nr == CHILD_FFD_RX_IDLE)    
        MOV     A,#0x1
        XRL     A,?V0 + 2
        JZ      ??SampleApp_ProcessNwkaddrMessage_2
        MOV     A,#0x2
        XRL     A,?V0 + 2
        JNZ     ??SampleApp_ProcessNwkaddrMessage_3
// 1523       {
// 1524         if(AssociatedDevList[j].shortAddr==short_adress)
??SampleApp_ProcessNwkaddrMessage_2:
        MOV     A,R3
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x12
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x12
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#AssociatedDevList & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#(AssociatedDevList >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOVX    A,@DPTR
        XRL     A,?V0 + 0
        JNZ     ??SampleApp_ProcessNwkaddrMessage_4
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,?V0 + 1
??SampleApp_ProcessNwkaddrMessage_4:
        JNZ     ??SampleApp_ProcessNwkaddrMessage_3
// 1525         {
// 1526           Child_list[j].heart_count=0; 
        MOV     A,R3
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x2
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x2
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(Child_list + 1) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((Child_list + 1) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1527           //  Child_list[j].isActive=true;//收到心跳了在线的
// 1528           break;
        SJMP    ??SampleApp_ProcessNwkaddrMessage_0
// 1529         }
// 1530       }
// 1531     }
??SampleApp_ProcessNwkaddrMessage_3:
        INC     R3
        LJMP    ??SampleApp_ProcessNwkaddrMessage_1 & 0xFFFF
// 1532     
// 1533     
// 1534   }
// 1535   
// 1536   
// 1537 }
??SampleApp_ProcessNwkaddrMessage_0:
        MOV     A,#0x3
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 14)
        MOV     R7,#0x6
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock21
// 1538 
// 1539 //remove the stale nodes

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1540 uint8 RemoveStaleNode(uint8 index)
RemoveStaleNode:
        CFI Block cfiBlock22 Using cfiCommon0
        CFI Function RemoveStaleNode
        CODE
// 1541 {
        FUNCALL RemoveStaleNode, AddrMgrEntryGet
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 27, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 27, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL RemoveStaleNode, NLME_LeaveReq
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 27, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 27, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 18
        MOV     A,#-0x12
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 27)
        MOV     A,R1
        MOV     R6,A
// 1542   AddrMgrEntry_t addrEntry;
// 1543   NLME_LeaveReq_t req;
// 1544   
// 1545   // Set up device info
// 1546   
// 1547   addrEntry.user  = ADDRMGR_USER_DEFAULT;
        MOV     A,#0x5
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1548   addrEntry.index = index;
        MOV     A,R6
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,#0x10
        LCALL   ?XSTACK_DISP0_8
        MOV     A,R0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R1
        MOVX    @DPTR,A
// 1549   
// 1550   if (AddrMgrEntryGet( &addrEntry )) 
        ; Setup parameters for call to function AddrMgrEntryGet
        MOV     A,#0x5
        LCALL   ?XSTACK_DISP0_8
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??AddrMgrEntryGet?relay
        MOV     A,R1
        JZ      ??RemoveStaleNode_0
// 1551   {
// 1552     // Remove device
// 1553     req.extAddr = addrEntry.extAddr;
        MOV     A,#0x8
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,DPL
        MOV     R1,DPH
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,R0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R1
        MOVX    @DPTR,A
// 1554     req.removeChildren = FALSE;
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1555     req.rejoin = FALSE;
        MOV     A,#0x3
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1556     req.silent = TRUE;
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x1
        MOVX    @DPTR,A
// 1557     
// 1558     NLME_LeaveReq( &req );
        ; Setup parameters for call to function NLME_LeaveReq
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??NLME_LeaveReq?relay
        MOV     A,R1
// 1559     
// 1560     
// 1561     return true;
        MOV     R1,#0x1
        SJMP    ??RemoveStaleNode_1
// 1562   }
// 1563   return false;
??RemoveStaleNode_0:
        MOV     R1,#0x0
??RemoveStaleNode_1:
        MOV     A,#0x12
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 9)
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock22
// 1564 }
// 1565 
// 1566 
// 1567 //remove the stale router

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1568 uint8 RemoveStaleRouter(uint8 index)
RemoveStaleRouter:
        CFI Block cfiBlock23 Using cfiCommon0
        CFI Function RemoveStaleRouter
        CODE
// 1569 {
        FUNCALL RemoveStaleRouter, AddrMgrEntryGet
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 27, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 27, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL RemoveStaleRouter, NLME_LeaveReq
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 27, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 27, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 18
        MOV     A,#-0x12
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 27)
        MOV     A,R1
        MOV     R6,A
// 1570   AddrMgrEntry_t addrEntry;
// 1571   NLME_LeaveReq_t req;
// 1572 //  APSME_RemoveDeviceReq_t remDevReq;
// 1573   // Set up device info
// 1574   
// 1575   addrEntry.user  = ADDRMGR_USER_DEFAULT;
        MOV     A,#0x5
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1576   addrEntry.index = index;
        MOV     A,R6
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,#0x10
        LCALL   ?XSTACK_DISP0_8
        MOV     A,R0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R1
        MOVX    @DPTR,A
// 1577   
// 1578   if (AddrMgrEntryGet( &addrEntry )) 
        ; Setup parameters for call to function AddrMgrEntryGet
        MOV     A,#0x5
        LCALL   ?XSTACK_DISP0_8
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??AddrMgrEntryGet?relay
        MOV     A,R1
        JZ      ??RemoveStaleRouter_0
// 1579   {
// 1580     // Remove device
// 1581     req.extAddr = addrEntry.extAddr;
        MOV     A,#0x8
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,DPL
        MOV     R1,DPH
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,R0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R1
        MOVX    @DPTR,A
// 1582     req.removeChildren = FALSE;
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1583     req.rejoin = FALSE;
        MOV     A,#0x3
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1584     req.silent = TRUE;
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x1
        MOVX    @DPTR,A
// 1585     
// 1586     NLME_LeaveReq( &req );
        ; Setup parameters for call to function NLME_LeaveReq
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??NLME_LeaveReq?relay
        MOV     A,R1
// 1587     
// 1588     
// 1589     return true;
        MOV     R1,#0x1
        SJMP    ??RemoveStaleRouter_1
// 1590   }
// 1591   return false;
??RemoveStaleRouter_0:
        MOV     R1,#0x0
??RemoveStaleRouter_1:
        MOV     A,#0x12
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 9)
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock23
// 1592 }
// 1593 
// 1594 /*
// 1595 1 转发心跳包，最终发给COORDINATOR
// 1596 2 处理关联表，根据心跳包设置ACTIVE OR INACTIVE的CHIRDREN
// 1597 */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1598 void SampleApp_ROUTER_ProcessPeriodicMessage_Data(afIncomingMSGPacket_t *pkt)
SampleApp_ROUTER_ProcessPeriodicMessage_Data:
        CFI Block cfiBlock24 Using cfiCommon0
        CFI Function SampleApp_ROUTER_ProcessPeriodicMessage_Data
        CODE
// 1599 {
        FUNCALL SampleApp_ROUTER_ProcessPeriodicMessage_Data, NLME_GetShortAddr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 26, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 26, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL SampleApp_ROUTER_ProcessPeriodicMessage_Data, AF_DataRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 35, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 35, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x12
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 18)
        ; Saved register size: 18
        ; Auto size: 8
        MOV     A,#-0x8
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 26)
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
// 1600   
// 1601   uint8 HEART_BUFFER[4];
// 1602   uint8 Child_short_adress_buffer[4];
// 1603   // uint8 *Sample_Cmd_shorAddr;
// 1604   uint8 shortAddr_H8;
// 1605   uint8 shortAddr_L8;
// 1606   uint16 Child_short_adress;
// 1607   uint16 parent_short_adress;
// 1608   uint8 nr;
// 1609   
// 1610   for(uint8 i=0;i<4;i++)
        MOV     R3,#0x0
??SampleApp_ROUTER_ProcessPeriodicMessage_Data_0:
        MOV     A,R3
        CLR     C
        SUBB    A,#0x4
        JNC     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_1
// 1611   {
// 1612     HEART_BUFFER[i]=pkt->cmd.Data[i];//get the heart message
        MOV     A,R3
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R6
        ADD     A,#0x22
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        ADD     A,R0
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,R1
        MOV     DPL,R2
        MOV     DPH,A
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     ?V0 + 8,R3
        MOV     ?V0 + 9,#0x0
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     A,DPL
        ADD     A,?V0 + 8
        MOV     DPL,A
        MOV     A,DPH
        ADDC    A,?V0 + 9
        MOV     DPH,A
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1613   }
        INC     R3
        SJMP    ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_0
// 1614   
// 1615   for(uint8 i=0;i<4;i++)
??SampleApp_ROUTER_ProcessPeriodicMessage_Data_1:
        MOV     R2,#0x0
??SampleApp_ROUTER_ProcessPeriodicMessage_Data_2:
        MOV     A,R2
        CLR     C
        SUBB    A,#0x4
        JC      $+5
        LJMP    ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_3 & 0xFFFF
// 1616   {//转换短地址 从ACII码到UINT16
// 1617     if((pkt->cmd.Data[i]>47)&&(pkt->cmd.Data[i]<58))      //0~9  
        MOV     A,R2
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R6
        ADD     A,#0x22
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        ADD     A,R0
        MOV     R3,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,R1
        MOV     DPL,R3
        MOV     DPH,A
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0x30
        JC      ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_4
        MOV     A,R2
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R6
        ADD     A,#0x22
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        ADD     A,R0
        MOV     R3,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,R1
        MOV     DPL,R3
        MOV     DPH,A
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0x3a
        JNC     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_4
// 1618       Child_short_adress_buffer[i]=pkt->cmd.Data[i]-48;
        MOV     A,R2
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R6
        ADD     A,#0x22
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        ADD     A,R0
        MOV     R3,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,R1
        MOV     DPL,R3
        MOV     DPH,A
        MOVX    A,@DPTR
        ADD     A,#-0x30
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     ?V0 + 8,R2
        MOV     ?V0 + 9,#0x0
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,DPL
        ADD     A,?V0 + 8
        MOV     DPL,A
        MOV     A,DPH
        ADDC    A,?V0 + 9
        MOV     DPH,A
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        SJMP    ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_5
// 1619     else if((pkt->cmd.Data[i]>64)&&(pkt->cmd.Data[i]<71)) //A~F
??SampleApp_ROUTER_ProcessPeriodicMessage_Data_4:
        MOV     A,R2
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R6
        ADD     A,#0x22
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        ADD     A,R0
        MOV     R3,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,R1
        MOV     DPL,R3
        MOV     DPH,A
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0x41
        JC      ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_5
        MOV     A,R2
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R6
        ADD     A,#0x22
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        ADD     A,R0
        MOV     R3,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,R1
        MOV     DPL,R3
        MOV     DPH,A
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0x47
        JNC     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_5
// 1620       Child_short_adress_buffer[i]=pkt->cmd.Data[i]-55;
        MOV     A,R2
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R6
        ADD     A,#0x22
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        ADD     A,R0
        MOV     R3,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,R1
        MOV     DPL,R3
        MOV     DPH,A
        MOVX    A,@DPTR
        ADD     A,#-0x37
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     ?V0 + 8,R2
        MOV     ?V0 + 9,#0x0
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,DPL
        ADD     A,?V0 + 8
        MOV     DPL,A
        MOV     A,DPH
        ADDC    A,?V0 + 9
        MOV     DPH,A
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1621   }
??SampleApp_ROUTER_ProcessPeriodicMessage_Data_5:
        INC     R2
        LJMP    ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_2 & 0xFFFF
// 1622   shortAddr_H8=(Child_short_adress_buffer[0]<<4)+Child_short_adress_buffer[1];
??SampleApp_ROUTER_ProcessPeriodicMessage_Data_3:
        MOV     A,#0x1
        LCALL   ?XSTACK_DISP0_8
        PUSH    DPL
        CFI CFA_SP SP+-1
        PUSH    DPH
        CFI CFA_SP SP+-2
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        SWAP    A
        ANL     A,#0xf0
        POP     DPH
        CFI CFA_SP SP+-1
        POP     DPL
        CFI CFA_SP SP+0
        MOV     R0,A
        MOVX    A,@DPTR
        ADD     A,R0
        MOV     ?V0 + 6,A
// 1623   shortAddr_L8=(Child_short_adress_buffer[2]<<4)+Child_short_adress_buffer[3];
        MOV     A,#0x3
        LCALL   ?XSTACK_DISP0_8
        PUSH    DPL
        CFI CFA_SP SP+-1
        PUSH    DPH
        CFI CFA_SP SP+-2
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        SWAP    A
        ANL     A,#0xf0
        POP     DPH
        CFI CFA_SP SP+-1
        POP     DPL
        CFI CFA_SP SP+0
        MOV     R0,A
        MOVX    A,@DPTR
        ADD     A,R0
        MOV     ?V0 + 4,A
// 1624   Child_short_adress=((uint16)(shortAddr_H8)<<8)+((uint16)shortAddr_L8);
        MOV     A,?V0 + 6
        MOV     R0,?V0 + 6
        MOV     R1,#0x0
        CLR     A
        XCH     A,R0
        MOV     R1,A
        MOV     ?V0 + 8,?V0 + 4
        MOV     ?V0 + 9,#0x0
        MOV     A,R0
        ADD     A,?V0 + 8
        MOV     R0,A
        MOV     A,R1
        ADDC    A,?V0 + 9
        MOV     R1,A
        MOV     ?V0 + 2,R0
        MOV     ?V0 + 3,R1
// 1625   
// 1626   parent_short_adress= NLME_GetShortAddr();//NLME_GetCoordShortAddr();//get the parent adress
        ; Setup parameters for call to function NLME_GetShortAddr
        LCALL   ??NLME_GetShortAddr?relay
        MOV     ?V0 + 8,R2
        MOV     ?V0 + 9,R3
        MOV     ?V0 + 0,?V0 + 8
        MOV     ?V0 + 1,?V0 + 9
// 1627   
// 1628   if( (parent_short_adress!=Child_short_adress) && (parent_short_adress!=0x0000)) //if it is not itself and it is not the coordinator
        MOV     A,?V0 + 2
        XRL     A,?V0 + 0
        JNZ     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_6
        MOV     A,?V0 + 3
        XRL     A,?V0 + 1
??SampleApp_ROUTER_ProcessPeriodicMessage_Data_6:
        JZ      ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_7
        MOV     A,?V0 + 0
        ORL     A,?V0 + 1
        JZ      ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_7
// 1629   {
// 1630     SampleApp_Periodic_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
        MOV     DPTR,#SampleApp_Periodic_DstAddr + 8
        MOV     A,#0x2
        MOVX    @DPTR,A
// 1631     SampleApp_Periodic_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
        MOV     DPTR,#SampleApp_Periodic_DstAddr + 9
        MOV     A,#0x14
        MOVX    @DPTR,A
// 1632     SampleApp_Periodic_DstAddr.addr.shortAddr = 0X0000;  //give the coodinator
        MOV     DPTR,#SampleApp_Periodic_DstAddr
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1633     //  SampleApp_Periodic_DstAddr.addr.shortAddr = parent_short_adress;//test
// 1634     
// 1635     if ( AF_DataRequest( &SampleApp_Periodic_DstAddr, &SampleApp_epDesc,
// 1636                         SAMPLEAPP_PERIODIC_COORDINATOR_CLUSTERID,
// 1637                         4,  //数据长度
// 1638                         HEART_BUFFER,//###添加的发送数据        
// 1639                         &SampleApp_TransID,
// 1640                         AF_DISCV_ROUTE,
// 1641                         AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
        ; Setup parameters for call to function AF_DataRequest
        MOV     ?V0 + 7,#0xf
        MOV     R0,#?V0 + 7
        LCALL   ?PUSH_XSTACK_I_ONE
        CFI CFA_XSP16 add(XSP16, 27)
        MOV     ?V0 + 8,#SampleApp_TransID & 0xff
        MOV     ?V0 + 9,#(SampleApp_TransID >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 29)
        MOV     A,#0x7
        LCALL   ?XSTACK_DISP0_8
        MOV     ?V0 + 8,DPL
        MOV     ?V0 + 9,DPH
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 31)
        MOV     ?V0 + 8,#0x4
        MOV     ?V0 + 9,#0x0
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 33)
        MOV     ?V0 + 8,#0x7
        MOV     ?V0 + 9,#0x0
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 35)
        MOV     R1,#0x20
        MOV     R4,#SampleApp_epDesc & 0xff
        MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
        MOV     R2,#SampleApp_Periodic_DstAddr & 0xff
        MOV     R3,#(SampleApp_Periodic_DstAddr >> 8) & 0xff
        LCALL   ??AF_DataRequest?relay
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 26)
        MOV     A,R1
// 1642     {
// 1643     }
// 1644     else
// 1645     {
// 1646       // Error occurred in request to send.
// 1647     }
// 1648   }
// 1649   
// 1650   //处理心跳包。看是否还在线
// 1651   
// 1652   for(uint8 j=0;j<NWK_MAX_DEVICES;j++)
??SampleApp_ROUTER_ProcessPeriodicMessage_Data_7:
        MOV     R3,#0x0
??SampleApp_ROUTER_ProcessPeriodicMessage_Data_8:
        MOV     A,R3
        CLR     C
        SUBB    A,#0x15
        JC      $+5
        LJMP    ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_9 & 0xFFFF
// 1653   {
// 1654     nr =  AssociatedDevList[j].nodeRelation;
        MOV     A,R3
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x12
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x12
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(AssociatedDevList + 4) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((AssociatedDevList + 4) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     ?V0 + 5,A
// 1655     if (nr == CHILD_RFD || nr == CHILD_RFD_RX_IDLE)// || nr == CHILD_FFD || nr == CHILD_FFD_RX_IDLE)    
        MOV     A,#0x1
        XRL     A,?V0 + 5
        JZ      ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_10
        MOV     A,#0x2
        XRL     A,?V0 + 5
        JNZ     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_11
// 1656     {
// 1657       if(AssociatedDevList[j].shortAddr==Child_short_adress)
??SampleApp_ROUTER_ProcessPeriodicMessage_Data_10:
        MOV     A,R3
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x12
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x12
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#AssociatedDevList & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#(AssociatedDevList >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOVX    A,@DPTR
        XRL     A,?V0 + 2
        JNZ     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_12
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,?V0 + 3
??SampleApp_ROUTER_ProcessPeriodicMessage_Data_12:
        JNZ     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_11
// 1658       {
// 1659         Child_list[j].heart_count=0; 
        MOV     A,R3
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x2
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x2
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#(Child_list + 1) & 0xff
        ADD     A,R0
        MOV     DPL,A
        MOV     A,#((Child_list + 1) >> 8) & 0xff
        ADDC    A,R1
        MOV     DPH,A
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1660         //  Child_list[j].isActive=true;//收到心跳了在线的
// 1661         break;
        SJMP    ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_9
// 1662       }
// 1663     }
// 1664   }
??SampleApp_ROUTER_ProcessPeriodicMessage_Data_11:
        INC     R3
        LJMP    ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_8 & 0xFFFF
// 1665 }
??SampleApp_ROUTER_ProcessPeriodicMessage_Data_9:
        MOV     A,#0x8
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 18)
        MOV     R7,#0xa
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock24
// 1666 
// 1667 
// 1668 

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1669 void APP_OS_DEAL_WITH(uint16 poll_rate_value)
APP_OS_DEAL_WITH:
        CFI Block cfiBlock25 Using cfiCommon0
        CFI Function APP_OS_DEAL_WITH
        CODE
// 1670 {
        FUNCALL APP_OS_DEAL_WITH, Onboard_soft_reset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL APP_OS_DEAL_WITH, NLME_SetPollRate
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
// 1671    if(OS_FLAG==0)
        MOV     DPTR,#OS_FLAG
        MOVX    A,@DPTR
        JNZ     ??APP_OS_DEAL_WITH_0
// 1672     {
// 1673      SystemResetSoft();
        ; Setup parameters for call to function Onboard_soft_reset
        LCALL   Onboard_soft_reset & 0xFFFF
        SJMP    ??APP_OS_DEAL_WITH_1
// 1674     }
// 1675     else
// 1676     {  
// 1677      NLME_SetPollRate( poll_rate_value );     
??APP_OS_DEAL_WITH_0:
        ; Setup parameters for call to function NLME_SetPollRate
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??NLME_SetPollRate?relay
// 1678     }
// 1679 }
??APP_OS_DEAL_WITH_1:
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock25
// 1680 

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1681 uint8 APP_ENDDEVICE_ACK(uint8 a,uint8 b,uint8 c)
APP_ENDDEVICE_ACK:
        CFI Block cfiBlock26 Using cfiCommon0
        CFI Function APP_ENDDEVICE_ACK
        CODE
// 1682 {
        ; Saved register size: 0
        ; Auto size: 0
        MOV     A,R1
        MOV     R0,A
// 1683   if( (a==1) && (b==2) && (c==3) )
        MOV     A,#0x1
        XRL     A,R0
        JNZ     ??APP_ENDDEVICE_ACK_0
        MOV     A,#0x2
        XRL     A,R2
        JNZ     ??APP_ENDDEVICE_ACK_0
        MOV     A,#0x3
        XRL     A,R3
        JNZ     ??APP_ENDDEVICE_ACK_0
// 1684   {
// 1685    return 1;
        MOV     R1,#0x1
        SJMP    ??APP_ENDDEVICE_ACK_1
// 1686   }
// 1687   else
// 1688   {
// 1689    return 0;
??APP_ENDDEVICE_ACK_0:
        MOV     R1,#0x0
??APP_ENDDEVICE_ACK_1:
        LJMP    ?BRET
        CFI EndBlock cfiBlock26
// 1690   } 
// 1691 
// 1692 }
// 1693 
// 1694 
// 1695 
// 1696 // active send the rs message
// 1697 // type1_id 1or 0 1 enddevice 0 router
// 1698 // type2_id device id
// 1699 // data_len RS有效数据长度
// 1700 // data RS有效数据

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1701 void sampleAPP_sendRS_periodMessage(uint8 type1_id,uint8 type2_id,uint8 data_len,uint8 *data)
sampleAPP_sendRS_periodMessage:
        CFI Block cfiBlock27 Using cfiCommon0
        CFI Function sampleAPP_sendRS_periodMessage
        CODE
// 1702 {
        FUNCALL sampleAPP_sendRS_periodMessage, SampleApp_GetShortAddr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 64, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 64, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL sampleAPP_sendRS_periodMessage, osal_mem_free
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 64, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 64, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL sampleAPP_sendRS_periodMessage, SampleApp_GetExtendAddr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 64, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 64, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL sampleAPP_sendRS_periodMessage, osal_mem_free
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 64, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 64, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL sampleAPP_sendRS_periodMessage, AF_DataRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 73, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 73, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x12
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 18)
        ; Saved register size: 18
        ; Auto size: 46
        MOV     A,#-0x2e
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 64)
        MOV     ?V0 + 5,R1
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 3,R3
        MOV     ?V0 + 6,R4
        MOV     ?V0 + 7,R5
// 1703   uint8 str[45];
// 1704   uint8 *Sample_Cmd_shorAddr;
// 1705   uint8 *Sample_extendaddr;
// 1706   
// 1707   Sample_Cmd_shorAddr=SampleApp_GetShortAddr();
        ; Setup parameters for call to function SampleApp_GetShortAddr
        LCALL   ??SampleApp_GetShortAddr?relay
        MOV     ?V0 + 8,R2
        MOV     ?V0 + 9,R3
        MOV     R6,?V0 + 8
        MOV     R7,?V0 + 9
// 1708   str[0]=*Sample_Cmd_shorAddr++;
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x1
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOV     R6,DPL
        MOV     R7,DPH
// 1709   str[1]=*Sample_Cmd_shorAddr++;
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOV     R6,DPL
        MOV     R7,DPH
// 1710   str[2]=*Sample_Cmd_shorAddr++;
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x3
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOV     R6,DPL
        MOV     R7,DPH
// 1711   str[3]=*Sample_Cmd_shorAddr;
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1712   osal_mem_free( shortddr_mem );
        ; Setup parameters for call to function osal_mem_free
        MOV     DPTR,#shortddr_mem
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??osal_mem_free?relay
// 1713 
// 1714   str[4]='/';
        MOV     A,#0x5
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x2f
        MOVX    @DPTR,A
// 1715   str[5]='C';
        MOV     A,#0x6
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x43
        MOVX    @DPTR,A
// 1716   str[6]='/';
        MOV     A,#0x7
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x2f
        MOVX    @DPTR,A
// 1717   str[7]='U';
        MOV     A,#0x8
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x55
        MOVX    @DPTR,A
// 1718   str[8]='U';
        MOV     A,#0x9
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x55
        MOVX    @DPTR,A
// 1719   str[9]='R';
        MOV     A,#0xa
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x52
        MOVX    @DPTR,A
// 1720 
// 1721    uint8 i;
// 1722   str[10]=type1_id;
        MOV     A,?V0 + 5
        MOV     A,#0xb
        LCALL   ?XSTACK_DISP0_8
        MOV     A,?V0 + 5
        MOVX    @DPTR,A
// 1723   str[11]=type2_id;//
        MOV     A,?V0 + 4
        MOV     A,#0xc
        LCALL   ?XSTACK_DISP0_8
        MOV     A,?V0 + 4
        MOVX    @DPTR,A
// 1724  
// 1725   Sample_extendaddr=SampleApp_GetExtendAddr();
        ; Setup parameters for call to function SampleApp_GetExtendAddr
        LCALL   ??SampleApp_GetExtendAddr?relay
        MOV     ?V0 + 8,R2
        MOV     ?V0 + 9,R3
        MOV     ?V0 + 0,?V0 + 8
        MOV     ?V0 + 1,?V0 + 9
// 1726   for(i=0;i<16;i++)
        MOV     ?V0 + 2,#0x0
??sampleAPP_sendRS_periodMessage_0:
        MOV     A,?V0 + 2
        CLR     C
        SUBB    A,#0x10
        JNC     ??sampleAPP_sendRS_periodMessage_1
// 1727   {
// 1728     str[i+12]=*Sample_extendaddr++;
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     ?V0 + 8,?V0 + 2
        MOV     ?V0 + 9,#0x0
        MOV     A,#0x1
        LCALL   ?XSTACK_DISP0_8
        MOV     A,DPL
        ADD     A,?V0 + 8
        MOV     R0,A
        MOV     A,DPH
        ADDC    A,?V0 + 9
        MOV     R1,A
        MOV     A,R0
        ADD     A,#0xc
        MOV     DPL,A
        MOV     A,R1
        ADDC    A,#0x0
        MOV     DPH,A
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        MOV     ?V0 + 0,DPL
        MOV     ?V0 + 1,DPH
// 1729   }
        INC     ?V0 + 2
        SJMP    ??sampleAPP_sendRS_periodMessage_0
// 1730    osal_mem_free( extendaddr_mem );
??sampleAPP_sendRS_periodMessage_1:
        ; Setup parameters for call to function osal_mem_free
        MOV     DPTR,#extendaddr_mem
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??osal_mem_free?relay
// 1731    str[28]=0;
        MOV     A,#0x1d
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1732    for(uint8 i=0;i<data_len;i++)
        MOV     R2,#0x0
??sampleAPP_sendRS_periodMessage_2:
        MOV     A,R2
        CLR     C
        SUBB    A,?V0 + 3
        JNC     ??sampleAPP_sendRS_periodMessage_3
// 1733    {
// 1734     str[29+i]=data[i];
        MOV     ?V0 + 8,R2
        MOV     ?V0 + 9,#0x0
        MOV     A,?V0 + 6
        ADD     A,?V0 + 8
        MOV     DPL,A
        MOV     A,?V0 + 7
        ADDC    A,?V0 + 9
        MOV     DPH,A
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     ?V0 + 8,R2
        MOV     ?V0 + 9,#0x0
        MOV     A,#0x1
        LCALL   ?XSTACK_DISP0_8
        MOV     A,DPL
        ADD     A,?V0 + 8
        MOV     R0,A
        MOV     A,DPH
        ADDC    A,?V0 + 9
        MOV     R1,A
        MOV     A,R0
        ADD     A,#0x1d
        MOV     DPL,A
        MOV     A,R1
        ADDC    A,#0x0
        MOV     DPH,A
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1735    }
        INC     R2
        SJMP    ??sampleAPP_sendRS_periodMessage_2
// 1736    
// 1737    
// 1738     SampleApp_SPI_SendCommand_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
??sampleAPP_sendRS_periodMessage_3:
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 8
        MOV     A,#0x2
        MOVX    @DPTR,A
// 1739     SampleApp_SPI_SendCommand_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 9
        MOV     A,#0x14
        MOVX    @DPTR,A
// 1740     SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;
        MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1741 
// 1742     if ( AF_DataRequest( &SampleApp_SPI_SendCommand_DstAddr,
// 1743                          (endPointDesc_t *)&SampleApp_epDesc,
// 1744                           SAMPLEAPP_COMMAND_CLUSTERID, //终端传过去，协调器处理了
// 1745                           29+data_len, str,
// 1746                           &SampleApp_TransID, 
// 1747                           AF_DISCV_ROUTE, 
// 1748                           AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
        ; Setup parameters for call to function AF_DataRequest
        MOV     ?V0 + 8,#0xf
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_ONE
        CFI CFA_XSP16 add(XSP16, 65)
        MOV     ?V0 + 8,#SampleApp_TransID & 0xff
        MOV     ?V0 + 9,#(SampleApp_TransID >> 8) & 0xff
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 67)
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     ?V0 + 8,DPL
        MOV     ?V0 + 9,DPH
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 69)
        MOV     ?V0 + 8,?V0 + 3
        MOV     ?V0 + 9,#0x0
        MOV     A,?V0 + 8
        ADD     A,#0x1d
        MOV     ?V0 + 8,A
        MOV     A,?V0 + 9
        ADDC    A,#0x0
        MOV     ?V0 + 9,A
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 71)
        MOV     ?V0 + 8,#0x4
        MOV     ?V0 + 9,#0x0
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 73)
        MOV     R1,#0x20
        MOV     R4,#SampleApp_epDesc & 0xff
        MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
        MOV     R2,#SampleApp_SPI_SendCommand_DstAddr & 0xff
        MOV     R3,#(SampleApp_SPI_SendCommand_DstAddr >> 8) & 0xff
        LCALL   ??AF_DataRequest?relay
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 64)
        MOV     A,R1
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    @DPTR,A
// 1749     {
// 1750     }
// 1751     else
// 1752     {
// 1753     }   
// 1754     
// 1755     
// 1756    
// 1757 }
        MOV     A,#0x2e
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 18)
        MOV     R7,#0xa
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock27
// 1758 
// 1759 

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1760 void Change_Net_Set(void)
Change_Net_Set:
        CFI Block cfiBlock28 Using cfiCommon0
        CFI Function Change_Net_Set
        CODE
// 1761 {
        FUNCALL Change_Net_Set, ZMacSetReq
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Change_Net_Set, ZDApp_NwkStateUpdateCB
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Change_Net_Set, nwkTransmissionFailures
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Change_Net_Set, ZMacSetReq
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Change_Net_Set, ZDApp_NwkStateUpdateCB
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Change_Net_Set, nwkTransmissionFailures
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUSH    DPL
        CFI DPL0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        PUSH    DPH
        CFI DPH0 Frame(CFA_SP, 5)
        CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
// 1762  
// 1763   if(New_Net_flag == 1)
        MOV     DPTR,#New_Net_flag
        MOVX    A,@DPTR
        XRL     A,#0x1
        JNZ     ??Change_Net_Set_0
// 1764     {
// 1765          // 先发送出去再考虑切换频道
// 1766         if((New_Channel_list>=0x0B) && (New_Channel_list<=0x1A))
        MOV     DPTR,#New_Channel_list
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0xb
        JC      ??Change_Net_Set_1
        MOV     DPTR,#New_Channel_list
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0x1b
        JNC     ??Change_Net_Set_1
// 1767         {  
// 1768           _NIB.nwkLogicalChannel = New_Channel_list;
        MOV     DPTR,#New_Channel_list
        MOVX    A,@DPTR
        MOV     DPTR,#_NIB + 22
        MOVX    @DPTR,A
// 1769           ZMacSetReq( ZMacChannel, &New_Channel_list );
        ; Setup parameters for call to function ZMacSetReq
        MOV     R2,#New_Channel_list & 0xff
        MOV     R3,#(New_Channel_list >> 8) & 0xff
        MOV     R1,#-0x1f
        LCALL   ??ZMacSetReq?relay
        MOV     A,R1
// 1770 
// 1771           ZDApp_NwkStateUpdateCB();
        ; Setup parameters for call to function ZDApp_NwkStateUpdateCB
        LCALL   ??ZDApp_NwkStateUpdateCB?relay
// 1772           _NIB.nwkTotalTransmissions = 0;
        MOV     DPTR,#_NIB + 107
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1773           nwkTransmissionFailures( TRUE );
        ; Setup parameters for call to function nwkTransmissionFailures
        MOV     R1,#0x1
        LCALL   ??nwkTransmissionFailures?relay
// 1774           New_Channel_list = 0;
        MOV     DPTR,#New_Channel_list
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1775         }
// 1776          New_Net_flag = 0;
??Change_Net_Set_1:
        MOV     DPTR,#New_Net_flag
        MOV     A,#0x0
        MOVX    @DPTR,A
        SJMP    ??Change_Net_Set_2
// 1777        
// 1778     }
// 1779     else if(New_Net_flag == 2)
??Change_Net_Set_0:
        MOV     DPTR,#New_Net_flag
        MOVX    A,@DPTR
        XRL     A,#0x2
        JNZ     ??Change_Net_Set_3
// 1780     {
// 1781        if ( (New_Panid != 0xFFFF) || (New_Panid != INVALID_PAN_ID) )
        MOV     DPTR,#New_Panid
        MOVX    A,@DPTR
        XRL     A,#0xff
        JNZ     ??Change_Net_Set_4
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0xff
??Change_Net_Set_4:
        JNZ     ??Change_Net_Set_5
        MOV     DPTR,#New_Panid
        MOVX    A,@DPTR
        XRL     A,#0xfe
        JNZ     ??Change_Net_Set_6
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0xff
??Change_Net_Set_6:
        JZ      ??Change_Net_Set_7
// 1782           {    
// 1783             _NIB.nwkPanId = New_Panid;
??Change_Net_Set_5:
        MOV     DPTR,#New_Panid
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     DPTR,#_NIB + 33
        MOV     A,R0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R1
        MOVX    @DPTR,A
// 1784             ZMacSetReq( ZMacPanId, (byte*)&(_NIB.nwkPanId) );
        ; Setup parameters for call to function ZMacSetReq
        MOV     R2,#(_NIB + 33) & 0xff
        MOV     R3,#((_NIB + 33) >> 8) & 0xff
        MOV     R1,#0x50
        LCALL   ??ZMacSetReq?relay
        MOV     A,R1
// 1785             ZDApp_NwkStateUpdateCB();
        ; Setup parameters for call to function ZDApp_NwkStateUpdateCB
        LCALL   ??ZDApp_NwkStateUpdateCB?relay
// 1786             _NIB.nwkTotalTransmissions = 0;
        MOV     DPTR,#_NIB + 107
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1787             nwkTransmissionFailures( TRUE );
        ; Setup parameters for call to function nwkTransmissionFailures
        MOV     R1,#0x1
        LCALL   ??nwkTransmissionFailures?relay
// 1788             New_Panid = 0xFFFF;
        MOV     DPTR,#New_Panid
        MOV     A,#-0x1
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#-0x1
        MOVX    @DPTR,A
// 1789           }
// 1790        New_Net_flag = 0;
??Change_Net_Set_7:
        MOV     DPTR,#New_Net_flag
        MOV     A,#0x0
        MOVX    @DPTR,A
        SJMP    ??Change_Net_Set_2
// 1791        
// 1792     }
// 1793     else
// 1794     { 
// 1795     //  SystemResetSoft();
// 1796         HAL_SYSTEM_RESET(); 
??Change_Net_Set_3:
        CLR     0xa8.7
        MOV     0xc9,#-0x55
        MOV     0xc9,#0x5b
??Change_Net_Set_8:
        SJMP    ??Change_Net_Set_8
// 1797     } 
// 1798 
// 1799 }
??Change_Net_Set_2:
        POP     DPH
        CFI DPH0 SameValue
        CFI CFA_SP SP+-4
        POP     DPL
        CFI DPL0 SameValue
        CFI CFA_SP SP+-3
        LJMP    ?BRET
        CFI EndBlock cfiBlock28
        REQUIRE _A_IEN0
        REQUIRE WDCTL

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for Heart_mesg_flag>`:
        DATA8
        DB 1

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for defaultKey>`:
        DATA8
        DB 3
        DB 3
        DB 5
        DB 7
        DB 9
        DB 11
        DB 13
        DB 15
        DB 2
        DB 2
        DB 4
        DB 6
        DB 8
        DB 10
        DB 12
        DB 13

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_NwkDescListProcessing?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_NwkDescListProcessing

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDO_DEVICE_DISC?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDO_DEVICE_DISC

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDO_REJOIN_ERROR?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDO_REJOIN_ERROR

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDO_ACK_DEAL_WITH?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDO_ACK_DEAL_WITH

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??APP_JOIN_INIT?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    APP_JOIN_INIT

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??APP_JOIN_DEAL_WITH?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    APP_JOIN_DEAL_WITH

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??APP_JOIN_START_EVT?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    APP_JOIN_START_EVT

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??SampleApp_SendNwkaddrMessage?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    SampleApp_SendNwkaddrMessage

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??APPLY_TO_JOIN_OF_KEY?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    APPLY_TO_JOIN_OF_KEY

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??RESTORE_TO_FACTORY?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    RESTORE_TO_FACTORY

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??SampleApp_SendPeriodicMessage?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    SampleApp_SendPeriodicMessage

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??zb_ReadConfiguration?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    zb_ReadConfiguration

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??zb_WriteConfiguration?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    zb_WriteConfiguration

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??SampleApp_GetShortAddr?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    SampleApp_GetShortAddr

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??SampleApp_GetExtendAddr?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    SampleApp_GetExtendAddr

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??hextoword1?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    hextoword1

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??hextoword2?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    hextoword2

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??wordtohex?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    wordtohex

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??APP_NORMAL_COMMAND?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    APP_NORMAL_COMMAND

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??zb_StartRequest?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    zb_StartRequest

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??APP_DEAL_WITH_ASSOCIATED?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    APP_DEAL_WITH_ASSOCIATED

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??SampleApp_ProcessNwkaddrMessage?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    SampleApp_ProcessNwkaddrMessage

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??RemoveStaleNode?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    RemoveStaleNode

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??RemoveStaleRouter?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    RemoveStaleRouter

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??SampleApp_ROUTER_ProcessPeriodicMessage_Data?:
        LCALL   ?BDISPATCH
        DATA
        DC24    SampleApp_ROUTER_ProcessPeriodicMessage_Data

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??APP_OS_DEAL_WITH?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    APP_OS_DEAL_WITH

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??APP_ENDDEVICE_ACK?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    APP_ENDDEVICE_ACK

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??sampleAPP_sendRS_periodMessage?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    sampleAPP_sendRS_periodMessage

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??Change_Net_Set?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    Change_Net_Set

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant {1, 2, 3}>`:
        DB 1
        DB 2
        DB 3

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_318c800:
        DD 51955712

        END
// 
// 11 157 bytes in segment BANKED_CODE
//    174 bytes in segment BANK_RELAYS
//      2 bytes in segment SFR_AN
//     17 bytes in segment XDATA_I
//     17 bytes in segment XDATA_ID
//      7 bytes in segment XDATA_ROM_C
//     70 bytes in segment XDATA_Z
// 
// 11 348 bytes of CODE  memory
//      3 bytes of CONST memory (+ 4 bytes shared)
//      0 bytes of DATA  memory (+ 2 bytes shared)
//     87 bytes of XDATA memory
//
//Errors: none
//Warnings: none
