###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.1.10194/W32 for 8051         17/Dec/2014  18:09:19 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Components\sta #
#                          ck\sys\ZGlobals.c                                  #
#    Command line       =  -f "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\z #
#                          stack\Samples\SampleApp\CC2530DB\..\..\..\Tools\CC #
#                          2530DB\f8wEndev.cfg" (-DCPU32MHZ                   #
#                          -DROOT=__near_func -DMAC_CFG_TX_DATA_MAX=3         #
#                          -DMAC_CFG_TX_MAX=6 -DMAC_CFG_RX_MAX=3) -f          #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\Tools\CC253 #
#                          0DB\f8wConfig.cfg" (-DZIGBEEPRO -DSECURE=1         #
#                          -DZG_SECURE_DYNAMIC=0 -DREFLECTOR                  #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=60            #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=30           #
#                          -DNWK_MAX_BINDING_ENTRIES=1                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 -DASSERT_RESET         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=8000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=1000)  #
#                          -DREJOIN_POLL_RATE=440 "D:\RE_1_2_0_FORMAL_APP(251 #
#                          )-14-12-8\Components\stack\sys\ZGlobals.c" -D      #
#                          NV_INIT -D NV_RESTORE -D HOLD_AUTO_START -D        #
#                          MT_TASK -D xMT_APP_FUNC -D MT_SYS_FUNC -D          #
#                          MT_ZDO_FUNC -D xMT_ZDO_MGMT -D ISR_KEYINTERRUPT    #
#                          -D POWER_SAVING -D LONG_POLL_TIMES -D xSR_PIR -D   #
#                          CR2_DATA_NODETECT -D xHAVE_TEST_FUN -D             #
#                          RESUME_TIME_TEST -D FLOOD_SENSOR_device -lC        #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\FLOOD_SENSOR_ED_devi #
#                          ce\List\" -lA "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8 #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\FLOOD_ #
#                          SENSOR_ED_device\List\" --diag_suppress            #
#                          Pe001,Pa010 -o "D:\RE_1_2_0_FORMAL_APP(251)-14-12- #
#                          8\Projects\zstack\Samples\SampleApp\CC2530DB\FLOOD #
#                          _SENSOR_ED_device\Obj\" -e --no_cse --no_unroll    #
#                          --no_inline --no_code_motion --no_tbaa --debug     #
#                          --core=plain --dptr=16,1 --data_model=large        #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I "D:\RE_1_2_0_FORMAL_APP(25 #
#                          1)-14-12-8\Projects\zstack\Samples\SampleApp\CC253 #
#                          0DB\" -I "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\Source\" #
#                           -I "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\ #
#                          zstack\Samples\SampleApp\CC2530DB\..\Source\FLOOD_ #
#                          SENSOR_device\" -I "D:\RE_1_2_0_FORMAL_APP(251)-14 #
#                          -12-8\Projects\zstack\Samples\SampleApp\CC2530DB\. #
#                          .\..\..\ZMain\TI2530DB\" -I                        #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\hal\include\" -I "D:\RE_1_2_0_FORMAL_APP(251 #
#                          )-14-12-8\Projects\zstack\Samples\SampleApp\CC2530 #
#                          DB\..\..\..\..\..\Components\hal\target\CC2530EB\" #
#                           -I "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\ #
#                          zstack\Samples\SampleApp\CC2530DB\..\..\..\..\..\C #
#                          omponents\mac\include\" -I                         #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\mac\high_level\" -I                          #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\mac\low_level\srf04\" -I                     #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\mac\low_level\srf04\single_chip\" -I         #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\mt\" -I "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8 #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\osal\include\" -I              #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\services\saddr\" -I                          #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\services\sdata\" -I                          #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\stack\af\" -I "D:\RE_1_2_0_FORMAL_APP(251)-1 #
#                          4-12-8\Projects\zstack\Samples\SampleApp\CC2530DB\ #
#                          ..\..\..\..\..\Components\stack\nwk\" -I           #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\stack\sapi\" -I "D:\RE_1_2_0_FORMAL_APP(251) #
#                          -14-12-8\Projects\zstack\Samples\SampleApp\CC2530D #
#                          B\..\..\..\..\..\Components\stack\sec\" -I         #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\stack\sys\" -I "D:\RE_1_2_0_FORMAL_APP(251)- #
#                          14-12-8\Projects\zstack\Samples\SampleApp\CC2530DB #
#                          \..\..\..\..\..\Components\stack\zdo\" -I          #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\zmac\" -I "D:\RE_1_2_0_FORMAL_APP(251)-14-12 #
#                          -8\Projects\zstack\Samples\SampleApp\CC2530DB\..\. #
#                          .\..\..\..\Components\zmac\f8w\" -On               #
#                          --require_prototypes                               #
#    List file          =  D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zstac #
#                          k\Samples\SampleApp\CC2530DB\FLOOD_SENSOR_ED_devic #
#                          e\List\ZGlobals.lst                                #
#    Object file        =  D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zstac #
#                          k\Samples\SampleApp\CC2530DB\FLOOD_SENSOR_ED_devic #
#                          e\Obj\ZGlobals.r51                                 #
#                                                                             #
#                                                                             #
###############################################################################

D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Components\stack\sys\ZGlobals.c
      1          /**************************************************************************************************
      2            Filename:       ZGlobals.c
      3            Revised:        $Date: 2012-04-02 17:02:19 -0700 (Mon, 02 Apr 2012) $
      4            Revision:       $Revision: 29996 $
      5          
      6            Description:    User definable Z-Stack parameters.
      7          
      8          
      9            Copyright 2007-2011 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product. Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED “AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          
     40          /*********************************************************************
     41           * INCLUDES
     42           */
     43          
     44          #include "ZComDef.h"
     45          #include "OSAL_Nv.h"
     46          #include "ZDObject.h"
     47          #include "ZGlobals.h"
     48          #include "ZDNwkMgr.h"
     49          #include "OnBoard.h"
     50          #include "ZDSecMgr.h"
     51          #include "nwk_globals.h"
     52          /*********************************************************************
     53           * MACROS
     54           */
     55          
     56          /*********************************************************************
     57           * CONSTANTS
     58           */
     59          
     60          /*********************************************************************
     61           * TYPEDEFS
     62           */
     63          
     64          typedef struct zgItem
     65          {
     66            uint16 id;
     67            uint16 len;
     68            void *buf;
     69          } zgItem_t;
     70          
     71          
     72          
     73          /*********************************************************************
     74           * NWK GLOBAL VARIABLES
     75           */
     76          
     77          // Polling values

   \                                 In  segment XDATA_I, align 1, keep-with-next
     78          uint16 zgPollRate = POLL_RATE;
   \                     zgPollRate:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for zgPollRate>`
   \   000002                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
     79          uint16 zgQueuedPollRate = QUEUED_POLL_RATE;
   \                     zgQueuedPollRate:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for zgQueuedPollRate>`
   \   000002                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
     80          uint16 zgResponsePollRate = RESPONSE_POLL_RATE;
   \                     zgResponsePollRate:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for zgResponsePollRate>`
   \   000002                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
     81          uint16 zgRejoinPollRate = REJOIN_POLL_RATE;
   \                     zgRejoinPollRate:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for zgRejoinPollRate>`
   \   000002                REQUIRE __INIT_XDATA_I
     82          
     83          // Transmission retries numbers

   \                                 In  segment XDATA_I, align 1, keep-with-next
     84          uint8 zgMaxDataRetries = NWK_MAX_DATA_RETRIES;
   \                     zgMaxDataRetries:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgMaxDataRetries>`
   \   000001                REQUIRE __INIT_XDATA_I
     85          
     86          #if defined(LONG_POLL_TIMES)

   \                                 In  segment XDATA_I, align 1, keep-with-next
     87          uint8 zgMaxPollFailureRetries = 10;
   \                     zgMaxPollFailureRetries:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgMaxPollFailureRetries>`
   \   000001                REQUIRE __INIT_XDATA_I
     88          #else
     89          uint8 zgMaxPollFailureRetries = MAX_POLL_FAILURE_RETRIES;
     90          #endif
     91          // Default channel list

   \                                 In  segment XDATA_I, align 1, keep-with-next
     92          uint32 zgDefaultChannelList = 0x0318C800; //DEFAULT_CHANLIST;
   \                     zgDefaultChannelList:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for zgDefaultChannelList>`
   \   000004                REQUIRE __INIT_XDATA_I
     93          
     94          // Default starting scan duration

   \                                 In  segment XDATA_I, align 1, keep-with-next
     95          uint8 zgDefaultStartingScanDuration = STARTING_SCAN_DURATION;
   \                     zgDefaultStartingScanDuration:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgDefaultStartingScanDuratio`
   \   000001                REQUIRE __INIT_XDATA_I
     96          
     97          // Stack profile Id

   \                                 In  segment XDATA_I, align 1, keep-with-next
     98          uint8 zgStackProfile = STACK_PROFILE_ID;
   \                     zgStackProfile:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgStackProfile>`
   \   000001                REQUIRE __INIT_XDATA_I
     99          
    100          // Default indirect message holding timeout

   \                                 In  segment XDATA_I, align 1, keep-with-next
    101          uint8 zgIndirectMsgTimeout = NWK_INDIRECT_MSG_TIMEOUT;
   \                     zgIndirectMsgTimeout:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgIndirectMsgTimeout>`
   \   000001                REQUIRE __INIT_XDATA_I
    102          
    103          // Security mode

   \                                 In  segment XDATA_I, align 1, keep-with-next
    104          uint8 zgSecurityMode = ZG_SECURITY_MODE;
   \                     zgSecurityMode:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgSecurityMode>`
   \   000001                REQUIRE __INIT_XDATA_I
    105          
    106          // Secure permit join

   \                                 In  segment XDATA_I, align 1, keep-with-next
    107          uint8 zgSecurePermitJoin = true;
   \                     zgSecurePermitJoin:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgSecurePermitJoin>`
   \   000001                REQUIRE __INIT_XDATA_I
    108          
    109          // Trust center address

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    110          uint16 zgTrustCenterAddr = ZG_TRUSTCENTER_ADDR;
   \                     zgTrustCenterAddr:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    111          
    112          // Route Discovery Time - amount of time that a route request lasts

   \                                 In  segment XDATA_I, align 1, keep-with-next
    113          uint8 zgRouteDiscoveryTime = ROUTE_DISCOVERY_TIME;
   \                     zgRouteDiscoveryTime:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgRouteDiscoveryTime>`
   \   000001                REQUIRE __INIT_XDATA_I
    114          
    115          // Route expiry

   \                                 In  segment XDATA_I, align 1, keep-with-next
    116          uint8 zgRouteExpiryTime = ROUTE_EXPIRY_TIME;
   \                     zgRouteExpiryTime:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgRouteExpiryTime>`
   \   000001                REQUIRE __INIT_XDATA_I
    117          
    118          // Extended PAN Id

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    119          uint8 zgExtendedPANID[Z_EXTADDR_LEN];
   \                     zgExtendedPANID:
   \   000000                DS 8
   \   000008                REQUIRE __INIT_XDATA_Z
    120          
    121          // Broadcast parameters

   \                                 In  segment XDATA_I, align 1, keep-with-next
    122          uint8 zgMaxBcastRetires   = MAX_BCAST_RETRIES;
   \                     zgMaxBcastRetires:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgMaxBcastRetires>`
   \   000001                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
    123          uint8 zgPassiveAckTimeout = PASSIVE_ACK_TIMEOUT;
   \                     zgPassiveAckTimeout:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgPassiveAckTimeout>`
   \   000001                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
    124          uint8 zgBcastDeliveryTime = BCAST_DELIVERY_TIME;
   \                     zgBcastDeliveryTime:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgBcastDeliveryTime>`
   \   000001                REQUIRE __INIT_XDATA_I
    125          
    126          // Network mode

   \                                 In  segment XDATA_I, align 1, keep-with-next
    127          uint8 zgNwkMode = NWK_MODE;
   \                     zgNwkMode:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgNwkMode>`
   \   000001                REQUIRE __INIT_XDATA_I
    128          
    129          // Many-to-one values

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    130          uint8 zgConcentratorEnable = CONCENTRATOR_ENABLE;
   \                     zgConcentratorEnable:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    131          uint8 zgConcentratorDiscoveryTime = CONCENTRATOR_DISCOVERY_TIME;
   \                     zgConcentratorDiscoveryTime:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_I, align 1, keep-with-next
    132          uint8 zgConcentratorRadius = CONCENTRATOR_RADIUS;
   \                     zgConcentratorRadius:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgConcentratorRadius>`
   \   000001                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    133          uint8 zgConcentratorRC = CONCENTRATOR_ROUTE_CACHE;   // concentrator with route cache (no memory constraints)
   \                     zgConcentratorRC:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_I, align 1, keep-with-next
    134          uint8 zgNwkSrcRtgExpiryTime = SRC_RTG_EXPIRY_TIME;
   \                     zgNwkSrcRtgExpiryTime:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgNwkSrcRtgExpiryTime>`
   \   000001                REQUIRE __INIT_XDATA_I
    135          
    136          // Cleanup Child Table according to routing traffic

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    137          uint8 zgRouterOffAssocCleanup = FALSE;//FALSE;//; TRUE//2012 4 24
   \                     zgRouterOffAssocCleanup:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    138          
    139          /*********************************************************************
    140           * APS GLOBAL VARIABLES
    141           */
    142          
    143          // The maximum number of retries allowed after a transmission failure

   \                                 In  segment XDATA_I, align 1, keep-with-next
    144          uint8 zgApscMaxFrameRetries = APSC_MAX_FRAME_RETRIES;
   \                     zgApscMaxFrameRetries:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgApscMaxFrameRetries>`
   \   000001                REQUIRE __INIT_XDATA_I
    145          
    146          // The maximum number of seconds (milliseconds) to wait for an
    147          // acknowledgement to a transmitted frame.
    148          
    149          // This number is used by polled devices.

   \                                 In  segment XDATA_I, align 1, keep-with-next
    150          uint16 zgApscAckWaitDurationPolled = APSC_ACK_WAIT_DURATION_POLLED;
   \                     zgApscAckWaitDurationPolled:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for zgApscAckWaitDurationPolled>`
   \   000002                REQUIRE __INIT_XDATA_I
    151          
    152          // This number is used by non-polled devices in the following formula:
    153          //   (100 mSec) * (_NIB.MaxDepth * zgApsAckWaitMultiplier)

   \                                 In  segment XDATA_I, align 1, keep-with-next
    154          uint8 zgApsAckWaitMultiplier = 2;
   \                     zgApsAckWaitMultiplier:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgApsAckWaitMultiplier>`
   \   000001                REQUIRE __INIT_XDATA_I
    155          
    156          // The maximum number of milliseconds for the end device binding

   \                                 In  segment XDATA_I, align 1, keep-with-next
    157          uint16 zgApsDefaultMaxBindingTime = APS_DEFAULT_MAXBINDING_TIME;
   \                     zgApsDefaultMaxBindingTime:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for zgApsDefaultMaxBindingTime>`
   \   000002                REQUIRE __INIT_XDATA_I
    158          
    159          // The 64-big identifier of the network to join or form.
    160          // Default set to all zeros

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    161          uint8 zgApsUseExtendedPANID[Z_EXTADDR_LEN] = {00,00,00,00,00,00,00,00};
   \                     zgApsUseExtendedPANID:
   \   000000                DS 8
   \   000008                REQUIRE __INIT_XDATA_Z
    162          
    163          // A boolean flag that indicates whether it is OK to use insecure join
    164          // on startup. Default set to true

   \                                 In  segment XDATA_I, align 1, keep-with-next
    165          uint8 zgApsUseInsecureJoin = TRUE;
   \                     zgApsUseInsecureJoin:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgApsUseInsecureJoin>`
   \   000001                REQUIRE __INIT_XDATA_I
    166          
    167          // The radius of broadcast multicast transmissions

   \                                 In  segment XDATA_I, align 1, keep-with-next
    168          uint8 zgApsNonMemberRadius = APS_DEFAULT_NONMEMBER_RADIUS;
   \                     zgApsNonMemberRadius:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgApsNonMemberRadius>`
   \   000001                REQUIRE __INIT_XDATA_I
    169          
    170          /*********************************************************************
    171           * SECURITY GLOBAL VARIABLES
    172           */
    173          
    174          // If true, preConfigKey should be configured on all devices on the network
    175          // If false, it is configured only on the coordinator and sent to other
    176          // devices upon joining.

   \                                 In  segment XDATA_I, align 1, keep-with-next
    177          uint8 zgPreConfigKeys = TRUE;// false;TRUE
   \                     zgPreConfigKeys:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgPreConfigKeys>`
   \   000001                REQUIRE __INIT_XDATA_I
    178          
    179          // If true, defaultTCLinkKey should be configured on all devices on the
    180          // network. If false, individual trust center link key between each device and
    181          // the trust center should be manually configured via MT_WRITE_NV

   \                                 In  segment XDATA_I, align 1, keep-with-next
    182          uint8 zgUseDefaultTCLK = TRUE; // FALSE
   \                     zgUseDefaultTCLK:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgUseDefaultTCLK>`
   \   000001                REQUIRE __INIT_XDATA_I
    183          
    184          /*********************************************************************
    185           * ZDO GLOBAL VARIABLES
    186           */
    187          
    188          // Configured PAN ID

   \                                 In  segment XDATA_I, align 1, keep-with-next
    189          uint16 zgConfigPANID = ZDAPP_CONFIG_PAN_ID;
   \                     zgConfigPANID:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for zgConfigPANID>`
   \   000002                REQUIRE __INIT_XDATA_I
    190          
    191          // Device Logical Type

   \                                 In  segment XDATA_I, align 1, keep-with-next
    192          uint8 zgDeviceLogicalType = DEVICE_LOGICAL_TYPE;
   \                     zgDeviceLogicalType:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgDeviceLogicalType>`
   \   000001                REQUIRE __INIT_XDATA_I
    193          
    194          // Startup Delay

   \                                 In  segment XDATA_I, align 1, keep-with-next
    195          uint8 zgStartDelay = START_DELAY;
   \                     zgStartDelay:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgStartDelay>`
   \   000001                REQUIRE __INIT_XDATA_I
    196          
    197          #if !defined MT_TASK
    198          // Flag to use verbose (i.e. "cc2480-style") direct MT callbacks in ZDProfile.c, ZDP_IncomingData().
    199          uint8 zgZdoDirectCB = FALSE;
    200          #endif
    201          
    202          // Min number of attempted transmissions for Channel Interference detection

   \                                 In  segment XDATA_I, align 1, keep-with-next
    203          uint8 zgNwkMgrMinTransmissions = ZDNWKMGR_MIN_TRANSMISSIONS;
   \                     zgNwkMgrMinTransmissions:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgNwkMgrMinTransmissions>`
   \   000001                REQUIRE __INIT_XDATA_I
    204          
    205          /*********************************************************************
    206           * APPLICATION GLOBAL VARIABLES
    207           */
    208          
    209          // Network Manager Mode

   \                                 In  segment XDATA_I, align 1, keep-with-next
    210          uint8 zgNwkMgrMode = ZDNWKMGR_ENABLE;
   \                     zgNwkMgrMode:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgNwkMgrMode>`
   \   000001                REQUIRE __INIT_XDATA_I
    211          
    212          /*********************************************************************
    213           * NON-STANDARD GLOBAL VARIABLES
    214           */
    215          
    216          // Simple API Endpoint

   \                                 In  segment XDATA_I, align 1, keep-with-next
    217          uint8 zgSapiEndpoint = SAPI_ENDPOINT;
   \                     zgSapiEndpoint:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgSapiEndpoint>`
   \   000001                REQUIRE __INIT_XDATA_I
    218          
    219          /*********************************************************************
    220           * LOCAL VARIABLES
    221           */
    222          
    223          /*********************************************************************
    224           * ZGlobal Item Table
    225           */

   \                                 In  segment CODE_C, align 1
    226          static CONST zgItem_t zgItemTable[] =
   \                     zgItemTable:
   \   000000   8700         DW 135
   \   000002   0100         DW 1
   \   000004   ....         DW zgDeviceLogicalType
   \   000006   2400         DW 36
   \   000008   0200         DW 2
   \   00000A   ....         DW zgPollRate
   \   00000C   2500         DW 37
   \   00000E   0200         DW 2
   \   000010   ....         DW zgQueuedPollRate
   \   000012   2600         DW 38
   \   000014   0200         DW 2
   \   000016   ....         DW zgResponsePollRate
   \   000018   2700         DW 39
   \   00001A   0200         DW 2
   \   00001C   ....         DW zgRejoinPollRate
   \   00001E   2800         DW 40
   \   000020   0100         DW 1
   \   000022   ....         DW zgMaxDataRetries
   \   000024   2900         DW 41
   \   000026   0100         DW 1
   \   000028   ....         DW zgMaxPollFailureRetries
   \   00002A   8400         DW 132
   \   00002C   0400         DW 4
   \   00002E   ....         DW zgDefaultChannelList
   \   000030   8600         DW 134
   \   000032   0100         DW 1
   \   000034   ....         DW zgDefaultStartingScanDuration
   \   000036   2A00         DW 42
   \   000038   0100         DW 1
   \   00003A   ....         DW zgStackProfile
   \   00003C   2B00         DW 43
   \   00003E   0100         DW 1
   \   000040   ....         DW zgIndirectMsgTimeout
   \   000042   2C00         DW 44
   \   000044   0100         DW 1
   \   000046   ....         DW zgRouteExpiryTime
   \   000048   2D00         DW 45
   \   00004A   0800         DW 8
   \   00004C   ....         DW zgExtendedPANID
   \   00004E   2E00         DW 46
   \   000050   0100         DW 1
   \   000052   ....         DW zgMaxBcastRetires
   \   000054   2F00         DW 47
   \   000056   0100         DW 1
   \   000058   ....         DW zgPassiveAckTimeout
   \   00005A   3000         DW 48
   \   00005C   0100         DW 1
   \   00005E   ....         DW zgBcastDeliveryTime
   \   000060   3100         DW 49
   \   000062   0100         DW 1
   \   000064   ....         DW zgNwkMode
   \   000066   3200         DW 50
   \   000068   0100         DW 1
   \   00006A   ....         DW zgConcentratorEnable
   \   00006C   3300         DW 51
   \   00006E   0100         DW 1
   \   000070   ....         DW zgConcentratorDiscoveryTime
   \   000072   3400         DW 52
   \   000074   0100         DW 1
   \   000076   ....         DW zgConcentratorRadius
   \   000078   3600         DW 54
   \   00007A   0100         DW 1
   \   00007C   ....         DW zgConcentratorRC
   \   00007E   3800         DW 56
   \   000080   0100         DW 1
   \   000082   ....         DW zgNwkSrcRtgExpiryTime
   \   000084   3900         DW 57
   \   000086   0100         DW 1
   \   000088   ....         DW zgRouteDiscoveryTime
   \   00008A   8300         DW 131
   \   00008C   0200         DW 2
   \   00008E   ....         DW zgConfigPANID
   \   000090   6300         DW 99
   \   000092   0100         DW 1
   \   000094   ....         DW zgPreConfigKeys
   \   000096   6400         DW 100
   \   000098   0100         DW 1
   \   00009A   ....         DW zgSecurityMode
   \   00009C   6500         DW 101
   \   00009E   0100         DW 1
   \   0000A0   ....         DW zgSecurePermitJoin
   \   0000A2   6D00         DW 109
   \   0000A4   0100         DW 1
   \   0000A6   ....         DW zgUseDefaultTCLK
   \   0000A8   6E00         DW 110
   \   0000AA   0200         DW 2
   \   0000AC   ....         DW zgTrustCenterAddr
   \   0000AE   4300         DW 67
   \   0000B0   0100         DW 1
   \   0000B2   ....         DW zgApscMaxFrameRetries
   \   0000B4   4400         DW 68
   \   0000B6   0200         DW 2
   \   0000B8   ....         DW zgApscAckWaitDurationPolled
   \   0000BA   4500         DW 69
   \   0000BC   0100         DW 1
   \   0000BE   ....         DW zgApsAckWaitMultiplier
   \   0000C0   4600         DW 70
   \   0000C2   0200         DW 2
   \   0000C4   ....         DW zgApsDefaultMaxBindingTime
   \   0000C6   4700         DW 71
   \   0000C8   0800         DW 8
   \   0000CA   ....         DW zgApsUseExtendedPANID
   \   0000CC   4800         DW 72
   \   0000CE   0100         DW 1
   \   0000D0   ....         DW zgApsUseInsecureJoin
   \   0000D2   4B00         DW 75
   \   0000D4   0100         DW 1
   \   0000D6   ....         DW zgApsNonMemberRadius
   \   0000D8   0400         DW 4
   \   0000DA   0100         DW 1
   \   0000DC   ....         DW zgStartDelay
   \   0000DE   A100         DW 161
   \   0000E0   0100         DW 1
   \   0000E2   ....         DW zgSapiEndpoint
   \   0000E4   3700         DW 55
   \   0000E6   0100         DW 1
   \   0000E8   ....         DW zgNwkMgrMode
   \   0000EA   8800         DW 136
   \   0000EC   0100         DW 1
   \   0000EE   ....         DW zgNwkMgrMinTransmissions
   \   0000F0   3C00         DW 60
   \   0000F2   0100         DW 1
   \   0000F4   ....         DW zgRouterOffAssocCleanup
   \   0000F6   0000         DW 0
   \   0000F8   0000         DW 0
   \   0000FA   0000         DW 0H
    227          {
    228          #if defined ( NV_INIT )
    229          #if !defined MT_TASK
    230            {
    231              ZCD_NV_ZDO_DIRECT_CB, sizeof(zgZdoDirectCB), &zgZdoDirectCB
    232            },
    233          #endif
    234            {
    235              ZCD_NV_LOGICAL_TYPE, sizeof(zgDeviceLogicalType), &zgDeviceLogicalType
    236            },
    237            {
    238              ZCD_NV_POLL_RATE, sizeof(zgPollRate), &zgPollRate
    239            },
    240            {
    241              ZCD_NV_QUEUED_POLL_RATE, sizeof(zgQueuedPollRate), &zgQueuedPollRate
    242            },
    243            {
    244              ZCD_NV_RESPONSE_POLL_RATE, sizeof(zgResponsePollRate), &zgResponsePollRate
    245            },
    246            {
    247              ZCD_NV_REJOIN_POLL_RATE, sizeof(zgRejoinPollRate), &zgRejoinPollRate
    248            },
    249            {
    250              ZCD_NV_DATA_RETRIES, sizeof(zgMaxDataRetries), &zgMaxDataRetries
    251            },
    252            {
    253              ZCD_NV_POLL_FAILURE_RETRIES, sizeof(zgMaxPollFailureRetries), &zgMaxPollFailureRetries
    254            },
    255            {
    256              ZCD_NV_CHANLIST, sizeof(zgDefaultChannelList), &zgDefaultChannelList
    257            },
    258            {
    259              ZCD_NV_SCAN_DURATION, sizeof(zgDefaultStartingScanDuration), &zgDefaultStartingScanDuration
    260            },
    261            {
    262              ZCD_NV_STACK_PROFILE, sizeof(zgStackProfile), &zgStackProfile
    263            },
    264            {
    265              ZCD_NV_INDIRECT_MSG_TIMEOUT, sizeof(zgIndirectMsgTimeout), &zgIndirectMsgTimeout
    266            },
    267            {
    268              ZCD_NV_ROUTE_EXPIRY_TIME, sizeof(zgRouteExpiryTime), &zgRouteExpiryTime
    269            },
    270            {
    271              ZCD_NV_EXTENDED_PAN_ID, Z_EXTADDR_LEN, zgExtendedPANID
    272            },
    273            {
    274              ZCD_NV_BCAST_RETRIES, sizeof(zgMaxBcastRetires), &zgMaxBcastRetires
    275            },
    276            {
    277              ZCD_NV_PASSIVE_ACK_TIMEOUT, sizeof(zgPassiveAckTimeout), &zgPassiveAckTimeout
    278            },
    279            {
    280              ZCD_NV_BCAST_DELIVERY_TIME, sizeof(zgBcastDeliveryTime), &zgBcastDeliveryTime
    281            },
    282            {
    283              ZCD_NV_NWK_MODE, sizeof(zgNwkMode), &zgNwkMode
    284            },
    285            {
    286              ZCD_NV_CONCENTRATOR_ENABLE, sizeof(zgConcentratorEnable), &zgConcentratorEnable
    287            },
    288            {
    289              ZCD_NV_CONCENTRATOR_DISCOVERY, sizeof(zgConcentratorDiscoveryTime), &zgConcentratorDiscoveryTime
    290            },
    291            {
    292              ZCD_NV_CONCENTRATOR_RADIUS, sizeof(zgConcentratorRadius), &zgConcentratorRadius
    293            },
    294            {
    295              ZCD_NV_CONCENTRATOR_RC, sizeof(zgConcentratorRC), &zgConcentratorRC
    296            },
    297            {
    298              ZCD_NV_SRC_RTG_EXPIRY_TIME, sizeof(zgNwkSrcRtgExpiryTime), &zgNwkSrcRtgExpiryTime
    299            },
    300            {
    301              ZCD_NV_ROUTE_DISCOVERY_TIME, sizeof(zgRouteDiscoveryTime), &zgRouteDiscoveryTime
    302            },
    303          #ifndef NONWK
    304            {
    305              ZCD_NV_PANID, sizeof(zgConfigPANID), &zgConfigPANID
    306            },
    307            {
    308              ZCD_NV_PRECFGKEYS_ENABLE, sizeof(zgPreConfigKeys), &zgPreConfigKeys
    309            },
    310            {
    311              ZCD_NV_SECURITY_MODE, sizeof(zgSecurityMode), &zgSecurityMode
    312            },
    313            {
    314              ZCD_NV_SECURE_PERMIT_JOIN, sizeof(zgSecurePermitJoin), &zgSecurePermitJoin
    315            },
    316            {
    317              ZCD_NV_USE_DEFAULT_TCLK, sizeof(zgUseDefaultTCLK), &zgUseDefaultTCLK
    318            },
    319            {
    320              ZCD_NV_TRUSTCENTER_ADDR, sizeof(zgTrustCenterAddr), &zgTrustCenterAddr
    321            },
    322          #endif // NONWK
    323            {
    324              ZCD_NV_APS_FRAME_RETRIES, sizeof(zgApscMaxFrameRetries), &zgApscMaxFrameRetries
    325            },
    326            {
    327              ZCD_NV_APS_ACK_WAIT_DURATION, sizeof(zgApscAckWaitDurationPolled), &zgApscAckWaitDurationPolled
    328            },
    329            {
    330              ZCD_NV_APS_ACK_WAIT_MULTIPLIER, sizeof(zgApsAckWaitMultiplier), &zgApsAckWaitMultiplier
    331            },
    332            {
    333              ZCD_NV_BINDING_TIME, sizeof(zgApsDefaultMaxBindingTime), &zgApsDefaultMaxBindingTime
    334            },
    335            {
    336              ZCD_NV_APS_USE_EXT_PANID, Z_EXTADDR_LEN, zgApsUseExtendedPANID
    337            },
    338            {
    339              ZCD_NV_APS_USE_INSECURE_JOIN, sizeof(zgApsUseInsecureJoin), &zgApsUseInsecureJoin
    340            },
    341            {
    342              ZCD_NV_APS_NONMEMBER_RADIUS, sizeof(zgApsNonMemberRadius), &zgApsNonMemberRadius
    343            },
    344            {
    345              ZCD_NV_START_DELAY, sizeof(zgStartDelay), &zgStartDelay
    346            },
    347            {
    348              ZCD_NV_SAPI_ENDPOINT, sizeof(zgSapiEndpoint), &zgSapiEndpoint
    349            },
    350            {
    351              ZCD_NV_NWK_MGR_MODE, sizeof(zgNwkMgrMode), &zgNwkMgrMode
    352            },
    353            {
    354              ZCD_NV_NWKMGR_MIN_TX, sizeof(zgNwkMgrMinTransmissions), &zgNwkMgrMinTransmissions
    355            },
    356            {
    357              ZCD_NV_ROUTER_OFF_ASSOC_CLEANUP, sizeof(zgRouterOffAssocCleanup), &zgRouterOffAssocCleanup
    358            },
    359          #endif // NV_INIT
    360            // Last item -- DO NOT MOVE IT!
    361            {
    362              0x00, 0, NULL
    363            }
    364          };
    365          
    366          /*********************************************************************
    367           * LOCAL FUNCTIONS
    368           */
    369          
    370          static uint8 zgItemInit( uint16 id, uint16 len, void *buf, uint8 setDefault );
    371          
    372          #ifndef NONWK
    373          static uint8 zgPreconfigKeyInit( uint8 setDefault );
    374          #endif
    375          
    376          /*********************************************************************
    377           * @fn       zgItemInit()
    378           *
    379           * @brief
    380           *
    381           *   Initialize a global item. If the item doesn't exist in NV memory,
    382           *   write the system default (value passed in) into NV memory. But if
    383           *   it exists, set the item to the value stored in NV memory.
    384           *
    385           *   Also, if setDefault is TRUE and the item exists, we will write
    386           *   the default value to NV space.
    387           *
    388           * @param   id - item id
    389           * @param   len - item len
    390           * @param   buf - pointer to the item
    391           * @param   setDefault - TRUE to set default, not read
    392           *
    393           * @return  ZSUCCESS if successful, NV_ITEM_UNINIT if item did not
    394           *          exist in NV, NV_OPER_FAILED if failure.
    395           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    396          static uint8 zgItemInit( uint16 id, uint16 len, void *buf, uint8 setDefault )
   \                     zgItemInit:
    397          {
   \   000000   74F2         MOV     A,#-0xe
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
   \   000009   8C..         MOV     ?V0 + 2,R4
   \   00000B   8D..         MOV     ?V0 + 3,R5
   \   00000D   89..         MOV     ?V0 + 5,R1
   \   00000F   740E         MOV     A,#0xe
   \   000011   12....       LCALL   ?XSTACK_DISP0_8
   \   000014   E0           MOVX    A,@DPTR
   \   000015   F5..         MOV     ?V0 + 0,A
   \   000017   A3           INC     DPTR
   \   000018   E0           MOVX    A,@DPTR
   \   000019   F5..         MOV     ?V0 + 1,A
    398            uint8 status;
    399          
    400            // If the item doesn't exist in NV memory, create and initialize
    401            // it with the value passed in.
    402            status = osal_nv_item_init( id, len, buf );
   \   00001B                ; Setup parameters for call to function osal_nv_item_init
   \   00001B   78..         MOV     R0,#?V0 + 0
   \   00001D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000020   AC..         MOV     R4,?V0 + 2
   \   000022   AD..         MOV     R5,?V0 + 3
   \   000024   EE           MOV     A,R6
   \   000025   FA           MOV     R2,A
   \   000026   EF           MOV     A,R7
   \   000027   FB           MOV     R3,A
   \   000028   12....       LCALL   ??osal_nv_item_init?relay
   \   00002B   7402         MOV     A,#0x2
   \   00002D   12....       LCALL   ?DEALLOC_XSTACK8
   \   000030   E9           MOV     A,R1
   \   000031   F5..         MOV     ?V0 + 4,A
    403            if ( status == ZSUCCESS )
   \   000033   E5..         MOV     A,?V0 + 4
   \   000035   7040         JNZ     ??zgItemInit_0
    404            {
    405              if ( setDefault )
   \   000037   E5..         MOV     A,?V0 + 5
   \   000039   601F         JZ      ??zgItemInit_1
    406              {
    407                // Write the default value back to NV
    408                status = osal_nv_write( id, 0, len, buf );
   \   00003B                ; Setup parameters for call to function osal_nv_write
   \   00003B   78..         MOV     R0,#?V0 + 0
   \   00003D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000040   78..         MOV     R0,#?V0 + 2
   \   000042   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000045   7C00         MOV     R4,#0x0
   \   000047   7D00         MOV     R5,#0x0
   \   000049   EE           MOV     A,R6
   \   00004A   FA           MOV     R2,A
   \   00004B   EF           MOV     A,R7
   \   00004C   FB           MOV     R3,A
   \   00004D   12....       LCALL   ??osal_nv_write?relay
   \   000050   7404         MOV     A,#0x4
   \   000052   12....       LCALL   ?DEALLOC_XSTACK8
   \   000055   E9           MOV     A,R1
   \   000056   F5..         MOV     ?V0 + 4,A
   \   000058   801D         SJMP    ??zgItemInit_0
    409              }
    410              else
    411              {
    412                // The item exists in NV memory, read it from NV memory
    413                status = osal_nv_read( id, 0, len, buf );
   \                     ??zgItemInit_1:
   \   00005A                ; Setup parameters for call to function osal_nv_read
   \   00005A   78..         MOV     R0,#?V0 + 0
   \   00005C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00005F   78..         MOV     R0,#?V0 + 2
   \   000061   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000064   7C00         MOV     R4,#0x0
   \   000066   7D00         MOV     R5,#0x0
   \   000068   EE           MOV     A,R6
   \   000069   FA           MOV     R2,A
   \   00006A   EF           MOV     A,R7
   \   00006B   FB           MOV     R3,A
   \   00006C   12....       LCALL   ??osal_nv_read?relay
   \   00006F   7404         MOV     A,#0x4
   \   000071   12....       LCALL   ?DEALLOC_XSTACK8
   \   000074   E9           MOV     A,R1
   \   000075   F5..         MOV     ?V0 + 4,A
    414              }
    415            }
    416          
    417            return (status);
   \                     ??zgItemInit_0:
   \   000077   A9..         MOV     R1,?V0 + 4
   \   000079   7F06         MOV     R7,#0x6
   \   00007B   02....       LJMP    ?BANKED_LEAVE_XDATA
    418          }
    419          
    420          /*********************************************************************
    421           * API FUNCTIONS
    422           */
    423          
    424          /*********************************************************************
    425           * @fn          zgInit
    426           *
    427           * @brief
    428           *
    429           *   Initialize the Z-Stack Globals. If an item doesn't exist in
    430           *   NV memory, write the system default into NV memory. But if
    431           *   it exists, set the item to the value stored in NV memory.
    432           *
    433           * NOTE: The Startup Options (ZCD_NV_STARTUP_OPTION) indicate
    434           *       that the Config state items (zgItemTable) need to be
    435           *       set to defaults (ZCD_STARTOPT_DEFAULT_CONFIG_STATE). The
    436           *
    437           * @param       none
    438           *
    439           * @return      ZSUCCESS if successful, NV_ITEM_UNINIT if item did not
    440           *              exist in NV, NV_OPER_FAILED if failure.
    441           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    442          uint8 zgInit( void )
   \                     zgInit:
    443          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
    444            uint8  setDefault = FALSE;
   \   000005   7E00         MOV     R6,#0x0
    445          
    446            // Do we want to default the Config state values
    447            if ( zgReadStartupOptions() & ZCD_STARTOPT_DEFAULT_CONFIG_STATE )
   \   000007                ; Setup parameters for call to function zgReadStartupOptions
   \   000007   12....       LCALL   ??zgReadStartupOptions?relay
   \   00000A   E9           MOV     A,R1
   \   00000B   F8           MOV     R0,A
   \   00000C   A2E0         MOV     C,0xE0 /* A   */.0
   \   00000E   5002         JNC     ??zgInit_0
    448            {
    449              setDefault = TRUE;
   \   000010   7E01         MOV     R6,#0x1
    450            }
    451          
    452          #if 0
    453            // Enable this section if you need to track the number of resets
    454            // This section is normally disabled to minimize "wear" on NV memory
    455            uint16 bootCnt = 0;
    456          
    457            // Update the Boot Counter
    458            if ( osal_nv_item_init( ZCD_NV_BOOTCOUNTER, sizeof(bootCnt), &bootCnt ) == ZSUCCESS )
    459            {
    460              // Get the old value from NV memory
    461              osal_nv_read( ZCD_NV_BOOTCOUNTER, 0, sizeof(bootCnt), &bootCnt );
    462            }
    463          
    464            // Increment the Boot Counter and store it into NV memory
    465            if ( setDefault )
    466              bootCnt = 0;
    467            else
    468              bootCnt++;
    469            osal_nv_write( ZCD_NV_BOOTCOUNTER, 0, sizeof(bootCnt), &bootCnt );
    470          #endif
    471          
    472            // Initialize the Extended PAN ID as my own extended address
    473            ZMacGetReq( ZMacExtAddr, zgExtendedPANID );
   \                     ??zgInit_0:
   \   000012                ; Setup parameters for call to function ZMacGetReq
   \   000012   7A..         MOV     R2,#zgExtendedPANID & 0xff
   \   000014   7B..         MOV     R3,#(zgExtendedPANID >> 8) & 0xff
   \   000016   79E2         MOV     R1,#-0x1e
   \   000018   12....       LCALL   ??ZMacGetReq?relay
   \   00001B   E9           MOV     A,R1
    474          
    475            // Initialize the items table
    476            zgInitItems( setDefault );
   \   00001C                ; Setup parameters for call to function zgInitItems
   \   00001C   EE           MOV     A,R6
   \   00001D   F9           MOV     R1,A
   \   00001E   12....       LCALL   ??zgInitItems?relay
    477          
    478          #ifndef NONWK
    479            if ( ZG_SECURE_ENABLED )
    480            {
    481              // Initialize the Pre-Configured Key to the default key
    482              zgPreconfigKeyInit( setDefault );
   \   000021                ; Setup parameters for call to function zgPreconfigKeyInit
   \   000021   EE           MOV     A,R6
   \   000022   F9           MOV     R1,A
   \   000023   12....       LCALL   ??zgPreconfigKeyInit?relay
   \   000026   E9           MOV     A,R1
    483          
    484              // Initialize NV items for all Keys: NWK, APS, TCLK and Master
    485              ZDSecMgrInitNVKeyTables( setDefault );
   \   000027                ; Setup parameters for call to function ZDSecMgrInitNVKeyTables
   \   000027   EE           MOV     A,R6
   \   000028   F9           MOV     R1,A
   \   000029   12....       LCALL   ??ZDSecMgrInitNVKeyTables?relay
    486            }
    487          #endif // NONWK
    488          
    489            // Clear the Config State default
    490            if ( setDefault )
   \   00002C   EE           MOV     A,R6
   \   00002D   6008         JZ      ??zgInit_1
    491            {
    492              zgWriteStartupOptions( ZG_STARTUP_CLEAR, ZCD_STARTOPT_DEFAULT_CONFIG_STATE );
   \   00002F                ; Setup parameters for call to function zgWriteStartupOptions
   \   00002F   7A01         MOV     R2,#0x1
   \   000031   7900         MOV     R1,#0x0
   \   000033   12....       LCALL   ??zgWriteStartupOptions?relay
   \   000036   E9           MOV     A,R1
    493            }
    494          
    495            return ( ZSUCCESS );
   \                     ??zgInit_1:
   \   000037   7900         MOV     R1,#0x0
   \   000039   7F01         MOV     R7,#0x1
   \   00003B   02....       LJMP    ?BANKED_LEAVE_XDATA
    496          }
    497          
    498          /*********************************************************************
    499           * @fn          zgInitItems
    500           *
    501           * @brief       Initializes RAM variables from NV.  If NV items don't
    502           *              exist, then the NV is initialize with what is in RAM
    503           *              variables.
    504           *
    505           * @param       none
    506           *
    507           * @return      none
    508           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    509          void zgInitItems( uint8 setDefault )
   \                     zgInitItems:
    510          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FF           MOV     R7,A
    511            uint8  i = 0;
   \   000007   7E00         MOV     R6,#0x0
    512          
    513            while ( zgItemTable[i].id != 0x00 )
   \                     ??zgInitItems_0:
   \   000009   EE           MOV     A,R6
   \   00000A   F8           MOV     R0,A
   \   00000B   7900         MOV     R1,#0x0
   \   00000D   E8           MOV     A,R0
   \   00000E   75F006       MOV     B,#0x6
   \   000011   A4           MUL     AB
   \   000012   C8           XCH     A,R0
   \   000013   AAF0         MOV     R2,B
   \   000015   75F000       MOV     B,#0x0
   \   000018   A4           MUL     AB
   \   000019   2A           ADD     A,R2
   \   00001A   FA           MOV     R2,A
   \   00001B   75F006       MOV     B,#0x6
   \   00001E   E9           MOV     A,R1
   \   00001F   A4           MUL     AB
   \   000020   2A           ADD     A,R2
   \   000021   F9           MOV     R1,A
   \   000022   74..         MOV     A,#zgItemTable & 0xff
   \   000024   28           ADD     A,R0
   \   000025   F582         MOV     DPL,A
   \   000027   74..         MOV     A,#(zgItemTable >> 8) & 0xff
   \   000029   39           ADDC    A,R1
   \   00002A   F583         MOV     DPH,A
   \   00002C   E4           CLR     A
   \   00002D   93           MOVC    A,@A+DPTR
   \   00002E   F8           MOV     R0,A
   \   00002F   7401         MOV     A,#0x1
   \   000031   93           MOVC    A,@A+DPTR
   \   000032   F9           MOV     R1,A
   \   000033   E8           MOV     A,R0
   \   000034   49           ORL     A,R1
   \   000035   7003         JNZ     $+5
   \   000037   02....       LJMP    ??zgInitItems_1 & 0xFFFF
    514            {
    515              // Initialize the item
    516              zgItemInit( zgItemTable[i].id, zgItemTable[i].len, zgItemTable[i].buf, setDefault  );
   \   00003A                ; Setup parameters for call to function zgItemInit
   \   00003A   EE           MOV     A,R6
   \   00003B   F8           MOV     R0,A
   \   00003C   7900         MOV     R1,#0x0
   \   00003E   E8           MOV     A,R0
   \   00003F   75F006       MOV     B,#0x6
   \   000042   A4           MUL     AB
   \   000043   C8           XCH     A,R0
   \   000044   AAF0         MOV     R2,B
   \   000046   75F000       MOV     B,#0x0
   \   000049   A4           MUL     AB
   \   00004A   2A           ADD     A,R2
   \   00004B   FA           MOV     R2,A
   \   00004C   75F006       MOV     B,#0x6
   \   00004F   E9           MOV     A,R1
   \   000050   A4           MUL     AB
   \   000051   2A           ADD     A,R2
   \   000052   F9           MOV     R1,A
   \   000053   74..         MOV     A,#(zgItemTable + 4) & 0xff
   \   000055   28           ADD     A,R0
   \   000056   F582         MOV     DPL,A
   \   000058   74..         MOV     A,#((zgItemTable + 4) >> 8) & 0xff
   \   00005A   39           ADDC    A,R1
   \   00005B   F583         MOV     DPH,A
   \   00005D   12....       LCALL   ?PUSH_XSTACK8_C_TWO
   \   000060   EF           MOV     A,R7
   \   000061   F9           MOV     R1,A
   \   000062   EE           MOV     A,R6
   \   000063   FA           MOV     R2,A
   \   000064   7B00         MOV     R3,#0x0
   \   000066   EA           MOV     A,R2
   \   000067   75F006       MOV     B,#0x6
   \   00006A   A4           MUL     AB
   \   00006B   CA           XCH     A,R2
   \   00006C   A8F0         MOV     R0,B
   \   00006E   75F000       MOV     B,#0x0
   \   000071   A4           MUL     AB
   \   000072   28           ADD     A,R0
   \   000073   F8           MOV     R0,A
   \   000074   75F006       MOV     B,#0x6
   \   000077   EB           MOV     A,R3
   \   000078   A4           MUL     AB
   \   000079   28           ADD     A,R0
   \   00007A   FB           MOV     R3,A
   \   00007B   74..         MOV     A,#(zgItemTable + 2) & 0xff
   \   00007D   2A           ADD     A,R2
   \   00007E   F582         MOV     DPL,A
   \   000080   74..         MOV     A,#((zgItemTable + 2) >> 8) & 0xff
   \   000082   3B           ADDC    A,R3
   \   000083   F583         MOV     DPH,A
   \   000085   E4           CLR     A
   \   000086   93           MOVC    A,@A+DPTR
   \   000087   FC           MOV     R4,A
   \   000088   7401         MOV     A,#0x1
   \   00008A   93           MOVC    A,@A+DPTR
   \   00008B   FD           MOV     R5,A
   \   00008C   EE           MOV     A,R6
   \   00008D   FA           MOV     R2,A
   \   00008E   7B00         MOV     R3,#0x0
   \   000090   EA           MOV     A,R2
   \   000091   75F006       MOV     B,#0x6
   \   000094   A4           MUL     AB
   \   000095   CA           XCH     A,R2
   \   000096   A8F0         MOV     R0,B
   \   000098   75F000       MOV     B,#0x0
   \   00009B   A4           MUL     AB
   \   00009C   28           ADD     A,R0
   \   00009D   F8           MOV     R0,A
   \   00009E   75F006       MOV     B,#0x6
   \   0000A1   EB           MOV     A,R3
   \   0000A2   A4           MUL     AB
   \   0000A3   28           ADD     A,R0
   \   0000A4   FB           MOV     R3,A
   \   0000A5   74..         MOV     A,#zgItemTable & 0xff
   \   0000A7   2A           ADD     A,R2
   \   0000A8   F582         MOV     DPL,A
   \   0000AA   74..         MOV     A,#(zgItemTable >> 8) & 0xff
   \   0000AC   3B           ADDC    A,R3
   \   0000AD   F583         MOV     DPH,A
   \   0000AF   E4           CLR     A
   \   0000B0   93           MOVC    A,@A+DPTR
   \   0000B1   FA           MOV     R2,A
   \   0000B2   7401         MOV     A,#0x1
   \   0000B4   93           MOVC    A,@A+DPTR
   \   0000B5   FB           MOV     R3,A
   \   0000B6   12....       LCALL   ??zgItemInit?relay
   \   0000B9   7402         MOV     A,#0x2
   \   0000BB   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000BE   E9           MOV     A,R1
    517          
    518              // Move on to the next item
    519              i++;
   \   0000BF   0E           INC     R6
   \   0000C0   02....       LJMP    ??zgInitItems_0 & 0xFFFF
    520            }
    521          }
   \                     ??zgInitItems_1:
   \   0000C3   7F01         MOV     R7,#0x1
   \   0000C5   02....       LJMP    ?BANKED_LEAVE_XDATA
    522          
    523          /*********************************************************************
    524           * @fn          zgReadStartupOptions
    525           *
    526           * @brief       Reads the ZCD_NV_STARTUP_OPTION NV Item.
    527           *
    528           * @param       none
    529           *
    530           * @return      the ZCD_NV_STARTUP_OPTION NV item
    531           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    532          uint8 zgReadStartupOptions( void )
   \                     zgReadStartupOptions:
    533          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    534            // Default to Use Config State and Use Network State
    535            uint8 startupOption = 0;
   \   00000A   85..82       MOV     DPL,?XSP + 0
   \   00000D   85..83       MOV     DPH,?XSP + 1
   \   000010   7400         MOV     A,#0x0
   \   000012   F0           MOVX    @DPTR,A
    536          
    537            // This should have been done in ZMain.c, but just in case.
    538            if ( osal_nv_item_init( ZCD_NV_STARTUP_OPTION,
    539                                        sizeof(startupOption),
    540                                        &startupOption ) == ZSUCCESS )
   \   000013                ; Setup parameters for call to function osal_nv_item_init
   \   000013   85..82       MOV     DPL,?XSP + 0
   \   000016   85..83       MOV     DPH,?XSP + 1
   \   000019   8582..       MOV     ?V0 + 0,DPL
   \   00001C   8583..       MOV     ?V0 + 1,DPH
   \   00001F   78..         MOV     R0,#?V0 + 0
   \   000021   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000024   7C01         MOV     R4,#0x1
   \   000026   7D00         MOV     R5,#0x0
   \   000028   7A03         MOV     R2,#0x3
   \   00002A   7B00         MOV     R3,#0x0
   \   00002C   12....       LCALL   ??osal_nv_item_init?relay
   \   00002F   7402         MOV     A,#0x2
   \   000031   12....       LCALL   ?DEALLOC_XSTACK8
   \   000034   E9           MOV     A,R1
   \   000035   702D         JNZ     ??zgReadStartupOptions_0
    541            {
    542              // Read saved startup control
    543              osal_nv_read( ZCD_NV_STARTUP_OPTION,
    544                            0,
    545                            sizeof( startupOption ),
    546                            &startupOption);
   \   000037                ; Setup parameters for call to function osal_nv_read
   \   000037   85..82       MOV     DPL,?XSP + 0
   \   00003A   85..83       MOV     DPH,?XSP + 1
   \   00003D   8582..       MOV     ?V0 + 0,DPL
   \   000040   8583..       MOV     ?V0 + 1,DPH
   \   000043   78..         MOV     R0,#?V0 + 0
   \   000045   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000048   75..01       MOV     ?V0 + 0,#0x1
   \   00004B   75..00       MOV     ?V0 + 1,#0x0
   \   00004E   78..         MOV     R0,#?V0 + 0
   \   000050   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000053   7C00         MOV     R4,#0x0
   \   000055   7D00         MOV     R5,#0x0
   \   000057   7A03         MOV     R2,#0x3
   \   000059   7B00         MOV     R3,#0x0
   \   00005B   12....       LCALL   ??osal_nv_read?relay
   \   00005E   7404         MOV     A,#0x4
   \   000060   12....       LCALL   ?DEALLOC_XSTACK8
   \   000063   E9           MOV     A,R1
    547            }
    548            return ( startupOption );
   \                     ??zgReadStartupOptions_0:
   \   000064   85..82       MOV     DPL,?XSP + 0
   \   000067   85..83       MOV     DPH,?XSP + 1
   \   00006A   E0           MOVX    A,@DPTR
   \   00006B   F9           MOV     R1,A
   \   00006C   7401         MOV     A,#0x1
   \   00006E   12....       LCALL   ?DEALLOC_XSTACK8
   \   000071   7F02         MOV     R7,#0x2
   \   000073   02....       LJMP    ?BANKED_LEAVE_XDATA
    549          }
    550          
    551          /*********************************************************************
    552           * @fn          zgWriteStartupOptions
    553           *
    554           * @brief       Writes bits into the ZCD_NV_STARTUP_OPTION NV Item.
    555           *
    556           * @param       action - ZG_STARTUP_SET set bit, ZG_STARTUP_CLEAR to
    557           *               clear bit. The set bit is an OR operation, and the
    558           *               clear bit is an AND ~(bitOptions) operation.
    559           *
    560           * @param       bitOptions - which bits to perform action on:
    561           *                      ZCD_STARTOPT_DEFAULT_CONFIG_STATE
    562           *                      ZCD_STARTOPT_DEFAULT_NETWORK_STATE
    563           *
    564           * @return      ZSUCCESS if successful
    565           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    566          uint8 zgWriteStartupOptions( uint8 action, uint8 bitOptions )
   \                     zgWriteStartupOptions:
    567          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   E9           MOV     A,R1
   \   00000B   FF           MOV     R7,A
   \   00000C   8A..         MOV     ?V0 + 2,R2
    568            uint8 status;
    569            uint8 startupOptions = 0;
   \   00000E   85..82       MOV     DPL,?XSP + 0
   \   000011   85..83       MOV     DPH,?XSP + 1
   \   000014   7400         MOV     A,#0x0
   \   000016   F0           MOVX    @DPTR,A
    570          
    571            status = osal_nv_read( ZCD_NV_STARTUP_OPTION,
    572                          0,
    573                          sizeof( startupOptions ),
    574                          &startupOptions );
   \   000017                ; Setup parameters for call to function osal_nv_read
   \   000017   85..82       MOV     DPL,?XSP + 0
   \   00001A   85..83       MOV     DPH,?XSP + 1
   \   00001D   8582..       MOV     ?V0 + 0,DPL
   \   000020   8583..       MOV     ?V0 + 1,DPH
   \   000023   78..         MOV     R0,#?V0 + 0
   \   000025   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000028   75..01       MOV     ?V0 + 0,#0x1
   \   00002B   75..00       MOV     ?V0 + 1,#0x0
   \   00002E   78..         MOV     R0,#?V0 + 0
   \   000030   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000033   7C00         MOV     R4,#0x0
   \   000035   7D00         MOV     R5,#0x0
   \   000037   7A03         MOV     R2,#0x3
   \   000039   7B00         MOV     R3,#0x0
   \   00003B   12....       LCALL   ??osal_nv_read?relay
   \   00003E   7404         MOV     A,#0x4
   \   000040   12....       LCALL   ?DEALLOC_XSTACK8
   \   000043   E9           MOV     A,R1
   \   000044   FE           MOV     R6,A
    575          
    576            if ( status == ZSUCCESS )
   \   000045   EE           MOV     A,R6
   \   000046   704D         JNZ     ??zgWriteStartupOptions_0
    577            {
    578              if ( action == ZG_STARTUP_SET )
   \   000048   74FF         MOV     A,#-0x1
   \   00004A   6F           XRL     A,R7
   \   00004B   700C         JNZ     ??zgWriteStartupOptions_1
    579              {
    580                // Set bits
    581                startupOptions |= bitOptions;
   \   00004D   85..82       MOV     DPL,?XSP + 0
   \   000050   85..83       MOV     DPH,?XSP + 1
   \   000053   E0           MOVX    A,@DPTR
   \   000054   45..         ORL     A,?V0 + 2
   \   000056   F0           MOVX    @DPTR,A
   \   000057   800E         SJMP    ??zgWriteStartupOptions_2
    582              }
    583              else
    584              {
    585                // Clear bits
    586                startupOptions &= (bitOptions ^ 0xFF);
   \                     ??zgWriteStartupOptions_1:
   \   000059   74FF         MOV     A,#-0x1
   \   00005B   65..         XRL     A,?V0 + 2
   \   00005D   F8           MOV     R0,A
   \   00005E   85..82       MOV     DPL,?XSP + 0
   \   000061   85..83       MOV     DPH,?XSP + 1
   \   000064   E0           MOVX    A,@DPTR
   \   000065   58           ANL     A,R0
   \   000066   F0           MOVX    @DPTR,A
    587              }
    588          
    589              // Changed?
    590              status = osal_nv_write( ZCD_NV_STARTUP_OPTION,
    591                           0,
    592                           sizeof( startupOptions ),
    593                           &startupOptions );
   \                     ??zgWriteStartupOptions_2:
   \   000067                ; Setup parameters for call to function osal_nv_write
   \   000067   85..82       MOV     DPL,?XSP + 0
   \   00006A   85..83       MOV     DPH,?XSP + 1
   \   00006D   8582..       MOV     ?V0 + 0,DPL
   \   000070   8583..       MOV     ?V0 + 1,DPH
   \   000073   78..         MOV     R0,#?V0 + 0
   \   000075   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000078   75..01       MOV     ?V0 + 0,#0x1
   \   00007B   75..00       MOV     ?V0 + 1,#0x0
   \   00007E   78..         MOV     R0,#?V0 + 0
   \   000080   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000083   7C00         MOV     R4,#0x0
   \   000085   7D00         MOV     R5,#0x0
   \   000087   7A03         MOV     R2,#0x3
   \   000089   7B00         MOV     R3,#0x0
   \   00008B   12....       LCALL   ??osal_nv_write?relay
   \   00008E   7404         MOV     A,#0x4
   \   000090   12....       LCALL   ?DEALLOC_XSTACK8
   \   000093   E9           MOV     A,R1
   \   000094   FE           MOV     R6,A
    594            }
    595          
    596            return ( status );
   \                     ??zgWriteStartupOptions_0:
   \   000095   EE           MOV     A,R6
   \   000096   F9           MOV     R1,A
   \   000097   7401         MOV     A,#0x1
   \   000099   12....       LCALL   ?DEALLOC_XSTACK8
   \   00009C   7F03         MOV     R7,#0x3
   \   00009E   02....       LJMP    ?BANKED_LEAVE_XDATA
    597          }
    598          
    599          /*********************************************************************
    600           * @fn          zgSetItem
    601           *
    602           * @brief       Set RAM variables from set-NV, if it exist in the zgItemTable
    603           *
    604           * @param       id - NV ID
    605           *              len - NV item length
    606           *              buf - pointer to the input buffer
    607           *
    608           * @return      none
    609           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    610          void zgSetItem( uint16 id, uint16 len, void *buf )
   \                     zgSetItem:
    611          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 0
   \   000005   8A..         MOV     ?V0 + 2,R2
   \   000007   8B..         MOV     ?V0 + 3,R3
   \   000009   EC           MOV     A,R4
   \   00000A   FE           MOV     R6,A
   \   00000B   ED           MOV     A,R5
   \   00000C   FF           MOV     R7,A
   \   00000D   7410         MOV     A,#0x10
   \   00000F   12....       LCALL   ?XSTACK_DISP0_8
   \   000012   E0           MOVX    A,@DPTR
   \   000013   F5..         MOV     ?V0 + 0,A
   \   000015   A3           INC     DPTR
   \   000016   E0           MOVX    A,@DPTR
   \   000017   F5..         MOV     ?V0 + 1,A
    612          
    613            uint8  i = 0;
   \   000019   75..00       MOV     ?V0 + 7,#0x0
    614          
    615            // Look up the NV item table
    616            while ( zgItemTable[i].id != 0x00 )
   \                     ??zgSetItem_0:
   \   00001C   E5..         MOV     A,?V0 + 7
   \   00001E   A8..         MOV     R0,?V0 + 7
   \   000020   7900         MOV     R1,#0x0
   \   000022   E8           MOV     A,R0
   \   000023   75F006       MOV     B,#0x6
   \   000026   A4           MUL     AB
   \   000027   C8           XCH     A,R0
   \   000028   AAF0         MOV     R2,B
   \   00002A   75F000       MOV     B,#0x0
   \   00002D   A4           MUL     AB
   \   00002E   2A           ADD     A,R2
   \   00002F   FA           MOV     R2,A
   \   000030   75F006       MOV     B,#0x6
   \   000033   E9           MOV     A,R1
   \   000034   A4           MUL     AB
   \   000035   2A           ADD     A,R2
   \   000036   F9           MOV     R1,A
   \   000037   74..         MOV     A,#zgItemTable & 0xff
   \   000039   28           ADD     A,R0
   \   00003A   F582         MOV     DPL,A
   \   00003C   74..         MOV     A,#(zgItemTable >> 8) & 0xff
   \   00003E   39           ADDC    A,R1
   \   00003F   F583         MOV     DPH,A
   \   000041   E4           CLR     A
   \   000042   93           MOVC    A,@A+DPTR
   \   000043   F8           MOV     R0,A
   \   000044   7401         MOV     A,#0x1
   \   000046   93           MOVC    A,@A+DPTR
   \   000047   F9           MOV     R1,A
   \   000048   E8           MOV     A,R0
   \   000049   49           ORL     A,R1
   \   00004A   7003         JNZ     $+5
   \   00004C   02....       LJMP    ??zgSetItem_1 & 0xFFFF
    617            {
    618              if( zgItemTable[i].id == id )
   \   00004F   E5..         MOV     A,?V0 + 7
   \   000051   A8..         MOV     R0,?V0 + 7
   \   000053   7900         MOV     R1,#0x0
   \   000055   E8           MOV     A,R0
   \   000056   75F006       MOV     B,#0x6
   \   000059   A4           MUL     AB
   \   00005A   C8           XCH     A,R0
   \   00005B   AAF0         MOV     R2,B
   \   00005D   75F000       MOV     B,#0x0
   \   000060   A4           MUL     AB
   \   000061   2A           ADD     A,R2
   \   000062   FA           MOV     R2,A
   \   000063   75F006       MOV     B,#0x6
   \   000066   E9           MOV     A,R1
   \   000067   A4           MUL     AB
   \   000068   2A           ADD     A,R2
   \   000069   F9           MOV     R1,A
   \   00006A   74..         MOV     A,#zgItemTable & 0xff
   \   00006C   28           ADD     A,R0
   \   00006D   F582         MOV     DPL,A
   \   00006F   74..         MOV     A,#(zgItemTable >> 8) & 0xff
   \   000071   39           ADDC    A,R1
   \   000072   F583         MOV     DPH,A
   \   000074   E4           CLR     A
   \   000075   93           MOVC    A,@A+DPTR
   \   000076   F8           MOV     R0,A
   \   000077   7401         MOV     A,#0x1
   \   000079   93           MOVC    A,@A+DPTR
   \   00007A   F9           MOV     R1,A
   \   00007B   E5..         MOV     A,?V0 + 2
   \   00007D   68           XRL     A,R0
   \   00007E   7003         JNZ     ??zgSetItem_2
   \   000080   E5..         MOV     A,?V0 + 3
   \   000082   69           XRL     A,R1
   \                     ??zgSetItem_2:
   \   000083   707C         JNZ     ??zgSetItem_3
    619              {
    620                if ( zgItemTable[i].len == len )
   \   000085   E5..         MOV     A,?V0 + 7
   \   000087   A8..         MOV     R0,?V0 + 7
   \   000089   7900         MOV     R1,#0x0
   \   00008B   E8           MOV     A,R0
   \   00008C   75F006       MOV     B,#0x6
   \   00008F   A4           MUL     AB
   \   000090   C8           XCH     A,R0
   \   000091   AAF0         MOV     R2,B
   \   000093   75F000       MOV     B,#0x0
   \   000096   A4           MUL     AB
   \   000097   2A           ADD     A,R2
   \   000098   FA           MOV     R2,A
   \   000099   75F006       MOV     B,#0x6
   \   00009C   E9           MOV     A,R1
   \   00009D   A4           MUL     AB
   \   00009E   2A           ADD     A,R2
   \   00009F   F9           MOV     R1,A
   \   0000A0   74..         MOV     A,#(zgItemTable + 2) & 0xff
   \   0000A2   28           ADD     A,R0
   \   0000A3   F582         MOV     DPL,A
   \   0000A5   74..         MOV     A,#((zgItemTable + 2) >> 8) & 0xff
   \   0000A7   39           ADDC    A,R1
   \   0000A8   F583         MOV     DPH,A
   \   0000AA   E4           CLR     A
   \   0000AB   93           MOVC    A,@A+DPTR
   \   0000AC   F8           MOV     R0,A
   \   0000AD   7401         MOV     A,#0x1
   \   0000AF   93           MOVC    A,@A+DPTR
   \   0000B0   F9           MOV     R1,A
   \   0000B1   EE           MOV     A,R6
   \   0000B2   68           XRL     A,R0
   \   0000B3   7002         JNZ     ??zgSetItem_4
   \   0000B5   EF           MOV     A,R7
   \   0000B6   69           XRL     A,R1
   \                     ??zgSetItem_4:
   \   0000B7   704D         JNZ     ??zgSetItem_1
    621                {
    622                  osal_memcpy( zgItemTable[i].buf, buf, len );
   \   0000B9                ; Setup parameters for call to function osal_memcpy
   \   0000B9   85....       MOV     ?V0 + 4,?V0 + 0
   \   0000BC   85....       MOV     ?V0 + 5,?V0 + 1
   \   0000BF   75..00       MOV     ?V0 + 6,#0x0
   \   0000C2   78..         MOV     R0,#?V0 + 4
   \   0000C4   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000C7   EE           MOV     A,R6
   \   0000C8   FC           MOV     R4,A
   \   0000C9   EF           MOV     A,R7
   \   0000CA   FD           MOV     R5,A
   \   0000CB   E5..         MOV     A,?V0 + 7
   \   0000CD   A8..         MOV     R0,?V0 + 7
   \   0000CF   7900         MOV     R1,#0x0
   \   0000D1   E8           MOV     A,R0
   \   0000D2   75F006       MOV     B,#0x6
   \   0000D5   A4           MUL     AB
   \   0000D6   C8           XCH     A,R0
   \   0000D7   AAF0         MOV     R2,B
   \   0000D9   75F000       MOV     B,#0x0
   \   0000DC   A4           MUL     AB
   \   0000DD   2A           ADD     A,R2
   \   0000DE   FA           MOV     R2,A
   \   0000DF   75F006       MOV     B,#0x6
   \   0000E2   E9           MOV     A,R1
   \   0000E3   A4           MUL     AB
   \   0000E4   2A           ADD     A,R2
   \   0000E5   F9           MOV     R1,A
   \   0000E6   74..         MOV     A,#(zgItemTable + 4) & 0xff
   \   0000E8   28           ADD     A,R0
   \   0000E9   F582         MOV     DPL,A
   \   0000EB   74..         MOV     A,#((zgItemTable + 4) >> 8) & 0xff
   \   0000ED   39           ADDC    A,R1
   \   0000EE   F583         MOV     DPH,A
   \   0000F0   E4           CLR     A
   \   0000F1   93           MOVC    A,@A+DPTR
   \   0000F2   FA           MOV     R2,A
   \   0000F3   7401         MOV     A,#0x1
   \   0000F5   93           MOVC    A,@A+DPTR
   \   0000F6   FB           MOV     R3,A
   \   0000F7   12....       LCALL   ??osal_memcpy?relay
   \   0000FA   7403         MOV     A,#0x3
   \   0000FC   12....       LCALL   ?DEALLOC_XSTACK8
    623                }
    624                break;
   \   0000FF   8005         SJMP    ??zgSetItem_1
    625              }
    626              // Move on to the next item
    627              i++;
   \                     ??zgSetItem_3:
   \   000101   05..         INC     ?V0 + 7
   \   000103   02....       LJMP    ??zgSetItem_0 & 0xFFFF
    628            }
    629          }
   \                     ??zgSetItem_1:
   \   000106   7F08         MOV     R7,#0x8
   \   000108   02....       LJMP    ?BANKED_LEAVE_XDATA
    630          
    631          #ifndef NONWK
    632          /*********************************************************************
    633           * @fn       zgPreconfigKeyInit()
    634           *
    635           * @brief
    636           *
    637           *   Initialize ZCD_NV_PRECFGKEY NV item. If the item doesn't exist in NV memory,
    638           *   write the system default (value passed in) into NV memory. But if
    639           *   it exists do not overwrite it.
    640           *
    641           *   Also, if setDefault is TRUE and the item exists, we will write
    642           *   the default value to NV space.
    643           *
    644           * @param   setDefault - TRUE to set default
    645           *
    646           * @return  ZSUCCESS if successful, NV_ITEM_UNINIT if item did not
    647           *          exist in NV, NV_OPER_FAILED if failure.
    648           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    649          static uint8 zgPreconfigKeyInit( uint8 setDefault )
   \                     zgPreconfigKeyInit:
    650          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 16
   \   000005   74F0         MOV     A,#-0x10
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   E9           MOV     A,R1
   \   00000B   FF           MOV     R7,A
    651            uint8 zgPreConfigKey[SEC_KEY_LEN];
    652            uint8 status;
    653          
    654            // Initialize the Pre-Configured Key to the default key
    655            osal_memcpy( zgPreConfigKey, defaultKey, SEC_KEY_LEN );
   \   00000C                ; Setup parameters for call to function osal_memcpy
   \   00000C   75....       MOV     ?V0 + 0,#defaultKey & 0xff
   \   00000F   75....       MOV     ?V0 + 1,#(defaultKey >> 8) & 0xff
   \   000012   75..00       MOV     ?V0 + 2,#0x0
   \   000015   78..         MOV     R0,#?V0 + 0
   \   000017   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00001A   7C10         MOV     R4,#0x10
   \   00001C   7D00         MOV     R5,#0x0
   \   00001E   7403         MOV     A,#0x3
   \   000020   12....       LCALL   ?XSTACK_DISP0_8
   \   000023   AA82         MOV     R2,DPL
   \   000025   AB83         MOV     R3,DPH
   \   000027   12....       LCALL   ??osal_memcpy?relay
   \   00002A   7403         MOV     A,#0x3
   \   00002C   12....       LCALL   ?DEALLOC_XSTACK8
    656          
    657            // If the item doesn't exist in NV memory, create and initialize it
    658            status = osal_nv_item_init( ZCD_NV_PRECFGKEY, SEC_KEY_LEN, zgPreConfigKey );
   \   00002F                ; Setup parameters for call to function osal_nv_item_init
   \   00002F   85..82       MOV     DPL,?XSP + 0
   \   000032   85..83       MOV     DPH,?XSP + 1
   \   000035   8582..       MOV     ?V0 + 0,DPL
   \   000038   8583..       MOV     ?V0 + 1,DPH
   \   00003B   78..         MOV     R0,#?V0 + 0
   \   00003D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000040   7C10         MOV     R4,#0x10
   \   000042   7D00         MOV     R5,#0x0
   \   000044   7A62         MOV     R2,#0x62
   \   000046   7B00         MOV     R3,#0x0
   \   000048   12....       LCALL   ??osal_nv_item_init?relay
   \   00004B   7402         MOV     A,#0x2
   \   00004D   12....       LCALL   ?DEALLOC_XSTACK8
   \   000050   E9           MOV     A,R1
   \   000051   FE           MOV     R6,A
    659            if ( status == ZSUCCESS )
   \   000052   EE           MOV     A,R6
   \   000053   7031         JNZ     ??zgPreconfigKeyInit_0
    660            {
    661              if ( setDefault )
   \   000055   EF           MOV     A,R7
   \   000056   602E         JZ      ??zgPreconfigKeyInit_0
    662              {
    663                // Write the default value back to NV
    664                status =  osal_nv_write( ZCD_NV_PRECFGKEY, 0, SEC_KEY_LEN, zgPreConfigKey );
   \   000058                ; Setup parameters for call to function osal_nv_write
   \   000058   85..82       MOV     DPL,?XSP + 0
   \   00005B   85..83       MOV     DPH,?XSP + 1
   \   00005E   8582..       MOV     ?V0 + 0,DPL
   \   000061   8583..       MOV     ?V0 + 1,DPH
   \   000064   78..         MOV     R0,#?V0 + 0
   \   000066   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000069   75..10       MOV     ?V0 + 0,#0x10
   \   00006C   75..00       MOV     ?V0 + 1,#0x0
   \   00006F   78..         MOV     R0,#?V0 + 0
   \   000071   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000074   7C00         MOV     R4,#0x0
   \   000076   7D00         MOV     R5,#0x0
   \   000078   7A62         MOV     R2,#0x62
   \   00007A   7B00         MOV     R3,#0x0
   \   00007C   12....       LCALL   ??osal_nv_write?relay
   \   00007F   7404         MOV     A,#0x4
   \   000081   12....       LCALL   ?DEALLOC_XSTACK8
   \   000084   E9           MOV     A,R1
   \   000085   FE           MOV     R6,A
    665              }
    666            }
    667          
    668            // clear local copy of default key
    669            osal_memset(zgPreConfigKey, 0x00, SEC_KEY_LEN);
   \                     ??zgPreconfigKeyInit_0:
   \   000086                ; Setup parameters for call to function osal_memset
   \   000086   7C10         MOV     R4,#0x10
   \   000088   7D00         MOV     R5,#0x0
   \   00008A   7900         MOV     R1,#0x0
   \   00008C   85..82       MOV     DPL,?XSP + 0
   \   00008F   85..83       MOV     DPH,?XSP + 1
   \   000092   AA82         MOV     R2,DPL
   \   000094   AB83         MOV     R3,DPH
   \   000096   12....       LCALL   ??osal_memset?relay
    670          
    671            return (status);
   \   000099   EE           MOV     A,R6
   \   00009A   F9           MOV     R1,A
   \   00009B   7410         MOV     A,#0x10
   \   00009D   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000A0   7F03         MOV     R7,#0x3
   \   0000A2   02....       LJMP    ?BANKED_LEAVE_XDATA
    672          }

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgPollRate>`:
   \   000000   401F         DW 8000

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgQueuedPollRate>`:
   \   000000   6400         DW 100

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgResponsePollRate>`:
   \   000000   E803         DW 1000

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgRejoinPollRate>`:
   \   000000   B801         DW 440

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgMaxDataRetries>`:
   \   000000   02           DB 2

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgMaxPollFailureRetries>`:
   \   000000   0A           DB 10

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgDefaultChannelList>`:
   \   000000   00C81803     DD 51955712

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgDefaultStartingScanDuratio`:
   \   000000   05           DB 5

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgStackProfile>`:
   \   000000   02           DB 2

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgIndirectMsgTimeout>`:
   \   000000   3C           DB 60

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgSecurityMode>`:
   \   000000   01           DB 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgSecurePermitJoin>`:
   \   000000   01           DB 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgRouteDiscoveryTime>`:
   \   000000   0D           DB 13

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgRouteExpiryTime>`:
   \   000000   1E           DB 30

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgMaxBcastRetires>`:
   \   000000   02           DB 2

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgPassiveAckTimeout>`:
   \   000000   05           DB 5

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgBcastDeliveryTime>`:
   \   000000   64           DB 100

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgNwkMode>`:
   \   000000   02           DB 2

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgConcentratorRadius>`:
   \   000000   0A           DB 10

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgNwkSrcRtgExpiryTime>`:
   \   000000   0A           DB 10

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgApscMaxFrameRetries>`:
   \   000000   03           DB 3

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgApscAckWaitDurationPolled>`:
   \   000000   B80B         DW 3000

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgApsAckWaitMultiplier>`:
   \   000000   02           DB 2

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgApsDefaultMaxBindingTime>`:
   \   000000   803E         DW 16000

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgApsUseInsecureJoin>`:
   \   000000   01           DB 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgApsNonMemberRadius>`:
   \   000000   02           DB 2

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgPreConfigKeys>`:
   \   000000   01           DB 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgUseDefaultTCLK>`:
   \   000000   01           DB 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgConfigPANID>`:
   \   000000   FFFF         DW 65535

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgDeviceLogicalType>`:
   \   000000   02           DB 2

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgStartDelay>`:
   \   000000   0A           DB 10

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgNwkMgrMinTransmissions>`:
   \   000000   14           DB 20

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgNwkMgrMode>`:
   \   000000   01           DB 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgSapiEndpoint>`:
   \   000000   E0           DB 224

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zgItemInit?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zgItemInit

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zgInit?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zgInit

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zgInitItems?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zgInitItems

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zgReadStartupOptions?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zgReadStartupOptions

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zgWriteStartupOptions?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zgWriteStartupOptions

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zgSetItem?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zgSetItem

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zgPreconfigKeyInit?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zgPreconfigKeyInit
    673          #endif
    674          
    675          /*********************************************************************
    676          *********************************************************************/

   Maximum stack usage in bytes:

     Function                     ISTACK PSTACK XSTACK
     --------                     ------ ------ ------
     zgInit                           0      0      9
       -> zgReadStartupOptions        0      0     18
       -> ZMacGetReq                  0      0     18
       -> zgInitItems                 0      0     18
       -> zgPreconfigKeyInit          0      0     18
       -> ZDSecMgrInitNVKeyTables     0      0     18
       -> zgWriteStartupOptions       0      0     18
     zgInitItems                      0      0     20
       -> zgItemInit                  0      0     22
     zgItemInit                       0      0     29
       -> osal_nv_item_init           0      0     32
       -> osal_nv_write               0      0     36
       -> osal_nv_read                0      0     36
     zgPreconfigKeyInit               0      0     40
       -> osal_memcpy                 0      0     60
       -> osal_nv_item_init           0      0     58
       -> osal_nv_write               0      0     62
       -> osal_memset                 0      0     54
     zgReadStartupOptions             0      0     24
       -> osal_nv_item_init           0      0     26
       -> osal_nv_read                0      0     30
     zgSetItem                        0      0     21
       -> osal_memcpy                 0      0     38
     zgWriteStartupOptions            0      0     25
       -> osal_nv_read                0      0     32
       -> osal_nv_write               0      0     32


   Segment part sizes:

     Function/Label                                 Bytes
     --------------                                 -----
     zgPollRate                                        2
     zgQueuedPollRate                                  2
     zgResponsePollRate                                2
     zgRejoinPollRate                                  2
     zgMaxDataRetries                                  1
     zgMaxPollFailureRetries                           1
     zgDefaultChannelList                              4
     zgDefaultStartingScanDuration                     1
     zgStackProfile                                    1
     zgIndirectMsgTimeout                              1
     zgSecurityMode                                    1
     zgSecurePermitJoin                                1
     zgTrustCenterAddr                                 2
     zgRouteDiscoveryTime                              1
     zgRouteExpiryTime                                 1
     zgExtendedPANID                                   8
     zgMaxBcastRetires                                 1
     zgPassiveAckTimeout                               1
     zgBcastDeliveryTime                               1
     zgNwkMode                                         1
     zgConcentratorEnable                              1
     zgConcentratorDiscoveryTime                       1
     zgConcentratorRadius                              1
     zgConcentratorRC                                  1
     zgNwkSrcRtgExpiryTime                             1
     zgRouterOffAssocCleanup                           1
     zgApscMaxFrameRetries                             1
     zgApscAckWaitDurationPolled                       2
     zgApsAckWaitMultiplier                            1
     zgApsDefaultMaxBindingTime                        2
     zgApsUseExtendedPANID                             8
     zgApsUseInsecureJoin                              1
     zgApsNonMemberRadius                              1
     zgPreConfigKeys                                   1
     zgUseDefaultTCLK                                  1
     zgConfigPANID                                     2
     zgDeviceLogicalType                               1
     zgStartDelay                                      1
     zgNwkMgrMinTransmissions                          1
     zgNwkMgrMode                                      1
     zgSapiEndpoint                                    1
     zgItemTable                                     252
     zgItemInit                                      126
     zgInit                                           62
     zgInitItems                                     200
     zgReadStartupOptions                            118
     zgWriteStartupOptions                           161
     zgSetItem                                       267
     zgPreconfigKeyInit                              165
     ?<Initializer for zgPollRate>                     2
     ?<Initializer for zgQueuedPollRate>               2
     ?<Initializer for zgResponsePollRate>             2
     ?<Initializer for zgRejoinPollRate>               2
     ?<Initializer for zgMaxDataRetries>               1
     ?<Initializer for zgMaxPollFailureRetries>        1
     ?<Initializer for zgDefaultChannelList>           4
     ?<Initializer for zgDefaultStartingScanDuratio    1
     ?<Initializer for zgStackProfile>                 1
     ?<Initializer for zgIndirectMsgTimeout>           1
     ?<Initializer for zgSecurityMode>                 1
     ?<Initializer for zgSecurePermitJoin>             1
     ?<Initializer for zgRouteDiscoveryTime>           1
     ?<Initializer for zgRouteExpiryTime>              1
     ?<Initializer for zgMaxBcastRetires>              1
     ?<Initializer for zgPassiveAckTimeout>            1
     ?<Initializer for zgBcastDeliveryTime>            1
     ?<Initializer for zgNwkMode>                      1
     ?<Initializer for zgConcentratorRadius>           1
     ?<Initializer for zgNwkSrcRtgExpiryTime>          1
     ?<Initializer for zgApscMaxFrameRetries>          1
     ?<Initializer for zgApscAckWaitDurationPolled>    2
     ?<Initializer for zgApsAckWaitMultiplier>         1
     ?<Initializer for zgApsDefaultMaxBindingTime>     2
     ?<Initializer for zgApsUseInsecureJoin>           1
     ?<Initializer for zgApsNonMemberRadius>           1
     ?<Initializer for zgPreConfigKeys>                1
     ?<Initializer for zgUseDefaultTCLK>               1
     ?<Initializer for zgConfigPANID>                  2
     ?<Initializer for zgDeviceLogicalType>            1
     ?<Initializer for zgStartDelay>                   1
     ?<Initializer for zgNwkMgrMinTransmissions>       1
     ?<Initializer for zgNwkMgrMode>                   1
     ?<Initializer for zgSapiEndpoint>                 1
     ??zgItemInit?relay                                6
     ??zgInit?relay                                    6
     ??zgInitItems?relay                               6
     ??zgReadStartupOptions?relay                      6
     ??zgWriteStartupOptions?relay                     6
     ??zgSetItem?relay                                 6
     ??zgPreconfigKeyInit?relay                        6

 
 1 099 bytes in segment BANKED_CODE
    42 bytes in segment BANK_RELAYS
   252 bytes in segment CODE_C
    44 bytes in segment XDATA_I
    44 bytes in segment XDATA_ID
    22 bytes in segment XDATA_Z
 
 1 437 bytes of CODE  memory
    66 bytes of XDATA memory

Errors: none
Warnings: none
