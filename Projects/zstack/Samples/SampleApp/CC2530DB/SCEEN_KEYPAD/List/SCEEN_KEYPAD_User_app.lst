###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.1.10194/W32 for 8051         11/Feb/2015  16:51:45 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zstac #
#                          k\Samples\SampleApp\Source\SCEEN_KEYPAD\SCEEN_KEYP #
#                          AD_User_app.c                                      #
#    Command line       =  -f "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\z #
#                          stack\Samples\SampleApp\CC2530DB\..\..\..\Tools\CC #
#                          2530DB\f8wEndev.cfg" (-DCPU32MHZ                   #
#                          -DROOT=__near_func -DMAC_CFG_TX_DATA_MAX=3         #
#                          -DMAC_CFG_TX_MAX=6 -DMAC_CFG_RX_MAX=3) -f          #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\Tools\CC253 #
#                          0DB\f8wConfig.cfg" (-DZIGBEEPRO -DSECURE=1         #
#                          -DZG_SECURE_DYNAMIC=0 -DREFLECTOR                  #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=60            #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=30           #
#                          -DNWK_MAX_BINDING_ENTRIES=10                       #
#                          -DMAX_BINDING_CLUSTER_IDS=4 -DASSERT_RESET         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=8000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=1000)  #
#                          -DREJOIN_POLL_RATE=440 "D:\RE_1_2_0_FORMAL_APP(251 #
#                          )-14-12-8\Projects\zstack\Samples\SampleApp\Source #
#                          \SCEEN_KEYPAD\SCEEN_KEYPAD_User_app.c" -D NV_INIT  #
#                          -D NV_RESTORE -D HOLD_AUTO_START -D MT_TASK -D     #
#                          xMT_APP_FUNC -D MT_SYS_FUNC -D MT_ZDO_FUNC -D      #
#                          xMT_ZDO_MGMT -D ISR_KEYINTERRUPT -D POWER_SAVING   #
#                          -D xLONG_POLL_TIMES -D xHAVE_TEST_FUN -D           #
#                          RESUME_TIME_TEST -D SCEEN_KEYPAD -D xM_V332 -lC    #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\SCEEN_KEYPAD\List\"  #
#                          -lA "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\ #
#                          zstack\Samples\SampleApp\CC2530DB\SCEEN_KEYPAD\Lis #
#                          t\" --diag_suppress Pe001,Pa010 -o                 #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\SCEEN_KEYPAD\Obj\"   #
#                          -e --no_cse --no_unroll --no_inline                #
#                          --no_code_motion --no_tbaa --debug --core=plain    #
#                          --dptr=16,1 --data_model=large                     #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I "D:\RE_1_2_0_FORMAL_APP(25 #
#                          1)-14-12-8\Projects\zstack\Samples\SampleApp\CC253 #
#                          0DB\" -I "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\Source\" #
#                           -I "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\ #
#                          zstack\Samples\SampleApp\CC2530DB\..\Source\rssi_t #
#                          est\h\" -I "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\Source #
#                          \SCEEN_KEYPAD\" -I "D:\RE_1_2_0_FORMAL_APP(251)-14 #
#                          -12-8\Projects\zstack\Samples\SampleApp\CC2530DB\. #
#                          .\..\..\ZMain\TI2530DB\" -I                        #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\hal\include\" -I "D:\RE_1_2_0_FORMAL_APP(251 #
#                          )-14-12-8\Projects\zstack\Samples\SampleApp\CC2530 #
#                          DB\..\..\..\..\..\Components\hal\target\CC2530EB\" #
#                           -I "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\ #
#                          zstack\Samples\SampleApp\CC2530DB\..\..\..\..\..\C #
#                          omponents\mac\include\" -I                         #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\mac\high_level\" -I                          #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\mac\low_level\srf04\" -I                     #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\mac\low_level\srf04\single_chip\" -I         #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\mt\" -I "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8 #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\osal\include\" -I              #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\services\saddr\" -I                          #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\services\sdata\" -I                          #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\stack\af\" -I "D:\RE_1_2_0_FORMAL_APP(251)-1 #
#                          4-12-8\Projects\zstack\Samples\SampleApp\CC2530DB\ #
#                          ..\..\..\..\..\Components\stack\nwk\" -I           #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\stack\sapi\" -I "D:\RE_1_2_0_FORMAL_APP(251) #
#                          -14-12-8\Projects\zstack\Samples\SampleApp\CC2530D #
#                          B\..\..\..\..\..\Components\stack\sec\" -I         #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\stack\sys\" -I "D:\RE_1_2_0_FORMAL_APP(251)- #
#                          14-12-8\Projects\zstack\Samples\SampleApp\CC2530DB #
#                          \..\..\..\..\..\Components\stack\zdo\" -I          #
#                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\zmac\" -I "D:\RE_1_2_0_FORMAL_APP(251)-14-12 #
#                          -8\Projects\zstack\Samples\SampleApp\CC2530DB\..\. #
#                          .\..\..\..\Components\zmac\f8w\" -On               #
#                          --require_prototypes                               #
#    List file          =  D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zstac #
#                          k\Samples\SampleApp\CC2530DB\SCEEN_KEYPAD\List\SCE #
#                          EN_KEYPAD_User_app.lst                             #
#    Object file        =  D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zstac #
#                          k\Samples\SampleApp\CC2530DB\SCEEN_KEYPAD\Obj\SCEE #
#                          N_KEYPAD_User_app.r51                              #
#                                                                             #
#                                                                             #
###############################################################################

D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zstack\Samples\SampleApp\Source\SCEEN_KEYPAD\SCEEN_KEYPAD_User_app.c
      1          /**************************************************************************************************
      2            Filename:       SampleApp.c
      3            Revised:        $Date: 2007-10-27 17:16:54 -0700 (Sat, 27 Oct 2007) $
      4            Revision:       $Revision: 15793 $
      5          
      6            Description:    Sample Application (no Profile).
      7          
      8          
      9            Copyright 2007 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          
     40          /*********************************************************************
     41            This application isn't intended to do anything useful, it is
     42            intended to be a simple example of an application's structure.
     43          
     44            This application sends it's messages either as broadcast or
     45            broadcast filtered group messages.  The other (more normal)
     46            message addressing is unicast.  Most of the other sample
     47            applications are written to support the unicast message model.
     48          
     49            Key control:
     50              SW1:  Sends a flash command to all devices in Group 1.
     51              SW2:  Adds/Removes (toggles) this device in and out
     52                    of Group 1.  This will enable and disable the
     53                    reception of the flash command.
     54          *********************************************************************/
     55          
     56          /*********************************************************************
     57           * INCLUDES
     58           */
     59          
     60          
     61          
     62          
     63          #include "OSAL.h"
     64          #include "ZGlobals.h"
     65          #include "AF.h"
     66          #include "aps_groups.h"
     67          #include "ZDApp.h"
     68          #include "device.h"
     69          #include "OnBoard.h"

   \                                 In  segment SFR_AN, at 0x80
   \   union <unnamed> volatile __sfr _A_P0
   \                     _A_P0:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0x89
   \   unsigned char volatile __sfr P0IFG
   \                     P0IFG:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0x8a
   \   unsigned char volatile __sfr P1IFG
   \                     P1IFG:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0x8d
   \   unsigned char volatile __sfr P1IEN
   \                     P1IEN:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0x90
   \   union <unnamed> volatile __sfr _A_P1
   \                     _A_P1:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xa8
   \   union <unnamed> volatile __sfr _A_IEN0
   \                     _A_IEN0:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xab
   \   unsigned char volatile __sfr P0IEN
   \                     P0IEN:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfd
   \   unsigned char volatile __sfr P0DIR
   \                     P0DIR:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfe
   \   unsigned char volatile __sfr P1DIR
   \                     P1DIR:
   \   000000                DS 1
     70          #include "MT_UART.h"
     71          #include "mac_rx.h"
     72          
     73          /* HAL */
     74          #include "hal_led.h"
     75          #include "hal_key.h"
     76          #include "OSAL_Nv.h"
     77          
     78          #include "AddrMgr.h"
     79          #include "nwk_util.h"
     80          #include "ZDObject.h"
     81          #include "ZDO_LIB.h"
     82          #include "common_device.h"
     83          #include "IO_config.h"
     84          #include "OSAL_PwrMgr.h"
     85          
     86          
     87          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     88          afAddrType_t SampleApp_BIND_DstAddr;
   \                     SampleApp_BIND_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z
     89          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     90          uint8 UserApp_TaskID;
   \                     UserApp_TaskID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     91          uint8 RS_LEN=0;
   \                     RS_LEN:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     92          uint8 RS_STR[10];
   \                     RS_STR:
   \   000000                DS 10
   \   00000A                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     93          uint8 SHORT_ADRESS[4];
   \                     SHORT_ADRESS:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     94          uint8 USER_DATA_LEN=0;
   \                     USER_DATA_LEN:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     95          uint8 USER_DATA_TYPE=0;
   \                     USER_DATA_TYPE:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     96          uint8 *USER_DATA_STR;
   \                     USER_DATA_STR:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
     97          
     98          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     99          uint8 DEVICE_ID;
   \                     DEVICE_ID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    100          uint8 DEFINED_CONTROL_CHAR;
   \                     DEFINED_CONTROL_CHAR:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    101          uint8 JOIN_ROLE;
   \                     JOIN_ROLE:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_I, align 1, keep-with-next
    102          uint16 NORMAL_POLL_TIME=7000;
   \                     NORMAL_POLL_TIME:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for NORMAL_POLL_TIME>`
   \   000002                REQUIRE __INIT_XDATA_I
    103          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    104          uint8 DEEP_POLL_FLAG;
   \                     DEEP_POLL_FLAG:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    105          uint8 FRONT_ALARM_FLAG=0;
   \                     FRONT_ALARM_FLAG:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    106          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    107          uint16 active_battery_voltage=0;
   \                     active_battery_voltage:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    108          uint8 CASH_TIME_FLAG=0;
   \                     CASH_TIME_FLAG:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    109          uint8 HIGH_BUTTERY_FLAG = 0; //大于2.9V
   \                     HIGH_BUTTERY_FLAG:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    110          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    111          uint8 LOW_POWER_MODE=0;  // 低于2.5V ，进入放电模式
   \                     LOW_POWER_MODE:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    112          uint16 Heart_mesg_count;  
   \                     Heart_mesg_count:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    113          uint8 poll_count=0;    //
   \                     poll_count:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    114          uint8 Hour_count=0;
   \                     Hour_count:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    115          uint8 more_detect_low_power_flag=0;
   \                     more_detect_low_power_flag:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    116          uint8 BUTTERY_LOW_FLAG=0;
   \                     BUTTERY_LOW_FLAG:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    117          uint8 BUTTERY_ALARM_BIT=0;
   \                     BUTTERY_ALARM_BIT:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    118          uint8 POLLRATE_TIME_VALUE = 0;
   \                     POLLRATE_TIME_VALUE:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    119          
    120          
    121          #define WALL_ONOFF_BINDOUTGLIST       4

   \                                 In  segment XDATA_I, align 1, keep-with-next
    122          static cId_t bindingOUTClusters[WALL_ONOFF_BINDOUTGLIST] =
   \                     bindingOUTClusters:
   \   000000                DS 8
   \   000008                REQUIRE `?<Initializer for bindingOUTClusters>`
   \   000008                REQUIRE __INIT_XDATA_I
    123          {
    124            SAMPLEAPP_ONOFF_CLUSTERID,
    125            SAMPLEAPP_DIMMER_CLUSTERID,
    126            SAMPLEAPP_CERTAIN_CONTROL_CLUSTERID,
    127            SAMPLEAPP_ELOCK_CLUSTERID,
    128          };
    129          
    130          #define WALL_ONOFF_BINDOUTGLIST2       3

   \                                 In  segment XDATA_I, align 1, keep-with-next
    131          static cId_t bindingOUTClusters2[WALL_ONOFF_BINDOUTGLIST2] =
   \                     bindingOUTClusters2:
   \   000000                DS 6
   \   000006                REQUIRE `?<Initializer for bindingOUTClusters2>`
   \   000006                REQUIRE __INIT_XDATA_I
    132          {
    133            SAMPLEAPP_ONOFF_CLUSTERID,
    134            SAMPLEAPP_DIMMER_CLUSTERID,
    135            SAMPLEAPP_ELOCK_CLUSTERID,
    136          }; 
    137          
    138          #define WALL_ONOFF_BINDOUTGLIST3       5

   \                                 In  segment XDATA_I, align 1, keep-with-next
    139          static cId_t bindingOUTClusters3[WALL_ONOFF_BINDOUTGLIST3] =
   \                     bindingOUTClusters3:
   \   000000                DS 10
   \   00000A                REQUIRE `?<Initializer for bindingOUTClusters3>`
   \   00000A                REQUIRE __INIT_XDATA_I
    140          {
    141            SAMPLEAPP_ONOFF_CLUSTERID,
    142            SAMPLEAPP_DIMMER_CLUSTERID,
    143            SAMPLEAPP_CERTAIN_CONTROL_CLUSTERID,
    144            SAMPLEAPP_ELOCK_CLUSTERID,
    145            SAMPLEAPP_HUE_CLUSTERID,
    146          };
    147          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    148          uint8 huePara[2];
   \                     huePara:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    149          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    150          uint8 ONOROFF1=0,ONOROFF2=0,ONOROFF3=0,ONOROFF4=0,ONOROFF5=0,ONOROFF6=0;
   \                     ONOROFF1:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
   \                     ONOROFF2:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
   \                     ONOROFF3:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
   \                     ONOROFF4:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
   \                     ONOROFF5:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
   \                     ONOROFF6:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    151          uint8 screen_current_flag =0 ;
   \                     screen_current_flag:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    152          uint8 screen_flag = 0;
   \                     screen_flag:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    153          
    154          
    155          
    156          
    157          
    158             

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    159          uint8   CR2_DATA_NODETECT_FLAG = 0; //设置标记位，发送数据的时候禁止中断
   \                     CR2_DATA_NODETECT_FLAG:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    160          void CR2_DATA_NODETECT_MSG(void);
    161             
    162          
    163          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    164          uint8 forever_forbiten_flag=0;
   \                     forever_forbiten_flag:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    165          cId_t bindingINClusters[1];
   \                     bindingINClusters:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    166          //afAddrType_t SampleApp_BIND_DstAddr;
    167          
    168          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    169              	uint8 CmdType;  //命令类型： '1' 学习，'2' 使用
   \                     CmdType:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    170          	uint16 IRCodeIndex;   //
   \                     IRCodeIndex:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_I, align 1, keep-with-next
    171          uint8 longPollRateFlag = 1;
   \                     longPollRateFlag:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for longPollRateFlag>`
   \   000001                REQUIRE __INIT_XDATA_I
    172          
    173          
    174          

   \                                 In  segment XDATA_ROM_C, align 1
    175          const cId_t USER_SampleApp_ClusterList[SAMPLEAPP_MAX_CLUSTERS] =
   \                     USER_SampleApp_ClusterList:
   \   000000   0100         DW 1
   \   000002   0200         DW 2
   \   000004   0300         DW 3
   \   000006   0400         DW 4
   \   000008   0500         DW 5
   \   00000A   0600         DW 6
   \   00000C   0700         DW 7
   \   00000E   0800         DW 8
   \   000010   0B00         DW 11
   \   000012   0C00         DW 12
   \   000014   0D00         DW 13
   \   000016   0E00         DW 14
   \   000018   0000         DW 0
    176          {
    177            SAMPLEAPP_ONOFF_CLUSTERID, //周期信息簇ID=1
    178            SAMPLEAPP_FLASH_CLUSTERID,    //闪烁信息簇ID=2
    179            SAMPLEAPP_ADDR_CLUSTERID,
    180            SAMPLEAPP_COMMAND_CLUSTERID,
    181            SAMPLEAPP_PERIODIC_CLUSTERID,
    182            SAMPLEAPP_ANNCE_REQ_CLUSTERID,
    183            SAMPLEAPP_PERIODIC_COORDINATOR_CLUSTERID,
    184            SAMPLEAPP_ACTIVE_COMMAND_CLUSTERID,
    185            SAMPLEAPP_DIMMER_CLUSTERID,
    186            SAMPLEAPP_IR_CLUSTERID,
    187            SAMPLEAPP_CERTAIN_CONTROL_CLUSTERID,
    188            SAMPLEAPP_ELOCK_CLUSTERID       
    189          };
    190          
    191          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    192          endPointDesc_t SampleApp_epDesc1;
   \                     SampleApp_epDesc1:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    193          endPointDesc_t SampleApp_epDesc2;
   \                     SampleApp_epDesc2:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    194          endPointDesc_t SampleApp_epDesc3;
   \                     SampleApp_epDesc3:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    195          endPointDesc_t SampleApp_epDesc4;
   \                     SampleApp_epDesc4:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    196          endPointDesc_t SampleApp_epDesc5;
   \                     SampleApp_epDesc5:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    197          endPointDesc_t SampleApp_epDesc6;
   \                     SampleApp_epDesc6:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z
    198          

   \                                 In  segment XDATA_ROM_C, align 1
    199          const SimpleDescriptionFormat_t SampleApp_SimpleDesc1 =
   \                     SampleApp_SimpleDesc1:
   \   000000   15           DB 21
   \   000001   080F         DW 3848
   \   000003   0100         DW 1
   \   000005   00           DB 0
   \   000006   0D           DB 13
   \   000007   ....         DW SampleApp_ClusterList
   \   000009   0D           DB 13
   \   00000A   ....         DW SampleApp_ClusterList
    200          {
    201            SAMPLEAPP_ENDPOINT1,              //  int Endpoint;
    202            SAMPLEAPP_PROFID,                //  uint16 AppProfId[2];/**/
    203            SAMPLEAPP_DEVICEID,              //  uint16 AppDeviceId[2];
    204            SAMPLEAPP_DEVICE_VERSION,        //  int   AppDevVer:4;
    205            SAMPLEAPP_FLAGS,                 //  int   AppFlags:4;
    206            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    207            (cId_t *)SampleApp_ClusterList,  //  uint8 *pAppInClusterList;
    208            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    209            (cId_t *)SampleApp_ClusterList   //  uint8 *pAppInClusterList;
    210          };
    211          

   \                                 In  segment XDATA_ROM_C, align 1
    212          const SimpleDescriptionFormat_t SampleApp_SimpleDesc2 =
   \                     SampleApp_SimpleDesc2:
   \   000000   16           DB 22
   \   000001   080F         DW 3848
   \   000003   0100         DW 1
   \   000005   00           DB 0
   \   000006   0D           DB 13
   \   000007   ....         DW SampleApp_ClusterList
   \   000009   0D           DB 13
   \   00000A   ....         DW SampleApp_ClusterList
    213          {
    214            SAMPLEAPP_ENDPOINT2,              //  int Endpoint;
    215            SAMPLEAPP_PROFID,                //  uint16 AppProfId[2];/**/
    216            SAMPLEAPP_DEVICEID,              //  uint16 AppDeviceId[2];
    217            SAMPLEAPP_DEVICE_VERSION,        //  int   AppDevVer:4;
    218            SAMPLEAPP_FLAGS,                 //  int   AppFlags:4;
    219            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    220            (cId_t *)SampleApp_ClusterList,  //  uint8 *pAppInClusterList;
    221            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    222            (cId_t *)SampleApp_ClusterList   //  uint8 *pAppInClusterList;
    223          };
    224          

   \                                 In  segment XDATA_ROM_C, align 1
    225          const SimpleDescriptionFormat_t SampleApp_SimpleDesc3 =
   \                     SampleApp_SimpleDesc3:
   \   000000   17           DB 23
   \   000001   080F         DW 3848
   \   000003   0100         DW 1
   \   000005   00           DB 0
   \   000006   0D           DB 13
   \   000007   ....         DW SampleApp_ClusterList
   \   000009   0D           DB 13
   \   00000A   ....         DW SampleApp_ClusterList
    226          {
    227            SAMPLEAPP_ENDPOINT3,              //  int Endpoint;
    228            SAMPLEAPP_PROFID,                //  uint16 AppProfId[2];/**/
    229            SAMPLEAPP_DEVICEID,              //  uint16 AppDeviceId[2];
    230            SAMPLEAPP_DEVICE_VERSION,        //  int   AppDevVer:4;
    231            SAMPLEAPP_FLAGS,                 //  int   AppFlags:4;
    232            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    233            (cId_t *)SampleApp_ClusterList,  //  uint8 *pAppInClusterList;
    234            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    235            (cId_t *)SampleApp_ClusterList   //  uint8 *pAppInClusterList;
    236          };
    237          

   \                                 In  segment XDATA_ROM_C, align 1
    238          const SimpleDescriptionFormat_t SampleApp_SimpleDesc4 =
   \                     SampleApp_SimpleDesc4:
   \   000000   18           DB 24
   \   000001   080F         DW 3848
   \   000003   0100         DW 1
   \   000005   00           DB 0
   \   000006   0D           DB 13
   \   000007   ....         DW SampleApp_ClusterList
   \   000009   0D           DB 13
   \   00000A   ....         DW SampleApp_ClusterList
    239          {
    240            SAMPLEAPP_ENDPOINT4,              //  int Endpoint;
    241            SAMPLEAPP_PROFID,                //  uint16 AppProfId[2];/**/
    242            SAMPLEAPP_DEVICEID,              //  uint16 AppDeviceId[2];
    243            SAMPLEAPP_DEVICE_VERSION,        //  int   AppDevVer:4;
    244            SAMPLEAPP_FLAGS,                 //  int   AppFlags:4;
    245            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    246            (cId_t *)SampleApp_ClusterList,  //  uint8 *pAppInClusterList;
    247            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    248            (cId_t *)SampleApp_ClusterList   //  uint8 *pAppInClusterList;
    249          };
    250          

   \                                 In  segment XDATA_ROM_C, align 1
    251          const SimpleDescriptionFormat_t SampleApp_SimpleDesc5 =
   \                     SampleApp_SimpleDesc5:
   \   000000   19           DB 25
   \   000001   080F         DW 3848
   \   000003   0100         DW 1
   \   000005   00           DB 0
   \   000006   0D           DB 13
   \   000007   ....         DW SampleApp_ClusterList
   \   000009   0D           DB 13
   \   00000A   ....         DW SampleApp_ClusterList
    252          {
    253            SAMPLEAPP_ENDPOINT5,              //  int Endpoint;
    254            SAMPLEAPP_PROFID,                //  uint16 AppProfId[2];/**/
    255            SAMPLEAPP_DEVICEID,              //  uint16 AppDeviceId[2];
    256            SAMPLEAPP_DEVICE_VERSION,        //  int   AppDevVer:4;
    257            SAMPLEAPP_FLAGS,                 //  int   AppFlags:4;
    258            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    259            (cId_t *)SampleApp_ClusterList,  //  uint8 *pAppInClusterList;
    260            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    261            (cId_t *)SampleApp_ClusterList   //  uint8 *pAppInClusterList;
    262          };
    263          

   \                                 In  segment XDATA_ROM_C, align 1
    264          const SimpleDescriptionFormat_t SampleApp_SimpleDesc6 =
   \                     SampleApp_SimpleDesc6:
   \   000000   1A           DB 26
   \   000001   080F         DW 3848
   \   000003   0100         DW 1
   \   000005   00           DB 0
   \   000006   0D           DB 13
   \   000007   ....         DW SampleApp_ClusterList
   \   000009   0D           DB 13
   \   00000A   ....         DW SampleApp_ClusterList
    265          {
    266            SAMPLEAPP_ENDPOINT6,              //  int Endpoint;
    267            SAMPLEAPP_PROFID,                //  uint16 AppProfId[2];/**/
    268            SAMPLEAPP_DEVICEID,              //  uint16 AppDeviceId[2];
    269            SAMPLEAPP_DEVICE_VERSION,        //  int   AppDevVer:4;
    270            SAMPLEAPP_FLAGS,                 //  int   AppFlags:4;
    271            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    272            (cId_t *)SampleApp_ClusterList,  //  uint8 *pAppInClusterList;
    273            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    274            (cId_t *)SampleApp_ClusterList   //  uint8 *pAppInClusterList;
    275          };
    276          
    277          
    278          
    279          
    280          uint8 USER_APP_COMMAND(uint8 *user_app_data,uint8 *str); 
    281          void USER_APP_JOIN_MSG(void);
    282          void SampleApp_ProcessBINDINGMessage(afIncomingMSGPacket_t *pkt);
    283          void SampleAPP_ProcessZDOMsgs( zdoIncomingMsg_t *inMsg );
    284          
    285          void User_APP_Drive_init(void);
    286          void SampleApp_HandleKeys( uint8 shift, uint8 keys );//本用户应用按键函数
    287          void USER_SET_RS_MSG(void);//设置RS数据
    288          
    289          void USER_AFTER_RS_MSG(void);
    290          
    291          void USER_ZDO_JOINING_MSG(void); //ZDO层入网的时候处理函数 就是闪烁灯
    292          uint8 READ_NETKEY(void); //读取入网状态按键的状态传递到应用层
    293          void LED_CHANGE(uint8 Position,uint8 Mode);// 设置LED函数
    294          
    295          void SampleAPP_send_delay_message(void);
    296          
    297          void changePollRate(void);
    298          
    299          
    300          
    301          
    302          
    303          
    304          
    305          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    306          void UserApp_Init( uint8 task_id )
   \                     UserApp_Init:
    307          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
    308          
    309            UserApp_TaskID = task_id;
   \   000007   EE           MOV     A,R6
   \   000008   90....       MOV     DPTR,#UserApp_TaskID
   \   00000B   F0           MOVX    @DPTR,A
    310            
    311            RegisterForKeys(task_id);
   \   00000C                ; Setup parameters for call to function RegisterForKeys
   \   00000C   EE           MOV     A,R6
   \   00000D   F9           MOV     R1,A
   \   00000E   12....       LCALL   ??RegisterForKeys?relay
   \   000011   E9           MOV     A,R1
    312          
    313            // Fill out the endpoint description.
    314            SampleApp_epDesc1.endPoint = SAMPLEAPP_ENDPOINT1;//SampleApp EP描述符的EP号：20
   \   000012   90....       MOV     DPTR,#SampleApp_epDesc1
   \   000015   7415         MOV     A,#0x15
   \   000017   F0           MOVX    @DPTR,A
    315            SampleApp_epDesc1.task_id = &SampleApp_TaskID;//SampleApp EP描述符的任务ID：0
   \   000018   90....       MOV     DPTR,#SampleApp_epDesc1 + 1
   \   00001B   74..         MOV     A,#SampleApp_TaskID & 0xff
   \   00001D   F0           MOVX    @DPTR,A
   \   00001E   A3           INC     DPTR
   \   00001F   74..         MOV     A,#(SampleApp_TaskID >> 8) & 0xff
   \   000021   F0           MOVX    @DPTR,A
    316            SampleApp_epDesc1.simpleDesc
    317                      = (SimpleDescriptionFormat_t *)&SampleApp_SimpleDesc1;//SampleApp EP简单描述符
   \   000022   90....       MOV     DPTR,#SampleApp_epDesc1 + 3
   \   000025   74..         MOV     A,#SampleApp_SimpleDesc1 & 0xff
   \   000027   F0           MOVX    @DPTR,A
   \   000028   A3           INC     DPTR
   \   000029   74..         MOV     A,#(SampleApp_SimpleDesc1 >> 8) & 0xff
   \   00002B   F0           MOVX    @DPTR,A
    318            SampleApp_epDesc1.latencyReq = noLatencyReqs;//延时策略
   \   00002C   90....       MOV     DPTR,#SampleApp_epDesc1 + 5
   \   00002F   7400         MOV     A,#0x0
   \   000031   F0           MOVX    @DPTR,A
    319            
    320              SampleApp_epDesc2.endPoint = SAMPLEAPP_ENDPOINT2;//SampleApp EP描述符的EP号：20
   \   000032   90....       MOV     DPTR,#SampleApp_epDesc2
   \   000035   7416         MOV     A,#0x16
   \   000037   F0           MOVX    @DPTR,A
    321            SampleApp_epDesc2.task_id = &SampleApp_TaskID;//SampleApp E1P描述符的任务ID：0
   \   000038   90....       MOV     DPTR,#SampleApp_epDesc2 + 1
   \   00003B   74..         MOV     A,#SampleApp_TaskID & 0xff
   \   00003D   F0           MOVX    @DPTR,A
   \   00003E   A3           INC     DPTR
   \   00003F   74..         MOV     A,#(SampleApp_TaskID >> 8) & 0xff
   \   000041   F0           MOVX    @DPTR,A
    322            SampleApp_epDesc2.simpleDesc
    323                      = (SimpleDescriptionFormat_t *)&SampleApp_SimpleDesc2;//SampleApp EP简单描述符
   \   000042   90....       MOV     DPTR,#SampleApp_epDesc2 + 3
   \   000045   74..         MOV     A,#SampleApp_SimpleDesc2 & 0xff
   \   000047   F0           MOVX    @DPTR,A
   \   000048   A3           INC     DPTR
   \   000049   74..         MOV     A,#(SampleApp_SimpleDesc2 >> 8) & 0xff
   \   00004B   F0           MOVX    @DPTR,A
    324            SampleApp_epDesc2.latencyReq = noLatencyReqs;//延时策略
   \   00004C   90....       MOV     DPTR,#SampleApp_epDesc2 + 5
   \   00004F   7400         MOV     A,#0x0
   \   000051   F0           MOVX    @DPTR,A
    325            
    326              SampleApp_epDesc3.endPoint = SAMPLEAPP_ENDPOINT3;//SampleApp EP描述符的EP号：20
   \   000052   90....       MOV     DPTR,#SampleApp_epDesc3
   \   000055   7417         MOV     A,#0x17
   \   000057   F0           MOVX    @DPTR,A
    327            SampleApp_epDesc3.task_id = &SampleApp_TaskID;//SampleApp EP描述符的任务ID：0
   \   000058   90....       MOV     DPTR,#SampleApp_epDesc3 + 1
   \   00005B   74..         MOV     A,#SampleApp_TaskID & 0xff
   \   00005D   F0           MOVX    @DPTR,A
   \   00005E   A3           INC     DPTR
   \   00005F   74..         MOV     A,#(SampleApp_TaskID >> 8) & 0xff
   \   000061   F0           MOVX    @DPTR,A
    328            SampleApp_epDesc3.simpleDesc
    329                      = (SimpleDescriptionFormat_t *)&SampleApp_SimpleDesc3;//SampleApp EP简单描述符
   \   000062   90....       MOV     DPTR,#SampleApp_epDesc3 + 3
   \   000065   74..         MOV     A,#SampleApp_SimpleDesc3 & 0xff
   \   000067   F0           MOVX    @DPTR,A
   \   000068   A3           INC     DPTR
   \   000069   74..         MOV     A,#(SampleApp_SimpleDesc3 >> 8) & 0xff
   \   00006B   F0           MOVX    @DPTR,A
    330            SampleApp_epDesc3.latencyReq = noLatencyReqs;//延时策略
   \   00006C   90....       MOV     DPTR,#SampleApp_epDesc3 + 5
   \   00006F   7400         MOV     A,#0x0
   \   000071   F0           MOVX    @DPTR,A
    331            
    332              SampleApp_epDesc4.endPoint = SAMPLEAPP_ENDPOINT4;//SampleApp EP描述符的EP号：20
   \   000072   90....       MOV     DPTR,#SampleApp_epDesc4
   \   000075   7418         MOV     A,#0x18
   \   000077   F0           MOVX    @DPTR,A
    333            SampleApp_epDesc4.task_id = &SampleApp_TaskID;//SampleApp EP描述符的任务ID：0
   \   000078   90....       MOV     DPTR,#SampleApp_epDesc4 + 1
   \   00007B   74..         MOV     A,#SampleApp_TaskID & 0xff
   \   00007D   F0           MOVX    @DPTR,A
   \   00007E   A3           INC     DPTR
   \   00007F   74..         MOV     A,#(SampleApp_TaskID >> 8) & 0xff
   \   000081   F0           MOVX    @DPTR,A
    334            SampleApp_epDesc4.simpleDesc
    335                      = (SimpleDescriptionFormat_t *)&SampleApp_SimpleDesc4;//SampleApp EP简单描述符
   \   000082   90....       MOV     DPTR,#SampleApp_epDesc4 + 3
   \   000085   74..         MOV     A,#SampleApp_SimpleDesc4 & 0xff
   \   000087   F0           MOVX    @DPTR,A
   \   000088   A3           INC     DPTR
   \   000089   74..         MOV     A,#(SampleApp_SimpleDesc4 >> 8) & 0xff
   \   00008B   F0           MOVX    @DPTR,A
    336            SampleApp_epDesc4.latencyReq = noLatencyReqs;//延时策略
   \   00008C   90....       MOV     DPTR,#SampleApp_epDesc4 + 5
   \   00008F   7400         MOV     A,#0x0
   \   000091   F0           MOVX    @DPTR,A
    337            
    338              SampleApp_epDesc5.endPoint = SAMPLEAPP_ENDPOINT5;//SampleApp EP描述符的EP号：20
   \   000092   90....       MOV     DPTR,#SampleApp_epDesc5
   \   000095   7419         MOV     A,#0x19
   \   000097   F0           MOVX    @DPTR,A
    339            SampleApp_epDesc5.task_id = &SampleApp_TaskID;//SampleApp EP描述符的任务ID：0
   \   000098   90....       MOV     DPTR,#SampleApp_epDesc5 + 1
   \   00009B   74..         MOV     A,#SampleApp_TaskID & 0xff
   \   00009D   F0           MOVX    @DPTR,A
   \   00009E   A3           INC     DPTR
   \   00009F   74..         MOV     A,#(SampleApp_TaskID >> 8) & 0xff
   \   0000A1   F0           MOVX    @DPTR,A
    340            SampleApp_epDesc5.simpleDesc
    341                      = (SimpleDescriptionFormat_t *)&SampleApp_SimpleDesc5;//SampleApp EP简单描述符
   \   0000A2   90....       MOV     DPTR,#SampleApp_epDesc5 + 3
   \   0000A5   74..         MOV     A,#SampleApp_SimpleDesc5 & 0xff
   \   0000A7   F0           MOVX    @DPTR,A
   \   0000A8   A3           INC     DPTR
   \   0000A9   74..         MOV     A,#(SampleApp_SimpleDesc5 >> 8) & 0xff
   \   0000AB   F0           MOVX    @DPTR,A
    342            SampleApp_epDesc5.latencyReq = noLatencyReqs;//延时策略
   \   0000AC   90....       MOV     DPTR,#SampleApp_epDesc5 + 5
   \   0000AF   7400         MOV     A,#0x0
   \   0000B1   F0           MOVX    @DPTR,A
    343            
    344          
    345            SampleApp_BIND_DstAddr.addrMode = (afAddrMode_t)AddrNotPresent;
   \   0000B2   90....       MOV     DPTR,#SampleApp_BIND_DstAddr + 8
   \   0000B5   7400         MOV     A,#0x0
   \   0000B7   F0           MOVX    @DPTR,A
    346            SampleApp_BIND_DstAddr.endPoint = 0;
   \   0000B8   90....       MOV     DPTR,#SampleApp_BIND_DstAddr + 9
   \   0000BB   7400         MOV     A,#0x0
   \   0000BD   F0           MOVX    @DPTR,A
    347            SampleApp_BIND_DstAddr.addr.shortAddr = 0;
   \   0000BE   90....       MOV     DPTR,#SampleApp_BIND_DstAddr
   \   0000C1   7400         MOV     A,#0x0
   \   0000C3   F0           MOVX    @DPTR,A
   \   0000C4   A3           INC     DPTR
   \   0000C5   7400         MOV     A,#0x0
   \   0000C7   F0           MOVX    @DPTR,A
    348            
    349            
    350            // Register the endpoint description with the AF
    351            afRegister( &SampleApp_epDesc1 );
   \   0000C8                ; Setup parameters for call to function afRegister
   \   0000C8   7A..         MOV     R2,#SampleApp_epDesc1 & 0xff
   \   0000CA   7B..         MOV     R3,#(SampleApp_epDesc1 >> 8) & 0xff
   \   0000CC   12....       LCALL   ??afRegister?relay
   \   0000CF   E9           MOV     A,R1
    352            afRegister( &SampleApp_epDesc2 );
   \   0000D0                ; Setup parameters for call to function afRegister
   \   0000D0   7A..         MOV     R2,#SampleApp_epDesc2 & 0xff
   \   0000D2   7B..         MOV     R3,#(SampleApp_epDesc2 >> 8) & 0xff
   \   0000D4   12....       LCALL   ??afRegister?relay
   \   0000D7   E9           MOV     A,R1
    353            afRegister( &SampleApp_epDesc3 );
   \   0000D8                ; Setup parameters for call to function afRegister
   \   0000D8   7A..         MOV     R2,#SampleApp_epDesc3 & 0xff
   \   0000DA   7B..         MOV     R3,#(SampleApp_epDesc3 >> 8) & 0xff
   \   0000DC   12....       LCALL   ??afRegister?relay
   \   0000DF   E9           MOV     A,R1
    354            afRegister( &SampleApp_epDesc4 );
   \   0000E0                ; Setup parameters for call to function afRegister
   \   0000E0   7A..         MOV     R2,#SampleApp_epDesc4 & 0xff
   \   0000E2   7B..         MOV     R3,#(SampleApp_epDesc4 >> 8) & 0xff
   \   0000E4   12....       LCALL   ??afRegister?relay
   \   0000E7   E9           MOV     A,R1
    355            afRegister( &SampleApp_epDesc5 );
   \   0000E8                ; Setup parameters for call to function afRegister
   \   0000E8   7A..         MOV     R2,#SampleApp_epDesc5 & 0xff
   \   0000EA   7B..         MOV     R3,#(SampleApp_epDesc5 >> 8) & 0xff
   \   0000EC   12....       LCALL   ??afRegister?relay
   \   0000EF   E9           MOV     A,R1
    356          
    357          
    358            RegisterForKeys( UserApp_TaskID ); 
   \   0000F0                ; Setup parameters for call to function RegisterForKeys
   \   0000F0   90....       MOV     DPTR,#UserApp_TaskID
   \   0000F3   E0           MOVX    A,@DPTR
   \   0000F4   F9           MOV     R1,A
   \   0000F5   12....       LCALL   ??RegisterForKeys?relay
   \   0000F8   E9           MOV     A,R1
    359            
    360            ZDO_RegisterForZDOMsg( UserApp_TaskID, End_Device_Bind_rsp );
   \   0000F9                ; Setup parameters for call to function ZDO_RegisterForZDOMsg
   \   0000F9   7A20         MOV     R2,#0x20
   \   0000FB   7B80         MOV     R3,#-0x80
   \   0000FD   90....       MOV     DPTR,#UserApp_TaskID
   \   000100   E0           MOVX    A,@DPTR
   \   000101   F9           MOV     R1,A
   \   000102   12....       LCALL   ??ZDO_RegisterForZDOMsg?relay
   \   000105   E9           MOV     A,R1
    361          
    362            
    363            User_APP_Drive_init();
   \   000106                ; Setup parameters for call to function User_APP_Drive_init
   \   000106   12....       LCALL   ??User_APP_Drive_init?relay
    364          
    365          }
   \   000109   7F01         MOV     R7,#0x1
   \   00010B   02....       LJMP    ?BANKED_LEAVE_XDATA
    366          
    367          /*********************************************************************
    368           * @fn      SampleApp_ProcessEvent
    369           *
    370           * @brief   Generic Application Task event processor.  This function
    371           *          is called to process all events for the task.  Events
    372           *          include timers, messages and any other user defined events.
    373           *
    374           * @param   task_id  - The OSAL assigned task ID.
    375           * @param   events - events to process.  This is a bit map and can
    376           *                   contain more than one event.
    377           *
    378           * @return  none
    379           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    380          uint16 UserApp_ProcessEvent( uint8 task_id, uint16 events )
   \                     UserApp_ProcessEvent:
    381          {
   \   000000   74F2         MOV     A,#-0xe
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 0
   \   000005   89..         MOV     ?V0 + 2,R1
   \   000007   EA           MOV     A,R2
   \   000008   FE           MOV     R6,A
   \   000009   EB           MOV     A,R3
   \   00000A   FF           MOV     R7,A
    382            afIncomingMSGPacket_t *MSGpkt;
    383           
    384            if ( events & SYS_EVENT_MSG )
   \   00000B   EE           MOV     A,R6
   \   00000C   5400         ANL     A,#0x0
   \   00000E   F8           MOV     R0,A
   \   00000F   EF           MOV     A,R7
   \   000010   5480         ANL     A,#0x80
   \   000012   F9           MOV     R1,A
   \   000013   E8           MOV     A,R0
   \   000014   49           ORL     A,R1
   \   000015   606F         JZ      ??UserApp_ProcessEvent_0
    385            {
    386              MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( UserApp_TaskID );
   \   000017                ; Setup parameters for call to function osal_msg_receive
   \   000017   90....       MOV     DPTR,#UserApp_TaskID
   \   00001A   E0           MOVX    A,@DPTR
   \   00001B   F9           MOV     R1,A
   \   00001C   12....       LCALL   ??osal_msg_receive?relay
   \   00001F   8A..         MOV     ?V0 + 4,R2
   \   000021   8B..         MOV     ?V0 + 5,R3
   \   000023   85....       MOV     ?V0 + 0,?V0 + 4
   \   000026   85....       MOV     ?V0 + 1,?V0 + 5
    387              while ( MSGpkt )                                           
   \                     ??UserApp_ProcessEvent_1:
   \   000029   E5..         MOV     A,?V0 + 0
   \   00002B   45..         ORL     A,?V0 + 1
   \   00002D   604C         JZ      ??UserApp_ProcessEvent_2
    388              {                                                                     
    389                switch ( MSGpkt->hdr.event )
   \   00002F   85..82       MOV     DPL,?V0 + 0
   \   000032   85..83       MOV     DPH,?V0 + 1
   \   000035   E0           MOVX    A,@DPTR
   \   000036   2440         ADD     A,#0x40
   \   000038   600D         JZ      ??UserApp_ProcessEvent_3
   \   00003A   24ED         ADD     A,#-0x13
   \   00003C   7021         JNZ     ??UserApp_ProcessEvent_4
    390                {
    391                  
    392                   
    393                   case ZDO_CB_MSG:
    394                    SampleAPP_ProcessZDOMsgs( (zdoIncomingMsg_t *)MSGpkt );
   \   00003E                ; Setup parameters for call to function SampleAPP_ProcessZDOMsgs
   \   00003E   AA..         MOV     R2,?V0 + 0
   \   000040   AB..         MOV     R3,?V0 + 1
   \   000042   12....       LCALL   ??SampleAPP_ProcessZDOMsgs?relay
    395                    break; 
   \   000045   8018         SJMP    ??UserApp_ProcessEvent_4
    396                    
    397                  case KEY_CHANGE:      
    398                    SampleApp_HandleKeys( ((keyChange_t *)MSGpkt)->state, ((keyChange_t *)MSGpkt)->keys );
   \                     ??UserApp_ProcessEvent_3:
   \   000047                ; Setup parameters for call to function SampleApp_HandleKeys
   \   000047   85..82       MOV     DPL,?V0 + 0
   \   00004A   85..83       MOV     DPH,?V0 + 1
   \   00004D   A3           INC     DPTR
   \   00004E   A3           INC     DPTR
   \   00004F   A3           INC     DPTR
   \   000050   E0           MOVX    A,@DPTR
   \   000051   FA           MOV     R2,A
   \   000052   85..82       MOV     DPL,?V0 + 0
   \   000055   85..83       MOV     DPH,?V0 + 1
   \   000058   A3           INC     DPTR
   \   000059   A3           INC     DPTR
   \   00005A   E0           MOVX    A,@DPTR
   \   00005B   F9           MOV     R1,A
   \   00005C   12....       LCALL   ??SampleApp_HandleKeys?relay
    399                    break;                                             
    400          
    401                  default:
    402                    break;
    403                }
    404          
    405                // Release the memory
    406                //释放消息占用的内存
    407                osal_msg_deallocate( (uint8 *)MSGpkt );
   \                     ??UserApp_ProcessEvent_4:
   \   00005F                ; Setup parameters for call to function osal_msg_deallocate
   \   00005F   AA..         MOV     R2,?V0 + 0
   \   000061   AB..         MOV     R3,?V0 + 1
   \   000063   12....       LCALL   ??osal_msg_deallocate?relay
   \   000066   E9           MOV     A,R1
    408          
    409                // Next - if one is available
    410                MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( UserApp_TaskID );
   \   000067                ; Setup parameters for call to function osal_msg_receive
   \   000067   90....       MOV     DPTR,#UserApp_TaskID
   \   00006A   E0           MOVX    A,@DPTR
   \   00006B   F9           MOV     R1,A
   \   00006C   12....       LCALL   ??osal_msg_receive?relay
   \   00006F   8A..         MOV     ?V0 + 4,R2
   \   000071   8B..         MOV     ?V0 + 5,R3
   \   000073   85....       MOV     ?V0 + 0,?V0 + 4
   \   000076   85....       MOV     ?V0 + 1,?V0 + 5
   \   000079   80AE         SJMP    ??UserApp_ProcessEvent_1
    411              }//end： while ( MSGpkt )
    412          
    413              return (events ^ SYS_EVENT_MSG);
   \                     ??UserApp_ProcessEvent_2:
   \   00007B   EE           MOV     A,R6
   \   00007C   6400         XRL     A,#0x0
   \   00007E   FA           MOV     R2,A
   \   00007F   EF           MOV     A,R7
   \   000080   6480         XRL     A,#0x80
   \   000082   FB           MOV     R3,A
   \   000083   02....       LJMP    ??UserApp_ProcessEvent_5 & 0xFFFF
    414            }
    415            
    416            
    417           //用户自行添加事件
    418           //test
    419            if ( events & USER_TEST_EVT )
   \                     ??UserApp_ProcessEvent_0:
   \   000086   EE           MOV     A,R6
   \   000087   A2E0         MOV     C,0xE0 /* A   */.0
   \   000089   5026         JNC     ??UserApp_ProcessEvent_6
    420            {
    421              HAL_TOGGLE_LED1();
   \   00008B   A290         MOV     C,0x90.0
   \   00008D   5004         JNC     ??UserApp_ProcessEvent_7
   \   00008F   C290         CLR     0x90.0
   \   000091   8002         SJMP    ??UserApp_ProcessEvent_8
   \                     ??UserApp_ProcessEvent_7:
   \   000093   D290         SETB    0x90.0
    422                osal_start_timerEx( UserApp_TaskID, USER_TEST_EVT,10000);
   \                     ??UserApp_ProcessEvent_8:
   \   000095                ; Setup parameters for call to function osal_start_timerEx
   \   000095   7C10         MOV     R4,#0x10
   \   000097   7D27         MOV     R5,#0x27
   \   000099   7A01         MOV     R2,#0x1
   \   00009B   7B00         MOV     R3,#0x0
   \   00009D   90....       MOV     DPTR,#UserApp_TaskID
   \   0000A0   E0           MOVX    A,@DPTR
   \   0000A1   F9           MOV     R1,A
   \   0000A2   12....       LCALL   ??osal_start_timerEx?relay
   \   0000A5   E9           MOV     A,R1
    423              
    424               return (events ^ USER_TEST_EVT );
   \   0000A6   EE           MOV     A,R6
   \   0000A7   6401         XRL     A,#0x1
   \   0000A9   FA           MOV     R2,A
   \   0000AA   EF           MOV     A,R7
   \   0000AB   6400         XRL     A,#0x0
   \   0000AD   FB           MOV     R3,A
   \   0000AE   02....       LJMP    ??UserApp_ProcessEvent_5 & 0xFFFF
    425            } 
    426            
    427            if ( events & SAMPLEAPP_SEND_LOWBUTTERY_EVT )
   \                     ??UserApp_ProcessEvent_6:
   \   0000B1   EE           MOV     A,R6
   \   0000B2   5404         ANL     A,#0x4
   \   0000B4   6014         JZ      ??UserApp_ProcessEvent_9
    428            {
    429            
    430              BUTTERY_LOW_FLAG =1;
   \   0000B6   90....       MOV     DPTR,#BUTTERY_LOW_FLAG
   \   0000B9   7401         MOV     A,#0x1
   \   0000BB   F0           MOVX    @DPTR,A
    431              SampleApp_SendInMessage();
   \   0000BC                ; Setup parameters for call to function SampleApp_SendInMessage
   \   0000BC   12....       LCALL   ??SampleApp_SendInMessage?relay
    432              
    433             return ( events ^ SAMPLEAPP_SEND_LOWBUTTERY_EVT);
   \   0000BF   EE           MOV     A,R6
   \   0000C0   6404         XRL     A,#0x4
   \   0000C2   FA           MOV     R2,A
   \   0000C3   EF           MOV     A,R7
   \   0000C4   6400         XRL     A,#0x0
   \   0000C6   FB           MOV     R3,A
   \   0000C7   02....       LJMP    ??UserApp_ProcessEvent_5 & 0xFFFF
    434            }
    435            
    436             if ( events & SAMPLEAPP_SEND_NBJC_EVT )
   \                     ??UserApp_ProcessEvent_9:
   \   0000CA   EE           MOV     A,R6
   \   0000CB   5408         ANL     A,#0x8
   \   0000CD   7003         JNZ     $+5
   \   0000CF   02....       LJMP    ??UserApp_ProcessEvent_10 & 0xFFFF
    437            {
    438                  active_battery_voltage=myApp_ReadBattery();
   \   0000D2                ; Setup parameters for call to function myApp_ReadBattery
   \   0000D2   12....       LCALL   ??myApp_ReadBattery?relay
   \   0000D5   90....       MOV     DPTR,#active_battery_voltage
   \   0000D8   EA           MOV     A,R2
   \   0000D9   F0           MOVX    @DPTR,A
   \   0000DA   A3           INC     DPTR
   \   0000DB   EB           MOV     A,R3
   \   0000DC   F0           MOVX    @DPTR,A
    439                //  BUTTERY_LOW_FLAG =1;
    440               //   SampleApp_SendInMessage();
    441                   if(active_battery_voltage<=245)
   \   0000DD   90....       MOV     DPTR,#active_battery_voltage
   \   0000E0   C3           CLR     C
   \   0000E1   E0           MOVX    A,@DPTR
   \   0000E2   94F6         SUBB    A,#-0xa
   \   0000E4   A3           INC     DPTR
   \   0000E5   E0           MOVX    A,@DPTR
   \   0000E6   9400         SUBB    A,#0x0
   \   0000E8   5055         JNC     ??UserApp_ProcessEvent_11
    442                    {
    443                      P0IEN &=~BV(4);
   \   0000EA   53ABEF       ANL     0xab,#0xef
    444                      P1IEN &=~BV(5);
   \   0000ED   538DDF       ANL     0x8d,#0xdf
    445                      forever_forbiten_flag=1;
   \   0000F0   90....       MOV     DPTR,#forever_forbiten_flag
   \   0000F3   7401         MOV     A,#0x1
   \   0000F5   F0           MOVX    @DPTR,A
    446                      
    447                 
    448                      more_detect_low_power_flag++;
   \   0000F6   90....       MOV     DPTR,#more_detect_low_power_flag
   \   0000F9   E0           MOVX    A,@DPTR
   \   0000FA   2401         ADD     A,#0x1
   \   0000FC   F0           MOVX    @DPTR,A
    449                      if(more_detect_low_power_flag>=3)
   \   0000FD   90....       MOV     DPTR,#more_detect_low_power_flag
   \   000100   E0           MOVX    A,@DPTR
   \   000101   C3           CLR     C
   \   000102   9403         SUBB    A,#0x3
   \   000104   4026         JC      ??UserApp_ProcessEvent_12
    450                      {
    451                      LOW_POWER_MODE=1;
   \   000106   90....       MOV     DPTR,#LOW_POWER_MODE
   \   000109   7401         MOV     A,#0x1
   \   00010B   F0           MOVX    @DPTR,A
    452                      osal_start_timerEx( UserApp_TaskID, SAMPLEAPP_SEND_LOWBUTTERY_EVT,60000 );
   \   00010C                ; Setup parameters for call to function osal_start_timerEx
   \   00010C   7C60         MOV     R4,#0x60
   \   00010E   7DEA         MOV     R5,#-0x16
   \   000110   7A04         MOV     R2,#0x4
   \   000112   7B00         MOV     R3,#0x0
   \   000114   90....       MOV     DPTR,#UserApp_TaskID
   \   000117   E0           MOVX    A,@DPTR
   \   000118   F9           MOV     R1,A
   \   000119   12....       LCALL   ??osal_start_timerEx?relay
   \   00011C   E9           MOV     A,R1
    453                      osal_stop_timerEx( UserApp_TaskID, SAMPLEAPP_SEND_NBJC_EVT);   
   \   00011D                ; Setup parameters for call to function osal_stop_timerEx
   \   00011D   7A08         MOV     R2,#0x8
   \   00011F   7B00         MOV     R3,#0x0
   \   000121   90....       MOV     DPTR,#UserApp_TaskID
   \   000124   E0           MOVX    A,@DPTR
   \   000125   F9           MOV     R1,A
   \   000126   12....       LCALL   ??osal_stop_timerEx?relay
   \   000129   E9           MOV     A,R1
   \   00012A   8024         SJMP    ??UserApp_ProcessEvent_13
    454                      }
    455                      else
    456                      {
    457             
    458          
    459                      osal_start_timerEx( UserApp_TaskID, SAMPLEAPP_SEND_NBJC_EVT,3000 );   
   \                     ??UserApp_ProcessEvent_12:
   \   00012C                ; Setup parameters for call to function osal_start_timerEx
   \   00012C   7CB8         MOV     R4,#-0x48
   \   00012E   7D0B         MOV     R5,#0xb
   \   000130   7A08         MOV     R2,#0x8
   \   000132   7B00         MOV     R3,#0x0
   \   000134   90....       MOV     DPTR,#UserApp_TaskID
   \   000137   E0           MOVX    A,@DPTR
   \   000138   F9           MOV     R1,A
   \   000139   12....       LCALL   ??osal_start_timerEx?relay
   \   00013C   E9           MOV     A,R1
   \   00013D   8011         SJMP    ??UserApp_ProcessEvent_13
    460                      } 
    461                    }
    462                    else
    463                    {
    464                     more_detect_low_power_flag=0;
   \                     ??UserApp_ProcessEvent_11:
   \   00013F   90....       MOV     DPTR,#more_detect_low_power_flag
   \   000142   7400         MOV     A,#0x0
   \   000144   F0           MOVX    @DPTR,A
    465                     forever_forbiten_flag=0;  
   \   000145   90....       MOV     DPTR,#forever_forbiten_flag
   \   000148   7400         MOV     A,#0x0
   \   00014A   F0           MOVX    @DPTR,A
    466                     osal_pwrmgr_device( PWRMGR_BATTERY );
   \   00014B                ; Setup parameters for call to function osal_pwrmgr_device
   \   00014B   7901         MOV     R1,#0x1
   \   00014D   12....       LCALL   ??osal_pwrmgr_device?relay
    467          
    468                    }
    469                   
    470             return ( events ^ SAMPLEAPP_SEND_NBJC_EVT);
   \                     ??UserApp_ProcessEvent_13:
   \   000150   EE           MOV     A,R6
   \   000151   6408         XRL     A,#0x8
   \   000153   FA           MOV     R2,A
   \   000154   EF           MOV     A,R7
   \   000155   6400         XRL     A,#0x0
   \   000157   FB           MOV     R3,A
   \   000158   02....       LJMP    ??UserApp_ProcessEvent_5 & 0xFFFF
    471            }
    472            
    473            
    474            
    475               if ( events & CR2_DATA_DETECT_EVT )
   \                     ??UserApp_ProcessEvent_10:
   \   00015B   EE           MOV     A,R6
   \   00015C   5402         ANL     A,#0x2
   \   00015E   6077         JZ      ??UserApp_ProcessEvent_14
    476            {
    477              
    478              if( (PUSH4_SBIT==0) && (forever_forbiten_flag==0))
   \   000160   A296         MOV     C,0x90.6
   \   000162   4058         JC      ??UserApp_ProcessEvent_15
   \   000164   90....       MOV     DPTR,#forever_forbiten_flag
   \   000167   E0           MOVX    A,@DPTR
   \   000168   7052         JNZ     ??UserApp_ProcessEvent_15
    479              // if(PUSH4_SBIT==0)
    480              { 
    481                if( (CASH_TIME_FLAG==1) ||(HIGH_BUTTERY_FLAG==1)) //消除警告后再过1S再打开，防止莫名的误报,如果电池大于2.9V则直接开启中断
   \   00016A   90....       MOV     DPTR,#CASH_TIME_FLAG
   \   00016D   E0           MOVX    A,@DPTR
   \   00016E   6401         XRL     A,#0x1
   \   000170   6008         JZ      ??UserApp_ProcessEvent_16
   \   000172   90....       MOV     DPTR,#HIGH_BUTTERY_FLAG
   \   000175   E0           MOVX    A,@DPTR
   \   000176   6401         XRL     A,#0x1
   \   000178   7029         JNZ     ??UserApp_ProcessEvent_17
    482                {
    483                  EA=0;
   \                     ??UserApp_ProcessEvent_16:
   \   00017A   C2AF         CLR     0xa8.7
    484                  P0IEN |=BV(4);
   \   00017C   43AB10       ORL     0xab,#0x10
    485                  P1IEN |=BV(5);
   \   00017F   438D20       ORL     0x8d,#0x20
    486                  P0IFG=0;
   \   000182   758900       MOV     0x89,#0x0
    487                  P1IFG=0;
   \   000185   758A00       MOV     0x8a,#0x0
    488                  EA=1;
   \   000188   D2AF         SETB    0xa8.7
    489                  
    490                  if(FRONT_ALARM_FLAG==1)//如果是因为报警导致的禁止中断
   \   00018A   90....       MOV     DPTR,#FRONT_ALARM_FLAG
   \   00018D   E0           MOVX    A,@DPTR
   \   00018E   6401         XRL     A,#0x1
   \   000190   7009         JNZ     ??UserApp_ProcessEvent_18
    491                  {
    492                    FRONT_ALARM_FLAG=0;
   \   000192   90....       MOV     DPTR,#FRONT_ALARM_FLAG
   \   000195   7400         MOV     A,#0x0
   \   000197   F0           MOVX    @DPTR,A
    493                    SampleApp_SendInMessage();//补发消警消息上去
   \   000198                ; Setup parameters for call to function SampleApp_SendInMessage
   \   000198   12....       LCALL   ??SampleApp_SendInMessage?relay
    494                  }
    495                  CASH_TIME_FLAG=0;
   \                     ??UserApp_ProcessEvent_18:
   \   00019B   90....       MOV     DPTR,#CASH_TIME_FLAG
   \   00019E   7400         MOV     A,#0x0
   \   0001A0   F0           MOVX    @DPTR,A
   \   0001A1   802A         SJMP    ??UserApp_ProcessEvent_19
    496                }
    497                else
    498                {
    499                  //刚刚消除警告，且电池有电，则再延迟1S，再打开中断
    500                  CASH_TIME_FLAG=1;
   \                     ??UserApp_ProcessEvent_17:
   \   0001A3   90....       MOV     DPTR,#CASH_TIME_FLAG
   \   0001A6   7401         MOV     A,#0x1
   \   0001A8   F0           MOVX    @DPTR,A
    501                  osal_start_timerEx( UserApp_TaskID, CR2_DATA_DETECT_EVT,1000);
   \   0001A9                ; Setup parameters for call to function osal_start_timerEx
   \   0001A9   7CE8         MOV     R4,#-0x18
   \   0001AB   7D03         MOV     R5,#0x3
   \   0001AD   7A02         MOV     R2,#0x2
   \   0001AF   7B00         MOV     R3,#0x0
   \   0001B1   90....       MOV     DPTR,#UserApp_TaskID
   \   0001B4   E0           MOVX    A,@DPTR
   \   0001B5   F9           MOV     R1,A
   \   0001B6   12....       LCALL   ??osal_start_timerEx?relay
   \   0001B9   E9           MOV     A,R1
   \   0001BA   8011         SJMP    ??UserApp_ProcessEvent_19
    502                }  
    503              }
    504              else
    505              {
    506               osal_start_timerEx( UserApp_TaskID, CR2_DATA_DETECT_EVT,500);
   \                     ??UserApp_ProcessEvent_15:
   \   0001BC                ; Setup parameters for call to function osal_start_timerEx
   \   0001BC   7CF4         MOV     R4,#-0xc
   \   0001BE   7D01         MOV     R5,#0x1
   \   0001C0   7A02         MOV     R2,#0x2
   \   0001C2   7B00         MOV     R3,#0x0
   \   0001C4   90....       MOV     DPTR,#UserApp_TaskID
   \   0001C7   E0           MOVX    A,@DPTR
   \   0001C8   F9           MOV     R1,A
   \   0001C9   12....       LCALL   ??osal_start_timerEx?relay
   \   0001CC   E9           MOV     A,R1
    507              }  
    508                return (events ^ CR2_DATA_DETECT_EVT );
   \                     ??UserApp_ProcessEvent_19:
   \   0001CD   EE           MOV     A,R6
   \   0001CE   6402         XRL     A,#0x2
   \   0001D0   FA           MOV     R2,A
   \   0001D1   EF           MOV     A,R7
   \   0001D2   6400         XRL     A,#0x0
   \   0001D4   FB           MOV     R3,A
   \   0001D5   8019         SJMP    ??UserApp_ProcessEvent_5
    509            }
    510            
    511          
    512            
    513          if ( events & SCREEN_CURRENT_FLAG_EVT )
   \                     ??UserApp_ProcessEvent_14:
   \   0001D7   EE           MOV     A,R6
   \   0001D8   5420         ANL     A,#0x20
   \   0001DA   6010         JZ      ??UserApp_ProcessEvent_20
    514            {
    515             screen_current_flag = 0;
   \   0001DC   90....       MOV     DPTR,#screen_current_flag
   \   0001DF   7400         MOV     A,#0x0
   \   0001E1   F0           MOVX    @DPTR,A
    516              
    517              return ( events ^ SCREEN_CURRENT_FLAG_EVT);
   \   0001E2   EE           MOV     A,R6
   \   0001E3   6420         XRL     A,#0x20
   \   0001E5   FA           MOV     R2,A
   \   0001E6   EF           MOV     A,R7
   \   0001E7   6400         XRL     A,#0x0
   \   0001E9   FB           MOV     R3,A
   \   0001EA   8004         SJMP    ??UserApp_ProcessEvent_5
    518            }
    519          
    520          
    521            return 0;
   \                     ??UserApp_ProcessEvent_20:
   \   0001EC   7A00         MOV     R2,#0x0
   \   0001EE   7B00         MOV     R3,#0x0
   \                     ??UserApp_ProcessEvent_5:
   \   0001F0   7F06         MOV     R7,#0x6
   \   0001F2   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   0001F5                REQUIRE _A_P1
   \   0001F5                REQUIRE P0IEN
   \   0001F5                REQUIRE P1IEN
   \   0001F5                REQUIRE _A_IEN0
   \   0001F5                REQUIRE P0IFG
   \   0001F5                REQUIRE P1IFG
    522          }
    523          
    524          // 按键命令传输到USER层，用户自行添加删除

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    525          void SampleApp_HandleKeys( uint8 shift, uint8 keys )
   \                     SampleApp_HandleKeys:
    526          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 9
   \   000005   74F7         MOV     A,#-0x9
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   89..         MOV     ?V0 + 0,R1
   \   00000C   EA           MOV     A,R2
   \   00000D   FF           MOV     R7,A
    527            uint8 startOptions;
                         ^
Warning[Pe177]: variable "startOptions" was declared but never referenced
    528           // uint8 logicalType;
    529            zAddrType_t dstAddr;
    530            
    531            if ( keys &  HAL_KEY_SW_9 ) // 对应竖着一排的第一个按钮
   \   00000E   EF           MOV     A,R7
   \   00000F   A2E6         MOV     C,0xE0 /* A   */.6
   \   000011   4003         JC      $+5
   \   000013   02....       LJMP    ??SampleApp_HandleKeys_0 & 0xFFFF
    532            {
    533              if(P1_2==0 )
   \   000016   A292         MOV     C,0x90.2
   \   000018   5003         JNC     $+5
   \   00001A   02....       LJMP    ??SampleApp_HandleKeys_1 & 0xFFFF
    534              {
    535                  HalLedBlink ( HAL_LED_2, 1, 50, 500 );
   \   00001D                ; Setup parameters for call to function HalLedBlink
   \   00001D   7CF4         MOV     R4,#-0xc
   \   00001F   7D01         MOV     R5,#0x1
   \   000021   7B32         MOV     R3,#0x32
   \   000023   7A01         MOV     R2,#0x1
   \   000025   7902         MOV     R1,#0x2
   \   000027   12....       LCALL   ??HalLedBlink?relay
    536                  
    537                  dstAddr.addrMode = afAddr16Bit;
   \   00002A   7408         MOV     A,#0x8
   \   00002C   12....       LCALL   ?XSTACK_DISP0_8
   \   00002F   7402         MOV     A,#0x2
   \   000031   F0           MOVX    @DPTR,A
    538                  dstAddr.addr.shortAddr = 0;   // Coordinator makes the match     
   \   000032   85..82       MOV     DPL,?XSP + 0
   \   000035   85..83       MOV     DPH,?XSP + 1
   \   000038   7400         MOV     A,#0x0
   \   00003A   F0           MOVX    @DPTR,A
   \   00003B   A3           INC     DPTR
   \   00003C   7400         MOV     A,#0x0
   \   00003E   F0           MOVX    @DPTR,A
    539                  ZDP_EndDeviceBindReq( &dstAddr, NLME_GetShortAddr(),
    540                                     SAMPLEAPP_ENDPOINT2,
    541                                     0x0F08,
    542                                     0, NULL,   // No incoming clusters to bind   0, NULL
    543                                     WALL_ONOFF_BINDOUTGLIST3, bindingOUTClusters3,
    544                                     FALSE );
   \   00003F                ; Setup parameters for call to function ZDP_EndDeviceBindReq
   \   00003F   75..00       MOV     ?V0 + 1,#0x0
   \   000042   78..         MOV     R0,#?V0 + 1
   \   000044   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000047   75....       MOV     ?V0 + 2,#bindingOUTClusters3 & 0xff
   \   00004A   75....       MOV     ?V0 + 3,#(bindingOUTClusters3 >> 8) & 0xff
   \   00004D   78..         MOV     R0,#?V0 + 2
   \   00004F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000052   75..05       MOV     ?V0 + 1,#0x5
   \   000055   78..         MOV     R0,#?V0 + 1
   \   000057   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00005A   E4           CLR     A
   \   00005B   F5..         MOV     ?V0 + 2,A
   \   00005D   F5..         MOV     ?V0 + 3,A
   \   00005F   78..         MOV     R0,#?V0 + 2
   \   000061   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000064   75..00       MOV     ?V0 + 1,#0x0
   \   000067   78..         MOV     R0,#?V0 + 1
   \   000069   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00006C   75..08       MOV     ?V0 + 2,#0x8
   \   00006F   75..0F       MOV     ?V0 + 3,#0xf
   \   000072   78..         MOV     R0,#?V0 + 2
   \   000074   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000077   7916         MOV     R1,#0x16
   \   000079   E9           MOV     A,R1
   \   00007A   FE           MOV     R6,A
   \   00007B   F9           MOV     R1,A
   \   00007C                ; Setup parameters for call to function NLME_GetShortAddr
   \   00007C   12....       LCALL   ??NLME_GetShortAddr?relay
   \   00007F   EA           MOV     A,R2
   \   000080   FC           MOV     R4,A
   \   000081   EB           MOV     A,R3
   \   000082   FD           MOV     R5,A
   \   000083   EE           MOV     A,R6
   \   000084   F9           MOV     R1,A
   \   000085   FE           MOV     R6,A
   \   000086   7409         MOV     A,#0x9
   \   000088   12....       LCALL   ?XSTACK_DISP0_8
   \   00008B   AA82         MOV     R2,DPL
   \   00008D   AB83         MOV     R3,DPH
   \   00008F   12....       LCALL   ??ZDP_EndDeviceBindReq?relay
   \   000092   7409         MOV     A,#0x9
   \   000094   12....       LCALL   ?DEALLOC_XSTACK8
   \   000097   E9           MOV     A,R1
   \   000098   02....       LJMP    ??SampleApp_HandleKeys_1 & 0xFFFF
    545              
    546              }
    547              
    548            }
    549             else if ( keys &  HAL_KEY_SW_4 ) // 对应竖着一排的第二个按钮
   \                     ??SampleApp_HandleKeys_0:
   \   00009B   EF           MOV     A,R7
   \   00009C   A2E3         MOV     C,0xE0 /* A   */.3
   \   00009E   4003         JC      $+5
   \   0000A0   02....       LJMP    ??SampleApp_HandleKeys_2 & 0xFFFF
    550            {
    551              if(P1_2==0 )
   \   0000A3   A292         MOV     C,0x90.2
   \   0000A5   5003         JNC     $+5
   \   0000A7   02....       LJMP    ??SampleApp_HandleKeys_1 & 0xFFFF
    552              {
    553                  HalLedBlink ( HAL_LED_2, 1, 50, 500 );
   \   0000AA                ; Setup parameters for call to function HalLedBlink
   \   0000AA   7CF4         MOV     R4,#-0xc
   \   0000AC   7D01         MOV     R5,#0x1
   \   0000AE   7B32         MOV     R3,#0x32
   \   0000B0   7A01         MOV     R2,#0x1
   \   0000B2   7902         MOV     R1,#0x2
   \   0000B4   12....       LCALL   ??HalLedBlink?relay
    554                  
    555                  dstAddr.addrMode = afAddr16Bit;
   \   0000B7   7408         MOV     A,#0x8
   \   0000B9   12....       LCALL   ?XSTACK_DISP0_8
   \   0000BC   7402         MOV     A,#0x2
   \   0000BE   F0           MOVX    @DPTR,A
    556                  dstAddr.addr.shortAddr = 0;   // Coordinator makes the match     
   \   0000BF   85..82       MOV     DPL,?XSP + 0
   \   0000C2   85..83       MOV     DPH,?XSP + 1
   \   0000C5   7400         MOV     A,#0x0
   \   0000C7   F0           MOVX    @DPTR,A
   \   0000C8   A3           INC     DPTR
   \   0000C9   7400         MOV     A,#0x0
   \   0000CB   F0           MOVX    @DPTR,A
    557                  ZDP_EndDeviceBindReq( &dstAddr, NLME_GetShortAddr(),
    558                                     SAMPLEAPP_ENDPOINT3,
    559                                     0x0F08,
    560                                     0, NULL,   // No incoming clusters to bind   0, NULL
    561                                     WALL_ONOFF_BINDOUTGLIST, bindingOUTClusters,
    562                                     FALSE );
   \   0000CC                ; Setup parameters for call to function ZDP_EndDeviceBindReq
   \   0000CC   75..00       MOV     ?V0 + 1,#0x0
   \   0000CF   78..         MOV     R0,#?V0 + 1
   \   0000D1   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000D4   75....       MOV     ?V0 + 2,#bindingOUTClusters & 0xff
   \   0000D7   75....       MOV     ?V0 + 3,#(bindingOUTClusters >> 8) & 0xff
   \   0000DA   78..         MOV     R0,#?V0 + 2
   \   0000DC   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000DF   75..04       MOV     ?V0 + 1,#0x4
   \   0000E2   78..         MOV     R0,#?V0 + 1
   \   0000E4   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000E7   E4           CLR     A
   \   0000E8   F5..         MOV     ?V0 + 2,A
   \   0000EA   F5..         MOV     ?V0 + 3,A
   \   0000EC   78..         MOV     R0,#?V0 + 2
   \   0000EE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000F1   75..00       MOV     ?V0 + 1,#0x0
   \   0000F4   78..         MOV     R0,#?V0 + 1
   \   0000F6   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000F9   75..08       MOV     ?V0 + 2,#0x8
   \   0000FC   75..0F       MOV     ?V0 + 3,#0xf
   \   0000FF   78..         MOV     R0,#?V0 + 2
   \   000101   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000104   7917         MOV     R1,#0x17
   \   000106   E9           MOV     A,R1
   \   000107   FE           MOV     R6,A
   \   000108   F9           MOV     R1,A
   \   000109                ; Setup parameters for call to function NLME_GetShortAddr
   \   000109   12....       LCALL   ??NLME_GetShortAddr?relay
   \   00010C   EA           MOV     A,R2
   \   00010D   FC           MOV     R4,A
   \   00010E   EB           MOV     A,R3
   \   00010F   FD           MOV     R5,A
   \   000110   EE           MOV     A,R6
   \   000111   F9           MOV     R1,A
   \   000112   FE           MOV     R6,A
   \   000113   7409         MOV     A,#0x9
   \   000115   12....       LCALL   ?XSTACK_DISP0_8
   \   000118   AA82         MOV     R2,DPL
   \   00011A   AB83         MOV     R3,DPH
   \   00011C   12....       LCALL   ??ZDP_EndDeviceBindReq?relay
   \   00011F   7409         MOV     A,#0x9
   \   000121   12....       LCALL   ?DEALLOC_XSTACK8
   \   000124   E9           MOV     A,R1
   \   000125   02....       LJMP    ??SampleApp_HandleKeys_1 & 0xFFFF
    563              
    564              }
    565              
    566            }
    567            else if ( keys &  HAL_KEY_SW_5 ) // 对应竖着一排的第二个按钮
   \                     ??SampleApp_HandleKeys_2:
   \   000128   EF           MOV     A,R7
   \   000129   A2E2         MOV     C,0xE0 /* A   */.2
   \   00012B   4003         JC      $+5
   \   00012D   02....       LJMP    ??SampleApp_HandleKeys_3 & 0xFFFF
    568            {
    569              if(P1_2==0 )
   \   000130   A292         MOV     C,0x90.2
   \   000132   5003         JNC     $+5
   \   000134   02....       LJMP    ??SampleApp_HandleKeys_1 & 0xFFFF
    570              {
    571                  HalLedBlink ( HAL_LED_2, 1, 50, 500 );
   \   000137                ; Setup parameters for call to function HalLedBlink
   \   000137   7CF4         MOV     R4,#-0xc
   \   000139   7D01         MOV     R5,#0x1
   \   00013B   7B32         MOV     R3,#0x32
   \   00013D   7A01         MOV     R2,#0x1
   \   00013F   7902         MOV     R1,#0x2
   \   000141   12....       LCALL   ??HalLedBlink?relay
    572                  
    573                  dstAddr.addrMode = afAddr16Bit;
   \   000144   7408         MOV     A,#0x8
   \   000146   12....       LCALL   ?XSTACK_DISP0_8
   \   000149   7402         MOV     A,#0x2
   \   00014B   F0           MOVX    @DPTR,A
    574                  dstAddr.addr.shortAddr = 0;   // Coordinator makes the match     
   \   00014C   85..82       MOV     DPL,?XSP + 0
   \   00014F   85..83       MOV     DPH,?XSP + 1
   \   000152   7400         MOV     A,#0x0
   \   000154   F0           MOVX    @DPTR,A
   \   000155   A3           INC     DPTR
   \   000156   7400         MOV     A,#0x0
   \   000158   F0           MOVX    @DPTR,A
    575                  ZDP_EndDeviceBindReq( &dstAddr, NLME_GetShortAddr(),
    576                                     SAMPLEAPP_ENDPOINT4,
    577                                     0x0F08,
    578                                     0, NULL,   // No incoming clusters to bind   0, NULL
    579                                     WALL_ONOFF_BINDOUTGLIST, bindingOUTClusters,
    580                                     FALSE );
   \   000159                ; Setup parameters for call to function ZDP_EndDeviceBindReq
   \   000159   75..00       MOV     ?V0 + 1,#0x0
   \   00015C   78..         MOV     R0,#?V0 + 1
   \   00015E   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000161   75....       MOV     ?V0 + 2,#bindingOUTClusters & 0xff
   \   000164   75....       MOV     ?V0 + 3,#(bindingOUTClusters >> 8) & 0xff
   \   000167   78..         MOV     R0,#?V0 + 2
   \   000169   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00016C   75..04       MOV     ?V0 + 1,#0x4
   \   00016F   78..         MOV     R0,#?V0 + 1
   \   000171   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000174   E4           CLR     A
   \   000175   F5..         MOV     ?V0 + 2,A
   \   000177   F5..         MOV     ?V0 + 3,A
   \   000179   78..         MOV     R0,#?V0 + 2
   \   00017B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00017E   75..00       MOV     ?V0 + 1,#0x0
   \   000181   78..         MOV     R0,#?V0 + 1
   \   000183   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000186   75..08       MOV     ?V0 + 2,#0x8
   \   000189   75..0F       MOV     ?V0 + 3,#0xf
   \   00018C   78..         MOV     R0,#?V0 + 2
   \   00018E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000191   7918         MOV     R1,#0x18
   \   000193   E9           MOV     A,R1
   \   000194   FE           MOV     R6,A
   \   000195   F9           MOV     R1,A
   \   000196                ; Setup parameters for call to function NLME_GetShortAddr
   \   000196   12....       LCALL   ??NLME_GetShortAddr?relay
   \   000199   EA           MOV     A,R2
   \   00019A   FC           MOV     R4,A
   \   00019B   EB           MOV     A,R3
   \   00019C   FD           MOV     R5,A
   \   00019D   EE           MOV     A,R6
   \   00019E   F9           MOV     R1,A
   \   00019F   FE           MOV     R6,A
   \   0001A0   7409         MOV     A,#0x9
   \   0001A2   12....       LCALL   ?XSTACK_DISP0_8
   \   0001A5   AA82         MOV     R2,DPL
   \   0001A7   AB83         MOV     R3,DPH
   \   0001A9   12....       LCALL   ??ZDP_EndDeviceBindReq?relay
   \   0001AC   7409         MOV     A,#0x9
   \   0001AE   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001B1   E9           MOV     A,R1
   \   0001B2   02....       LJMP    ??SampleApp_HandleKeys_1 & 0xFFFF
    581              
    582              }
    583              
    584            }
    585            else if ( keys &  HAL_KEY_SW_6 ) // 对应竖着一排的第二个按钮
   \                     ??SampleApp_HandleKeys_3:
   \   0001B5   EF           MOV     A,R7
   \   0001B6   A2E5         MOV     C,0xE0 /* A   */.5
   \   0001B8   4003         JC      $+5
   \   0001BA   02....       LJMP    ??SampleApp_HandleKeys_4 & 0xFFFF
    586            {
    587              if(P1_2==0 )
   \   0001BD   A292         MOV     C,0x90.2
   \   0001BF   5003         JNC     $+5
   \   0001C1   02....       LJMP    ??SampleApp_HandleKeys_1 & 0xFFFF
    588              {
    589                  HalLedBlink ( HAL_LED_2, 1, 50, 500 );
   \   0001C4                ; Setup parameters for call to function HalLedBlink
   \   0001C4   7CF4         MOV     R4,#-0xc
   \   0001C6   7D01         MOV     R5,#0x1
   \   0001C8   7B32         MOV     R3,#0x32
   \   0001CA   7A01         MOV     R2,#0x1
   \   0001CC   7902         MOV     R1,#0x2
   \   0001CE   12....       LCALL   ??HalLedBlink?relay
    590                  
    591                  dstAddr.addrMode = afAddr16Bit;
   \   0001D1   7408         MOV     A,#0x8
   \   0001D3   12....       LCALL   ?XSTACK_DISP0_8
   \   0001D6   7402         MOV     A,#0x2
   \   0001D8   F0           MOVX    @DPTR,A
    592                  dstAddr.addr.shortAddr = 0;   // Coordinator makes the match     
   \   0001D9   85..82       MOV     DPL,?XSP + 0
   \   0001DC   85..83       MOV     DPH,?XSP + 1
   \   0001DF   7400         MOV     A,#0x0
   \   0001E1   F0           MOVX    @DPTR,A
   \   0001E2   A3           INC     DPTR
   \   0001E3   7400         MOV     A,#0x0
   \   0001E5   F0           MOVX    @DPTR,A
    593                  ZDP_EndDeviceBindReq( &dstAddr, NLME_GetShortAddr(),
    594                                     SAMPLEAPP_ENDPOINT5,
    595                                     0x0F08,
    596                                     0, NULL,   // No incoming clusters to bind   0, NULL
    597                                     WALL_ONOFF_BINDOUTGLIST2, bindingOUTClusters2,
    598                                     FALSE );
   \   0001E6                ; Setup parameters for call to function ZDP_EndDeviceBindReq
   \   0001E6   75..00       MOV     ?V0 + 1,#0x0
   \   0001E9   78..         MOV     R0,#?V0 + 1
   \   0001EB   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0001EE   75....       MOV     ?V0 + 2,#bindingOUTClusters2 & 0xff
   \   0001F1   75....       MOV     ?V0 + 3,#(bindingOUTClusters2 >> 8) & 0xff
   \   0001F4   78..         MOV     R0,#?V0 + 2
   \   0001F6   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001F9   75..03       MOV     ?V0 + 1,#0x3
   \   0001FC   78..         MOV     R0,#?V0 + 1
   \   0001FE   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000201   E4           CLR     A
   \   000202   F5..         MOV     ?V0 + 2,A
   \   000204   F5..         MOV     ?V0 + 3,A
   \   000206   78..         MOV     R0,#?V0 + 2
   \   000208   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00020B   75..00       MOV     ?V0 + 1,#0x0
   \   00020E   78..         MOV     R0,#?V0 + 1
   \   000210   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000213   75..08       MOV     ?V0 + 2,#0x8
   \   000216   75..0F       MOV     ?V0 + 3,#0xf
   \   000219   78..         MOV     R0,#?V0 + 2
   \   00021B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00021E   7919         MOV     R1,#0x19
   \   000220   E9           MOV     A,R1
   \   000221   FE           MOV     R6,A
   \   000222   F9           MOV     R1,A
   \   000223                ; Setup parameters for call to function NLME_GetShortAddr
   \   000223   12....       LCALL   ??NLME_GetShortAddr?relay
   \   000226   EA           MOV     A,R2
   \   000227   FC           MOV     R4,A
   \   000228   EB           MOV     A,R3
   \   000229   FD           MOV     R5,A
   \   00022A   EE           MOV     A,R6
   \   00022B   F9           MOV     R1,A
   \   00022C   FE           MOV     R6,A
   \   00022D   7409         MOV     A,#0x9
   \   00022F   12....       LCALL   ?XSTACK_DISP0_8
   \   000232   AA82         MOV     R2,DPL
   \   000234   AB83         MOV     R3,DPH
   \   000236   12....       LCALL   ??ZDP_EndDeviceBindReq?relay
   \   000239   7409         MOV     A,#0x9
   \   00023B   12....       LCALL   ?DEALLOC_XSTACK8
   \   00023E   E9           MOV     A,R1
   \   00023F   02....       LJMP    ??SampleApp_HandleKeys_1 & 0xFFFF
    599              
    600              }
    601              
    602            }
    603            
    604            
    605              //初定，2次按键为申请加入网络，3次按键为软复位，4次按键为恢复出厂设置（暂时还没想好如何实现）
    606           else if ( keys &  HAL_KEY_SW_8 )
   \                     ??SampleApp_HandleKeys_4:
   \   000242   EF           MOV     A,R7
   \   000243   A2E7         MOV     C,0xE0 /* A   */.7
   \   000245   4003         JC      $+5
   \   000247   02....       LJMP    ??SampleApp_HandleKeys_1 & 0xFFFF
    607            {         
    608               if(key_double_flag==1)
   \   00024A   90....       MOV     DPTR,#key_double_flag
   \   00024D   E0           MOVX    A,@DPTR
   \   00024E   6401         XRL     A,#0x1
   \   000250   7005         JNZ     ??SampleApp_HandleKeys_5
    609              {
    610                //绑定
    611                if(P1_3 == 0)
   \   000252   E590         MOV     A,0x90
   \   000254   02....       LJMP    ??SampleApp_HandleKeys_6 & 0xFFFF
    612                {
    613                     
    614                }
    615           
    616              }
    617             
    618              else if(key_double_flag==4)
   \                     ??SampleApp_HandleKeys_5:
   \   000257   90....       MOV     DPTR,#key_double_flag
   \   00025A   E0           MOVX    A,@DPTR
   \   00025B   6404         XRL     A,#0x4
   \   00025D   7006         JNZ     ??SampleApp_HandleKeys_7
    619              {
    620                APPLY_TO_JOIN_OF_KEY();
   \   00025F                ; Setup parameters for call to function APPLY_TO_JOIN_OF_KEY
   \   00025F   12....       LCALL   ??APPLY_TO_JOIN_OF_KEY?relay
   \   000262   02....       LJMP    ??SampleApp_HandleKeys_6 & 0xFFFF
    621              }
    622              
    623              else if(key_double_flag==6)
   \                     ??SampleApp_HandleKeys_7:
   \   000265   90....       MOV     DPTR,#key_double_flag
   \   000268   E0           MOVX    A,@DPTR
   \   000269   6406         XRL     A,#0x6
   \   00026B   7049         JNZ     ??SampleApp_HandleKeys_8
    624              {
    625                if(devState==DEV_END_DEVICE) 
   \   00026D   90....       MOV     DPTR,#devState
   \   000270   E0           MOVX    A,@DPTR
   \   000271   6406         XRL     A,#0x6
   \   000273   6003         JZ      $+5
   \   000275   02....       LJMP    ??SampleApp_HandleKeys_6 & 0xFFFF
    626                {
    627                  HalLedBlink ( HAL_LED_1, 1, 50, 600 );//应许
   \   000278                ; Setup parameters for call to function HalLedBlink
   \   000278   7C58         MOV     R4,#0x58
   \   00027A   7D02         MOV     R5,#0x2
   \   00027C   7B32         MOV     R3,#0x32
   \   00027E   7A01         MOV     R2,#0x1
   \   000280   7901         MOV     R1,#0x1
   \   000282   12....       LCALL   ??HalLedBlink?relay
    628                  NLME_PermitJoiningRequest(180);
   \   000285                ; Setup parameters for call to function NLME_PermitJoiningRequest
   \   000285   79B4         MOV     R1,#-0x4c
   \   000287   12....       LCALL   ??NLME_PermitJoiningRequest?relay
   \   00028A   E9           MOV     A,R1
    629                  dstAddr.addrMode = AddrBroadcast;
   \   00028B   7408         MOV     A,#0x8
   \   00028D   12....       LCALL   ?XSTACK_DISP0_8
   \   000290   740F         MOV     A,#0xf
   \   000292   F0           MOVX    @DPTR,A
    630                  dstAddr.addr.shortAddr = 0XFFFC;   // Coordinator makes the match
   \   000293   85..82       MOV     DPL,?XSP + 0
   \   000296   85..83       MOV     DPH,?XSP + 1
   \   000299   74FC         MOV     A,#-0x4
   \   00029B   F0           MOVX    @DPTR,A
   \   00029C   A3           INC     DPTR
   \   00029D   74FF         MOV     A,#-0x1
   \   00029F   F0           MOVX    @DPTR,A
    631                  ZDP_MgmtPermitJoinReq( &dstAddr, 180, 1, 0);
   \   0002A0                ; Setup parameters for call to function ZDP_MgmtPermitJoinReq
   \   0002A0   7D00         MOV     R5,#0x0
   \   0002A2   7C01         MOV     R4,#0x1
   \   0002A4   79B4         MOV     R1,#-0x4c
   \   0002A6   85..82       MOV     DPL,?XSP + 0
   \   0002A9   85..83       MOV     DPH,?XSP + 1
   \   0002AC   AA82         MOV     R2,DPL
   \   0002AE   AB83         MOV     R3,DPH
   \   0002B0   12....       LCALL   ??ZDP_MgmtPermitJoinReq?relay
   \   0002B3   E9           MOV     A,R1
   \   0002B4   804C         SJMP    ??SampleApp_HandleKeys_6
    632                }
    633              }
    634              
    635              else if(key_double_flag==8)
   \                     ??SampleApp_HandleKeys_8:
   \   0002B6   90....       MOV     DPTR,#key_double_flag
   \   0002B9   E0           MOVX    A,@DPTR
   \   0002BA   6408         XRL     A,#0x8
   \   0002BC   7044         JNZ     ??SampleApp_HandleKeys_6
    636              {
    637                if(devState==DEV_END_DEVICE) 
   \   0002BE   90....       MOV     DPTR,#devState
   \   0002C1   E0           MOVX    A,@DPTR
   \   0002C2   6406         XRL     A,#0x6
   \   0002C4   703C         JNZ     ??SampleApp_HandleKeys_6
    638                {
    639                  HalLedBlink ( HAL_LED_1, 2, 50, 600 );//应许
   \   0002C6                ; Setup parameters for call to function HalLedBlink
   \   0002C6   7C58         MOV     R4,#0x58
   \   0002C8   7D02         MOV     R5,#0x2
   \   0002CA   7B32         MOV     R3,#0x32
   \   0002CC   7A02         MOV     R2,#0x2
   \   0002CE   7901         MOV     R1,#0x1
   \   0002D0   12....       LCALL   ??HalLedBlink?relay
    640                  NLME_PermitJoiningRequest(0);
   \   0002D3                ; Setup parameters for call to function NLME_PermitJoiningRequest
   \   0002D3   7900         MOV     R1,#0x0
   \   0002D5   12....       LCALL   ??NLME_PermitJoiningRequest?relay
   \   0002D8   E9           MOV     A,R1
    641                  dstAddr.addrMode = AddrBroadcast;
   \   0002D9   7408         MOV     A,#0x8
   \   0002DB   12....       LCALL   ?XSTACK_DISP0_8
   \   0002DE   740F         MOV     A,#0xf
   \   0002E0   F0           MOVX    @DPTR,A
    642                  dstAddr.addr.shortAddr = 0XFFFC;   // Coordinator makes the match
   \   0002E1   85..82       MOV     DPL,?XSP + 0
   \   0002E4   85..83       MOV     DPH,?XSP + 1
   \   0002E7   74FC         MOV     A,#-0x4
   \   0002E9   F0           MOVX    @DPTR,A
   \   0002EA   A3           INC     DPTR
   \   0002EB   74FF         MOV     A,#-0x1
   \   0002ED   F0           MOVX    @DPTR,A
    643                  ZDP_MgmtPermitJoinReq( &dstAddr, 0, 0, 0);
   \   0002EE                ; Setup parameters for call to function ZDP_MgmtPermitJoinReq
   \   0002EE   7D00         MOV     R5,#0x0
   \   0002F0   7C00         MOV     R4,#0x0
   \   0002F2   7900         MOV     R1,#0x0
   \   0002F4   85..82       MOV     DPL,?XSP + 0
   \   0002F7   85..83       MOV     DPH,?XSP + 1
   \   0002FA   AA82         MOV     R2,DPL
   \   0002FC   AB83         MOV     R3,DPH
   \   0002FE   12....       LCALL   ??ZDP_MgmtPermitJoinReq?relay
   \   000301   E9           MOV     A,R1
    644                }
    645              }
    646          
    647               if(key_hold_flag==1) 
   \                     ??SampleApp_HandleKeys_6:
   \   000302   90....       MOV     DPTR,#key_hold_flag
   \   000305   E0           MOVX    A,@DPTR
   \   000306   6401         XRL     A,#0x1
   \   000308   7027         JNZ     ??SampleApp_HandleKeys_1
    648              {   
    649                key_hold_flag=0;
   \   00030A   90....       MOV     DPTR,#key_hold_flag
   \   00030D   7400         MOV     A,#0x0
   \   00030F   F0           MOVX    @DPTR,A
    650                 HalLedBlink ( HAL_LED_1, 4, 50, 1000 );
   \   000310                ; Setup parameters for call to function HalLedBlink
   \   000310   7CE8         MOV     R4,#-0x18
   \   000312   7D03         MOV     R5,#0x3
   \   000314   7B32         MOV     R3,#0x32
   \   000316   7A04         MOV     R2,#0x4
   \   000318   7901         MOV     R1,#0x1
   \   00031A   12....       LCALL   ??HalLedBlink?relay
    651                RESTORE_TO_FACTORY();
   \   00031D                ; Setup parameters for call to function RESTORE_TO_FACTORY
   \   00031D   12....       LCALL   ??RESTORE_TO_FACTORY?relay
    652                osal_start_timerEx( SampleApp_TaskID,SAMPLEAPP_RESTORE_EVT,5000);
   \   000320                ; Setup parameters for call to function osal_start_timerEx
   \   000320   7C88         MOV     R4,#-0x78
   \   000322   7D13         MOV     R5,#0x13
   \   000324   7A10         MOV     R2,#0x10
   \   000326   7B00         MOV     R3,#0x0
   \   000328   90....       MOV     DPTR,#SampleApp_TaskID
   \   00032B   E0           MOVX    A,@DPTR
   \   00032C   F9           MOV     R1,A
   \   00032D   12....       LCALL   ??osal_start_timerEx?relay
   \   000330   E9           MOV     A,R1
    653               }
    654            }
    655            
    656          }
   \                     ??SampleApp_HandleKeys_1:
   \   000331   7409         MOV     A,#0x9
   \   000333   12....       LCALL   ?DEALLOC_XSTACK8
   \   000336   7F04         MOV     R7,#0x4
   \   000338   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   00033B                REQUIRE _A_P1
    657          
    658          
    659          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    660          void SampleApp_ProcessBINDINGMessage(afIncomingMSGPacket_t *pkt)
   \                     SampleApp_ProcessBINDINGMessage:
    661          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    662          
    663            
    664          }
   \   000000   02....       LJMP    ?BRET
    665          
    666          
    667          // 入网后添加函数

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    668          void USER_APP_JOIN_MSG(void)
   \                     USER_APP_JOIN_MSG:
    669          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    670              HalLedBlink ( HAL_LED_1, 1, 99, 2500 );//用BLINK模拟灯亮两秒后熄灭
   \   000005                ; Setup parameters for call to function HalLedBlink
   \   000005   7CC4         MOV     R4,#-0x3c
   \   000007   7D09         MOV     R5,#0x9
   \   000009   7B63         MOV     R3,#0x63
   \   00000B   7A01         MOV     R2,#0x1
   \   00000D   7901         MOV     R1,#0x1
   \   00000F   12....       LCALL   ??HalLedBlink?relay
    671              //NLME_SetPollRate( 2000 );//set the poll rate to quick ,and   
    672              NLME_SetPollRate( 5000 );//set the poll rate to quick ,and       
   \   000012                ; Setup parameters for call to function NLME_SetPollRate
   \   000012   7A88         MOV     R2,#-0x78
   \   000014   7B13         MOV     R3,#0x13
   \   000016   12....       LCALL   ??NLME_SetPollRate?relay
    673           
    674              DEEP_POLL_FLAG =0; 
   \   000019   90....       MOV     DPTR,#DEEP_POLL_FLAG
   \   00001C   7400         MOV     A,#0x0
   \   00001E   F0           MOVX    @DPTR,A
    675              HEART_NEED_ACK_FLAG =0;
   \   00001F   90....       MOV     DPTR,#HEART_NEED_ACK_FLAG
   \   000022   7400         MOV     A,#0x0
   \   000024   F0           MOVX    @DPTR,A
    676              Heart_mesg_count=0;
   \   000025   90....       MOV     DPTR,#Heart_mesg_count
   \   000028   7400         MOV     A,#0x0
   \   00002A   F0           MOVX    @DPTR,A
   \   00002B   A3           INC     DPTR
   \   00002C   7400         MOV     A,#0x0
   \   00002E   F0           MOVX    @DPTR,A
    677              
    678              
    679            
    680              
    681              uint8 *Sample_Cmd_shorAddr;
    682              Sample_Cmd_shorAddr=SampleApp_GetShortAddr();
   \   00002F                ; Setup parameters for call to function SampleApp_GetShortAddr
   \   00002F   12....       LCALL   ??SampleApp_GetShortAddr?relay
   \   000032   8A..         MOV     ?V0 + 0,R2
   \   000034   8B..         MOV     ?V0 + 1,R3
   \   000036   AE..         MOV     R6,?V0 + 0
   \   000038   AF..         MOV     R7,?V0 + 1
    683              SHORT_ADRESS[0]=*Sample_Cmd_shorAddr++;
   \   00003A   8E82         MOV     DPL,R6
   \   00003C   8F83         MOV     DPH,R7
   \   00003E   E0           MOVX    A,@DPTR
   \   00003F   90....       MOV     DPTR,#SHORT_ADRESS
   \   000042   F0           MOVX    @DPTR,A
   \   000043   8E82         MOV     DPL,R6
   \   000045   8F83         MOV     DPH,R7
   \   000047   A3           INC     DPTR
   \   000048   AE82         MOV     R6,DPL
   \   00004A   AF83         MOV     R7,DPH
    684              SHORT_ADRESS[1]=*Sample_Cmd_shorAddr++;
   \   00004C   8E82         MOV     DPL,R6
   \   00004E   8F83         MOV     DPH,R7
   \   000050   E0           MOVX    A,@DPTR
   \   000051   90....       MOV     DPTR,#SHORT_ADRESS + 1
   \   000054   F0           MOVX    @DPTR,A
   \   000055   8E82         MOV     DPL,R6
   \   000057   8F83         MOV     DPH,R7
   \   000059   A3           INC     DPTR
   \   00005A   AE82         MOV     R6,DPL
   \   00005C   AF83         MOV     R7,DPH
    685              SHORT_ADRESS[2]=*Sample_Cmd_shorAddr++;
   \   00005E   8E82         MOV     DPL,R6
   \   000060   8F83         MOV     DPH,R7
   \   000062   E0           MOVX    A,@DPTR
   \   000063   90....       MOV     DPTR,#SHORT_ADRESS + 2
   \   000066   F0           MOVX    @DPTR,A
   \   000067   8E82         MOV     DPL,R6
   \   000069   8F83         MOV     DPH,R7
   \   00006B   A3           INC     DPTR
   \   00006C   AE82         MOV     R6,DPL
   \   00006E   AF83         MOV     R7,DPH
    686              SHORT_ADRESS[3]=*Sample_Cmd_shorAddr;
   \   000070   8E82         MOV     DPL,R6
   \   000072   8F83         MOV     DPH,R7
   \   000074   E0           MOVX    A,@DPTR
   \   000075   90....       MOV     DPTR,#SHORT_ADRESS + 3
   \   000078   F0           MOVX    @DPTR,A
    687              osal_mem_free( shortddr_mem );
   \   000079                ; Setup parameters for call to function osal_mem_free
   \   000079   90....       MOV     DPTR,#shortddr_mem
   \   00007C   E0           MOVX    A,@DPTR
   \   00007D   FA           MOV     R2,A
   \   00007E   A3           INC     DPTR
   \   00007F   E0           MOVX    A,@DPTR
   \   000080   FB           MOV     R3,A
   \   000081   12....       LCALL   ??osal_mem_free?relay
    688              
    689          
    690            // USER自行添加入网后的操作代码
    691           
    692          }
   \   000084   7F02         MOV     R7,#0x2
   \   000086   02....       LJMP    ?BANKED_LEAVE_XDATA
    693          
    694          
    695          // 收到命令后添加函数
    696          // user_app_data 上位机发过来的有效数据 字母后面开始 13开始
    697          //user_rf_data 需要填入的返回数据数组

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    698          uint8 USER_APP_COMMAND(uint8 *user_app_data,uint8 *str)
   \                     USER_APP_COMMAND:
    699          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    700            uint8 active_len=0;
   \   000005   7900         MOV     R1,#0x0
    701            
    702              str[0] = '/';
   \   000007   8C82         MOV     DPL,R4
   \   000009   8D83         MOV     DPH,R5
   \   00000B   742F         MOV     A,#0x2f
   \   00000D   F0           MOVX    @DPTR,A
    703          
    704             CmdType = user_app_data[0];//窗帘设备命令类型 学习 使用
   \   00000E   8A82         MOV     DPL,R2
   \   000010   8B83         MOV     DPH,R3
   \   000012   E0           MOVX    A,@DPTR
   \   000013   90....       MOV     DPTR,#CmdType
   \   000016   F0           MOVX    @DPTR,A
    705             IRCodeIndex = (user_app_data[1]- '0')*100 +
    706                           (user_app_data[2]- '0')*10 +
    707                           (user_app_data[3]- '0');      //编码序号
   \   000017   8A82         MOV     DPL,R2
   \   000019   8B83         MOV     DPH,R3
   \   00001B   A3           INC     DPTR
   \   00001C   E0           MOVX    A,@DPTR
   \   00001D   FE           MOV     R6,A
   \   00001E   7F00         MOV     R7,#0x0
   \   000020   EE           MOV     A,R6
   \   000021   75F064       MOV     B,#0x64
   \   000024   A4           MUL     AB
   \   000025   CE           XCH     A,R6
   \   000026   A8F0         MOV     R0,B
   \   000028   75F000       MOV     B,#0x0
   \   00002B   A4           MUL     AB
   \   00002C   28           ADD     A,R0
   \   00002D   F8           MOV     R0,A
   \   00002E   75F064       MOV     B,#0x64
   \   000031   EF           MOV     A,R7
   \   000032   A4           MUL     AB
   \   000033   28           ADD     A,R0
   \   000034   FF           MOV     R7,A
   \   000035   8A82         MOV     DPL,R2
   \   000037   8B83         MOV     DPH,R3
   \   000039   A3           INC     DPTR
   \   00003A   A3           INC     DPTR
   \   00003B   E0           MOVX    A,@DPTR
   \   00003C   F5..         MOV     ?V0 + 0,A
   \   00003E   75..00       MOV     ?V0 + 1,#0x0
   \   000041   E5..         MOV     A,?V0 + 0
   \   000043   75F00A       MOV     B,#0xa
   \   000046   A4           MUL     AB
   \   000047   C5..         XCH     A,?V0 + 0
   \   000049   A8F0         MOV     R0,B
   \   00004B   75F000       MOV     B,#0x0
   \   00004E   A4           MUL     AB
   \   00004F   28           ADD     A,R0
   \   000050   F8           MOV     R0,A
   \   000051   75F00A       MOV     B,#0xa
   \   000054   E5..         MOV     A,?V0 + 1
   \   000056   A4           MUL     AB
   \   000057   28           ADD     A,R0
   \   000058   F5..         MOV     ?V0 + 1,A
   \   00005A   EE           MOV     A,R6
   \   00005B   25..         ADD     A,?V0 + 0
   \   00005D   FE           MOV     R6,A
   \   00005E   EF           MOV     A,R7
   \   00005F   35..         ADDC    A,?V0 + 1
   \   000061   FF           MOV     R7,A
   \   000062   8A82         MOV     DPL,R2
   \   000064   8B83         MOV     DPH,R3
   \   000066   A3           INC     DPTR
   \   000067   A3           INC     DPTR
   \   000068   A3           INC     DPTR
   \   000069   E0           MOVX    A,@DPTR
   \   00006A   F5..         MOV     ?V0 + 0,A
   \   00006C   75..00       MOV     ?V0 + 1,#0x0
   \   00006F   EE           MOV     A,R6
   \   000070   25..         ADD     A,?V0 + 0
   \   000072   FE           MOV     R6,A
   \   000073   EF           MOV     A,R7
   \   000074   35..         ADDC    A,?V0 + 1
   \   000076   FF           MOV     R7,A
   \   000077   EE           MOV     A,R6
   \   000078   2430         ADD     A,#0x30
   \   00007A   FE           MOV     R6,A
   \   00007B   EF           MOV     A,R7
   \   00007C   34EB         ADDC    A,#-0x15
   \   00007E   FF           MOV     R7,A
   \   00007F   90....       MOV     DPTR,#IRCodeIndex
   \   000082   EE           MOV     A,R6
   \   000083   F0           MOVX    @DPTR,A
   \   000084   A3           INC     DPTR
   \   000085   EF           MOV     A,R7
   \   000086   F0           MOVX    @DPTR,A
    708          
    709          
    710             if('1' == CmdType)		//'1' 表示学习
   \   000087   90....       MOV     DPTR,#CmdType
   \   00008A   E0           MOVX    A,@DPTR
   \   00008B   6431         XRL     A,#0x31
    711             {
    712              
    713               
    714             }
    715             else if('2' == CmdType)	//'2' 表示使用
    716             {   
    717               
    718               
    719             }
    720             str[1] = CmdType - '0';//数据回填
   \   00008D   90....       MOV     DPTR,#CmdType
   \   000090   E0           MOVX    A,@DPTR
   \   000091   24D0         ADD     A,#-0x30
   \   000093   8C82         MOV     DPL,R4
   \   000095   8D83         MOV     DPH,R5
   \   000097   A3           INC     DPTR
   \   000098   F0           MOVX    @DPTR,A
    721             str[3] = IRCodeIndex;//数据回填
   \   000099   90....       MOV     DPTR,#IRCodeIndex
   \   00009C   E0           MOVX    A,@DPTR
   \   00009D   FE           MOV     R6,A
   \   00009E   A3           INC     DPTR
   \   00009F   E0           MOVX    A,@DPTR
   \   0000A0   FF           MOV     R7,A
   \   0000A1   EE           MOV     A,R6
   \   0000A2   8C82         MOV     DPL,R4
   \   0000A4   8D83         MOV     DPH,R5
   \   0000A6   A3           INC     DPTR
   \   0000A7   A3           INC     DPTR
   \   0000A8   A3           INC     DPTR
   \   0000A9   F0           MOVX    @DPTR,A
    722             str[2] = IRCodeIndex >> 8;
   \   0000AA   90....       MOV     DPTR,#IRCodeIndex
   \   0000AD   E0           MOVX    A,@DPTR
   \   0000AE   FE           MOV     R6,A
   \   0000AF   A3           INC     DPTR
   \   0000B0   E0           MOVX    A,@DPTR
   \   0000B1   FF           MOV     R7,A
   \   0000B2   E4           CLR     A
   \   0000B3   EF           MOV     A,R7
   \   0000B4   FE           MOV     R6,A
   \   0000B5   8C82         MOV     DPL,R4
   \   0000B7   8D83         MOV     DPH,R5
   \   0000B9   A3           INC     DPTR
   \   0000BA   A3           INC     DPTR
   \   0000BB   F0           MOVX    @DPTR,A
    723             active_len=13;
   \   0000BC   790D         MOV     R1,#0xd
    724             return active_len;
   \   0000BE   7F02         MOV     R7,#0x2
   \   0000C0   02....       LJMP    ?BANKED_LEAVE_XDATA
    725          }
    726          
    727          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    728          void USER_SET_RS_MSG(void)//用户自行设置RS数据
   \                     USER_SET_RS_MSG:
    729          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    730              DEVICE_ID=34;
   \   000004   90....       MOV     DPTR,#DEVICE_ID
   \   000007   7422         MOV     A,#0x22
   \   000009   F0           MOVX    @DPTR,A
    731              DEFINED_CONTROL_CHAR='/';
   \   00000A   90....       MOV     DPTR,#DEFINED_CONTROL_CHAR
   \   00000D   742F         MOV     A,#0x2f
   \   00000F   F0           MOVX    @DPTR,A
    732              JOIN_ROLE=Send_Endvice;
   \   000010   90....       MOV     DPTR,#JOIN_ROLE
   \   000013   7401         MOV     A,#0x1
   \   000015   F0           MOVX    @DPTR,A
    733              
    734              RS_LEN = 4;
   \   000016   90....       MOV     DPTR,#RS_LEN
   \   000019   7404         MOV     A,#0x4
   \   00001B   F0           MOVX    @DPTR,A
    735              RS_STR[0]=0;// ;
   \   00001C   90....       MOV     DPTR,#RS_STR
   \   00001F   7400         MOV     A,#0x0
   \   000021   F0           MOVX    @DPTR,A
    736              RS_STR[1]=0;// ;
   \   000022   90....       MOV     DPTR,#RS_STR + 1
   \   000025   7400         MOV     A,#0x0
   \   000027   F0           MOVX    @DPTR,A
    737              RS_STR[2]=0;// ;
   \   000028   90....       MOV     DPTR,#RS_STR + 2
   \   00002B   7400         MOV     A,#0x0
   \   00002D   F0           MOVX    @DPTR,A
    738              RS_STR[3]=0;// ;
   \   00002E   90....       MOV     DPTR,#RS_STR + 3
   \   000031   7400         MOV     A,#0x0
   \   000033   F0           MOVX    @DPTR,A
    739              
    740              // 对于电池设备每次RS后面可以跟一个电池有电的标记，如果是有电的话
    741              
    742              active_battery_voltage=myApp_ReadBattery();
   \   000034                ; Setup parameters for call to function myApp_ReadBattery
   \   000034   12....       LCALL   ??myApp_ReadBattery?relay
   \   000037   90....       MOV     DPTR,#active_battery_voltage
   \   00003A   EA           MOV     A,R2
   \   00003B   F0           MOVX    @DPTR,A
   \   00003C   A3           INC     DPTR
   \   00003D   EB           MOV     A,R3
   \   00003E   F0           MOVX    @DPTR,A
    743              
    744              if(active_battery_voltage>265)
   \   00003F   90....       MOV     DPTR,#active_battery_voltage
   \   000042   C3           CLR     C
   \   000043   E0           MOVX    A,@DPTR
   \   000044   940A         SUBB    A,#0xa
   \   000046   A3           INC     DPTR
   \   000047   E0           MOVX    A,@DPTR
   \   000048   9401         SUBB    A,#0x1
   \   00004A   4017         JC      ??USER_SET_RS_MSG_0
    745              {
    746                BUTTERY_ALARM_BIT=0;
   \   00004C   90....       MOV     DPTR,#BUTTERY_ALARM_BIT
   \   00004F   7400         MOV     A,#0x0
   \   000051   F0           MOVX    @DPTR,A
    747                osal_start_timerEx( UserApp_TaskID, SAMPLEAPP_SEND_LOWBUTTERY_EVT,20000 );
   \   000052                ; Setup parameters for call to function osal_start_timerEx
   \   000052   7C20         MOV     R4,#0x20
   \   000054   7D4E         MOV     R5,#0x4e
   \   000056   7A04         MOV     R2,#0x4
   \   000058   7B00         MOV     R3,#0x0
   \   00005A   90....       MOV     DPTR,#UserApp_TaskID
   \   00005D   E0           MOVX    A,@DPTR
   \   00005E   F9           MOV     R1,A
   \   00005F   12....       LCALL   ??osal_start_timerEx?relay
   \   000062   E9           MOV     A,R1
    748              }
    749          }
   \                     ??USER_SET_RS_MSG_0:
   \   000063   D083         POP     DPH
   \   000065   D082         POP     DPL
   \   000067   02....       LJMP    ?BRET
    750          
    751          
    752          /*
    753           用户自行规划主动上报数据的格式。
    754          */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    755          void SampleApp_SendInMessage(void)
   \                     SampleApp_SendInMessage:
    756          { 
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 0
    757            uint8 *send_str;
    758            uint8 send_count=0;
   \   000005   75..00       MOV     ?V0 + 2,#0x0
    759            send_count = 10+5;
   \   000008   75..0F       MOV     ?V0 + 2,#0xf
    760            send_str = osal_mem_alloc(send_count);
   \   00000B                ; Setup parameters for call to function osal_mem_alloc
   \   00000B   85....       MOV     ?V0 + 0,?V0 + 2
   \   00000E   75..00       MOV     ?V0 + 1,#0x0
   \   000011   AA..         MOV     R2,?V0 + 0
   \   000013   AB..         MOV     R3,?V0 + 1
   \   000015   12....       LCALL   ??osal_mem_alloc?relay
   \   000018   8A..         MOV     ?V0 + 0,R2
   \   00001A   8B..         MOV     ?V0 + 1,R3
   \   00001C   AE..         MOV     R6,?V0 + 0
   \   00001E   AF..         MOV     R7,?V0 + 1
    761            
    762            USER_SEND_ADD_STR(send_str);  //\添加固定帧头
   \   000020                ; Setup parameters for call to function USER_SEND_ADD_STR
   \   000020   EE           MOV     A,R6
   \   000021   FA           MOV     R2,A
   \   000022   EF           MOV     A,R7
   \   000023   FB           MOV     R3,A
   \   000024   12....       LCALL   ??USER_SEND_ADD_STR?relay
    763          
    764             if(BUTTERY_LOW_FLAG==1)
   \   000027   90....       MOV     DPTR,#BUTTERY_LOW_FLAG
   \   00002A   E0           MOVX    A,@DPTR
   \   00002B   6401         XRL     A,#0x1
   \   00002D   7046         JNZ     ??SampleApp_SendInMessage_0
    765             {  
    766              send_str[9]=0xA1; 
   \   00002F   8E82         MOV     DPL,R6
   \   000031   8F83         MOV     DPH,R7
   \   000033   A3           INC     DPTR
   \   000034   A3           INC     DPTR
   \   000035   A3           INC     DPTR
   \   000036   A3           INC     DPTR
   \   000037   A3           INC     DPTR
   \   000038   A3           INC     DPTR
   \   000039   A3           INC     DPTR
   \   00003A   A3           INC     DPTR
   \   00003B   A3           INC     DPTR
   \   00003C   74A1         MOV     A,#-0x5f
   \   00003E   F0           MOVX    @DPTR,A
    767              send_str[10]=1;//1代表 电池告警标记位
   \   00003F   8E82         MOV     DPL,R6
   \   000041   8F83         MOV     DPH,R7
   \   000043   A3           INC     DPTR
   \   000044   A3           INC     DPTR
   \   000045   A3           INC     DPTR
   \   000046   A3           INC     DPTR
   \   000047   A3           INC     DPTR
   \   000048   A3           INC     DPTR
   \   000049   A3           INC     DPTR
   \   00004A   A3           INC     DPTR
   \   00004B   A3           INC     DPTR
   \   00004C   A3           INC     DPTR
   \   00004D   7401         MOV     A,#0x1
   \   00004F   F0           MOVX    @DPTR,A
    768              send_str[11]=BUTTERY_ALARM_BIT;//active_battery_voltage;//1; //代表 电池告警事件
   \   000050   90....       MOV     DPTR,#BUTTERY_ALARM_BIT
   \   000053   E0           MOVX    A,@DPTR
   \   000054   C0E0         PUSH    A
   \   000056   EE           MOV     A,R6
   \   000057   240B         ADD     A,#0xb
   \   000059   F582         MOV     DPL,A
   \   00005B   EF           MOV     A,R7
   \   00005C   3400         ADDC    A,#0x0
   \   00005E   F583         MOV     DPH,A
   \   000060   D0E0         POP     A
   \   000062   F0           MOVX    @DPTR,A
    769              BUTTERY_LOW_FLAG = 0;
   \   000063   90....       MOV     DPTR,#BUTTERY_LOW_FLAG
   \   000066   7400         MOV     A,#0x0
   \   000068   F0           MOVX    @DPTR,A
    770              USER_APP_SEND_IN(12,send_str);//发送出数据
   \   000069                ; Setup parameters for call to function USER_APP_SEND_IN
   \   000069   EE           MOV     A,R6
   \   00006A   FA           MOV     R2,A
   \   00006B   EF           MOV     A,R7
   \   00006C   FB           MOV     R3,A
   \   00006D   790C         MOV     R1,#0xc
   \   00006F   12....       LCALL   ??USER_APP_SEND_IN?relay
   \   000072   02....       LJMP    ??SampleApp_SendInMessage_1 & 0xFFFF
    771             }
    772             else
    773             {
    774               send_str[9]='/';
   \                     ??SampleApp_SendInMessage_0:
   \   000075   8E82         MOV     DPL,R6
   \   000077   8F83         MOV     DPH,R7
   \   000079   A3           INC     DPTR
   \   00007A   A3           INC     DPTR
   \   00007B   A3           INC     DPTR
   \   00007C   A3           INC     DPTR
   \   00007D   A3           INC     DPTR
   \   00007E   A3           INC     DPTR
   \   00007F   A3           INC     DPTR
   \   000080   A3           INC     DPTR
   \   000081   A3           INC     DPTR
   \   000082   742F         MOV     A,#0x2f
   \   000084   F0           MOVX    @DPTR,A
    775               if(screen_flag == 1)
   \   000085   90....       MOV     DPTR,#screen_flag
   \   000088   E0           MOVX    A,@DPTR
   \   000089   6401         XRL     A,#0x1
   \   00008B   703B         JNZ     ??SampleApp_SendInMessage_2
    776               {
    777                 send_str[10]= 1;
   \   00008D   8E82         MOV     DPL,R6
   \   00008F   8F83         MOV     DPH,R7
   \   000091   A3           INC     DPTR
   \   000092   A3           INC     DPTR
   \   000093   A3           INC     DPTR
   \   000094   A3           INC     DPTR
   \   000095   A3           INC     DPTR
   \   000096   A3           INC     DPTR
   \   000097   A3           INC     DPTR
   \   000098   A3           INC     DPTR
   \   000099   A3           INC     DPTR
   \   00009A   A3           INC     DPTR
   \   00009B   7401         MOV     A,#0x1
   \   00009D   F0           MOVX    @DPTR,A
    778                 send_str[11]= 0;
   \   00009E   EE           MOV     A,R6
   \   00009F   240B         ADD     A,#0xb
   \   0000A1   F582         MOV     DPL,A
   \   0000A3   EF           MOV     A,R7
   \   0000A4   3400         ADDC    A,#0x0
   \   0000A6   F583         MOV     DPH,A
   \   0000A8   7400         MOV     A,#0x0
   \   0000AA   F0           MOVX    @DPTR,A
    779                 send_str[12]= 0;
   \   0000AB   EE           MOV     A,R6
   \   0000AC   240C         ADD     A,#0xc
   \   0000AE   F582         MOV     DPL,A
   \   0000B0   EF           MOV     A,R7
   \   0000B1   3400         ADDC    A,#0x0
   \   0000B3   F583         MOV     DPH,A
   \   0000B5   7400         MOV     A,#0x0
   \   0000B7   F0           MOVX    @DPTR,A
    780                 send_str[13]= 0;
   \   0000B8   EE           MOV     A,R6
   \   0000B9   240D         ADD     A,#0xd
   \   0000BB   F582         MOV     DPL,A
   \   0000BD   EF           MOV     A,R7
   \   0000BE   3400         ADDC    A,#0x0
   \   0000C0   F583         MOV     DPH,A
   \   0000C2   7400         MOV     A,#0x0
   \   0000C4   F0           MOVX    @DPTR,A
   \   0000C5   02....       LJMP    ??SampleApp_SendInMessage_3 & 0xFFFF
    781                 
    782               }
    783               else if(screen_flag == 2)
   \                     ??SampleApp_SendInMessage_2:
   \   0000C8   90....       MOV     DPTR,#screen_flag
   \   0000CB   E0           MOVX    A,@DPTR
   \   0000CC   6402         XRL     A,#0x2
   \   0000CE   703B         JNZ     ??SampleApp_SendInMessage_4
    784               {
    785                 send_str[10]= 0;
   \   0000D0   8E82         MOV     DPL,R6
   \   0000D2   8F83         MOV     DPH,R7
   \   0000D4   A3           INC     DPTR
   \   0000D5   A3           INC     DPTR
   \   0000D6   A3           INC     DPTR
   \   0000D7   A3           INC     DPTR
   \   0000D8   A3           INC     DPTR
   \   0000D9   A3           INC     DPTR
   \   0000DA   A3           INC     DPTR
   \   0000DB   A3           INC     DPTR
   \   0000DC   A3           INC     DPTR
   \   0000DD   A3           INC     DPTR
   \   0000DE   7400         MOV     A,#0x0
   \   0000E0   F0           MOVX    @DPTR,A
    786                 send_str[11]= 1;
   \   0000E1   EE           MOV     A,R6
   \   0000E2   240B         ADD     A,#0xb
   \   0000E4   F582         MOV     DPL,A
   \   0000E6   EF           MOV     A,R7
   \   0000E7   3400         ADDC    A,#0x0
   \   0000E9   F583         MOV     DPH,A
   \   0000EB   7401         MOV     A,#0x1
   \   0000ED   F0           MOVX    @DPTR,A
    787                 send_str[12]= 0;
   \   0000EE   EE           MOV     A,R6
   \   0000EF   240C         ADD     A,#0xc
   \   0000F1   F582         MOV     DPL,A
   \   0000F3   EF           MOV     A,R7
   \   0000F4   3400         ADDC    A,#0x0
   \   0000F6   F583         MOV     DPH,A
   \   0000F8   7400         MOV     A,#0x0
   \   0000FA   F0           MOVX    @DPTR,A
    788                 send_str[13]= 0;
   \   0000FB   EE           MOV     A,R6
   \   0000FC   240D         ADD     A,#0xd
   \   0000FE   F582         MOV     DPL,A
   \   000100   EF           MOV     A,R7
   \   000101   3400         ADDC    A,#0x0
   \   000103   F583         MOV     DPH,A
   \   000105   7400         MOV     A,#0x0
   \   000107   F0           MOVX    @DPTR,A
   \   000108   02....       LJMP    ??SampleApp_SendInMessage_3 & 0xFFFF
    789               }
    790               else if(screen_flag == 3)
   \                     ??SampleApp_SendInMessage_4:
   \   00010B   90....       MOV     DPTR,#screen_flag
   \   00010E   E0           MOVX    A,@DPTR
   \   00010F   6403         XRL     A,#0x3
   \   000111   703A         JNZ     ??SampleApp_SendInMessage_5
    791               {
    792                 send_str[10]= 0;
   \   000113   8E82         MOV     DPL,R6
   \   000115   8F83         MOV     DPH,R7
   \   000117   A3           INC     DPTR
   \   000118   A3           INC     DPTR
   \   000119   A3           INC     DPTR
   \   00011A   A3           INC     DPTR
   \   00011B   A3           INC     DPTR
   \   00011C   A3           INC     DPTR
   \   00011D   A3           INC     DPTR
   \   00011E   A3           INC     DPTR
   \   00011F   A3           INC     DPTR
   \   000120   A3           INC     DPTR
   \   000121   7400         MOV     A,#0x0
   \   000123   F0           MOVX    @DPTR,A
    793                 send_str[11]= 0;
   \   000124   EE           MOV     A,R6
   \   000125   240B         ADD     A,#0xb
   \   000127   F582         MOV     DPL,A
   \   000129   EF           MOV     A,R7
   \   00012A   3400         ADDC    A,#0x0
   \   00012C   F583         MOV     DPH,A
   \   00012E   7400         MOV     A,#0x0
   \   000130   F0           MOVX    @DPTR,A
    794                 send_str[12]= 1;
   \   000131   EE           MOV     A,R6
   \   000132   240C         ADD     A,#0xc
   \   000134   F582         MOV     DPL,A
   \   000136   EF           MOV     A,R7
   \   000137   3400         ADDC    A,#0x0
   \   000139   F583         MOV     DPH,A
   \   00013B   7401         MOV     A,#0x1
   \   00013D   F0           MOVX    @DPTR,A
    795                 send_str[13]= 0;
   \   00013E   EE           MOV     A,R6
   \   00013F   240D         ADD     A,#0xd
   \   000141   F582         MOV     DPL,A
   \   000143   EF           MOV     A,R7
   \   000144   3400         ADDC    A,#0x0
   \   000146   F583         MOV     DPH,A
   \   000148   7400         MOV     A,#0x0
   \   00014A   F0           MOVX    @DPTR,A
   \   00014B   8040         SJMP    ??SampleApp_SendInMessage_3
    796                 
    797               }
    798               else if(screen_flag == 4)
   \                     ??SampleApp_SendInMessage_5:
   \   00014D   90....       MOV     DPTR,#screen_flag
   \   000150   E0           MOVX    A,@DPTR
   \   000151   6404         XRL     A,#0x4
   \   000153   7038         JNZ     ??SampleApp_SendInMessage_3
    799               {
    800                 send_str[10]= 0;
   \   000155   8E82         MOV     DPL,R6
   \   000157   8F83         MOV     DPH,R7
   \   000159   A3           INC     DPTR
   \   00015A   A3           INC     DPTR
   \   00015B   A3           INC     DPTR
   \   00015C   A3           INC     DPTR
   \   00015D   A3           INC     DPTR
   \   00015E   A3           INC     DPTR
   \   00015F   A3           INC     DPTR
   \   000160   A3           INC     DPTR
   \   000161   A3           INC     DPTR
   \   000162   A3           INC     DPTR
   \   000163   7400         MOV     A,#0x0
   \   000165   F0           MOVX    @DPTR,A
    801                 send_str[11]= 0;
   \   000166   EE           MOV     A,R6
   \   000167   240B         ADD     A,#0xb
   \   000169   F582         MOV     DPL,A
   \   00016B   EF           MOV     A,R7
   \   00016C   3400         ADDC    A,#0x0
   \   00016E   F583         MOV     DPH,A
   \   000170   7400         MOV     A,#0x0
   \   000172   F0           MOVX    @DPTR,A
    802                 send_str[12]= 0;
   \   000173   EE           MOV     A,R6
   \   000174   240C         ADD     A,#0xc
   \   000176   F582         MOV     DPL,A
   \   000178   EF           MOV     A,R7
   \   000179   3400         ADDC    A,#0x0
   \   00017B   F583         MOV     DPH,A
   \   00017D   7400         MOV     A,#0x0
   \   00017F   F0           MOVX    @DPTR,A
    803                 send_str[13]= 1;
   \   000180   EE           MOV     A,R6
   \   000181   240D         ADD     A,#0xd
   \   000183   F582         MOV     DPL,A
   \   000185   EF           MOV     A,R7
   \   000186   3400         ADDC    A,#0x0
   \   000188   F583         MOV     DPH,A
   \   00018A   7401         MOV     A,#0x1
   \   00018C   F0           MOVX    @DPTR,A
    804               }
    805               //ACK_FLAG = 1;
    806               USER_APP_SEND_IN(14,send_str);//发送出数据
   \                     ??SampleApp_SendInMessage_3:
   \   00018D                ; Setup parameters for call to function USER_APP_SEND_IN
   \   00018D   EE           MOV     A,R6
   \   00018E   FA           MOV     R2,A
   \   00018F   EF           MOV     A,R7
   \   000190   FB           MOV     R3,A
   \   000191   790E         MOV     R1,#0xe
   \   000193   12....       LCALL   ??USER_APP_SEND_IN?relay
    807               //NLME_SetPollRate( 1000 );
    808             }   
    809            osal_mem_free( send_str );
   \                     ??SampleApp_SendInMessage_1:
   \   000196                ; Setup parameters for call to function osal_mem_free
   \   000196   EE           MOV     A,R6
   \   000197   FA           MOV     R2,A
   \   000198   EF           MOV     A,R7
   \   000199   FB           MOV     R3,A
   \   00019A   12....       LCALL   ??osal_mem_free?relay
    810          }
   \   00019D   7F03         MOV     R7,#0x3
   \   00019F   02....       LJMP    ?BANKED_LEAVE_XDATA
    811          
    812          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    813          void User_APP_Drive_init(void)
   \                     User_APP_Drive_init:
    814          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    815            HAL_IO_CONFIG_INIT();
   \   000000   43FE01       ORL     0xfe,#0x1
   \   000003   43FD40       ORL     0xfd,#0x40
   \   000006   D290         SETB    0x90.0
   \   000008   D286         SETB    0x80.6
    816            
    817          }
   \   00000A   02....       LJMP    ?BRET
   \   00000D                REQUIRE P1DIR
   \   00000D                REQUIRE P0DIR
   \   00000D                REQUIRE _A_P1
   \   00000D                REQUIRE _A_P0
    818          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    819          uint8 READ_NETKEY() //读取入网状态按键的状态传递到应用层
   \                     READ_NETKEY:
    820          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    821          
    822            return HAL_PUSH_BUTTON1();
   \   000000   A292         MOV     C,0x90.2
   \   000002   E4           CLR     A
   \   000003   33           RLC     A
   \   000004   F9           MOV     R1,A
   \   000005   02....       LJMP    ?BRET
   \   000008                REQUIRE _A_P1
    823          }
    824          
    825          
    826          
    827          /*
    828          mode 0 关
    829          1 开
    830          2 切换
    831          */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    832          void LED_CHANGE(uint8 Position,uint8 Mode)// 设置LED函数
   \                     LED_CHANGE:
    833          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    834           switch (Position )
   \   000000   E9           MOV     A,R1
   \   000001   14           DEC     A
   \   000002   6018         JZ      ??LED_CHANGE_0
   \   000004   14           DEC     A
   \   000005   603F         JZ      ??LED_CHANGE_1
   \   000007   24FE         ADD     A,#-0x2
   \   000009   6064         JZ      ??LED_CHANGE_2
   \   00000B   24FC         ADD     A,#-0x4
   \   00000D   7003         JNZ     $+5
   \   00000F   02....       LJMP    ??LED_CHANGE_3 & 0xFFFF
   \   000012   24F8         ADD     A,#-0x8
   \   000014   7003         JNZ     $+5
   \   000016   02....       LJMP    ??LED_CHANGE_4 & 0xFFFF
   \   000019   02....       LJMP    ??LED_CHANGE_5 & 0xFFFF
    835              {
    836                case HAL_LED_1:      
    837                  {
    838                   if(Mode==0 || Mode==1)
   \                     ??LED_CHANGE_0:
   \   00001C   EA           MOV     A,R2
   \   00001D   6005         JZ      ??LED_CHANGE_6
   \   00001F   7401         MOV     A,#0x1
   \   000021   6A           XRL     A,R2
   \   000022   7010         JNZ     ??LED_CHANGE_7
    839                   {
    840                    LED1_SBIT = LED1_POLARITY(Mode);
   \                     ??LED_CHANGE_6:
   \   000024   EA           MOV     A,R2
   \   000025   7004         JNZ     ??LED_CHANGE_8
   \   000027   7801         MOV     R0,#0x1
   \   000029   8002         SJMP    ??LED_CHANGE_9
   \                     ??LED_CHANGE_8:
   \   00002B   7800         MOV     R0,#0x0
   \                     ??LED_CHANGE_9:
   \   00002D   E8           MOV     A,R0
   \   00002E   A2E0         MOV     C,0xE0 /* A   */.0
   \   000030   9290         MOV     0x90.0,C
   \   000032   800F         SJMP    ??LED_CHANGE_10
    841                   }
    842                   else if(Mode==2)
   \                     ??LED_CHANGE_7:
   \   000034   7402         MOV     A,#0x2
   \   000036   6A           XRL     A,R2
   \   000037   700A         JNZ     ??LED_CHANGE_10
    843                   {
    844                    if (LED1_SBIT) 
   \   000039   A290         MOV     C,0x90.0
   \   00003B   5004         JNC     ??LED_CHANGE_11
    845                    { 
    846                      LED1_SBIT = 0; 
   \   00003D   C290         CLR     0x90.0
   \   00003F   8002         SJMP    ??LED_CHANGE_10
    847                    } 
    848                    else 
    849                    { 
    850                      LED1_SBIT = 1;
   \                     ??LED_CHANGE_11:
   \   000041   D290         SETB    0x90.0
    851                    } 
    852                   }
    853                  }   
    854                  break;     
   \                     ??LED_CHANGE_10:
   \   000043   02....       LJMP    ??LED_CHANGE_5 & 0xFFFF
    855                  
    856                  case HAL_LED_2:      
    857                  {
    858                   if(Mode==0||Mode==1)
   \                     ??LED_CHANGE_1:
   \   000046   EA           MOV     A,R2
   \   000047   6005         JZ      ??LED_CHANGE_12
   \   000049   7401         MOV     A,#0x1
   \   00004B   6A           XRL     A,R2
   \   00004C   7010         JNZ     ??LED_CHANGE_13
    859                   {
    860                    LED2_SBIT = LED2_POLARITY(Mode);
   \                     ??LED_CHANGE_12:
   \   00004E   EA           MOV     A,R2
   \   00004F   7004         JNZ     ??LED_CHANGE_14
   \   000051   7801         MOV     R0,#0x1
   \   000053   8002         SJMP    ??LED_CHANGE_15
   \                     ??LED_CHANGE_14:
   \   000055   7800         MOV     R0,#0x0
   \                     ??LED_CHANGE_15:
   \   000057   E8           MOV     A,R0
   \   000058   A2E0         MOV     C,0xE0 /* A   */.0
   \   00005A   9286         MOV     0x80.6,C
   \   00005C   800F         SJMP    ??LED_CHANGE_16
    861                   }
    862                   else if(Mode==2)
   \                     ??LED_CHANGE_13:
   \   00005E   7402         MOV     A,#0x2
   \   000060   6A           XRL     A,R2
   \   000061   700A         JNZ     ??LED_CHANGE_16
    863                   {
    864                    if (LED1_SBIT) 
   \   000063   A290         MOV     C,0x90.0
   \   000065   5004         JNC     ??LED_CHANGE_17
    865                    { 
    866                      LED2_SBIT = 0; 
   \   000067   C286         CLR     0x80.6
   \   000069   807D         SJMP    ??LED_CHANGE_5
    867                    } 
    868                    else 
    869                    { 
    870                      LED2_SBIT = 1;
   \                     ??LED_CHANGE_17:
   \   00006B   D286         SETB    0x80.6
    871                    } 
    872                   }
    873                  }   
    874                  break;     
   \                     ??LED_CHANGE_16:
   \   00006D   8079         SJMP    ??LED_CHANGE_5
    875                  
    876                  case HAL_LED_3:      
    877                  {
    878                   if(Mode==0 || Mode==1)
   \                     ??LED_CHANGE_2:
   \   00006F   EA           MOV     A,R2
   \   000070   6005         JZ      ??LED_CHANGE_18
   \   000072   7401         MOV     A,#0x1
   \   000074   6A           XRL     A,R2
   \   000075   7010         JNZ     ??LED_CHANGE_19
    879                   {
    880                    LED3_SBIT = LED3_POLARITY(Mode);
   \                     ??LED_CHANGE_18:
   \   000077   EA           MOV     A,R2
   \   000078   7004         JNZ     ??LED_CHANGE_20
   \   00007A   7801         MOV     R0,#0x1
   \   00007C   8002         SJMP    ??LED_CHANGE_21
   \                     ??LED_CHANGE_20:
   \   00007E   7800         MOV     R0,#0x0
   \                     ??LED_CHANGE_21:
   \   000080   E8           MOV     A,R0
   \   000081   A2E0         MOV     C,0xE0 /* A   */.0
   \   000083   9286         MOV     0x80.6,C
   \   000085   8061         SJMP    ??LED_CHANGE_5
    881                   }
    882                   else if(Mode==2)
   \                     ??LED_CHANGE_19:
   \   000087   7402         MOV     A,#0x2
   \   000089   6A           XRL     A,R2
   \   00008A   705C         JNZ     ??LED_CHANGE_5
    883                   {
    884                    if (LED3_SBIT) 
   \   00008C   A286         MOV     C,0x80.6
   \   00008E   5004         JNC     ??LED_CHANGE_22
    885                    { 
    886                      LED3_SBIT = 0; 
   \   000090   C286         CLR     0x80.6
   \   000092   8054         SJMP    ??LED_CHANGE_5
    887                    } 
    888                    else 
    889                    { 
    890                      LED3_SBIT = 1;
   \                     ??LED_CHANGE_22:
   \   000094   D286         SETB    0x80.6
    891                    } 
    892                   }
    893                  }   
    894                  break;  
   \   000096   8050         SJMP    ??LED_CHANGE_5
    895                  
    896                    case HAL_LED_4:      
    897                  {
    898                   if(Mode==0 || Mode==1)
   \                     ??LED_CHANGE_3:
   \   000098   EA           MOV     A,R2
   \   000099   6005         JZ      ??LED_CHANGE_23
   \   00009B   7401         MOV     A,#0x1
   \   00009D   6A           XRL     A,R2
   \   00009E   7010         JNZ     ??LED_CHANGE_24
    899                   {
    900                    LED4_SBIT = LED4_POLARITY(Mode);
   \                     ??LED_CHANGE_23:
   \   0000A0   EA           MOV     A,R2
   \   0000A1   7004         JNZ     ??LED_CHANGE_25
   \   0000A3   7801         MOV     R0,#0x1
   \   0000A5   8002         SJMP    ??LED_CHANGE_26
   \                     ??LED_CHANGE_25:
   \   0000A7   7800         MOV     R0,#0x0
   \                     ??LED_CHANGE_26:
   \   0000A9   E8           MOV     A,R0
   \   0000AA   A2E0         MOV     C,0xE0 /* A   */.0
   \   0000AC   9286         MOV     0x80.6,C
   \   0000AE   8038         SJMP    ??LED_CHANGE_5
    901                   }
    902                   else if(Mode==2)
   \                     ??LED_CHANGE_24:
   \   0000B0   7402         MOV     A,#0x2
   \   0000B2   6A           XRL     A,R2
   \   0000B3   7033         JNZ     ??LED_CHANGE_5
    903                   {
    904                    if (LED4_SBIT) 
   \   0000B5   A286         MOV     C,0x80.6
   \   0000B7   5004         JNC     ??LED_CHANGE_27
    905                    { 
    906                      LED4_SBIT = 0; 
   \   0000B9   C286         CLR     0x80.6
   \   0000BB   802B         SJMP    ??LED_CHANGE_5
    907                    } 
    908                    else 
    909                    { 
    910                      LED4_SBIT = 1;
   \                     ??LED_CHANGE_27:
   \   0000BD   D286         SETB    0x80.6
    911                    } 
    912                   }
    913                  }   
    914                  break;
   \   0000BF   8027         SJMP    ??LED_CHANGE_5
    915                  
    916                    case HAL_LED_5:      
    917                  {
    918                   if(Mode==0 || Mode==1)
   \                     ??LED_CHANGE_4:
   \   0000C1   EA           MOV     A,R2
   \   0000C2   6005         JZ      ??LED_CHANGE_28
   \   0000C4   7401         MOV     A,#0x1
   \   0000C6   6A           XRL     A,R2
   \   0000C7   7010         JNZ     ??LED_CHANGE_29
    919                   {
    920                    LED5_SBIT = LED5_POLARITY(Mode);
   \                     ??LED_CHANGE_28:
   \   0000C9   EA           MOV     A,R2
   \   0000CA   7004         JNZ     ??LED_CHANGE_30
   \   0000CC   7801         MOV     R0,#0x1
   \   0000CE   8002         SJMP    ??LED_CHANGE_31
   \                     ??LED_CHANGE_30:
   \   0000D0   7800         MOV     R0,#0x0
   \                     ??LED_CHANGE_31:
   \   0000D2   E8           MOV     A,R0
   \   0000D3   A2E0         MOV     C,0xE0 /* A   */.0
   \   0000D5   9286         MOV     0x80.6,C
   \   0000D7   800F         SJMP    ??LED_CHANGE_5
    921                   }
    922                   else if(Mode==2)
   \                     ??LED_CHANGE_29:
   \   0000D9   7402         MOV     A,#0x2
   \   0000DB   6A           XRL     A,R2
   \   0000DC   700A         JNZ     ??LED_CHANGE_5
    923                   {
    924                    if (LED5_SBIT) 
   \   0000DE   A286         MOV     C,0x80.6
   \   0000E0   5004         JNC     ??LED_CHANGE_32
    925                    { 
    926                      LED5_SBIT = 0; 
   \   0000E2   C286         CLR     0x80.6
   \   0000E4   8002         SJMP    ??LED_CHANGE_5
    927                    } 
    928                    else 
    929                    { 
    930                      LED5_SBIT = 1;
   \                     ??LED_CHANGE_32:
   \   0000E6   D286         SETB    0x80.6
    931                    } 
    932                   }
    933                  }   
    934                  break;
    935          
    936              default:
    937                break;
    938              }
    939          }
   \                     ??LED_CHANGE_5:
   \   0000E8   02....       LJMP    ?BRET
   \   0000EB                REQUIRE _A_P1
   \   0000EB                REQUIRE _A_P0
    940          
    941          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    942          void USER_ZDO_JOINING_MSG(void)
   \                     USER_ZDO_JOINING_MSG:
    943          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    944           HalLedBlink ( HAL_LED_1, 1, 30, 500 );
   \   000004                ; Setup parameters for call to function HalLedBlink
   \   000004   7CF4         MOV     R4,#-0xc
   \   000006   7D01         MOV     R5,#0x1
   \   000008   7B1E         MOV     R3,#0x1e
   \   00000A   7A01         MOV     R2,#0x1
   \   00000C   7901         MOV     R1,#0x1
   \   00000E   12....       LCALL   ??HalLedBlink?relay
    945          }
   \   000011   D083         POP     DPH
   \   000013   D082         POP     DPL
   \   000015   02....       LJMP    ?BRET
    946          //RS后面是否要处理相关事件或者应用，在此进行处理

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    947          void USER_AFTER_RS_MSG(void)
   \                     USER_AFTER_RS_MSG:
    948          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    949          
    950          
    951          }
   \   000000   02....       LJMP    ?BRET
    952          
    953          
    954          //跟随心跳1分钟一次，可以用来做电池检测，如果需要的话

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    955          void USER_MAYBE_BUTTERY_MSG(void)
   \                     USER_MAYBE_BUTTERY_MSG:
    956          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    957                 if(Heart_mesg_count%60==0) //暂定半小时使用ACK一次，如果失败了则重新入网 gai 30
   \   000005   90....       MOV     DPTR,#Heart_mesg_count
   \   000008   E0           MOVX    A,@DPTR
   \   000009   F8           MOV     R0,A
   \   00000A   A3           INC     DPTR
   \   00000B   E0           MOVX    A,@DPTR
   \   00000C   F9           MOV     R1,A
   \   00000D   7A3C         MOV     R2,#0x3c
   \   00000F   7B00         MOV     R3,#0x0
   \   000011   12....       LCALL   ?US_DIV_MOD
   \   000014   8A..         MOV     ?V0 + 0,R2
   \   000016   8B..         MOV     ?V0 + 1,R3
   \   000018   E5..         MOV     A,?V0 + 0
   \   00001A   45..         ORL     A,?V0 + 1
   \   00001C   704D         JNZ     ??USER_MAYBE_BUTTERY_MSG_0
    958                {
    959                    HEART_NEED_ACK_FLAG =1;
   \   00001E   90....       MOV     DPTR,#HEART_NEED_ACK_FLAG
   \   000021   7401         MOV     A,#0x1
   \   000023   F0           MOVX    @DPTR,A
    960                    active_battery_voltage=myApp_ReadBattery();
   \   000024                ; Setup parameters for call to function myApp_ReadBattery
   \   000024   12....       LCALL   ??myApp_ReadBattery?relay
   \   000027   90....       MOV     DPTR,#active_battery_voltage
   \   00002A   EA           MOV     A,R2
   \   00002B   F0           MOVX    @DPTR,A
   \   00002C   A3           INC     DPTR
   \   00002D   EB           MOV     A,R3
   \   00002E   F0           MOVX    @DPTR,A
    961                    
    962                    if(active_battery_voltage<=265)
   \   00002F   90....       MOV     DPTR,#active_battery_voltage
   \   000032   C3           CLR     C
   \   000033   E0           MOVX    A,@DPTR
   \   000034   940A         SUBB    A,#0xa
   \   000036   A3           INC     DPTR
   \   000037   E0           MOVX    A,@DPTR
   \   000038   9401         SUBB    A,#0x1
   \   00003A   5029         JNC     ??USER_MAYBE_BUTTERY_MSG_1
    963                    {
    964                      if( (devState==DEV_END_DEVICE) || (devState==DEV_ROUTER) )
   \   00003C   90....       MOV     DPTR,#devState
   \   00003F   E0           MOVX    A,@DPTR
   \   000040   6406         XRL     A,#0x6
   \   000042   6008         JZ      ??USER_MAYBE_BUTTERY_MSG_2
   \   000044   90....       MOV     DPTR,#devState
   \   000047   E0           MOVX    A,@DPTR
   \   000048   6407         XRL     A,#0x7
   \   00004A   701F         JNZ     ??USER_MAYBE_BUTTERY_MSG_0
    965                      {
    966                      BUTTERY_ALARM_BIT=1;
   \                     ??USER_MAYBE_BUTTERY_MSG_2:
   \   00004C   90....       MOV     DPTR,#BUTTERY_ALARM_BIT
   \   00004F   7401         MOV     A,#0x1
   \   000051   F0           MOVX    @DPTR,A
    967                      osal_start_timerEx( UserApp_TaskID, SAMPLEAPP_SEND_LOWBUTTERY_EVT,
    968                                        20000 );
   \   000052                ; Setup parameters for call to function osal_start_timerEx
   \   000052   7C20         MOV     R4,#0x20
   \   000054   7D4E         MOV     R5,#0x4e
   \   000056   7A04         MOV     R2,#0x4
   \   000058   7B00         MOV     R3,#0x0
   \   00005A   90....       MOV     DPTR,#UserApp_TaskID
   \   00005D   E0           MOVX    A,@DPTR
   \   00005E   F9           MOV     R1,A
   \   00005F   12....       LCALL   ??osal_start_timerEx?relay
   \   000062   E9           MOV     A,R1
   \   000063   8006         SJMP    ??USER_MAYBE_BUTTERY_MSG_0
    969                      }
    970                      
    971                    }
    972                    else
    973                    {
    974                      BUTTERY_ALARM_BIT=0;
   \                     ??USER_MAYBE_BUTTERY_MSG_1:
   \   000065   90....       MOV     DPTR,#BUTTERY_ALARM_BIT
   \   000068   7400         MOV     A,#0x0
   \   00006A   F0           MOVX    @DPTR,A
    975                    }
    976                   
    977              }
    978                Heart_mesg_count++;
   \                     ??USER_MAYBE_BUTTERY_MSG_0:
   \   00006B   90....       MOV     DPTR,#Heart_mesg_count
   \   00006E   E0           MOVX    A,@DPTR
   \   00006F   2401         ADD     A,#0x1
   \   000071   F0           MOVX    @DPTR,A
   \   000072   A3           INC     DPTR
   \   000073   E0           MOVX    A,@DPTR
   \   000074   3400         ADDC    A,#0x0
   \   000076   F0           MOVX    @DPTR,A
    979           
    980          }
   \   000077   7F02         MOV     R7,#0x2
   \   000079   02....       LJMP    ?BANKED_LEAVE_XDATA
    981          
    982          
    983          // 入网成功后，进入正常模式后设置设备的POLL RATE时间,红外人体修改为10S，维持半分钟

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    984          void USER_SET_NOMAL_POLL_TIME(void)
   \                     USER_SET_NOMAL_POLL_TIME:
    985          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    986            NORMAL_POLL_TIME=18000;
   \   000004   90....       MOV     DPTR,#NORMAL_POLL_TIME
   \   000007   7450         MOV     A,#0x50
   \   000009   F0           MOVX    @DPTR,A
   \   00000A   A3           INC     DPTR
   \   00000B   7446         MOV     A,#0x46
   \   00000D   F0           MOVX    @DPTR,A
    987           
    988            //poll_count=0;
    989            //osal_start_timerEx( UserApp_TaskID, RE_SET_POLL_EVT,60000);//10分钟
    990          } 
   \   00000E   D083         POP     DPH
   \   000010   D082         POP     DPL
   \   000012   02....       LJMP    ?BRET
    991          
    992          
    993          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    994          void SampleAPP_ProcessZDOMsgs( zdoIncomingMsg_t *inMsg )
   \                     SampleAPP_ProcessZDOMsgs:
    995          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    996            switch ( inMsg->clusterID )
   \   000009   EE           MOV     A,R6
   \   00000A   240C         ADD     A,#0xc
   \   00000C   F582         MOV     DPL,A
   \   00000E   EF           MOV     A,R7
   \   00000F   3400         ADDC    A,#0x0
   \   000011   F583         MOV     DPH,A
   \   000013   E0           MOVX    A,@DPTR
   \   000014   6420         XRL     A,#0x20
   \   000016   7004         JNZ     ??SampleAPP_ProcessZDOMsgs_0
   \   000018   A3           INC     DPTR
   \   000019   E0           MOVX    A,@DPTR
   \   00001A   6480         XRL     A,#0x80
   \                     ??SampleAPP_ProcessZDOMsgs_0:
   \   00001C   7031         JNZ     ??SampleAPP_ProcessZDOMsgs_1
    997            {
    998              case End_Device_Bind_rsp:
    999                if ( ZDO_ParseBindRsp( inMsg ) == ZSuccess )
   \   00001E   EE           MOV     A,R6
   \   00001F   2413         ADD     A,#0x13
   \   000021   F582         MOV     DPL,A
   \   000023   EF           MOV     A,R7
   \   000024   3400         ADDC    A,#0x0
   \   000026   F583         MOV     DPH,A
   \   000028   E0           MOVX    A,@DPTR
   \   000029   F8           MOV     R0,A
   \   00002A   A3           INC     DPTR
   \   00002B   E0           MOVX    A,@DPTR
   \   00002C   F583         MOV     DPH,A
   \   00002E   8882         MOV     DPL,R0
   \   000030   E0           MOVX    A,@DPTR
   \   000031   700F         JNZ     ??SampleAPP_ProcessZDOMsgs_2
   1000                {
   1001                 HalLedBlink ( HAL_LED_2, 3, 50, 1000 );
   \   000033                ; Setup parameters for call to function HalLedBlink
   \   000033   7CE8         MOV     R4,#-0x18
   \   000035   7D03         MOV     R5,#0x3
   \   000037   7B32         MOV     R3,#0x32
   \   000039   7A03         MOV     R2,#0x3
   \   00003B   7902         MOV     R1,#0x2
   \   00003D   12....       LCALL   ??HalLedBlink?relay
   \   000040   800D         SJMP    ??SampleAPP_ProcessZDOMsgs_1
   1002                }
   1003          
   1004                else
   1005                {
   1006                  HalLedBlink ( HAL_LED_2, 6, 50, 500 );
   \                     ??SampleAPP_ProcessZDOMsgs_2:
   \   000042                ; Setup parameters for call to function HalLedBlink
   \   000042   7CF4         MOV     R4,#-0xc
   \   000044   7D01         MOV     R5,#0x1
   \   000046   7B32         MOV     R3,#0x32
   \   000048   7A06         MOV     R2,#0x6
   \   00004A   7902         MOV     R1,#0x2
   \   00004C   12....       LCALL   ??HalLedBlink?relay
   1007                }
   1008                break;
   1009            }
   1010           
   1011          }
   \                     ??SampleAPP_ProcessZDOMsgs_1:
   \   00004F   7F01         MOV     R7,#0x1
   \   000051   02....       LJMP    ?BANKED_LEAVE_XDATA
   1012          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1013          void SampleAPP_send_delay_message(void)
   \                     SampleAPP_send_delay_message:
   1014          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   1015          
   1016             if (screen_flag == 1)
   \   000005   90....       MOV     DPTR,#screen_flag
   \   000008   E0           MOVX    A,@DPTR
   \   000009   6401         XRL     A,#0x1
   \   00000B   6003         JZ      $+5
   \   00000D   02....       LJMP    ??SampleAPP_send_delay_message_0 & 0xFFFF
   1017            { 
   1018                 if(bindNumReflections(SAMPLEAPP_ENDPOINT2,SAMPLEAPP_HUE_CLUSTERID)>0)//有绑定项目 hue up
   \   000010                ; Setup parameters for call to function bindNumReflections
   \   000010   7A0F         MOV     R2,#0xf
   \   000012   7B00         MOV     R3,#0x0
   \   000014   7916         MOV     R1,#0x16
   \   000016   12....       LCALL   ??bindNumReflections?relay
   \   000019   8A..         MOV     ?V0 + 0,R2
   \   00001B   8B..         MOV     ?V0 + 1,R3
   \   00001D   E5..         MOV     A,?V0 + 0
   \   00001F   45..         ORL     A,?V0 + 1
   \   000021   6063         JZ      ??SampleAPP_send_delay_message_1
   1019                 {
   1020                     HalLedBlink ( HAL_LED_2, 1, 25, 200 );
   \   000023                ; Setup parameters for call to function HalLedBlink
   \   000023   7CC8         MOV     R4,#-0x38
   \   000025   7D00         MOV     R5,#0x0
   \   000027   7B19         MOV     R3,#0x19
   \   000029   7A01         MOV     R2,#0x1
   \   00002B   7902         MOV     R1,#0x2
   \   00002D   12....       LCALL   ??HalLedBlink?relay
   1021                      huePara[0] =3;  //开         
   \   000030   90....       MOV     DPTR,#huePara
   \   000033   7403         MOV     A,#0x3
   \   000035   F0           MOVX    @DPTR,A
   1022                      huePara[1] =100;  //开         
   \   000036   90....       MOV     DPTR,#huePara + 1
   \   000039   7464         MOV     A,#0x64
   \   00003B   F0           MOVX    @DPTR,A
   1023                   if ( AF_DataRequest( &SampleApp_BIND_DstAddr, &SampleApp_epDesc2,
   1024                                         SAMPLEAPP_HUE_CLUSTERID,
   1025                                         2,  //数据长度
   1026                                         (uint8 *)&huePara,//###添加的发送数据        
   1027                                         &SampleApp_TransID,
   1028                                         AF_DISCV_ROUTE,
   1029                                         AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   00003C                ; Setup parameters for call to function AF_DataRequest
   \   00003C   75..0F       MOV     ?V0 + 0,#0xf
   \   00003F   78..         MOV     R0,#?V0 + 0
   \   000041   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000044   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000047   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   00004A   78..         MOV     R0,#?V0 + 0
   \   00004C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00004F   75....       MOV     ?V0 + 0,#huePara & 0xff
   \   000052   75....       MOV     ?V0 + 1,#(huePara >> 8) & 0xff
   \   000055   78..         MOV     R0,#?V0 + 0
   \   000057   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00005A   75..02       MOV     ?V0 + 0,#0x2
   \   00005D   75..00       MOV     ?V0 + 1,#0x0
   \   000060   78..         MOV     R0,#?V0 + 0
   \   000062   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000065   75..0F       MOV     ?V0 + 0,#0xf
   \   000068   75..00       MOV     ?V0 + 1,#0x0
   \   00006B   78..         MOV     R0,#?V0 + 0
   \   00006D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000070   7920         MOV     R1,#0x20
   \   000072   7C..         MOV     R4,#SampleApp_epDesc2 & 0xff
   \   000074   7D..         MOV     R5,#(SampleApp_epDesc2 >> 8) & 0xff
   \   000076   7A..         MOV     R2,#SampleApp_BIND_DstAddr & 0xff
   \   000078   7B..         MOV     R3,#(SampleApp_BIND_DstAddr >> 8) & 0xff
   \   00007A   12....       LCALL   ??AF_DataRequest?relay
   \   00007D   7409         MOV     A,#0x9
   \   00007F   12....       LCALL   ?DEALLOC_XSTACK8
   \   000082   E9           MOV     A,R1
   \   000083   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1030                    {
   1031                      
   1032                    }
   1033                 }
   1034                 else if(bindNumReflections(SAMPLEAPP_ENDPOINT2,SAMPLEAPP_ONOFF_CLUSTERID)>0)//有绑定项目
   \                     ??SampleAPP_send_delay_message_1:
   \   000086                ; Setup parameters for call to function bindNumReflections
   \   000086   7A01         MOV     R2,#0x1
   \   000088   7B00         MOV     R3,#0x0
   \   00008A   7916         MOV     R1,#0x16
   \   00008C   12....       LCALL   ??bindNumReflections?relay
   \   00008F   8A..         MOV     ?V0 + 0,R2
   \   000091   8B..         MOV     ?V0 + 1,R3
   \   000093   E5..         MOV     A,?V0 + 0
   \   000095   45..         ORL     A,?V0 + 1
   \   000097   605D         JZ      ??SampleAPP_send_delay_message_3
   1035                 {
   1036                     HalLedBlink ( HAL_LED_2, 1, 25, 200 );
   \   000099                ; Setup parameters for call to function HalLedBlink
   \   000099   7CC8         MOV     R4,#-0x38
   \   00009B   7D00         MOV     R5,#0x0
   \   00009D   7B19         MOV     R3,#0x19
   \   00009F   7A01         MOV     R2,#0x1
   \   0000A1   7902         MOV     R1,#0x2
   \   0000A3   12....       LCALL   ??HalLedBlink?relay
   1037                      ONOROFF2 =2;  //开         
   \   0000A6   90....       MOV     DPTR,#ONOROFF2
   \   0000A9   7402         MOV     A,#0x2
   \   0000AB   F0           MOVX    @DPTR,A
   1038                   if ( AF_DataRequest( &SampleApp_BIND_DstAddr, &SampleApp_epDesc2,
   1039                                         SAMPLEAPP_ONOFF_CLUSTERID,
   1040                                         1,  //数据长度
   1041                                         &ONOROFF2,//###添加的发送数据        
   1042                                         &SampleApp_TransID,
   1043                                         AF_DISCV_ROUTE,
   1044                                         AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   0000AC                ; Setup parameters for call to function AF_DataRequest
   \   0000AC   75..0F       MOV     ?V0 + 0,#0xf
   \   0000AF   78..         MOV     R0,#?V0 + 0
   \   0000B1   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000B4   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   0000B7   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   0000BA   78..         MOV     R0,#?V0 + 0
   \   0000BC   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000BF   75....       MOV     ?V0 + 0,#ONOROFF2 & 0xff
   \   0000C2   75....       MOV     ?V0 + 1,#(ONOROFF2 >> 8) & 0xff
   \   0000C5   78..         MOV     R0,#?V0 + 0
   \   0000C7   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000CA   75..01       MOV     ?V0 + 0,#0x1
   \   0000CD   75..00       MOV     ?V0 + 1,#0x0
   \   0000D0   78..         MOV     R0,#?V0 + 0
   \   0000D2   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000D5   75..01       MOV     ?V0 + 0,#0x1
   \   0000D8   75..00       MOV     ?V0 + 1,#0x0
   \   0000DB   78..         MOV     R0,#?V0 + 0
   \   0000DD   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000E0   7920         MOV     R1,#0x20
   \   0000E2   7C..         MOV     R4,#SampleApp_epDesc2 & 0xff
   \   0000E4   7D..         MOV     R5,#(SampleApp_epDesc2 >> 8) & 0xff
   \   0000E6   7A..         MOV     R2,#SampleApp_BIND_DstAddr & 0xff
   \   0000E8   7B..         MOV     R3,#(SampleApp_BIND_DstAddr >> 8) & 0xff
   \   0000EA   12....       LCALL   ??AF_DataRequest?relay
   \   0000ED   7409         MOV     A,#0x9
   \   0000EF   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000F2   E9           MOV     A,R1
   \   0000F3   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1045                    {
   1046                      
   1047                    }
   1048                 }
   1049                 
   1050                  else if(bindNumReflections(SAMPLEAPP_ENDPOINT2,SAMPLEAPP_DIMMER_CLUSTERID)>0)//有绑定项目
   \                     ??SampleAPP_send_delay_message_3:
   \   0000F6                ; Setup parameters for call to function bindNumReflections
   \   0000F6   7A0B         MOV     R2,#0xb
   \   0000F8   7B00         MOV     R3,#0x0
   \   0000FA   7916         MOV     R1,#0x16
   \   0000FC   12....       LCALL   ??bindNumReflections?relay
   \   0000FF   8A..         MOV     ?V0 + 0,R2
   \   000101   8B..         MOV     ?V0 + 1,R3
   \   000103   E5..         MOV     A,?V0 + 0
   \   000105   45..         ORL     A,?V0 + 1
   \   000107   605D         JZ      ??SampleAPP_send_delay_message_4
   1051                 {
   1052                     HalLedBlink ( HAL_LED_2, 1, 25, 200 );
   \   000109                ; Setup parameters for call to function HalLedBlink
   \   000109   7CC8         MOV     R4,#-0x38
   \   00010B   7D00         MOV     R5,#0x0
   \   00010D   7B19         MOV     R3,#0x19
   \   00010F   7A01         MOV     R2,#0x1
   \   000111   7902         MOV     R1,#0x2
   \   000113   12....       LCALL   ??HalLedBlink?relay
   1053                      ONOROFF2 = 100;
   \   000116   90....       MOV     DPTR,#ONOROFF2
   \   000119   7464         MOV     A,#0x64
   \   00011B   F0           MOVX    @DPTR,A
   1054                        
   1055                   if ( AF_DataRequest( &SampleApp_BIND_DstAddr, &SampleApp_epDesc2,
   1056                                         SAMPLEAPP_DIMMER_CLUSTERID,
   1057                                         1,  //数据长度
   1058                                         &ONOROFF2,//###添加的发送数据        
   1059                                         &SampleApp_TransID,
   1060                                         AF_DISCV_ROUTE,
   1061                                         AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   00011C                ; Setup parameters for call to function AF_DataRequest
   \   00011C   75..0F       MOV     ?V0 + 0,#0xf
   \   00011F   78..         MOV     R0,#?V0 + 0
   \   000121   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000124   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000127   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   00012A   78..         MOV     R0,#?V0 + 0
   \   00012C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00012F   75....       MOV     ?V0 + 0,#ONOROFF2 & 0xff
   \   000132   75....       MOV     ?V0 + 1,#(ONOROFF2 >> 8) & 0xff
   \   000135   78..         MOV     R0,#?V0 + 0
   \   000137   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00013A   75..01       MOV     ?V0 + 0,#0x1
   \   00013D   75..00       MOV     ?V0 + 1,#0x0
   \   000140   78..         MOV     R0,#?V0 + 0
   \   000142   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000145   75..0B       MOV     ?V0 + 0,#0xb
   \   000148   75..00       MOV     ?V0 + 1,#0x0
   \   00014B   78..         MOV     R0,#?V0 + 0
   \   00014D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000150   7920         MOV     R1,#0x20
   \   000152   7C..         MOV     R4,#SampleApp_epDesc2 & 0xff
   \   000154   7D..         MOV     R5,#(SampleApp_epDesc2 >> 8) & 0xff
   \   000156   7A..         MOV     R2,#SampleApp_BIND_DstAddr & 0xff
   \   000158   7B..         MOV     R3,#(SampleApp_BIND_DstAddr >> 8) & 0xff
   \   00015A   12....       LCALL   ??AF_DataRequest?relay
   \   00015D   7409         MOV     A,#0x9
   \   00015F   12....       LCALL   ?DEALLOC_XSTACK8
   \   000162   E9           MOV     A,R1
   \   000163   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1062                    {
   1063                      
   1064                    }
   1065                 }
   1066                 
   1067                  else if(bindNumReflections(SAMPLEAPP_ENDPOINT2,SAMPLEAPP_CERTAIN_CONTROL_CLUSTERID)>0)//有绑定项目
   \                     ??SampleAPP_send_delay_message_4:
   \   000166                ; Setup parameters for call to function bindNumReflections
   \   000166   7A0D         MOV     R2,#0xd
   \   000168   7B00         MOV     R3,#0x0
   \   00016A   7916         MOV     R1,#0x16
   \   00016C   12....       LCALL   ??bindNumReflections?relay
   \   00016F   8A..         MOV     ?V0 + 0,R2
   \   000171   8B..         MOV     ?V0 + 1,R3
   \   000173   E5..         MOV     A,?V0 + 0
   \   000175   45..         ORL     A,?V0 + 1
   \   000177   605D         JZ      ??SampleAPP_send_delay_message_5
   1068                 {
   1069                     HalLedBlink ( HAL_LED_2, 1, 25, 200 );
   \   000179                ; Setup parameters for call to function HalLedBlink
   \   000179   7CC8         MOV     R4,#-0x38
   \   00017B   7D00         MOV     R5,#0x0
   \   00017D   7B19         MOV     R3,#0x19
   \   00017F   7A01         MOV     R2,#0x1
   \   000181   7902         MOV     R1,#0x2
   \   000183   12....       LCALL   ??HalLedBlink?relay
   1070                      ONOROFF2 = 2;//对应电机开
   \   000186   90....       MOV     DPTR,#ONOROFF2
   \   000189   7402         MOV     A,#0x2
   \   00018B   F0           MOVX    @DPTR,A
   1071                        
   1072                   if ( AF_DataRequest( &SampleApp_BIND_DstAddr, &SampleApp_epDesc2,
   1073                                         SAMPLEAPP_CERTAIN_CONTROL_CLUSTERID,
   1074                                         1,  //数据长度
   1075                                         &ONOROFF2,//###添加的发送数据        
   1076                                         &SampleApp_TransID,
   1077                                         AF_DISCV_ROUTE,
   1078                                         AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   00018C                ; Setup parameters for call to function AF_DataRequest
   \   00018C   75..0F       MOV     ?V0 + 0,#0xf
   \   00018F   78..         MOV     R0,#?V0 + 0
   \   000191   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000194   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000197   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   00019A   78..         MOV     R0,#?V0 + 0
   \   00019C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00019F   75....       MOV     ?V0 + 0,#ONOROFF2 & 0xff
   \   0001A2   75....       MOV     ?V0 + 1,#(ONOROFF2 >> 8) & 0xff
   \   0001A5   78..         MOV     R0,#?V0 + 0
   \   0001A7   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001AA   75..01       MOV     ?V0 + 0,#0x1
   \   0001AD   75..00       MOV     ?V0 + 1,#0x0
   \   0001B0   78..         MOV     R0,#?V0 + 0
   \   0001B2   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001B5   75..0D       MOV     ?V0 + 0,#0xd
   \   0001B8   75..00       MOV     ?V0 + 1,#0x0
   \   0001BB   78..         MOV     R0,#?V0 + 0
   \   0001BD   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001C0   7920         MOV     R1,#0x20
   \   0001C2   7C..         MOV     R4,#SampleApp_epDesc2 & 0xff
   \   0001C4   7D..         MOV     R5,#(SampleApp_epDesc2 >> 8) & 0xff
   \   0001C6   7A..         MOV     R2,#SampleApp_BIND_DstAddr & 0xff
   \   0001C8   7B..         MOV     R3,#(SampleApp_BIND_DstAddr >> 8) & 0xff
   \   0001CA   12....       LCALL   ??AF_DataRequest?relay
   \   0001CD   7409         MOV     A,#0x9
   \   0001CF   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001D2   E9           MOV     A,R1
   \   0001D3   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1079                    {
   1080                      
   1081                    }
   1082                 }
   1083                 
   1084                  else if(bindNumReflections(SAMPLEAPP_ENDPOINT2,SAMPLEAPP_ELOCK_CLUSTERID)>0)//有绑定项目
   \                     ??SampleAPP_send_delay_message_5:
   \   0001D6                ; Setup parameters for call to function bindNumReflections
   \   0001D6   7A0E         MOV     R2,#0xe
   \   0001D8   7B00         MOV     R3,#0x0
   \   0001DA   7916         MOV     R1,#0x16
   \   0001DC   12....       LCALL   ??bindNumReflections?relay
   \   0001DF   8A..         MOV     ?V0 + 0,R2
   \   0001E1   8B..         MOV     ?V0 + 1,R3
   \   0001E3   E5..         MOV     A,?V0 + 0
   \   0001E5   45..         ORL     A,?V0 + 1
   \   0001E7   605D         JZ      ??SampleAPP_send_delay_message_6
   1085                 {
   1086                    HalLedBlink ( HAL_LED_2, 1, 25, 200 );
   \   0001E9                ; Setup parameters for call to function HalLedBlink
   \   0001E9   7CC8         MOV     R4,#-0x38
   \   0001EB   7D00         MOV     R5,#0x0
   \   0001ED   7B19         MOV     R3,#0x19
   \   0001EF   7A01         MOV     R2,#0x1
   \   0001F1   7902         MOV     R1,#0x2
   \   0001F3   12....       LCALL   ??HalLedBlink?relay
   1087                      ONOROFF2 = 3;//切换
   \   0001F6   90....       MOV     DPTR,#ONOROFF2
   \   0001F9   7403         MOV     A,#0x3
   \   0001FB   F0           MOVX    @DPTR,A
   1088                        
   1089                   if ( AF_DataRequest( &SampleApp_BIND_DstAddr, &SampleApp_epDesc2,
   1090                                         SAMPLEAPP_ELOCK_CLUSTERID,
   1091                                         1,  //数据长度
   1092                                         &ONOROFF2,//###添加的发送数据        
   1093                                         &SampleApp_TransID,
   1094                                         AF_DISCV_ROUTE,
   1095                                         AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   0001FC                ; Setup parameters for call to function AF_DataRequest
   \   0001FC   75..0F       MOV     ?V0 + 0,#0xf
   \   0001FF   78..         MOV     R0,#?V0 + 0
   \   000201   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000204   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000207   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   00020A   78..         MOV     R0,#?V0 + 0
   \   00020C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00020F   75....       MOV     ?V0 + 0,#ONOROFF2 & 0xff
   \   000212   75....       MOV     ?V0 + 1,#(ONOROFF2 >> 8) & 0xff
   \   000215   78..         MOV     R0,#?V0 + 0
   \   000217   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00021A   75..01       MOV     ?V0 + 0,#0x1
   \   00021D   75..00       MOV     ?V0 + 1,#0x0
   \   000220   78..         MOV     R0,#?V0 + 0
   \   000222   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000225   75..0E       MOV     ?V0 + 0,#0xe
   \   000228   75..00       MOV     ?V0 + 1,#0x0
   \   00022B   78..         MOV     R0,#?V0 + 0
   \   00022D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000230   7920         MOV     R1,#0x20
   \   000232   7C..         MOV     R4,#SampleApp_epDesc2 & 0xff
   \   000234   7D..         MOV     R5,#(SampleApp_epDesc2 >> 8) & 0xff
   \   000236   7A..         MOV     R2,#SampleApp_BIND_DstAddr & 0xff
   \   000238   7B..         MOV     R3,#(SampleApp_BIND_DstAddr >> 8) & 0xff
   \   00023A   12....       LCALL   ??AF_DataRequest?relay
   \   00023D   7409         MOV     A,#0x9
   \   00023F   12....       LCALL   ?DEALLOC_XSTACK8
   \   000242   E9           MOV     A,R1
   \   000243   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1096                    {
   1097                      
   1098                    }
   1099                 }
   1100                 else
   1101                 {  
   1102          
   1103                     if(screen_current_flag==0)//2012 9 15 添加每次操作之间间隔10S才能操作下一个。以防场景切换太快，影响系统
   \                     ??SampleAPP_send_delay_message_6:
   \   000246   90....       MOV     DPTR,#screen_current_flag
   \   000249   E0           MOVX    A,@DPTR
   \   00024A   6003         JZ      $+5
   \   00024C   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1104                     {  
   1105                     HalLedBlink ( HAL_LED_2, 1, 25, 200 );
   \   00024F                ; Setup parameters for call to function HalLedBlink
   \   00024F   7CC8         MOV     R4,#-0x38
   \   000251   7D00         MOV     R5,#0x0
   \   000253   7B19         MOV     R3,#0x19
   \   000255   7A01         MOV     R2,#0x1
   \   000257   7902         MOV     R1,#0x2
   \   000259   12....       LCALL   ??HalLedBlink?relay
   1106                      screen_current_flag=1;
   \   00025C   90....       MOV     DPTR,#screen_current_flag
   \   00025F   7401         MOV     A,#0x1
   \   000261   F0           MOVX    @DPTR,A
   1107                      osal_start_timerEx( UserApp_TaskID,SCREEN_CURRENT_FLAG_EVT,1000 );
   \   000262                ; Setup parameters for call to function osal_start_timerEx
   \   000262   7CE8         MOV     R4,#-0x18
   \   000264   7D03         MOV     R5,#0x3
   \   000266   7A20         MOV     R2,#0x20
   \   000268   7B00         MOV     R3,#0x0
   \   00026A   90....       MOV     DPTR,#UserApp_TaskID
   \   00026D   E0           MOVX    A,@DPTR
   \   00026E   F9           MOV     R1,A
   \   00026F   12....       LCALL   ??osal_start_timerEx?relay
   \   000272   E9           MOV     A,R1
   1108                      SampleApp_SendInMessage();
   \   000273                ; Setup parameters for call to function SampleApp_SendInMessage
   \   000273   12....       LCALL   ??SampleApp_SendInMessage?relay
   \   000276   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1109                     }
   1110                 }
   1111               
   1112             }
   1113            
   1114              else if (screen_flag == 2)
   \                     ??SampleAPP_send_delay_message_0:
   \   000279   90....       MOV     DPTR,#screen_flag
   \   00027C   E0           MOVX    A,@DPTR
   \   00027D   6402         XRL     A,#0x2
   \   00027F   6003         JZ      $+5
   \   000281   02....       LJMP    ??SampleAPP_send_delay_message_7 & 0xFFFF
   1115            { 
   1116          
   1117                 if(bindNumReflections(SAMPLEAPP_ENDPOINT2,SAMPLEAPP_HUE_CLUSTERID)>0)//有绑定项目 hue up
   \   000284                ; Setup parameters for call to function bindNumReflections
   \   000284   7A0F         MOV     R2,#0xf
   \   000286   7B00         MOV     R3,#0x0
   \   000288   7916         MOV     R1,#0x16
   \   00028A   12....       LCALL   ??bindNumReflections?relay
   \   00028D   8A..         MOV     ?V0 + 0,R2
   \   00028F   8B..         MOV     ?V0 + 1,R3
   \   000291   E5..         MOV     A,?V0 + 0
   \   000293   45..         ORL     A,?V0 + 1
   \   000295   6063         JZ      ??SampleAPP_send_delay_message_8
   1118                 {
   1119                     HalLedBlink ( HAL_LED_2, 1, 25, 200 );
   \   000297                ; Setup parameters for call to function HalLedBlink
   \   000297   7CC8         MOV     R4,#-0x38
   \   000299   7D00         MOV     R5,#0x0
   \   00029B   7B19         MOV     R3,#0x19
   \   00029D   7A01         MOV     R2,#0x1
   \   00029F   7902         MOV     R1,#0x2
   \   0002A1   12....       LCALL   ??HalLedBlink?relay
   1120                      huePara[0] =3;  //开         
   \   0002A4   90....       MOV     DPTR,#huePara
   \   0002A7   7403         MOV     A,#0x3
   \   0002A9   F0           MOVX    @DPTR,A
   1121                      huePara[1] =0;  //开         
   \   0002AA   90....       MOV     DPTR,#huePara + 1
   \   0002AD   7400         MOV     A,#0x0
   \   0002AF   F0           MOVX    @DPTR,A
   1122                   if ( AF_DataRequest( &SampleApp_BIND_DstAddr, &SampleApp_epDesc2,
   1123                                         SAMPLEAPP_HUE_CLUSTERID,
   1124                                         2,  //数据长度
   1125                                         (uint8 *)&huePara,//###添加的发送数据        
   1126                                         &SampleApp_TransID,
   1127                                         AF_DISCV_ROUTE,
   1128                                         AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   0002B0                ; Setup parameters for call to function AF_DataRequest
   \   0002B0   75..0F       MOV     ?V0 + 0,#0xf
   \   0002B3   78..         MOV     R0,#?V0 + 0
   \   0002B5   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0002B8   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   0002BB   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   0002BE   78..         MOV     R0,#?V0 + 0
   \   0002C0   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0002C3   75....       MOV     ?V0 + 0,#huePara & 0xff
   \   0002C6   75....       MOV     ?V0 + 1,#(huePara >> 8) & 0xff
   \   0002C9   78..         MOV     R0,#?V0 + 0
   \   0002CB   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0002CE   75..02       MOV     ?V0 + 0,#0x2
   \   0002D1   75..00       MOV     ?V0 + 1,#0x0
   \   0002D4   78..         MOV     R0,#?V0 + 0
   \   0002D6   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0002D9   75..0F       MOV     ?V0 + 0,#0xf
   \   0002DC   75..00       MOV     ?V0 + 1,#0x0
   \   0002DF   78..         MOV     R0,#?V0 + 0
   \   0002E1   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0002E4   7920         MOV     R1,#0x20
   \   0002E6   7C..         MOV     R4,#SampleApp_epDesc2 & 0xff
   \   0002E8   7D..         MOV     R5,#(SampleApp_epDesc2 >> 8) & 0xff
   \   0002EA   7A..         MOV     R2,#SampleApp_BIND_DstAddr & 0xff
   \   0002EC   7B..         MOV     R3,#(SampleApp_BIND_DstAddr >> 8) & 0xff
   \   0002EE   12....       LCALL   ??AF_DataRequest?relay
   \   0002F1   7409         MOV     A,#0x9
   \   0002F3   12....       LCALL   ?DEALLOC_XSTACK8
   \   0002F6   E9           MOV     A,R1
   \   0002F7   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1129                    {
   1130                      
   1131                    }
   1132                 }
   1133                 else if(bindNumReflections(SAMPLEAPP_ENDPOINT3,SAMPLEAPP_ONOFF_CLUSTERID)>0)//有绑定项目
   \                     ??SampleAPP_send_delay_message_8:
   \   0002FA                ; Setup parameters for call to function bindNumReflections
   \   0002FA   7A01         MOV     R2,#0x1
   \   0002FC   7B00         MOV     R3,#0x0
   \   0002FE   7917         MOV     R1,#0x17
   \   000300   12....       LCALL   ??bindNumReflections?relay
   \   000303   8A..         MOV     ?V0 + 0,R2
   \   000305   8B..         MOV     ?V0 + 1,R3
   \   000307   E5..         MOV     A,?V0 + 0
   \   000309   45..         ORL     A,?V0 + 1
   \   00030B   605D         JZ      ??SampleAPP_send_delay_message_9
   1134                 {
   1135                 HalLedBlink ( HAL_LED_2, 1, 25, 200 );
   \   00030D                ; Setup parameters for call to function HalLedBlink
   \   00030D   7CC8         MOV     R4,#-0x38
   \   00030F   7D00         MOV     R5,#0x0
   \   000311   7B19         MOV     R3,#0x19
   \   000313   7A01         MOV     R2,#0x1
   \   000315   7902         MOV     R1,#0x2
   \   000317   12....       LCALL   ??HalLedBlink?relay
   1136                      ONOROFF3 = 2;  //开         
   \   00031A   90....       MOV     DPTR,#ONOROFF3
   \   00031D   7402         MOV     A,#0x2
   \   00031F   F0           MOVX    @DPTR,A
   1137                   if ( AF_DataRequest( &SampleApp_BIND_DstAddr, &SampleApp_epDesc3,
   1138                                         SAMPLEAPP_ONOFF_CLUSTERID,
   1139                                         1,  //数据长度
   1140                                         &ONOROFF3,//###添加的发送数据        
   1141                                         &SampleApp_TransID,
   1142                                         AF_DISCV_ROUTE,
   1143                                         AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000320                ; Setup parameters for call to function AF_DataRequest
   \   000320   75..0F       MOV     ?V0 + 0,#0xf
   \   000323   78..         MOV     R0,#?V0 + 0
   \   000325   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000328   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   00032B   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   00032E   78..         MOV     R0,#?V0 + 0
   \   000330   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000333   75....       MOV     ?V0 + 0,#ONOROFF3 & 0xff
   \   000336   75....       MOV     ?V0 + 1,#(ONOROFF3 >> 8) & 0xff
   \   000339   78..         MOV     R0,#?V0 + 0
   \   00033B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00033E   75..01       MOV     ?V0 + 0,#0x1
   \   000341   75..00       MOV     ?V0 + 1,#0x0
   \   000344   78..         MOV     R0,#?V0 + 0
   \   000346   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000349   75..01       MOV     ?V0 + 0,#0x1
   \   00034C   75..00       MOV     ?V0 + 1,#0x0
   \   00034F   78..         MOV     R0,#?V0 + 0
   \   000351   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000354   7920         MOV     R1,#0x20
   \   000356   7C..         MOV     R4,#SampleApp_epDesc3 & 0xff
   \   000358   7D..         MOV     R5,#(SampleApp_epDesc3 >> 8) & 0xff
   \   00035A   7A..         MOV     R2,#SampleApp_BIND_DstAddr & 0xff
   \   00035C   7B..         MOV     R3,#(SampleApp_BIND_DstAddr >> 8) & 0xff
   \   00035E   12....       LCALL   ??AF_DataRequest?relay
   \   000361   7409         MOV     A,#0x9
   \   000363   12....       LCALL   ?DEALLOC_XSTACK8
   \   000366   E9           MOV     A,R1
   \   000367   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1144                    {
   1145                      
   1146                    }
   1147                 }
   1148                 
   1149                  else if(bindNumReflections(SAMPLEAPP_ENDPOINT3,SAMPLEAPP_DIMMER_CLUSTERID)>0)//有绑定项目
   \                     ??SampleAPP_send_delay_message_9:
   \   00036A                ; Setup parameters for call to function bindNumReflections
   \   00036A   7A0B         MOV     R2,#0xb
   \   00036C   7B00         MOV     R3,#0x0
   \   00036E   7917         MOV     R1,#0x17
   \   000370   12....       LCALL   ??bindNumReflections?relay
   \   000373   8A..         MOV     ?V0 + 0,R2
   \   000375   8B..         MOV     ?V0 + 1,R3
   \   000377   E5..         MOV     A,?V0 + 0
   \   000379   45..         ORL     A,?V0 + 1
   \   00037B   605D         JZ      ??SampleAPP_send_delay_message_10
   1150                 {
   1151                    HalLedBlink ( HAL_LED_2, 1, 25, 200 );
   \   00037D                ; Setup parameters for call to function HalLedBlink
   \   00037D   7CC8         MOV     R4,#-0x38
   \   00037F   7D00         MOV     R5,#0x0
   \   000381   7B19         MOV     R3,#0x19
   \   000383   7A01         MOV     R2,#0x1
   \   000385   7902         MOV     R1,#0x2
   \   000387   12....       LCALL   ??HalLedBlink?relay
   1152                      ONOROFF3 = 0;
   \   00038A   90....       MOV     DPTR,#ONOROFF3
   \   00038D   7400         MOV     A,#0x0
   \   00038F   F0           MOVX    @DPTR,A
   1153                        
   1154                   if ( AF_DataRequest( &SampleApp_BIND_DstAddr, &SampleApp_epDesc3,
   1155                                         SAMPLEAPP_DIMMER_CLUSTERID,
   1156                                         1,  //数据长度
   1157                                         &ONOROFF3,//###添加的发送数据        
   1158                                         &SampleApp_TransID,
   1159                                         AF_DISCV_ROUTE,
   1160                                         AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000390                ; Setup parameters for call to function AF_DataRequest
   \   000390   75..0F       MOV     ?V0 + 0,#0xf
   \   000393   78..         MOV     R0,#?V0 + 0
   \   000395   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000398   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   00039B   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   00039E   78..         MOV     R0,#?V0 + 0
   \   0003A0   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0003A3   75....       MOV     ?V0 + 0,#ONOROFF3 & 0xff
   \   0003A6   75....       MOV     ?V0 + 1,#(ONOROFF3 >> 8) & 0xff
   \   0003A9   78..         MOV     R0,#?V0 + 0
   \   0003AB   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0003AE   75..01       MOV     ?V0 + 0,#0x1
   \   0003B1   75..00       MOV     ?V0 + 1,#0x0
   \   0003B4   78..         MOV     R0,#?V0 + 0
   \   0003B6   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0003B9   75..0B       MOV     ?V0 + 0,#0xb
   \   0003BC   75..00       MOV     ?V0 + 1,#0x0
   \   0003BF   78..         MOV     R0,#?V0 + 0
   \   0003C1   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0003C4   7920         MOV     R1,#0x20
   \   0003C6   7C..         MOV     R4,#SampleApp_epDesc3 & 0xff
   \   0003C8   7D..         MOV     R5,#(SampleApp_epDesc3 >> 8) & 0xff
   \   0003CA   7A..         MOV     R2,#SampleApp_BIND_DstAddr & 0xff
   \   0003CC   7B..         MOV     R3,#(SampleApp_BIND_DstAddr >> 8) & 0xff
   \   0003CE   12....       LCALL   ??AF_DataRequest?relay
   \   0003D1   7409         MOV     A,#0x9
   \   0003D3   12....       LCALL   ?DEALLOC_XSTACK8
   \   0003D6   E9           MOV     A,R1
   \   0003D7   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1161                    {
   1162                      
   1163                    }
   1164                 }
   1165                 
   1166                  else if(bindNumReflections(SAMPLEAPP_ENDPOINT3,SAMPLEAPP_CERTAIN_CONTROL_CLUSTERID)>0)//有绑定项目
   \                     ??SampleAPP_send_delay_message_10:
   \   0003DA                ; Setup parameters for call to function bindNumReflections
   \   0003DA   7A0D         MOV     R2,#0xd
   \   0003DC   7B00         MOV     R3,#0x0
   \   0003DE   7917         MOV     R1,#0x17
   \   0003E0   12....       LCALL   ??bindNumReflections?relay
   \   0003E3   8A..         MOV     ?V0 + 0,R2
   \   0003E5   8B..         MOV     ?V0 + 1,R3
   \   0003E7   E5..         MOV     A,?V0 + 0
   \   0003E9   45..         ORL     A,?V0 + 1
   \   0003EB   605D         JZ      ??SampleAPP_send_delay_message_11
   1167                 {
   1168                   HalLedBlink ( HAL_LED_2, 1, 25, 200 );
   \   0003ED                ; Setup parameters for call to function HalLedBlink
   \   0003ED   7CC8         MOV     R4,#-0x38
   \   0003EF   7D00         MOV     R5,#0x0
   \   0003F1   7B19         MOV     R3,#0x19
   \   0003F3   7A01         MOV     R2,#0x1
   \   0003F5   7902         MOV     R1,#0x2
   \   0003F7   12....       LCALL   ??HalLedBlink?relay
   1169                      ONOROFF3 = 1;//对应电机停
   \   0003FA   90....       MOV     DPTR,#ONOROFF3
   \   0003FD   7401         MOV     A,#0x1
   \   0003FF   F0           MOVX    @DPTR,A
   1170                        
   1171                   if ( AF_DataRequest( &SampleApp_BIND_DstAddr, &SampleApp_epDesc3,
   1172                                         SAMPLEAPP_CERTAIN_CONTROL_CLUSTERID,
   1173                                         1,  //数据长度
   1174                                         &ONOROFF3,//###添加的发送数据        
   1175                                         &SampleApp_TransID,
   1176                                         AF_DISCV_ROUTE,
   1177                                         AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000400                ; Setup parameters for call to function AF_DataRequest
   \   000400   75..0F       MOV     ?V0 + 0,#0xf
   \   000403   78..         MOV     R0,#?V0 + 0
   \   000405   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000408   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   00040B   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   00040E   78..         MOV     R0,#?V0 + 0
   \   000410   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000413   75....       MOV     ?V0 + 0,#ONOROFF3 & 0xff
   \   000416   75....       MOV     ?V0 + 1,#(ONOROFF3 >> 8) & 0xff
   \   000419   78..         MOV     R0,#?V0 + 0
   \   00041B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00041E   75..01       MOV     ?V0 + 0,#0x1
   \   000421   75..00       MOV     ?V0 + 1,#0x0
   \   000424   78..         MOV     R0,#?V0 + 0
   \   000426   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000429   75..0D       MOV     ?V0 + 0,#0xd
   \   00042C   75..00       MOV     ?V0 + 1,#0x0
   \   00042F   78..         MOV     R0,#?V0 + 0
   \   000431   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000434   7920         MOV     R1,#0x20
   \   000436   7C..         MOV     R4,#SampleApp_epDesc3 & 0xff
   \   000438   7D..         MOV     R5,#(SampleApp_epDesc3 >> 8) & 0xff
   \   00043A   7A..         MOV     R2,#SampleApp_BIND_DstAddr & 0xff
   \   00043C   7B..         MOV     R3,#(SampleApp_BIND_DstAddr >> 8) & 0xff
   \   00043E   12....       LCALL   ??AF_DataRequest?relay
   \   000441   7409         MOV     A,#0x9
   \   000443   12....       LCALL   ?DEALLOC_XSTACK8
   \   000446   E9           MOV     A,R1
   \   000447   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1178                    {
   1179                      
   1180                    }
   1181                 }
   1182                 
   1183                  else if(bindNumReflections(SAMPLEAPP_ENDPOINT3,SAMPLEAPP_ELOCK_CLUSTERID)>0)//有绑定项目
   \                     ??SampleAPP_send_delay_message_11:
   \   00044A                ; Setup parameters for call to function bindNumReflections
   \   00044A   7A0E         MOV     R2,#0xe
   \   00044C   7B00         MOV     R3,#0x0
   \   00044E   7917         MOV     R1,#0x17
   \   000450   12....       LCALL   ??bindNumReflections?relay
   \   000453   8A..         MOV     ?V0 + 0,R2
   \   000455   8B..         MOV     ?V0 + 1,R3
   \   000457   E5..         MOV     A,?V0 + 0
   \   000459   45..         ORL     A,?V0 + 1
   \   00045B   605D         JZ      ??SampleAPP_send_delay_message_12
   1184                 {
   1185                   HalLedBlink ( HAL_LED_2, 1, 25, 200 );
   \   00045D                ; Setup parameters for call to function HalLedBlink
   \   00045D   7CC8         MOV     R4,#-0x38
   \   00045F   7D00         MOV     R5,#0x0
   \   000461   7B19         MOV     R3,#0x19
   \   000463   7A01         MOV     R2,#0x1
   \   000465   7902         MOV     R1,#0x2
   \   000467   12....       LCALL   ??HalLedBlink?relay
   1186                      ONOROFF3 =3;//切换
   \   00046A   90....       MOV     DPTR,#ONOROFF3
   \   00046D   7403         MOV     A,#0x3
   \   00046F   F0           MOVX    @DPTR,A
   1187                        
   1188                   if ( AF_DataRequest( &SampleApp_BIND_DstAddr, &SampleApp_epDesc3,
   1189                                         SAMPLEAPP_ELOCK_CLUSTERID,
   1190                                         1,  //数据长度
   1191                                         &ONOROFF3,//###添加的发送数据        
   1192                                         &SampleApp_TransID,
   1193                                         AF_DISCV_ROUTE,
   1194                                         AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000470                ; Setup parameters for call to function AF_DataRequest
   \   000470   75..0F       MOV     ?V0 + 0,#0xf
   \   000473   78..         MOV     R0,#?V0 + 0
   \   000475   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000478   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   00047B   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   00047E   78..         MOV     R0,#?V0 + 0
   \   000480   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000483   75....       MOV     ?V0 + 0,#ONOROFF3 & 0xff
   \   000486   75....       MOV     ?V0 + 1,#(ONOROFF3 >> 8) & 0xff
   \   000489   78..         MOV     R0,#?V0 + 0
   \   00048B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00048E   75..01       MOV     ?V0 + 0,#0x1
   \   000491   75..00       MOV     ?V0 + 1,#0x0
   \   000494   78..         MOV     R0,#?V0 + 0
   \   000496   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000499   75..0E       MOV     ?V0 + 0,#0xe
   \   00049C   75..00       MOV     ?V0 + 1,#0x0
   \   00049F   78..         MOV     R0,#?V0 + 0
   \   0004A1   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0004A4   7920         MOV     R1,#0x20
   \   0004A6   7C..         MOV     R4,#SampleApp_epDesc3 & 0xff
   \   0004A8   7D..         MOV     R5,#(SampleApp_epDesc3 >> 8) & 0xff
   \   0004AA   7A..         MOV     R2,#SampleApp_BIND_DstAddr & 0xff
   \   0004AC   7B..         MOV     R3,#(SampleApp_BIND_DstAddr >> 8) & 0xff
   \   0004AE   12....       LCALL   ??AF_DataRequest?relay
   \   0004B1   7409         MOV     A,#0x9
   \   0004B3   12....       LCALL   ?DEALLOC_XSTACK8
   \   0004B6   E9           MOV     A,R1
   \   0004B7   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1195                    {
   1196                      
   1197                    }
   1198                 }
   1199          
   1200                 else
   1201                 {  
   1202                     
   1203                    if(screen_current_flag==0)//2012 9 15 添加每次操作之间间隔10S才能操作下一个。以防场景切换太快，影响系统
   \                     ??SampleAPP_send_delay_message_12:
   \   0004BA   90....       MOV     DPTR,#screen_current_flag
   \   0004BD   E0           MOVX    A,@DPTR
   \   0004BE   6003         JZ      $+5
   \   0004C0   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1204                     {  
   1205                    HalLedBlink ( HAL_LED_2, 1, 25, 200 );
   \   0004C3                ; Setup parameters for call to function HalLedBlink
   \   0004C3   7CC8         MOV     R4,#-0x38
   \   0004C5   7D00         MOV     R5,#0x0
   \   0004C7   7B19         MOV     R3,#0x19
   \   0004C9   7A01         MOV     R2,#0x1
   \   0004CB   7902         MOV     R1,#0x2
   \   0004CD   12....       LCALL   ??HalLedBlink?relay
   1206                      screen_current_flag=1;
   \   0004D0   90....       MOV     DPTR,#screen_current_flag
   \   0004D3   7401         MOV     A,#0x1
   \   0004D5   F0           MOVX    @DPTR,A
   1207                      osal_start_timerEx( UserApp_TaskID,SCREEN_CURRENT_FLAG_EVT,1000 );
   \   0004D6                ; Setup parameters for call to function osal_start_timerEx
   \   0004D6   7CE8         MOV     R4,#-0x18
   \   0004D8   7D03         MOV     R5,#0x3
   \   0004DA   7A20         MOV     R2,#0x20
   \   0004DC   7B00         MOV     R3,#0x0
   \   0004DE   90....       MOV     DPTR,#UserApp_TaskID
   \   0004E1   E0           MOVX    A,@DPTR
   \   0004E2   F9           MOV     R1,A
   \   0004E3   12....       LCALL   ??osal_start_timerEx?relay
   \   0004E6   E9           MOV     A,R1
   1208                      SampleApp_SendInMessage();
   \   0004E7                ; Setup parameters for call to function SampleApp_SendInMessage
   \   0004E7   12....       LCALL   ??SampleApp_SendInMessage?relay
   \   0004EA   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1209                     }
   1210                 }
   1211          
   1212             }
   1213            // 第三个按键
   1214                else if (screen_flag == 3)
   \                     ??SampleAPP_send_delay_message_7:
   \   0004ED   90....       MOV     DPTR,#screen_flag
   \   0004F0   E0           MOVX    A,@DPTR
   \   0004F1   6403         XRL     A,#0x3
   \   0004F3   6003         JZ      $+5
   \   0004F5   02....       LJMP    ??SampleAPP_send_delay_message_13 & 0xFFFF
   1215            { 
   1216          
   1217                        if(bindNumReflections(SAMPLEAPP_ENDPOINT2,SAMPLEAPP_HUE_CLUSTERID)>0)//有绑定项目 hue up
   \   0004F8                ; Setup parameters for call to function bindNumReflections
   \   0004F8   7A0F         MOV     R2,#0xf
   \   0004FA   7B00         MOV     R3,#0x0
   \   0004FC   7916         MOV     R1,#0x16
   \   0004FE   12....       LCALL   ??bindNumReflections?relay
   \   000501   8A..         MOV     ?V0 + 0,R2
   \   000503   8B..         MOV     ?V0 + 1,R3
   \   000505   E5..         MOV     A,?V0 + 0
   \   000507   45..         ORL     A,?V0 + 1
   \   000509   605D         JZ      ??SampleAPP_send_delay_message_14
   1218                 {
   1219                     HalLedBlink ( HAL_LED_2, 1, 25, 200 );
   \   00050B                ; Setup parameters for call to function HalLedBlink
   \   00050B   7CC8         MOV     R4,#-0x38
   \   00050D   7D00         MOV     R5,#0x0
   \   00050F   7B19         MOV     R3,#0x19
   \   000511   7A01         MOV     R2,#0x1
   \   000513   7902         MOV     R1,#0x2
   \   000515   12....       LCALL   ??HalLedBlink?relay
   1220                      huePara[0] =1;  //开         
   \   000518   90....       MOV     DPTR,#huePara
   \   00051B   7401         MOV     A,#0x1
   \   00051D   F0           MOVX    @DPTR,A
   1221                      //huePara[1] =100;  //开         
   1222                   if ( AF_DataRequest( &SampleApp_BIND_DstAddr, &SampleApp_epDesc2,
   1223                                         SAMPLEAPP_HUE_CLUSTERID,
   1224                                         1,  //数据长度
   1225                                         (uint8 *)&huePara,//###添加的发送数据        
   1226                                         &SampleApp_TransID,
   1227                                         AF_DISCV_ROUTE,
   1228                                         AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   00051E                ; Setup parameters for call to function AF_DataRequest
   \   00051E   75..0F       MOV     ?V0 + 0,#0xf
   \   000521   78..         MOV     R0,#?V0 + 0
   \   000523   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000526   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000529   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   00052C   78..         MOV     R0,#?V0 + 0
   \   00052E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000531   75....       MOV     ?V0 + 0,#huePara & 0xff
   \   000534   75....       MOV     ?V0 + 1,#(huePara >> 8) & 0xff
   \   000537   78..         MOV     R0,#?V0 + 0
   \   000539   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00053C   75..01       MOV     ?V0 + 0,#0x1
   \   00053F   75..00       MOV     ?V0 + 1,#0x0
   \   000542   78..         MOV     R0,#?V0 + 0
   \   000544   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000547   75..0F       MOV     ?V0 + 0,#0xf
   \   00054A   75..00       MOV     ?V0 + 1,#0x0
   \   00054D   78..         MOV     R0,#?V0 + 0
   \   00054F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000552   7920         MOV     R1,#0x20
   \   000554   7C..         MOV     R4,#SampleApp_epDesc2 & 0xff
   \   000556   7D..         MOV     R5,#(SampleApp_epDesc2 >> 8) & 0xff
   \   000558   7A..         MOV     R2,#SampleApp_BIND_DstAddr & 0xff
   \   00055A   7B..         MOV     R3,#(SampleApp_BIND_DstAddr >> 8) & 0xff
   \   00055C   12....       LCALL   ??AF_DataRequest?relay
   \   00055F   7409         MOV     A,#0x9
   \   000561   12....       LCALL   ?DEALLOC_XSTACK8
   \   000564   E9           MOV     A,R1
   \   000565   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1229                    {
   1230                      
   1231                    }
   1232                 }
   1233                 else if(bindNumReflections(SAMPLEAPP_ENDPOINT4,SAMPLEAPP_ONOFF_CLUSTERID)>0)//有绑定项目
   \                     ??SampleAPP_send_delay_message_14:
   \   000568                ; Setup parameters for call to function bindNumReflections
   \   000568   7A01         MOV     R2,#0x1
   \   00056A   7B00         MOV     R3,#0x0
   \   00056C   7918         MOV     R1,#0x18
   \   00056E   12....       LCALL   ??bindNumReflections?relay
   \   000571   8A..         MOV     ?V0 + 0,R2
   \   000573   8B..         MOV     ?V0 + 1,R3
   \   000575   E5..         MOV     A,?V0 + 0
   \   000577   45..         ORL     A,?V0 + 1
   \   000579   605D         JZ      ??SampleAPP_send_delay_message_15
   1234                 {
   1235                  HalLedBlink ( HAL_LED_2, 1, 25, 200 );
   \   00057B                ; Setup parameters for call to function HalLedBlink
   \   00057B   7CC8         MOV     R4,#-0x38
   \   00057D   7D00         MOV     R5,#0x0
   \   00057F   7B19         MOV     R3,#0x19
   \   000581   7A01         MOV     R2,#0x1
   \   000583   7902         MOV     R1,#0x2
   \   000585   12....       LCALL   ??HalLedBlink?relay
   1236                      ONOROFF4 = 2;  //开         
   \   000588   90....       MOV     DPTR,#ONOROFF4
   \   00058B   7402         MOV     A,#0x2
   \   00058D   F0           MOVX    @DPTR,A
   1237                   if ( AF_DataRequest( &SampleApp_BIND_DstAddr, &SampleApp_epDesc4,
   1238                                         SAMPLEAPP_ONOFF_CLUSTERID,
   1239                                         1,  //数据长度
   1240                                         &ONOROFF4,//###添加的发送数据        
   1241                                         &SampleApp_TransID,
   1242                                         AF_DISCV_ROUTE,
   1243                                         AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   00058E                ; Setup parameters for call to function AF_DataRequest
   \   00058E   75..0F       MOV     ?V0 + 0,#0xf
   \   000591   78..         MOV     R0,#?V0 + 0
   \   000593   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000596   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000599   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   00059C   78..         MOV     R0,#?V0 + 0
   \   00059E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0005A1   75....       MOV     ?V0 + 0,#ONOROFF4 & 0xff
   \   0005A4   75....       MOV     ?V0 + 1,#(ONOROFF4 >> 8) & 0xff
   \   0005A7   78..         MOV     R0,#?V0 + 0
   \   0005A9   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0005AC   75..01       MOV     ?V0 + 0,#0x1
   \   0005AF   75..00       MOV     ?V0 + 1,#0x0
   \   0005B2   78..         MOV     R0,#?V0 + 0
   \   0005B4   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0005B7   75..01       MOV     ?V0 + 0,#0x1
   \   0005BA   75..00       MOV     ?V0 + 1,#0x0
   \   0005BD   78..         MOV     R0,#?V0 + 0
   \   0005BF   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0005C2   7920         MOV     R1,#0x20
   \   0005C4   7C..         MOV     R4,#SampleApp_epDesc4 & 0xff
   \   0005C6   7D..         MOV     R5,#(SampleApp_epDesc4 >> 8) & 0xff
   \   0005C8   7A..         MOV     R2,#SampleApp_BIND_DstAddr & 0xff
   \   0005CA   7B..         MOV     R3,#(SampleApp_BIND_DstAddr >> 8) & 0xff
   \   0005CC   12....       LCALL   ??AF_DataRequest?relay
   \   0005CF   7409         MOV     A,#0x9
   \   0005D1   12....       LCALL   ?DEALLOC_XSTACK8
   \   0005D4   E9           MOV     A,R1
   \   0005D5   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1244                    {
   1245                      
   1246                    }
   1247                 }
   1248                 
   1249                  else if(bindNumReflections(SAMPLEAPP_ENDPOINT4,SAMPLEAPP_DIMMER_CLUSTERID)>0)//有绑定项目
   \                     ??SampleAPP_send_delay_message_15:
   \   0005D8                ; Setup parameters for call to function bindNumReflections
   \   0005D8   7A0B         MOV     R2,#0xb
   \   0005DA   7B00         MOV     R3,#0x0
   \   0005DC   7918         MOV     R1,#0x18
   \   0005DE   12....       LCALL   ??bindNumReflections?relay
   \   0005E1   8A..         MOV     ?V0 + 0,R2
   \   0005E3   8B..         MOV     ?V0 + 1,R3
   \   0005E5   E5..         MOV     A,?V0 + 0
   \   0005E7   45..         ORL     A,?V0 + 1
   \   0005E9   605D         JZ      ??SampleAPP_send_delay_message_16
   1250                 {
   1251                  HalLedBlink ( HAL_LED_2, 1, 25, 200 );
   \   0005EB                ; Setup parameters for call to function HalLedBlink
   \   0005EB   7CC8         MOV     R4,#-0x38
   \   0005ED   7D00         MOV     R5,#0x0
   \   0005EF   7B19         MOV     R3,#0x19
   \   0005F1   7A01         MOV     R2,#0x1
   \   0005F3   7902         MOV     R1,#0x2
   \   0005F5   12....       LCALL   ??HalLedBlink?relay
   1252                      ONOROFF4 = 100;
   \   0005F8   90....       MOV     DPTR,#ONOROFF4
   \   0005FB   7464         MOV     A,#0x64
   \   0005FD   F0           MOVX    @DPTR,A
   1253                        
   1254                   if ( AF_DataRequest( &SampleApp_BIND_DstAddr, &SampleApp_epDesc4,
   1255                                         SAMPLEAPP_DIMMER_CLUSTERID,
   1256                                         1,  //数据长度
   1257                                         &ONOROFF4,//###添加的发送数据        
   1258                                         &SampleApp_TransID,
   1259                                         AF_DISCV_ROUTE,
   1260                                         AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   0005FE                ; Setup parameters for call to function AF_DataRequest
   \   0005FE   75..0F       MOV     ?V0 + 0,#0xf
   \   000601   78..         MOV     R0,#?V0 + 0
   \   000603   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000606   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000609   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   00060C   78..         MOV     R0,#?V0 + 0
   \   00060E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000611   75....       MOV     ?V0 + 0,#ONOROFF4 & 0xff
   \   000614   75....       MOV     ?V0 + 1,#(ONOROFF4 >> 8) & 0xff
   \   000617   78..         MOV     R0,#?V0 + 0
   \   000619   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00061C   75..01       MOV     ?V0 + 0,#0x1
   \   00061F   75..00       MOV     ?V0 + 1,#0x0
   \   000622   78..         MOV     R0,#?V0 + 0
   \   000624   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000627   75..0B       MOV     ?V0 + 0,#0xb
   \   00062A   75..00       MOV     ?V0 + 1,#0x0
   \   00062D   78..         MOV     R0,#?V0 + 0
   \   00062F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000632   7920         MOV     R1,#0x20
   \   000634   7C..         MOV     R4,#SampleApp_epDesc4 & 0xff
   \   000636   7D..         MOV     R5,#(SampleApp_epDesc4 >> 8) & 0xff
   \   000638   7A..         MOV     R2,#SampleApp_BIND_DstAddr & 0xff
   \   00063A   7B..         MOV     R3,#(SampleApp_BIND_DstAddr >> 8) & 0xff
   \   00063C   12....       LCALL   ??AF_DataRequest?relay
   \   00063F   7409         MOV     A,#0x9
   \   000641   12....       LCALL   ?DEALLOC_XSTACK8
   \   000644   E9           MOV     A,R1
   \   000645   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1261                    {
   1262                      
   1263                    }
   1264                 }
   1265                 
   1266                  else if(bindNumReflections(SAMPLEAPP_ENDPOINT4,SAMPLEAPP_CERTAIN_CONTROL_CLUSTERID)>0)//有绑定项目
   \                     ??SampleAPP_send_delay_message_16:
   \   000648                ; Setup parameters for call to function bindNumReflections
   \   000648   7A0D         MOV     R2,#0xd
   \   00064A   7B00         MOV     R3,#0x0
   \   00064C   7918         MOV     R1,#0x18
   \   00064E   12....       LCALL   ??bindNumReflections?relay
   \   000651   8A..         MOV     ?V0 + 0,R2
   \   000653   8B..         MOV     ?V0 + 1,R3
   \   000655   E5..         MOV     A,?V0 + 0
   \   000657   45..         ORL     A,?V0 + 1
   \   000659   605D         JZ      ??SampleAPP_send_delay_message_17
   1267                 {
   1268                    HalLedBlink ( HAL_LED_2, 1, 25, 200 );
   \   00065B                ; Setup parameters for call to function HalLedBlink
   \   00065B   7CC8         MOV     R4,#-0x38
   \   00065D   7D00         MOV     R5,#0x0
   \   00065F   7B19         MOV     R3,#0x19
   \   000661   7A01         MOV     R2,#0x1
   \   000663   7902         MOV     R1,#0x2
   \   000665   12....       LCALL   ??HalLedBlink?relay
   1269                      ONOROFF4 = 3;//对应电机停
   \   000668   90....       MOV     DPTR,#ONOROFF4
   \   00066B   7403         MOV     A,#0x3
   \   00066D   F0           MOVX    @DPTR,A
   1270                        
   1271                   if ( AF_DataRequest( &SampleApp_BIND_DstAddr, &SampleApp_epDesc4,
   1272                                         SAMPLEAPP_CERTAIN_CONTROL_CLUSTERID,
   1273                                         1,  //数据长度
   1274                                         &ONOROFF4,//###添加的发送数据        
   1275                                         &SampleApp_TransID,
   1276                                         AF_DISCV_ROUTE,
   1277                                         AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   00066E                ; Setup parameters for call to function AF_DataRequest
   \   00066E   75..0F       MOV     ?V0 + 0,#0xf
   \   000671   78..         MOV     R0,#?V0 + 0
   \   000673   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000676   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000679   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   00067C   78..         MOV     R0,#?V0 + 0
   \   00067E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000681   75....       MOV     ?V0 + 0,#ONOROFF4 & 0xff
   \   000684   75....       MOV     ?V0 + 1,#(ONOROFF4 >> 8) & 0xff
   \   000687   78..         MOV     R0,#?V0 + 0
   \   000689   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00068C   75..01       MOV     ?V0 + 0,#0x1
   \   00068F   75..00       MOV     ?V0 + 1,#0x0
   \   000692   78..         MOV     R0,#?V0 + 0
   \   000694   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000697   75..0D       MOV     ?V0 + 0,#0xd
   \   00069A   75..00       MOV     ?V0 + 1,#0x0
   \   00069D   78..         MOV     R0,#?V0 + 0
   \   00069F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0006A2   7920         MOV     R1,#0x20
   \   0006A4   7C..         MOV     R4,#SampleApp_epDesc4 & 0xff
   \   0006A6   7D..         MOV     R5,#(SampleApp_epDesc4 >> 8) & 0xff
   \   0006A8   7A..         MOV     R2,#SampleApp_BIND_DstAddr & 0xff
   \   0006AA   7B..         MOV     R3,#(SampleApp_BIND_DstAddr >> 8) & 0xff
   \   0006AC   12....       LCALL   ??AF_DataRequest?relay
   \   0006AF   7409         MOV     A,#0x9
   \   0006B1   12....       LCALL   ?DEALLOC_XSTACK8
   \   0006B4   E9           MOV     A,R1
   \   0006B5   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1278                    {
   1279                      
   1280                    }
   1281                 }
   1282                 
   1283                  else if(bindNumReflections(SAMPLEAPP_ENDPOINT4,SAMPLEAPP_ELOCK_CLUSTERID)>0)//有绑定项目
   \                     ??SampleAPP_send_delay_message_17:
   \   0006B8                ; Setup parameters for call to function bindNumReflections
   \   0006B8   7A0E         MOV     R2,#0xe
   \   0006BA   7B00         MOV     R3,#0x0
   \   0006BC   7918         MOV     R1,#0x18
   \   0006BE   12....       LCALL   ??bindNumReflections?relay
   \   0006C1   8A..         MOV     ?V0 + 0,R2
   \   0006C3   8B..         MOV     ?V0 + 1,R3
   \   0006C5   E5..         MOV     A,?V0 + 0
   \   0006C7   45..         ORL     A,?V0 + 1
   \   0006C9   605D         JZ      ??SampleAPP_send_delay_message_18
   1284                 {
   1285                      HalLedBlink ( HAL_LED_2, 1, 25, 200 );
   \   0006CB                ; Setup parameters for call to function HalLedBlink
   \   0006CB   7CC8         MOV     R4,#-0x38
   \   0006CD   7D00         MOV     R5,#0x0
   \   0006CF   7B19         MOV     R3,#0x19
   \   0006D1   7A01         MOV     R2,#0x1
   \   0006D3   7902         MOV     R1,#0x2
   \   0006D5   12....       LCALL   ??HalLedBlink?relay
   1286                      ONOROFF4 = 3;//切换
   \   0006D8   90....       MOV     DPTR,#ONOROFF4
   \   0006DB   7403         MOV     A,#0x3
   \   0006DD   F0           MOVX    @DPTR,A
   1287                        
   1288                   if ( AF_DataRequest( &SampleApp_BIND_DstAddr, &SampleApp_epDesc4,
   1289                                         SAMPLEAPP_ELOCK_CLUSTERID,
   1290                                         1,  //数据长度
   1291                                         &ONOROFF4,//###添加的发送数据        
   1292                                         &SampleApp_TransID,
   1293                                         AF_DISCV_ROUTE,
   1294                                         AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   0006DE                ; Setup parameters for call to function AF_DataRequest
   \   0006DE   75..0F       MOV     ?V0 + 0,#0xf
   \   0006E1   78..         MOV     R0,#?V0 + 0
   \   0006E3   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0006E6   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   0006E9   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   0006EC   78..         MOV     R0,#?V0 + 0
   \   0006EE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0006F1   75....       MOV     ?V0 + 0,#ONOROFF4 & 0xff
   \   0006F4   75....       MOV     ?V0 + 1,#(ONOROFF4 >> 8) & 0xff
   \   0006F7   78..         MOV     R0,#?V0 + 0
   \   0006F9   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0006FC   75..01       MOV     ?V0 + 0,#0x1
   \   0006FF   75..00       MOV     ?V0 + 1,#0x0
   \   000702   78..         MOV     R0,#?V0 + 0
   \   000704   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000707   75..0E       MOV     ?V0 + 0,#0xe
   \   00070A   75..00       MOV     ?V0 + 1,#0x0
   \   00070D   78..         MOV     R0,#?V0 + 0
   \   00070F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000712   7920         MOV     R1,#0x20
   \   000714   7C..         MOV     R4,#SampleApp_epDesc4 & 0xff
   \   000716   7D..         MOV     R5,#(SampleApp_epDesc4 >> 8) & 0xff
   \   000718   7A..         MOV     R2,#SampleApp_BIND_DstAddr & 0xff
   \   00071A   7B..         MOV     R3,#(SampleApp_BIND_DstAddr >> 8) & 0xff
   \   00071C   12....       LCALL   ??AF_DataRequest?relay
   \   00071F   7409         MOV     A,#0x9
   \   000721   12....       LCALL   ?DEALLOC_XSTACK8
   \   000724   E9           MOV     A,R1
   \   000725   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1295                    {
   1296                      
   1297                    }
   1298                 }
   1299          
   1300                 else
   1301                 {  
   1302                    
   1303                     if(screen_current_flag==0)//2012 9 15 添加每次操作之间间隔10S才能操作下一个。以防场景切换太快，影响系统
   \                     ??SampleAPP_send_delay_message_18:
   \   000728   90....       MOV     DPTR,#screen_current_flag
   \   00072B   E0           MOVX    A,@DPTR
   \   00072C   6003         JZ      $+5
   \   00072E   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1304                     {  
   1305                        HalLedBlink ( HAL_LED_2, 1, 25, 200 );;
   \   000731                ; Setup parameters for call to function HalLedBlink
   \   000731   7CC8         MOV     R4,#-0x38
   \   000733   7D00         MOV     R5,#0x0
   \   000735   7B19         MOV     R3,#0x19
   \   000737   7A01         MOV     R2,#0x1
   \   000739   7902         MOV     R1,#0x2
   \   00073B   12....       LCALL   ??HalLedBlink?relay
   1306                     screen_current_flag=1;
   \   00073E   90....       MOV     DPTR,#screen_current_flag
   \   000741   7401         MOV     A,#0x1
   \   000743   F0           MOVX    @DPTR,A
   1307                      osal_start_timerEx( UserApp_TaskID,SCREEN_CURRENT_FLAG_EVT,1000 );
   \   000744                ; Setup parameters for call to function osal_start_timerEx
   \   000744   7CE8         MOV     R4,#-0x18
   \   000746   7D03         MOV     R5,#0x3
   \   000748   7A20         MOV     R2,#0x20
   \   00074A   7B00         MOV     R3,#0x0
   \   00074C   90....       MOV     DPTR,#UserApp_TaskID
   \   00074F   E0           MOVX    A,@DPTR
   \   000750   F9           MOV     R1,A
   \   000751   12....       LCALL   ??osal_start_timerEx?relay
   \   000754   E9           MOV     A,R1
   1308                        SampleApp_SendInMessage();
   \   000755                ; Setup parameters for call to function SampleApp_SendInMessage
   \   000755   12....       LCALL   ??SampleApp_SendInMessage?relay
   \   000758   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1309                     }
   1310                 }
   1311             }
   1312            
   1313                  else if (screen_flag == 4)
   \                     ??SampleAPP_send_delay_message_13:
   \   00075B   90....       MOV     DPTR,#screen_flag
   \   00075E   E0           MOVX    A,@DPTR
   \   00075F   6404         XRL     A,#0x4
   \   000761   6003         JZ      $+5
   \   000763   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1314            { 
   1315          
   1316                        if(bindNumReflections(SAMPLEAPP_ENDPOINT2,SAMPLEAPP_HUE_CLUSTERID)>0)//有绑定项目 hue up
   \   000766                ; Setup parameters for call to function bindNumReflections
   \   000766   7A0F         MOV     R2,#0xf
   \   000768   7B00         MOV     R3,#0x0
   \   00076A   7916         MOV     R1,#0x16
   \   00076C   12....       LCALL   ??bindNumReflections?relay
   \   00076F   8A..         MOV     ?V0 + 0,R2
   \   000771   8B..         MOV     ?V0 + 1,R3
   \   000773   E5..         MOV     A,?V0 + 0
   \   000775   45..         ORL     A,?V0 + 1
   \   000777   6063         JZ      ??SampleAPP_send_delay_message_19
   1317                 {
   1318                     HalLedBlink ( HAL_LED_2, 1, 25, 200 );
   \   000779                ; Setup parameters for call to function HalLedBlink
   \   000779   7CC8         MOV     R4,#-0x38
   \   00077B   7D00         MOV     R5,#0x0
   \   00077D   7B19         MOV     R3,#0x19
   \   00077F   7A01         MOV     R2,#0x1
   \   000781   7902         MOV     R1,#0x2
   \   000783   12....       LCALL   ??HalLedBlink?relay
   1319                      huePara[0] =4;  //开         
   \   000786   90....       MOV     DPTR,#huePara
   \   000789   7404         MOV     A,#0x4
   \   00078B   F0           MOVX    @DPTR,A
   1320                      huePara[1] =0;  //开         
   \   00078C   90....       MOV     DPTR,#huePara + 1
   \   00078F   7400         MOV     A,#0x0
   \   000791   F0           MOVX    @DPTR,A
   1321                   if ( AF_DataRequest( &SampleApp_BIND_DstAddr, &SampleApp_epDesc2,
   1322                                         SAMPLEAPP_HUE_CLUSTERID,
   1323                                         2,  //数据长度
   1324                                         (uint8 *)&huePara,//###添加的发送数据        
   1325                                         &SampleApp_TransID,
   1326                                         AF_DISCV_ROUTE,
   1327                                         AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000792                ; Setup parameters for call to function AF_DataRequest
   \   000792   75..0F       MOV     ?V0 + 0,#0xf
   \   000795   78..         MOV     R0,#?V0 + 0
   \   000797   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00079A   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   00079D   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   0007A0   78..         MOV     R0,#?V0 + 0
   \   0007A2   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0007A5   75....       MOV     ?V0 + 0,#huePara & 0xff
   \   0007A8   75....       MOV     ?V0 + 1,#(huePara >> 8) & 0xff
   \   0007AB   78..         MOV     R0,#?V0 + 0
   \   0007AD   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0007B0   75..02       MOV     ?V0 + 0,#0x2
   \   0007B3   75..00       MOV     ?V0 + 1,#0x0
   \   0007B6   78..         MOV     R0,#?V0 + 0
   \   0007B8   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0007BB   75..0F       MOV     ?V0 + 0,#0xf
   \   0007BE   75..00       MOV     ?V0 + 1,#0x0
   \   0007C1   78..         MOV     R0,#?V0 + 0
   \   0007C3   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0007C6   7920         MOV     R1,#0x20
   \   0007C8   7C..         MOV     R4,#SampleApp_epDesc2 & 0xff
   \   0007CA   7D..         MOV     R5,#(SampleApp_epDesc2 >> 8) & 0xff
   \   0007CC   7A..         MOV     R2,#SampleApp_BIND_DstAddr & 0xff
   \   0007CE   7B..         MOV     R3,#(SampleApp_BIND_DstAddr >> 8) & 0xff
   \   0007D0   12....       LCALL   ??AF_DataRequest?relay
   \   0007D3   7409         MOV     A,#0x9
   \   0007D5   12....       LCALL   ?DEALLOC_XSTACK8
   \   0007D8   E9           MOV     A,R1
   \   0007D9   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1328                    {
   1329                      
   1330                    }
   1331                 }
   1332                 else if(bindNumReflections(SAMPLEAPP_ENDPOINT5,SAMPLEAPP_ONOFF_CLUSTERID)>0)//有绑定项目
   \                     ??SampleAPP_send_delay_message_19:
   \   0007DC                ; Setup parameters for call to function bindNumReflections
   \   0007DC   7A01         MOV     R2,#0x1
   \   0007DE   7B00         MOV     R3,#0x0
   \   0007E0   7919         MOV     R1,#0x19
   \   0007E2   12....       LCALL   ??bindNumReflections?relay
   \   0007E5   8A..         MOV     ?V0 + 0,R2
   \   0007E7   8B..         MOV     ?V0 + 1,R3
   \   0007E9   E5..         MOV     A,?V0 + 0
   \   0007EB   45..         ORL     A,?V0 + 1
   \   0007ED   605D         JZ      ??SampleAPP_send_delay_message_20
   1333                 {
   1334                 HalLedBlink ( HAL_LED_2, 1, 25, 200 );
   \   0007EF                ; Setup parameters for call to function HalLedBlink
   \   0007EF   7CC8         MOV     R4,#-0x38
   \   0007F1   7D00         MOV     R5,#0x0
   \   0007F3   7B19         MOV     R3,#0x19
   \   0007F5   7A01         MOV     R2,#0x1
   \   0007F7   7902         MOV     R1,#0x2
   \   0007F9   12....       LCALL   ??HalLedBlink?relay
   1335                      ONOROFF5 = 2;  //开         
   \   0007FC   90....       MOV     DPTR,#ONOROFF5
   \   0007FF   7402         MOV     A,#0x2
   \   000801   F0           MOVX    @DPTR,A
   1336                   if ( AF_DataRequest( &SampleApp_BIND_DstAddr, &SampleApp_epDesc5,
   1337                                         SAMPLEAPP_ONOFF_CLUSTERID,
   1338                                         1,  //数据长度
   1339                                         &ONOROFF5,//###添加的发送数据        
   1340                                         &SampleApp_TransID,
   1341                                         AF_DISCV_ROUTE,
   1342                                         AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000802                ; Setup parameters for call to function AF_DataRequest
   \   000802   75..0F       MOV     ?V0 + 0,#0xf
   \   000805   78..         MOV     R0,#?V0 + 0
   \   000807   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00080A   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   00080D   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000810   78..         MOV     R0,#?V0 + 0
   \   000812   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000815   75....       MOV     ?V0 + 0,#ONOROFF5 & 0xff
   \   000818   75....       MOV     ?V0 + 1,#(ONOROFF5 >> 8) & 0xff
   \   00081B   78..         MOV     R0,#?V0 + 0
   \   00081D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000820   75..01       MOV     ?V0 + 0,#0x1
   \   000823   75..00       MOV     ?V0 + 1,#0x0
   \   000826   78..         MOV     R0,#?V0 + 0
   \   000828   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00082B   75..01       MOV     ?V0 + 0,#0x1
   \   00082E   75..00       MOV     ?V0 + 1,#0x0
   \   000831   78..         MOV     R0,#?V0 + 0
   \   000833   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000836   7920         MOV     R1,#0x20
   \   000838   7C..         MOV     R4,#SampleApp_epDesc5 & 0xff
   \   00083A   7D..         MOV     R5,#(SampleApp_epDesc5 >> 8) & 0xff
   \   00083C   7A..         MOV     R2,#SampleApp_BIND_DstAddr & 0xff
   \   00083E   7B..         MOV     R3,#(SampleApp_BIND_DstAddr >> 8) & 0xff
   \   000840   12....       LCALL   ??AF_DataRequest?relay
   \   000843   7409         MOV     A,#0x9
   \   000845   12....       LCALL   ?DEALLOC_XSTACK8
   \   000848   E9           MOV     A,R1
   \   000849   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1343                    {
   1344                      
   1345                    }
   1346                 }
   1347                 
   1348                  else if(bindNumReflections(SAMPLEAPP_ENDPOINT5,SAMPLEAPP_DIMMER_CLUSTERID)>0)//有绑定项目
   \                     ??SampleAPP_send_delay_message_20:
   \   00084C                ; Setup parameters for call to function bindNumReflections
   \   00084C   7A0B         MOV     R2,#0xb
   \   00084E   7B00         MOV     R3,#0x0
   \   000850   7919         MOV     R1,#0x19
   \   000852   12....       LCALL   ??bindNumReflections?relay
   \   000855   8A..         MOV     ?V0 + 0,R2
   \   000857   8B..         MOV     ?V0 + 1,R3
   \   000859   E5..         MOV     A,?V0 + 0
   \   00085B   45..         ORL     A,?V0 + 1
   \   00085D   605D         JZ      ??SampleAPP_send_delay_message_21
   1349                 {
   1350                     HalLedBlink ( HAL_LED_2, 1, 25, 200 );
   \   00085F                ; Setup parameters for call to function HalLedBlink
   \   00085F   7CC8         MOV     R4,#-0x38
   \   000861   7D00         MOV     R5,#0x0
   \   000863   7B19         MOV     R3,#0x19
   \   000865   7A01         MOV     R2,#0x1
   \   000867   7902         MOV     R1,#0x2
   \   000869   12....       LCALL   ??HalLedBlink?relay
   1351                      ONOROFF5= 0;
   \   00086C   90....       MOV     DPTR,#ONOROFF5
   \   00086F   7400         MOV     A,#0x0
   \   000871   F0           MOVX    @DPTR,A
   1352                        
   1353                   if ( AF_DataRequest( &SampleApp_BIND_DstAddr, &SampleApp_epDesc5,
   1354                                         SAMPLEAPP_DIMMER_CLUSTERID,
   1355                                         1,  //数据长度
   1356                                         &ONOROFF5,//###添加的发送数据        
   1357                                         &SampleApp_TransID,
   1358                                         AF_DISCV_ROUTE,
   1359                                         AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000872                ; Setup parameters for call to function AF_DataRequest
   \   000872   75..0F       MOV     ?V0 + 0,#0xf
   \   000875   78..         MOV     R0,#?V0 + 0
   \   000877   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00087A   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   00087D   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000880   78..         MOV     R0,#?V0 + 0
   \   000882   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000885   75....       MOV     ?V0 + 0,#ONOROFF5 & 0xff
   \   000888   75....       MOV     ?V0 + 1,#(ONOROFF5 >> 8) & 0xff
   \   00088B   78..         MOV     R0,#?V0 + 0
   \   00088D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000890   75..01       MOV     ?V0 + 0,#0x1
   \   000893   75..00       MOV     ?V0 + 1,#0x0
   \   000896   78..         MOV     R0,#?V0 + 0
   \   000898   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00089B   75..0B       MOV     ?V0 + 0,#0xb
   \   00089E   75..00       MOV     ?V0 + 1,#0x0
   \   0008A1   78..         MOV     R0,#?V0 + 0
   \   0008A3   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0008A6   7920         MOV     R1,#0x20
   \   0008A8   7C..         MOV     R4,#SampleApp_epDesc5 & 0xff
   \   0008AA   7D..         MOV     R5,#(SampleApp_epDesc5 >> 8) & 0xff
   \   0008AC   7A..         MOV     R2,#SampleApp_BIND_DstAddr & 0xff
   \   0008AE   7B..         MOV     R3,#(SampleApp_BIND_DstAddr >> 8) & 0xff
   \   0008B0   12....       LCALL   ??AF_DataRequest?relay
   \   0008B3   7409         MOV     A,#0x9
   \   0008B5   12....       LCALL   ?DEALLOC_XSTACK8
   \   0008B8   E9           MOV     A,R1
   \   0008B9   02....       LJMP    ??SampleAPP_send_delay_message_2 & 0xFFFF
   1360                    {
   1361                      
   1362                    }
   1363                 }
   1364                 
   1365                 
   1366                  else if(bindNumReflections(SAMPLEAPP_ENDPOINT5,SAMPLEAPP_ELOCK_CLUSTERID)>0)//有绑定项目
   \                     ??SampleAPP_send_delay_message_21:
   \   0008BC                ; Setup parameters for call to function bindNumReflections
   \   0008BC   7A0E         MOV     R2,#0xe
   \   0008BE   7B00         MOV     R3,#0x0
   \   0008C0   7919         MOV     R1,#0x19
   \   0008C2   12....       LCALL   ??bindNumReflections?relay
   \   0008C5   8A..         MOV     ?V0 + 0,R2
   \   0008C7   8B..         MOV     ?V0 + 1,R3
   \   0008C9   E5..         MOV     A,?V0 + 0
   \   0008CB   45..         ORL     A,?V0 + 1
   \   0008CD   605C         JZ      ??SampleAPP_send_delay_message_22
   1367                 {
   1368                   HalLedBlink ( HAL_LED_2, 1, 25, 200 );
   \   0008CF                ; Setup parameters for call to function HalLedBlink
   \   0008CF   7CC8         MOV     R4,#-0x38
   \   0008D1   7D00         MOV     R5,#0x0
   \   0008D3   7B19         MOV     R3,#0x19
   \   0008D5   7A01         MOV     R2,#0x1
   \   0008D7   7902         MOV     R1,#0x2
   \   0008D9   12....       LCALL   ??HalLedBlink?relay
   1369                      ONOROFF5 = 3;//切换
   \   0008DC   90....       MOV     DPTR,#ONOROFF5
   \   0008DF   7403         MOV     A,#0x3
   \   0008E1   F0           MOVX    @DPTR,A
   1370                        
   1371                   if ( AF_DataRequest( &SampleApp_BIND_DstAddr, &SampleApp_epDesc5,
   1372                                         SAMPLEAPP_ELOCK_CLUSTERID,
   1373                                         1,  //数据长度
   1374                                         &ONOROFF3,//###添加的发送数据        
   1375                                         &SampleApp_TransID,
   1376                                         AF_DISCV_ROUTE,
   1377                                         AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   0008E2                ; Setup parameters for call to function AF_DataRequest
   \   0008E2   75..0F       MOV     ?V0 + 0,#0xf
   \   0008E5   78..         MOV     R0,#?V0 + 0
   \   0008E7   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0008EA   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   0008ED   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   0008F0   78..         MOV     R0,#?V0 + 0
   \   0008F2   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0008F5   75....       MOV     ?V0 + 0,#ONOROFF3 & 0xff
   \   0008F8   75....       MOV     ?V0 + 1,#(ONOROFF3 >> 8) & 0xff
   \   0008FB   78..         MOV     R0,#?V0 + 0
   \   0008FD   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000900   75..01       MOV     ?V0 + 0,#0x1
   \   000903   75..00       MOV     ?V0 + 1,#0x0
   \   000906   78..         MOV     R0,#?V0 + 0
   \   000908   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00090B   75..0E       MOV     ?V0 + 0,#0xe
   \   00090E   75..00       MOV     ?V0 + 1,#0x0
   \   000911   78..         MOV     R0,#?V0 + 0
   \   000913   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000916   7920         MOV     R1,#0x20
   \   000918   7C..         MOV     R4,#SampleApp_epDesc5 & 0xff
   \   00091A   7D..         MOV     R5,#(SampleApp_epDesc5 >> 8) & 0xff
   \   00091C   7A..         MOV     R2,#SampleApp_BIND_DstAddr & 0xff
   \   00091E   7B..         MOV     R3,#(SampleApp_BIND_DstAddr >> 8) & 0xff
   \   000920   12....       LCALL   ??AF_DataRequest?relay
   \   000923   7409         MOV     A,#0x9
   \   000925   12....       LCALL   ?DEALLOC_XSTACK8
   \   000928   E9           MOV     A,R1
   \   000929   802D         SJMP    ??SampleAPP_send_delay_message_2
   1378                    {
   1379                      
   1380                    }
   1381                 }
   1382          
   1383                 else
   1384                 {  
   1385                    
   1386                     if(screen_current_flag==0)//2012 9 15 添加每次操作之间间隔10S才能操作下一个。以防场景切换太快，影响系统
   \                     ??SampleAPP_send_delay_message_22:
   \   00092B   90....       MOV     DPTR,#screen_current_flag
   \   00092E   E0           MOVX    A,@DPTR
   \   00092F   7027         JNZ     ??SampleAPP_send_delay_message_2
   1387                    {  
   1388                 HalLedBlink ( HAL_LED_5, 1, 25, 200 );
   \   000931                ; Setup parameters for call to function HalLedBlink
   \   000931   7CC8         MOV     R4,#-0x38
   \   000933   7D00         MOV     R5,#0x0
   \   000935   7B19         MOV     R3,#0x19
   \   000937   7A01         MOV     R2,#0x1
   \   000939   7910         MOV     R1,#0x10
   \   00093B   12....       LCALL   ??HalLedBlink?relay
   1389                      screen_current_flag=1;
   \   00093E   90....       MOV     DPTR,#screen_current_flag
   \   000941   7401         MOV     A,#0x1
   \   000943   F0           MOVX    @DPTR,A
   1390                      osal_start_timerEx( UserApp_TaskID,SCREEN_CURRENT_FLAG_EVT,1000 );
   \   000944                ; Setup parameters for call to function osal_start_timerEx
   \   000944   7CE8         MOV     R4,#-0x18
   \   000946   7D03         MOV     R5,#0x3
   \   000948   7A20         MOV     R2,#0x20
   \   00094A   7B00         MOV     R3,#0x0
   \   00094C   90....       MOV     DPTR,#UserApp_TaskID
   \   00094F   E0           MOVX    A,@DPTR
   \   000950   F9           MOV     R1,A
   \   000951   12....       LCALL   ??osal_start_timerEx?relay
   \   000954   E9           MOV     A,R1
   1391          
   1392                        SampleApp_SendInMessage();
   \   000955                ; Setup parameters for call to function SampleApp_SendInMessage
   \   000955   12....       LCALL   ??SampleApp_SendInMessage?relay
   1393                                                     
   1394                     }
   1395                 }
   1396          
   1397             }
   1398          }
   \                     ??SampleAPP_send_delay_message_2:
   \   000958   7F02         MOV     R7,#0x2
   \   00095A   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for NORMAL_POLL_TIME>`:
   \   000000   581B         DW 7000

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for bindingOUTClusters>`:
   \   000000   0100         DW 1
   \   000002   0B00         DW 11
   \   000004   0D00         DW 13
   \   000006   0E00         DW 14

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for bindingOUTClusters2>`:
   \   000000   0100         DW 1
   \   000002   0B00         DW 11
   \   000004   0E00         DW 14

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for bindingOUTClusters3>`:
   \   000000   0100         DW 1
   \   000002   0B00         DW 11
   \   000004   0D00         DW 13
   \   000006   0E00         DW 14
   \   000008   0F00         DW 15

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for longPollRateFlag>`:
   \   000000   01           DB 1

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??UserApp_Init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    UserApp_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??UserApp_ProcessEvent?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    UserApp_ProcessEvent

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_HandleKeys?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_HandleKeys

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_ProcessBINDINGMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_ProcessBINDINGMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??USER_APP_JOIN_MSG?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    USER_APP_JOIN_MSG

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??USER_APP_COMMAND?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    USER_APP_COMMAND

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??USER_SET_RS_MSG?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    USER_SET_RS_MSG

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SendInMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SendInMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??User_APP_Drive_init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    User_APP_Drive_init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??READ_NETKEY?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    READ_NETKEY

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??LED_CHANGE?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    LED_CHANGE

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??USER_ZDO_JOINING_MSG?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    USER_ZDO_JOINING_MSG

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??USER_AFTER_RS_MSG?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    USER_AFTER_RS_MSG

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??USER_MAYBE_BUTTERY_MSG?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    USER_MAYBE_BUTTERY_MSG

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??USER_SET_NOMAL_POLL_TIME?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    USER_SET_NOMAL_POLL_TIME

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleAPP_ProcessZDOMsgs?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleAPP_ProcessZDOMsgs

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleAPP_send_delay_message?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleAPP_send_delay_message

   Maximum stack usage in bytes:

     Function                       ISTACK PSTACK XSTACK
     --------                       ------ ------ ------
     LED_CHANGE                         0      0      0
     READ_NETKEY                        0      0      0
     SampleAPP_ProcessZDOMsgs           0      0     23
       -> HalLedBlink                   0      0     18
       -> HalLedBlink                   0      0     18
     SampleAPP_send_delay_message       0      0     19
       -> bindNumReflections            0      0     20
       -> HalLedBlink                   0      0     20
       -> AF_DataRequest                0      0     38
       -> bindNumReflections            0      0     20
       -> HalLedBlink                   0      0     20
       -> AF_DataRequest                0      0     38
       -> bindNumReflections            0      0     20
       -> HalLedBlink                   0      0     20
       -> AF_DataRequest                0      0     38
       -> bindNumReflections            0      0     20
       -> HalLedBlink                   0      0     20
       -> AF_DataRequest                0      0     38
       -> bindNumReflections            0      0     20
       -> HalLedBlink                   0      0     20
       -> AF_DataRequest                0      0     38
       -> HalLedBlink                   0      0     20
       -> osal_start_timerEx            0      0     20
       -> SampleApp_SendInMessage       0      0     20
       -> bindNumReflections            0      0     20
       -> HalLedBlink                   0      0     20
       -> AF_DataRequest                0      0     38
       -> bindNumReflections            0      0     20
       -> HalLedBlink                   0      0     20
       -> AF_DataRequest                0      0     38
       -> bindNumReflections            0      0     20
       -> HalLedBlink                   0      0     20
       -> AF_DataRequest                0      0     38
       -> bindNumReflections            0      0     20
       -> HalLedBlink                   0      0     20
       -> AF_DataRequest                0      0     38
       -> bindNumReflections            0      0     20
       -> HalLedBlink                   0      0     20
       -> AF_DataRequest                0      0     38
       -> HalLedBlink                   0      0     20
       -> osal_start_timerEx            0      0     20
       -> SampleApp_SendInMessage       0      0     20
       -> bindNumReflections            0      0     20
       -> HalLedBlink                   0      0     20
       -> AF_DataRequest                0      0     38
       -> bindNumReflections            0      0     20
       -> HalLedBlink                   0      0     20
       -> AF_DataRequest                0      0     38
       -> bindNumReflections            0      0     20
       -> HalLedBlink                   0      0     20
       -> AF_DataRequest                0      0     38
       -> bindNumReflections            0      0     20
       -> HalLedBlink                   0      0     20
       -> AF_DataRequest                0      0     38
       -> bindNumReflections            0      0     20
       -> HalLedBlink                   0      0     20
       -> AF_DataRequest                0      0     38
       -> HalLedBlink                   0      0     20
       -> osal_start_timerEx            0      0     20
       -> SampleApp_SendInMessage       0      0     20
       -> bindNumReflections            0      0     20
       -> HalLedBlink                   0      0     20
       -> AF_DataRequest                0      0     38
       -> bindNumReflections            0      0     20
       -> HalLedBlink                   0      0     20
       -> AF_DataRequest                0      0     38
       -> bindNumReflections            0      0     20
       -> HalLedBlink                   0      0     20
       -> AF_DataRequest                0      0     38
       -> bindNumReflections            0      0     20
       -> HalLedBlink                   0      0     20
       -> AF_DataRequest                0      0     38
       -> HalLedBlink                   0      0     20
       -> osal_start_timerEx            0      0     20
       -> SampleApp_SendInMessage       0      0     20
     SampleApp_HandleKeys               0      0     44
       -> HalLedBlink                   0      0     42
       -> NLME_GetShortAddr             0      0     60
       -> ZDP_EndDeviceBindReq          0      0     60
       -> HalLedBlink                   0      0     42
       -> NLME_GetShortAddr             0      0     60
       -> ZDP_EndDeviceBindReq          0      0     60
       -> HalLedBlink                   0      0     42
       -> NLME_GetShortAddr             0      0     60
       -> ZDP_EndDeviceBindReq          0      0     60
       -> HalLedBlink                   0      0     42
       -> NLME_GetShortAddr             0      0     60
       -> ZDP_EndDeviceBindReq          0      0     60
       -> APPLY_TO_JOIN_OF_KEY          0      0     42
       -> HalLedBlink                   0      0     42
       -> NLME_PermitJoiningRequest     0      0     42
       -> ZDP_MgmtPermitJoinReq         0      0     42
       -> HalLedBlink                   0      0     42
       -> NLME_PermitJoiningRequest     0      0     42
       -> ZDP_MgmtPermitJoinReq         0      0     42
       -> HalLedBlink                   0      0     42
       -> RESTORE_TO_FACTORY            0      0     42
       -> osal_start_timerEx            0      0     42
     SampleApp_ProcessBINDINGMessage
                                        0      0      0
     SampleApp_SendInMessage            1      0     25
       -> osal_mem_alloc                0      0     22
       -> USER_SEND_ADD_STR             0      0     22
       -> USER_APP_SEND_IN              0      0     22
       -> USER_APP_SEND_IN              0      0     22
       -> osal_mem_free                 0      0     22
     USER_AFTER_RS_MSG                  0      0      0
     USER_APP_COMMAND                   1      0     10
     USER_APP_JOIN_MSG                  0      0     10
       -> HalLedBlink                   0      0     20
       -> NLME_SetPollRate              0      0     20
       -> SampleApp_GetShortAddr        0      0     20
       -> osal_mem_free                 0      0     20
     USER_MAYBE_BUTTERY_MSG             0      0     10
       -> myApp_ReadBattery             0      0     20
       -> osal_start_timerEx            0      0     20
     USER_SET_NOMAL_POLL_TIME           2      0      0
     USER_SET_RS_MSG                    2      0      0
       -> myApp_ReadBattery             4      0      0
       -> osal_start_timerEx            4      0      0
     USER_ZDO_JOINING_MSG               2      0      0
       -> HalLedBlink                   4      0      0
     UserApp_Init                       0      0      9
       -> RegisterForKeys               0      0     18
       -> afRegister                    0      0     18
       -> afRegister                    0      0     18
       -> afRegister                    0      0     18
       -> afRegister                    0      0     18
       -> afRegister                    0      0     18
       -> RegisterForKeys               0      0     18
       -> ZDO_RegisterForZDOMsg         0      0     18
       -> User_APP_Drive_init           0      0     18
     UserApp_ProcessEvent               0      0     14
       -> osal_msg_receive              0      0     28
       -> SampleAPP_ProcessZDOMsgs      0      0     28
       -> SampleApp_HandleKeys          0      0     28
       -> osal_msg_deallocate           0      0     28
       -> osal_msg_receive              0      0     28
       -> osal_start_timerEx            0      0     28
       -> SampleApp_SendInMessage       0      0     28
       -> myApp_ReadBattery             0      0     28
       -> osal_start_timerEx            0      0     28
       -> osal_stop_timerEx             0      0     28
       -> osal_start_timerEx            0      0     28
       -> osal_pwrmgr_device            0      0     28
       -> SampleApp_SendInMessage       0      0     28
       -> osal_start_timerEx            0      0     28
       -> osal_start_timerEx            0      0     28
     User_APP_Drive_init                0      0      9


   Segment part sizes:

     Function/Label                          Bytes
     --------------                          -----
     _A_P0                                      1
     P0IFG                                      1
     P1IFG                                      1
     P1IEN                                      1
     _A_P1                                      1
     _A_IEN0                                    1
     P0IEN                                      1
     P0DIR                                      1
     P1DIR                                      1
     SampleApp_BIND_DstAddr                    12
     UserApp_TaskID                             1
     RS_LEN                                     1
     RS_STR                                    10
     SHORT_ADRESS                               4
     USER_DATA_LEN                              1
     USER_DATA_TYPE                             1
     USER_DATA_STR                              2
     DEVICE_ID                                  1
     DEFINED_CONTROL_CHAR                       1
     JOIN_ROLE                                  1
     NORMAL_POLL_TIME                           2
     DEEP_POLL_FLAG                             1
     FRONT_ALARM_FLAG                           1
     active_battery_voltage                     2
     CASH_TIME_FLAG                             1
     HIGH_BUTTERY_FLAG                          1
     LOW_POWER_MODE                             1
     Heart_mesg_count                           2
     poll_count                                 1
     Hour_count                                 1
     more_detect_low_power_flag                 1
     BUTTERY_LOW_FLAG                           1
     BUTTERY_ALARM_BIT                          1
     POLLRATE_TIME_VALUE                        1
     bindingOUTClusters                         8
     bindingOUTClusters2                        6
     bindingOUTClusters3                       10
     huePara                                    2
     ONOROFF1                                   1
     ONOROFF2                                   1
     ONOROFF3                                   1
     ONOROFF4                                   1
     ONOROFF5                                   1
     ONOROFF6                                   1
     screen_current_flag                        1
     screen_flag                                1
     CR2_DATA_NODETECT_FLAG                     1
     forever_forbiten_flag                      1
     bindingINClusters                          2
     CmdType                                    1
     IRCodeIndex                                2
     longPollRateFlag                           1
     USER_SampleApp_ClusterList                26
     SampleApp_epDesc1                          6
     SampleApp_epDesc2                          6
     SampleApp_epDesc3                          6
     SampleApp_epDesc4                          6
     SampleApp_epDesc5                          6
     SampleApp_epDesc6                          6
     SampleApp_SimpleDesc1                     12
     SampleApp_SimpleDesc2                     12
     SampleApp_SimpleDesc3                     12
     SampleApp_SimpleDesc4                     12
     SampleApp_SimpleDesc5                     12
     SampleApp_SimpleDesc6                     12
     UserApp_Init                             270
     UserApp_ProcessEvent                     501
     SampleApp_HandleKeys                     827
     SampleApp_ProcessBINDINGMessage
                                                3
     USER_APP_JOIN_MSG                        137
     USER_APP_COMMAND                         195
     USER_SET_RS_MSG                          106
     SampleApp_SendInMessage                  418
     User_APP_Drive_init                       13
     READ_NETKEY                                8
     LED_CHANGE                               235
     USER_ZDO_JOINING_MSG                      24
     USER_AFTER_RS_MSG                          3
     USER_MAYBE_BUTTERY_MSG                   124
     USER_SET_NOMAL_POLL_TIME                  21
     SampleAPP_ProcessZDOMsgs                  84
     SampleAPP_send_delay_message            2397
     ?<Initializer for NORMAL_POLL_TIME>        2
     ?<Initializer for bindingOUTClusters>      8
     ?<Initializer for bindingOUTClusters2>     6
     ?<Initializer for bindingOUTClusters3>    10
     ?<Initializer for longPollRateFlag>        1
     ??UserApp_Init?relay                       6
     ??UserApp_ProcessEvent?relay               6
     ??SampleApp_HandleKeys?relay               6
     ??SampleApp_ProcessBINDINGMessage?relay    6
     ??USER_APP_JOIN_MSG?relay                  6
     ??USER_APP_COMMAND?relay                   6
     ??USER_SET_RS_MSG?relay                    6
     ??SampleApp_SendInMessage?relay            6
     ??User_APP_Drive_init?relay                6
     ??READ_NETKEY?relay                        6
     ??LED_CHANGE?relay                         6
     ??USER_ZDO_JOINING_MSG?relay               6
     ??USER_AFTER_RS_MSG?relay                  6
     ??USER_MAYBE_BUTTERY_MSG?relay             6
     ??USER_SET_NOMAL_POLL_TIME?relay           6
     ??SampleAPP_ProcessZDOMsgs?relay           6
     ??SampleAPP_send_delay_message?relay       6

 
 5 366 bytes in segment BANKED_CODE
   102 bytes in segment BANK_RELAYS
     9 bytes in segment SFR_AN
    27 bytes in segment XDATA_I
    27 bytes in segment XDATA_ID
    98 bytes in segment XDATA_ROM_C
   103 bytes in segment XDATA_Z
 
 5 495 bytes of CODE  memory
    98 bytes of CONST memory
     0 bytes of DATA  memory (+ 9 bytes shared)
   130 bytes of XDATA memory

Errors: none
Warnings: 1
