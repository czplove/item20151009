###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.1.10194/W32 for 8051         06/Dec/2014  19:39:26 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(25 #
#                          1)\Projects\zstack\Samples\SampleApp\Source\zdo_sa #
#                          mple.c                                             #
#    Command line       =  -f "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_AP #
#                          P(251)\Projects\zstack\Samples\SampleApp\CC2530DB\ #
#                          ..\..\..\Tools\CC2530DB\f8wEndev.cfg" (-DCPU32MHZ  #
#                          -DROOT=__near_func -DMAC_CFG_TX_DATA_MAX=3         #
#                          -DMAC_CFG_TX_MAX=6 -DMAC_CFG_RX_MAX=3) -f          #
#                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(2 #
#                          51)\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\Tools\CC2530DB\f8wConfig.cfg" (-DZIGBEEPRO   #
#                          -DSECURE=1 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR       #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=60            #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=30           #
#                          -DNWK_MAX_BINDING_ENTRIES=8                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 -DASSERT_RESET         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=8000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=1000)  #
#                          -DREJOIN_POLL_RATE=440 "G:\TI\Package_libary\FORMA #
#                          L\RE_1_2_0_FORMAL_APP(251)\Projects\zstack\Samples #
#                          \SampleApp\Source\zdo_sample.c" -D NV_INIT -D      #
#                          NV_RESTORE -D HOLD_AUTO_START -D MT_TASK -D        #
#                          xMT_APP_FUNC -D MT_SYS_FUNC -D MT_ZDO_FUNC -D      #
#                          xMT_ZDO_MGMT -D ISR_KEYINTERRUPT -D POWER_SAVING   #
#                          -D SR_PIR -D CR2_DATA_NODETECT -D HAVE_TEST_FUN    #
#                          -D xRESUME_TIME_TEST -lC                           #
#                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(2 #
#                          51)\Projects\zstack\Samples\SampleApp\CC2530DB\SR_ #
#                          PIR_CR2_enddevice\List\" -lA                       #
#                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(2 #
#                          51)\Projects\zstack\Samples\SampleApp\CC2530DB\SR_ #
#                          PIR_CR2_enddevice\List\" --diag_suppress           #
#                          Pe001,Pa010 -o "G:\TI\Package_libary\FORMAL\RE_1_2 #
#                          _0_FORMAL_APP(251)\Projects\zstack\Samples\SampleA #
#                          pp\CC2530DB\SR_PIR_CR2_enddevice\Obj\" -e          #
#                          --no_cse --no_unroll --no_inline --no_code_motion  #
#                          --no_tbaa --debug --core=plain --dptr=16,1         #
#                          --data_model=large --code_model=banked             #
#                          --calling_convention=xdata_reentrant               #
#                          --place_constants=data_rom --nr_virtual_regs 16    #
#                          -I "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_AP #
#                          P(251)\Projects\zstack\Samples\SampleApp\CC2530DB\ #
#                          " -I "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_ #
#                          APP(251)\Projects\zstack\Samples\SampleApp\CC2530D #
#                          B\..\Source\" -I "G:\TI\Package_libary\FORMAL\RE_1 #
#                          _2_0_FORMAL_APP(251)\Projects\zstack\Samples\Sampl #
#                          eApp\CC2530DB\..\..\..\ZMain\TI2530DB\" -I         #
#                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(2 #
#                          51)\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\hal\include\" -I            #
#                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(2 #
#                          51)\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\hal\target\CC2530EB\" -I    #
#                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(2 #
#                          51)\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\mac\include\" -I            #
#                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(2 #
#                          51)\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\mac\high_level\" -I         #
#                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(2 #
#                          51)\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\mac\low_level\srf04\" -I    #
#                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(2 #
#                          51)\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\mac\low_level\srf04\single_ #
#                          chip\" -I "G:\TI\Package_libary\FORMAL\RE_1_2_0_FO #
#                          RMAL_APP(251)\Projects\zstack\Samples\SampleApp\CC #
#                          2530DB\..\..\..\..\..\Components\mt\" -I           #
#                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(2 #
#                          51)\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\osal\include\" -I           #
#                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(2 #
#                          51)\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\services\saddr\" -I         #
#                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(2 #
#                          51)\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\services\sdata\" -I         #
#                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(2 #
#                          51)\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\stack\af\" -I               #
#                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(2 #
#                          51)\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\stack\nwk\" -I              #
#                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(2 #
#                          51)\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\stack\sapi\" -I             #
#                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(2 #
#                          51)\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\stack\sec\" -I              #
#                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(2 #
#                          51)\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\stack\sys\" -I              #
#                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(2 #
#                          51)\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\stack\zdo\" -I              #
#                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(2 #
#                          51)\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\zmac\" -I                   #
#                          "G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(2 #
#                          51)\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\zmac\f8w\" -On              #
#                          --require_prototypes                               #
#    List file          =  G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(25 #
#                          1)\Projects\zstack\Samples\SampleApp\CC2530DB\SR_P #
#                          IR_CR2_enddevice\List\zdo_sample.lst               #
#    Object file        =  G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(25 #
#                          1)\Projects\zstack\Samples\SampleApp\CC2530DB\SR_P #
#                          IR_CR2_enddevice\Obj\zdo_sample.r51                #
#                                                                             #
#                                                                             #
###############################################################################

G:\TI\Package_libary\FORMAL\RE_1_2_0_FORMAL_APP(251)\Projects\zstack\Samples\SampleApp\Source\zdo_sample.c
      1          #include "ZComDef.h"
      2          #include "ZMac.h"
      3          //#include "OSAL.h"
      4          //#include "OSAL_Tasks.h"
      5          #include "OSAL_PwrMgr.h"
      6          //#include "OSAL_Nv.h"
      7          //#include "AF.h"
      8          #include "APSMEDE.h"
      9          #include "NLMEDE.h"
     10          #include "AddrMgr.h"
     11          #include "ZDProfile.h"
     12          #include "ZDObject.h"
     13          #include "ZDConfig.h"
     14          #include "ZDSecMgr.h"
     15          #include "ZDApp.h"
     16          //#include "DebugTrace.h"
     17          #include "nwk_util.h"
     18          #include "OnBoard.h"

   \                                 In  segment SFR_AN, at 0xa8
   \   union <unnamed> volatile __sfr _A_IEN0
   \                     _A_IEN0:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xc9
   \   unsigned char volatile __sfr WDCTL
   \                     WDCTL:
   \   000000                DS 1
     19          #include "ZGlobals.h"
     20          #include "ZDNwkMgr.h"
     21          #include "rtg.h"
     22          #include "ssp.h"
     23          /* HAL */
     24          #include "hal_led.h"
     25          //#include "hal_lcd.h"
     26          #include "hal_key.h"
     27          //#include "my_time.h"
     28          //#include "MT_UART.h"
     29          #include "ZDO_LIB.h"
     30          #include "OSAL_Nv.h"
     31          #include "common_device.h"
     32          #include "AF.h"
     33          
     34          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     35          uint8 SampleApp_TransID;  // This is the unique message ID (counter)
   \                     SampleApp_TransID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     36          uint8 SampleApp_TaskID;
   \                     SampleApp_TaskID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     37          endPointDesc_t SampleApp_epDesc;
   \                     SampleApp_epDesc:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z
     38          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     39          uint8 *shortddr_mem;  
   \                     shortddr_mem:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     40          uint8 *extendaddr_mem;
   \                     extendaddr_mem:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
     41          
     42          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     43          uint8 OS_FLAG=0;
   \                     OS_FLAG:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
     44          extern  uint8 ZDO_FIRST_join_flag ; //见NOTE

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     45           uint8 RTR_NWK_FLAG ;        //表示宏定义里定义了RTR_NWK
   \                     RTR_NWK_FLAG:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     46            uint8 POWER_SAVING_FLAG ;   //表示宏定义里定义了POWER_SAVING
   \                     POWER_SAVING_FLAG:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     47           uint8 POWER_PA_FLAG ;       //表示宏定义里定义了POWER_PA
   \                     POWER_PA_FLAG:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     48            uint8 LEAVE_NET_SET_FLAG;       //如果定义了自组网功能 则直接启动入网流程,上位机能直接干预控制
   \                     LEAVE_NET_SET_FLAG:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
     49          //extern  uint8 LEAVE_NET_SET;       //如果定义了自组网功能 则直接启动入网流程,上位机能直接干预控制
     50          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     51          uint8 New_join_role_flag = 0;   // 入网角色 
   \                     New_join_role_flag:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     52          uint8 New_join_delay_time = 0;  // 启动后 多少时间启动入网流程
   \                     New_join_delay_time:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     53          uint8 Minitue_join_delay_time =0;
   \                     Minitue_join_delay_time:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     54          uint8 Second_join_delay_time =0;
   \                     Second_join_delay_time:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     55          uint8 Join_isset_flag =0;
   \                     Join_isset_flag:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
     56          

   \                                 In  segment XDATA_I, align 1, keep-with-next
     57          uint8 Heart_mesg_flag = 1;
   \                     Heart_mesg_flag:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for Heart_mesg_flag>`
   \   000001                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
     58          uint8 defaultKey[SEC_KEY_LEN] =
   \                     defaultKey:
   \   000000                DS 16
   \   000010                REQUIRE `?<Initializer for defaultKey>`
   \   000010                REQUIRE __INIT_XDATA_I
     59          {
     60            0x03, 0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 
     61            0x02, 0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D
     62          };
     63          
     64          typedef struct
     65          {
     66            
     67            uint8 isActive;
     68            uint8 heart_count;
     69          } Child_device_t;  

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     70          Child_device_t Child_list[21];
   \                     Child_list:
   \   000000                DS 42
   \   00002A                REQUIRE __INIT_XDATA_Z
     71          
     72          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     73          uint16 New_Panid=0;
   \                     New_Panid:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     74          uint8 New_Channel_list =0;
   \                     New_Channel_list:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     75          uint8 New_Net_flag=0; // 区分是调频还是调PAN
   \                     New_Net_flag:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
     76          
     77          
     78          
     79          
     80          void ZDO_DEVICE_DISC(void);
     81          networkDesc_t* ZDApp_NwkDescListProcessing(void);
     82          void APP_JOIN_INIT(void);
     83          void APP_JOIN_DEAL_WITH(void);
     84          void APP_JOIN_START_EVT(void);
     85          void SampleApp_SendNwkaddrMessage(uint8 type1_id,uint8 type2_id);
     86          void APPLY_TO_JOIN_OF_KEY(void);
     87          void RESTORE_TO_FACTORY(void);
     88          void SampleApp_SendPeriodicMessage( void );
     89          uint8 zb_ReadConfiguration( uint8 configId, uint8 len, void *pValue );
     90          uint8 zb_WriteConfiguration( uint8 configId, uint8 len, void *pValue );
     91          uint8 *SampleApp_GetExtendAddr(void);
     92          uint8 *SampleApp_GetShortAddr(void);
     93          uint8 hextoword1(uint8 t );
     94          uint8 hextoword2(uint8 t);
     95          void zb_StartRequest(void);
     96          void APP_DEAL_WITH_ASSOCIATED(void);
     97          void SampleApp_ProcessNwkaddrMessage(afIncomingMSGPacket_t *pkt);
     98          uint8 RemoveStaleNode(uint8 index);
     99          uint8 RemoveStaleRouter(uint8 index);
    100          void SampleApp_ROUTER_ProcessPeriodicMessage_Data(afIncomingMSGPacket_t *pkt);
    101          void APP_OS_DEAL_WITH(uint16 poll_rate_value);
    102          uint8 APP_ENDDEVICE_ACK(uint8 a,uint8 b,uint8 c);

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    103          uint8 HEART_NEED_ACK_FLAG=0;
   \                     HEART_NEED_ACK_FLAG:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    104          
    105          
    106          extern void ZDApp_SendMsg( uint8 taskID, uint8 cmd, uint8 len, uint8 *buf );
    107          
    108          void sampleAPP_sendRS_periodMessage(uint8 type1_id,uint8 type2_id,uint8 data_len,uint8 *data);
    109          
    110          
    111          #define STACK_PROFILE_MAX 2

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    112          networkDesc_t* ZDApp_NwkDescListProcessing(void)
   \                     ZDApp_NwkDescListProcessing:
    113          {
   \   000000   74E8         MOV     A,#-0x18
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 24
   \   000005                ; Auto size: 0
    114            networkDesc_t *pNwkDesc;
    115            uint8 i, ResultCount = 0;
   \   000005   75..00       MOV     ?V0 + 1,#0x0
    116            uint8 stackProfile;
    117            uint8 stackProfilePro;
    118            uint8 selected;
    119            
    120            networkDesc_t *test_pNwkDesc;
    121            uint8 MaxLinkQuality=0;
   \   000008   75..00       MOV     ?V0 + 8,#0x0
    122            uint8 MaxLinkQuality_Channel=0x0B;
   \   00000B   75..0B       MOV     ?V0 + 9,#0xb
    123            uint16 MaxLinkQuality_Panid=0xFFFF;
   \   00000E   75..FF       MOV     ?V0 + 12,#-0x1
   \   000011   75..FF       MOV     ?V0 + 13,#-0x1
    124            
    125            // Count the number of nwk descriptors in the list
    126            pNwkDesc = nwk_getNwkDescList();
   \   000014                ; Setup parameters for call to function nwk_getNwkDescList
   \   000014   12....       LCALL   ??nwk_getNwkDescList?relay
   \   000017   8A..         MOV     ?V0 + 2,R2
   \   000019   8B..         MOV     ?V0 + 3,R3
   \   00001B   AE..         MOV     R6,?V0 + 2
   \   00001D   AF..         MOV     R7,?V0 + 3
    127            while (pNwkDesc)
   \                     ??ZDApp_NwkDescListProcessing_0:
   \   00001F   EE           MOV     A,R6
   \   000020   4F           ORL     A,R7
   \   000021   6013         JZ      ??ZDApp_NwkDescListProcessing_1
    128            {
    129              ResultCount++;
   \   000023   05..         INC     ?V0 + 1
    130              pNwkDesc = pNwkDesc->nextDesc;
   \   000025   EE           MOV     A,R6
   \   000026   2414         ADD     A,#0x14
   \   000028   F582         MOV     DPL,A
   \   00002A   EF           MOV     A,R7
   \   00002B   3400         ADDC    A,#0x0
   \   00002D   F583         MOV     DPH,A
   \   00002F   E0           MOVX    A,@DPTR
   \   000030   FE           MOV     R6,A
   \   000031   A3           INC     DPTR
   \   000032   E0           MOVX    A,@DPTR
   \   000033   FF           MOV     R7,A
   \   000034   80E9         SJMP    ??ZDApp_NwkDescListProcessing_0
    131            }
    132            
    133            // process discovery results
    134            stackProfilePro = FALSE;
   \                     ??ZDApp_NwkDescListProcessing_1:
   \   000036   75..00       MOV     ?V0 + 6,#0x0
    135            selected = FALSE;
   \   000039   75..00       MOV     ?V0 + 7,#0x0
    136            
    137            if ( devStartMode == MODE_JOIN )
   \   00003C   90....       MOV     DPTR,#devStartMode
   \   00003F   E0           MOVX    A,@DPTR
   \   000040   6003         JZ      $+5
   \   000042   02....       LJMP    ??ZDApp_NwkDescListProcessing_2 & 0xFFFF
    138            {  
    139              pNwkDesc = nwk_getNwkDescList();
   \   000045                ; Setup parameters for call to function nwk_getNwkDescList
   \   000045   12....       LCALL   ??nwk_getNwkDescList?relay
   \   000048   8A..         MOV     ?V0 + 2,R2
   \   00004A   8B..         MOV     ?V0 + 3,R3
   \   00004C   AE..         MOV     R6,?V0 + 2
   \   00004E   AF..         MOV     R7,?V0 + 3
    140              MaxLinkQuality=pNwkDesc->chosenRouterLinkQuality;
   \   000050   8E82         MOV     DPL,R6
   \   000052   8F83         MOV     DPH,R7
   \   000054   A3           INC     DPTR
   \   000055   A3           INC     DPTR
   \   000056   A3           INC     DPTR
   \   000057   A3           INC     DPTR
   \   000058   A3           INC     DPTR
   \   000059   A3           INC     DPTR
   \   00005A   A3           INC     DPTR
   \   00005B   A3           INC     DPTR
   \   00005C   A3           INC     DPTR
   \   00005D   E0           MOVX    A,@DPTR
   \   00005E   F5..         MOV     ?V0 + 8,A
    141              MaxLinkQuality_Channel=pNwkDesc->logicalChannel;
   \   000060   8E82         MOV     DPL,R6
   \   000062   8F83         MOV     DPH,R7
   \   000064   A3           INC     DPTR
   \   000065   A3           INC     DPTR
   \   000066   E0           MOVX    A,@DPTR
   \   000067   F5..         MOV     ?V0 + 9,A
    142              MaxLinkQuality_Panid = pNwkDesc->panId;
   \   000069   8E82         MOV     DPL,R6
   \   00006B   8F83         MOV     DPH,R7
   \   00006D   E0           MOVX    A,@DPTR
   \   00006E   F5..         MOV     ?V0 + 12,A
   \   000070   A3           INC     DPTR
   \   000071   E0           MOVX    A,@DPTR
   \   000072   F5..         MOV     ?V0 + 13,A
    143              for(uint8 j=0;j<ResultCount-1;j++,pNwkDesc = pNwkDesc->nextDesc)
   \   000074   7A00         MOV     R2,#0x0
   \                     ??ZDApp_NwkDescListProcessing_3:
   \   000076   8A..         MOV     ?V0 + 2,R2
   \   000078   75..00       MOV     ?V0 + 3,#0x0
   \   00007B   85....       MOV     ?V0 + 4,?V0 + 1
   \   00007E   75..00       MOV     ?V0 + 5,#0x0
   \   000081   E5..         MOV     A,?V0 + 4
   \   000083   24FF         ADD     A,#-0x1
   \   000085   F8           MOV     R0,A
   \   000086   E5..         MOV     A,?V0 + 5
   \   000088   34FF         ADDC    A,#-0x1
   \   00008A   F9           MOV     R1,A
   \   00008B   C3           CLR     C
   \   00008C   E5..         MOV     A,?V0 + 2
   \   00008E   98           SUBB    A,R0
   \   00008F   E5..         MOV     A,?V0 + 3
   \   000091   99           SUBB    A,R1
   \   000092   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000094   65D0         XRL     A,PSW
   \   000096   33           RLC     A
   \   000097   506B         JNC     ??ZDApp_NwkDescListProcessing_2
    144              {
    145                test_pNwkDesc=pNwkDesc->nextDesc;
   \   000099   EE           MOV     A,R6
   \   00009A   2414         ADD     A,#0x14
   \   00009C   F582         MOV     DPL,A
   \   00009E   EF           MOV     A,R7
   \   00009F   3400         ADDC    A,#0x0
   \   0000A1   F583         MOV     DPH,A
   \   0000A3   E0           MOVX    A,@DPTR
   \   0000A4   F8           MOV     R0,A
   \   0000A5   A3           INC     DPTR
   \   0000A6   E0           MOVX    A,@DPTR
   \   0000A7   F9           MOV     R1,A
   \   0000A8   88..         MOV     ?V0 + 14,R0
   \   0000AA   89..         MOV     ?V0 + 15,R1
    146                if(test_pNwkDesc!=NULL)
   \   0000AC   E5..         MOV     A,?V0 + 14
   \   0000AE   45..         ORL     A,?V0 + 15
   \   0000B0   603F         JZ      ??ZDApp_NwkDescListProcessing_4
    147                {
    148                  if(MaxLinkQuality <=test_pNwkDesc->chosenRouterLinkQuality )
   \   0000B2   85..82       MOV     DPL,?V0 + 14
   \   0000B5   85..83       MOV     DPH,?V0 + 15
   \   0000B8   A3           INC     DPTR
   \   0000B9   A3           INC     DPTR
   \   0000BA   A3           INC     DPTR
   \   0000BB   A3           INC     DPTR
   \   0000BC   A3           INC     DPTR
   \   0000BD   A3           INC     DPTR
   \   0000BE   A3           INC     DPTR
   \   0000BF   A3           INC     DPTR
   \   0000C0   A3           INC     DPTR
   \   0000C1   E0           MOVX    A,@DPTR
   \   0000C2   C3           CLR     C
   \   0000C3   95..         SUBB    A,?V0 + 8
   \   0000C5   402A         JC      ??ZDApp_NwkDescListProcessing_4
    149                  {
    150                    MaxLinkQuality=test_pNwkDesc->chosenRouterLinkQuality;
   \   0000C7   85..82       MOV     DPL,?V0 + 14
   \   0000CA   85..83       MOV     DPH,?V0 + 15
   \   0000CD   A3           INC     DPTR
   \   0000CE   A3           INC     DPTR
   \   0000CF   A3           INC     DPTR
   \   0000D0   A3           INC     DPTR
   \   0000D1   A3           INC     DPTR
   \   0000D2   A3           INC     DPTR
   \   0000D3   A3           INC     DPTR
   \   0000D4   A3           INC     DPTR
   \   0000D5   A3           INC     DPTR
   \   0000D6   E0           MOVX    A,@DPTR
   \   0000D7   F5..         MOV     ?V0 + 8,A
    151                    MaxLinkQuality_Channel=test_pNwkDesc->logicalChannel;
   \   0000D9   85..82       MOV     DPL,?V0 + 14
   \   0000DC   85..83       MOV     DPH,?V0 + 15
   \   0000DF   A3           INC     DPTR
   \   0000E0   A3           INC     DPTR
   \   0000E1   E0           MOVX    A,@DPTR
   \   0000E2   F5..         MOV     ?V0 + 9,A
    152                    MaxLinkQuality_Panid = test_pNwkDesc->panId;
   \   0000E4   85..82       MOV     DPL,?V0 + 14
   \   0000E7   85..83       MOV     DPH,?V0 + 15
   \   0000EA   E0           MOVX    A,@DPTR
   \   0000EB   F5..         MOV     ?V0 + 12,A
   \   0000ED   A3           INC     DPTR
   \   0000EE   E0           MOVX    A,@DPTR
   \   0000EF   F5..         MOV     ?V0 + 13,A
    153                  }
    154                }
    155                
    156              }
   \                     ??ZDApp_NwkDescListProcessing_4:
   \   0000F1   0A           INC     R2
   \   0000F2   EE           MOV     A,R6
   \   0000F3   2414         ADD     A,#0x14
   \   0000F5   F582         MOV     DPL,A
   \   0000F7   EF           MOV     A,R7
   \   0000F8   3400         ADDC    A,#0x0
   \   0000FA   F583         MOV     DPH,A
   \   0000FC   E0           MOVX    A,@DPTR
   \   0000FD   FE           MOV     R6,A
   \   0000FE   A3           INC     DPTR
   \   0000FF   E0           MOVX    A,@DPTR
   \   000100   FF           MOV     R7,A
   \   000101   02....       LJMP    ??ZDApp_NwkDescListProcessing_3 & 0xFFFF
    157            }
    158            
    159            for ( stackProfile = 0; stackProfile < STACK_PROFILE_MAX; stackProfile++ )
   \                     ??ZDApp_NwkDescListProcessing_2:
   \   000104   75..00       MOV     ?V0 + 10,#0x0
   \                     ??ZDApp_NwkDescListProcessing_5:
   \   000107   E5..         MOV     A,?V0 + 10
   \   000109   C3           CLR     C
   \   00010A   9402         SUBB    A,#0x2
   \   00010C   4003         JC      $+5
   \   00010E   02....       LJMP    ??ZDApp_NwkDescListProcessing_6 & 0xFFFF
    160            {
    161              pNwkDesc = nwk_getNwkDescList();
   \   000111                ; Setup parameters for call to function nwk_getNwkDescList
   \   000111   12....       LCALL   ??nwk_getNwkDescList?relay
   \   000114   8A..         MOV     ?V0 + 2,R2
   \   000116   8B..         MOV     ?V0 + 3,R3
   \   000118   AE..         MOV     R6,?V0 + 2
   \   00011A   AF..         MOV     R7,?V0 + 3
    162              for ( i = 0; i < ResultCount; i++, pNwkDesc = pNwkDesc->nextDesc )
   \   00011C   75..00       MOV     ?V0 + 0,#0x0
   \                     ??ZDApp_NwkDescListProcessing_7:
   \   00011F   E5..         MOV     A,?V0 + 0
   \   000121   C3           CLR     C
   \   000122   95..         SUBB    A,?V0 + 1
   \   000124   4003         JC      $+5
   \   000126   02....       LJMP    ??ZDApp_NwkDescListProcessing_8 & 0xFFFF
    163              {
    164                if ( zgConfigPANID != 0xFFFF )
   \   000129   90....       MOV     DPTR,#zgConfigPANID
   \   00012C   E0           MOVX    A,@DPTR
   \   00012D   64FF         XRL     A,#0xff
   \   00012F   7004         JNZ     ??ZDApp_NwkDescListProcessing_9
   \   000131   A3           INC     DPTR
   \   000132   E0           MOVX    A,@DPTR
   \   000133   64FF         XRL     A,#0xff
   \                     ??ZDApp_NwkDescListProcessing_9:
   \   000135   6018         JZ      ??ZDApp_NwkDescListProcessing_10
    165                {
    166                  if ( pNwkDesc->panId != zgConfigPANID )
   \   000137   8E82         MOV     DPL,R6
   \   000139   8F83         MOV     DPH,R7
   \   00013B   E0           MOVX    A,@DPTR
   \   00013C   F8           MOV     R0,A
   \   00013D   A3           INC     DPTR
   \   00013E   E0           MOVX    A,@DPTR
   \   00013F   F9           MOV     R1,A
   \   000140   90....       MOV     DPTR,#zgConfigPANID
   \   000143   E0           MOVX    A,@DPTR
   \   000144   68           XRL     A,R0
   \   000145   7003         JNZ     ??ZDApp_NwkDescListProcessing_11
   \   000147   A3           INC     DPTR
   \   000148   E0           MOVX    A,@DPTR
   \   000149   69           XRL     A,R1
   \                     ??ZDApp_NwkDescListProcessing_11:
   \   00014A   6003         JZ      $+5
   \   00014C   02....       LJMP    ??ZDApp_NwkDescListProcessing_12 & 0xFFFF
    167                    continue;
    168                }
    169                
    170                if( devStartMode == MODE_REJOIN )
   \                     ??ZDApp_NwkDescListProcessing_10:
   \   00014F   90....       MOV     DPTR,#devStartMode
   \   000152   E0           MOVX    A,@DPTR
   \   000153   6403         XRL     A,#0x3
   \   000155   7026         JNZ     ??ZDApp_NwkDescListProcessing_13
    171                {
    172                  if ( _NIB.nwkPanId != INVALID_PAN_ID )
   \   000157   90....       MOV     DPTR,#_NIB + 33
   \   00015A   E0           MOVX    A,@DPTR
   \   00015B   64FE         XRL     A,#0xfe
   \   00015D   7004         JNZ     ??ZDApp_NwkDescListProcessing_14
   \   00015F   A3           INC     DPTR
   \   000160   E0           MOVX    A,@DPTR
   \   000161   64FF         XRL     A,#0xff
   \                     ??ZDApp_NwkDescListProcessing_14:
   \   000163   6018         JZ      ??ZDApp_NwkDescListProcessing_13
    173                  {
    174                    if ( pNwkDesc->panId != _NIB.nwkPanId )
   \   000165   8E82         MOV     DPL,R6
   \   000167   8F83         MOV     DPH,R7
   \   000169   E0           MOVX    A,@DPTR
   \   00016A   F8           MOV     R0,A
   \   00016B   A3           INC     DPTR
   \   00016C   E0           MOVX    A,@DPTR
   \   00016D   F9           MOV     R1,A
   \   00016E   90....       MOV     DPTR,#_NIB + 33
   \   000171   E0           MOVX    A,@DPTR
   \   000172   68           XRL     A,R0
   \   000173   7003         JNZ     ??ZDApp_NwkDescListProcessing_15
   \   000175   A3           INC     DPTR
   \   000176   E0           MOVX    A,@DPTR
   \   000177   69           XRL     A,R1
   \                     ??ZDApp_NwkDescListProcessing_15:
   \   000178   6003         JZ      $+5
   \   00017A   02....       LJMP    ??ZDApp_NwkDescListProcessing_12 & 0xFFFF
    175                      continue;
    176                  }
    177                }
    178                
    179                
    180                if ( nwk_ExtPANIDValid( ZDO_UseExtendedPANID) == true )
   \                     ??ZDApp_NwkDescListProcessing_13:
   \   00017D                ; Setup parameters for call to function nwk_ExtPANIDValid
   \   00017D   7A..         MOV     R2,#ZDO_UseExtendedPANID & 0xff
   \   00017F   7B..         MOV     R3,#(ZDO_UseExtendedPANID >> 8) & 0xff
   \   000181   12....       LCALL   ??nwk_ExtPANIDValid?relay
   \   000184   E9           MOV     A,R1
   \   000185   6401         XRL     A,#0x1
   \   000187   7015         JNZ     ??ZDApp_NwkDescListProcessing_16
    181                {
    182                  if ( osal_ExtAddrEqual( ZDO_UseExtendedPANID, pNwkDesc->extendedPANID) == false )
   \   000189                ; Setup parameters for call to function sAddrExtCmp
   \   000189   EE           MOV     A,R6
   \   00018A   240B         ADD     A,#0xb
   \   00018C   FC           MOV     R4,A
   \   00018D   EF           MOV     A,R7
   \   00018E   3400         ADDC    A,#0x0
   \   000190   FD           MOV     R5,A
   \   000191   7A..         MOV     R2,#ZDO_UseExtendedPANID & 0xff
   \   000193   7B..         MOV     R3,#(ZDO_UseExtendedPANID >> 8) & 0xff
   \   000195   12....       LCALL   ??sAddrExtCmp?relay
   \   000198   E9           MOV     A,R1
   \   000199   7003         JNZ     $+5
   \   00019B   02....       LJMP    ??ZDApp_NwkDescListProcessing_12 & 0xFFFF
    183                    continue;
    184                  
    185                }
    186                
    187                if ( ZSTACK_ROUTER_BUILD )
    188                {
    189                  if ( stackProfilePro == FALSE )
    190                  {
    191                    if ( !pNwkDesc->routerCapacity )
    192                    {
    193                      continue;
    194                    }
    195                  }
    196                  else
    197                  {
    198                    if ( !pNwkDesc->deviceCapacity )
    199                    {
    200                      continue;
    201                    }
    202                  }
    203                }
    204                else if ( ZSTACK_END_DEVICE_BUILD )
    205                {
    206                  if ( !pNwkDesc->deviceCapacity )
   \                     ??ZDApp_NwkDescListProcessing_16:
   \   00019E   8E82         MOV     DPL,R6
   \   0001A0   8F83         MOV     DPH,R7
   \   0001A2   A3           INC     DPTR
   \   0001A3   A3           INC     DPTR
   \   0001A4   A3           INC     DPTR
   \   0001A5   A3           INC     DPTR
   \   0001A6   E0           MOVX    A,@DPTR
   \   0001A7   607A         JZ      ??ZDApp_NwkDescListProcessing_12
    207                  {
    208                    continue;
    209                  }
    210                }
    211                
    212                // check version of zigbee protocol
    213                if ( pNwkDesc->version != _NIB.nwkProtocolVersion )
   \   0001A9   8E82         MOV     DPL,R6
   \   0001AB   8F83         MOV     DPH,R7
   \   0001AD   A3           INC     DPTR
   \   0001AE   A3           INC     DPTR
   \   0001AF   A3           INC     DPTR
   \   0001B0   A3           INC     DPTR
   \   0001B1   A3           INC     DPTR
   \   0001B2   E0           MOVX    A,@DPTR
   \   0001B3   F8           MOV     R0,A
   \   0001B4   90....       MOV     DPTR,#_NIB + 17
   \   0001B7   E0           MOVX    A,@DPTR
   \   0001B8   68           XRL     A,R0
   \   0001B9   7068         JNZ     ??ZDApp_NwkDescListProcessing_12
    214                  continue;
    215                
    216                // check version of stack profile
    217                if ( pNwkDesc->stackProfile != zgStackProfile  )
   \   0001BB   8E82         MOV     DPL,R6
   \   0001BD   8F83         MOV     DPH,R7
   \   0001BF   A3           INC     DPTR
   \   0001C0   A3           INC     DPTR
   \   0001C1   A3           INC     DPTR
   \   0001C2   A3           INC     DPTR
   \   0001C3   A3           INC     DPTR
   \   0001C4   A3           INC     DPTR
   \   0001C5   E0           MOVX    A,@DPTR
   \   0001C6   F8           MOV     R0,A
   \   0001C7   90....       MOV     DPTR,#zgStackProfile
   \   0001CA   E0           MOVX    A,@DPTR
   \   0001CB   68           XRL     A,R0
   \   0001CC   6035         JZ      ??ZDApp_NwkDescListProcessing_17
    218                {
    219                  if ( ((zgStackProfile == HOME_CONTROLS) && (pNwkDesc->stackProfile == ZIGBEEPRO_PROFILE))
    220                      || ((zgStackProfile == ZIGBEEPRO_PROFILE) && (pNwkDesc->stackProfile == HOME_CONTROLS))  )
   \   0001CE   90....       MOV     DPTR,#zgStackProfile
   \   0001D1   E0           MOVX    A,@DPTR
   \   0001D2   6401         XRL     A,#0x1
   \   0001D4   700F         JNZ     ??ZDApp_NwkDescListProcessing_18
   \   0001D6   8E82         MOV     DPL,R6
   \   0001D8   8F83         MOV     DPH,R7
   \   0001DA   A3           INC     DPTR
   \   0001DB   A3           INC     DPTR
   \   0001DC   A3           INC     DPTR
   \   0001DD   A3           INC     DPTR
   \   0001DE   A3           INC     DPTR
   \   0001DF   A3           INC     DPTR
   \   0001E0   E0           MOVX    A,@DPTR
   \   0001E1   6402         XRL     A,#0x2
   \   0001E3   6017         JZ      ??ZDApp_NwkDescListProcessing_19
   \                     ??ZDApp_NwkDescListProcessing_18:
   \   0001E5   90....       MOV     DPTR,#zgStackProfile
   \   0001E8   E0           MOVX    A,@DPTR
   \   0001E9   6402         XRL     A,#0x2
   \   0001EB   7012         JNZ     ??ZDApp_NwkDescListProcessing_20
   \   0001ED   8E82         MOV     DPL,R6
   \   0001EF   8F83         MOV     DPH,R7
   \   0001F1   A3           INC     DPTR
   \   0001F2   A3           INC     DPTR
   \   0001F3   A3           INC     DPTR
   \   0001F4   A3           INC     DPTR
   \   0001F5   A3           INC     DPTR
   \   0001F6   A3           INC     DPTR
   \   0001F7   E0           MOVX    A,@DPTR
   \   0001F8   6401         XRL     A,#0x1
   \   0001FA   7003         JNZ     ??ZDApp_NwkDescListProcessing_20
    221                  {
    222                    stackProfilePro = TRUE;
   \                     ??ZDApp_NwkDescListProcessing_19:
   \   0001FC   75..01       MOV     ?V0 + 6,#0x1
    223                  }
    224                  
    225                  if ( stackProfile == 0 )
   \                     ??ZDApp_NwkDescListProcessing_20:
   \   0001FF   E5..         MOV     A,?V0 + 10
   \   000201   6020         JZ      ??ZDApp_NwkDescListProcessing_12
    226                  {
    227                    continue;
    228                  }
    229                }
    230                
    231                
    232                // break;
    233                
    234                if ( devStartMode == MODE_JOIN )
   \                     ??ZDApp_NwkDescListProcessing_17:
   \   000203   90....       MOV     DPTR,#devStartMode
   \   000206   E0           MOVX    A,@DPTR
   \   000207   702E         JNZ     ??ZDApp_NwkDescListProcessing_8
    235                {  
    236                  if( (pNwkDesc->logicalChannel==MaxLinkQuality_Channel) && (pNwkDesc->panId==MaxLinkQuality_Panid) )
   \   000209   8E82         MOV     DPL,R6
   \   00020B   8F83         MOV     DPH,R7
   \   00020D   A3           INC     DPTR
   \   00020E   A3           INC     DPTR
   \   00020F   E0           MOVX    A,@DPTR
   \   000210   65..         XRL     A,?V0 + 9
   \   000212   700F         JNZ     ??ZDApp_NwkDescListProcessing_12
   \   000214   8E82         MOV     DPL,R6
   \   000216   8F83         MOV     DPH,R7
   \   000218   E0           MOVX    A,@DPTR
   \   000219   65..         XRL     A,?V0 + 12
   \   00021B   7004         JNZ     ??ZDApp_NwkDescListProcessing_21
   \   00021D   A3           INC     DPTR
   \   00021E   E0           MOVX    A,@DPTR
   \   00021F   65..         XRL     A,?V0 + 13
   \                     ??ZDApp_NwkDescListProcessing_21:
   \   000221   6014         JZ      ??ZDApp_NwkDescListProcessing_8
    237                  {
    238                    break;
    239                  }
    240                  else
    241                  {
    242                    continue;
    243                  }
    244                }
    245                else
    246                {
    247                  break; 
    248                }
    249              }
   \                     ??ZDApp_NwkDescListProcessing_12:
   \   000223   05..         INC     ?V0 + 0
   \   000225   EE           MOV     A,R6
   \   000226   2414         ADD     A,#0x14
   \   000228   F582         MOV     DPL,A
   \   00022A   EF           MOV     A,R7
   \   00022B   3400         ADDC    A,#0x0
   \   00022D   F583         MOV     DPH,A
   \   00022F   E0           MOVX    A,@DPTR
   \   000230   FE           MOV     R6,A
   \   000231   A3           INC     DPTR
   \   000232   E0           MOVX    A,@DPTR
   \   000233   FF           MOV     R7,A
   \   000234   02....       LJMP    ??ZDApp_NwkDescListProcessing_7 & 0xFFFF
    250              
    251              if (i < ResultCount)
   \                     ??ZDApp_NwkDescListProcessing_8:
   \   000237   E5..         MOV     A,?V0 + 0
   \   000239   C3           CLR     C
   \   00023A   95..         SUBB    A,?V0 + 1
   \   00023C   5005         JNC     ??ZDApp_NwkDescListProcessing_22
    252              {
    253                selected = TRUE;
   \   00023E   75..01       MOV     ?V0 + 7,#0x1
    254                break;
   \   000241   800F         SJMP    ??ZDApp_NwkDescListProcessing_6
    255              }
    256              
    257              // break if selected or stack profile pro wasn't found
    258              if ( (selected == TRUE) || (stackProfilePro == FALSE) )
   \                     ??ZDApp_NwkDescListProcessing_22:
   \   000243   7401         MOV     A,#0x1
   \   000245   65..         XRL     A,?V0 + 7
   \   000247   6009         JZ      ??ZDApp_NwkDescListProcessing_6
   \   000249   E5..         MOV     A,?V0 + 6
   \   00024B   6005         JZ      ??ZDApp_NwkDescListProcessing_6
    259              {
    260                break;
    261              }
    262            }
   \   00024D   05..         INC     ?V0 + 10
   \   00024F   02....       LJMP    ??ZDApp_NwkDescListProcessing_5 & 0xFFFF
    263            
    264            if ( i == ResultCount )
   \                     ??ZDApp_NwkDescListProcessing_6:
   \   000252   E5..         MOV     A,?V0 + 1
   \   000254   65..         XRL     A,?V0 + 0
   \   000256   7006         JNZ     ??ZDApp_NwkDescListProcessing_23
    265            {
    266              return (NULL);   // couldn't find appropriate PAN to join !
   \   000258   7A00         MOV     R2,#0x0
   \   00025A   7B00         MOV     R3,#0x0
   \   00025C   8004         SJMP    ??ZDApp_NwkDescListProcessing_24
    267            }
    268            else
    269            {
    270              return (pNwkDesc);
   \                     ??ZDApp_NwkDescListProcessing_23:
   \   00025E   EE           MOV     A,R6
   \   00025F   FA           MOV     R2,A
   \   000260   EF           MOV     A,R7
   \   000261   FB           MOV     R3,A
   \                     ??ZDApp_NwkDescListProcessing_24:
   \   000262   7F10         MOV     R7,#0x10
   \   000264   02....       LJMP    ?BANKED_LEAVE_XDATA
    271            }
    272            
    273          }// ZDApp_NwkDescListProcessing()
    274          
    275          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    276          void ZDO_DEVICE_DISC(void)
   \                     ZDO_DEVICE_DISC:
    277          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
    278            if(zdoDiscCounter<=10)
   \   000005   90....       MOV     DPTR,#zdoDiscCounter
   \   000008   E0           MOVX    A,@DPTR
   \   000009   C3           CLR     C
   \   00000A   940B         SUBB    A,#0xb
   \   00000C   506C         JNC     ??ZDO_DEVICE_DISC_0
    279            {
    280              
    281          
    282            if ( POWER_SAVING_FLAG == 1)
   \   00000E   90....       MOV     DPTR,#POWER_SAVING_FLAG
   \   000011   E0           MOVX    A,@DPTR
   \   000012   6401         XRL     A,#0x1
   \   000014   7005         JNZ     ??ZDO_DEVICE_DISC_1
    283              osal_pwrmgr_device( PWRMGR_BATTERY );
   \   000016                ; Setup parameters for call to function osal_pwrmgr_device
   \   000016   7901         MOV     R1,#0x1
   \   000018   12....       LCALL   ??osal_pwrmgr_device?relay
    284          
    285              if( devStartMode == MODE_JOIN )
   \                     ??ZDO_DEVICE_DISC_1:
   \   00001B   90....       MOV     DPTR,#devStartMode
   \   00001E   E0           MOVX    A,@DPTR
   \   00001F   700E         JNZ     ??ZDO_DEVICE_DISC_2
    286              {
    287                zgDefaultChannelList =0x0318C800;
   \   000021   90....       MOV     DPTR,#__Constant_318c800
   \   000024   12....       LCALL   ?XLOAD_R2345
   \   000027   90....       MOV     DPTR,#zgDefaultChannelList
   \   00002A   12....       LCALL   ?XSTORE_R2345
   \   00002D   8025         SJMP    ??ZDO_DEVICE_DISC_3
    288              }
    289              else if(devStartMode == MODE_REJOIN)
   \                     ??ZDO_DEVICE_DISC_2:
   \   00002F   90....       MOV     DPTR,#devStartMode
   \   000032   E0           MOVX    A,@DPTR
   \   000033   6403         XRL     A,#0x3
   \   000035   701D         JNZ     ??ZDO_DEVICE_DISC_3
    290              {
    291                zgDefaultChannelList =((uint32)0x00000001)<<_NIB.nwkLogicalChannel;
   \   000037   75..01       MOV     ?V0 + 0,#0x1
   \   00003A   75..00       MOV     ?V0 + 1,#0x0
   \   00003D   75..00       MOV     ?V0 + 2,#0x0
   \   000040   75..00       MOV     ?V0 + 3,#0x0
   \   000043   90....       MOV     DPTR,#_NIB + 22
   \   000046   E0           MOVX    A,@DPTR
   \   000047   78..         MOV     R0,#?V0 + 0
   \   000049   12....       LCALL   ?L_SHL
   \   00004C   90....       MOV     DPTR,#zgDefaultChannelList
   \   00004F   78..         MOV     R0,#?V0 + 0
   \   000051   12....       LCALL   ?L_MOV_TO_X
    292                
    293              } 
    294              zdoDiscCounter++;
   \                     ??ZDO_DEVICE_DISC_3:
   \   000054   90....       MOV     DPTR,#zdoDiscCounter
   \   000057   E0           MOVX    A,@DPTR
   \   000058   2401         ADD     A,#0x1
   \   00005A   F0           MOVX    @DPTR,A
    295              
    296              ZDApp_NetworkInit(500 + (osal_rand()& 0x007F) );
   \   00005B                ; Setup parameters for call to function ZDApp_NetworkInit
   \   00005B                ; Setup parameters for call to function osal_rand
   \   00005B   12....       LCALL   ??osal_rand?relay
   \   00005E   8A..         MOV     ?V0 + 0,R2
   \   000060   8B..         MOV     ?V0 + 1,R3
   \   000062   E5..         MOV     A,?V0 + 0
   \   000064   547F         ANL     A,#0x7f
   \   000066   F8           MOV     R0,A
   \   000067   E5..         MOV     A,?V0 + 1
   \   000069   5400         ANL     A,#0x0
   \   00006B   F9           MOV     R1,A
   \   00006C   E8           MOV     A,R0
   \   00006D   24F4         ADD     A,#-0xc
   \   00006F   FA           MOV     R2,A
   \   000070   E9           MOV     A,R1
   \   000071   3401         ADDC    A,#0x1
   \   000073   FB           MOV     R3,A
   \   000074   12....       LCALL   ??ZDApp_NetworkInit?relay
   \   000077   02....       LJMP    ??ZDO_DEVICE_DISC_4 & 0xFFFF
    297              
    298            }  
    299            
    300            else if((zdoDiscCounter>10) && (zdoDiscCounter<20) )//
   \                     ??ZDO_DEVICE_DISC_0:
   \   00007A   90....       MOV     DPTR,#zdoDiscCounter
   \   00007D   E0           MOVX    A,@DPTR
   \   00007E   C3           CLR     C
   \   00007F   940B         SUBB    A,#0xb
   \   000081   4075         JC      ??ZDO_DEVICE_DISC_5
   \   000083   90....       MOV     DPTR,#zdoDiscCounter
   \   000086   E0           MOVX    A,@DPTR
   \   000087   C3           CLR     C
   \   000088   9414         SUBB    A,#0x14
   \   00008A   506C         JNC     ??ZDO_DEVICE_DISC_5
    301            {
    302              
    303          
    304             if ( POWER_SAVING_FLAG == 1)
   \   00008C   90....       MOV     DPTR,#POWER_SAVING_FLAG
   \   00008F   E0           MOVX    A,@DPTR
   \   000090   6401         XRL     A,#0x1
   \   000092   7005         JNZ     ??ZDO_DEVICE_DISC_6
    305              osal_pwrmgr_device( PWRMGR_BATTERY );
   \   000094                ; Setup parameters for call to function osal_pwrmgr_device
   \   000094   7901         MOV     R1,#0x1
   \   000096   12....       LCALL   ??osal_pwrmgr_device?relay
    306          
    307              if( devStartMode == MODE_JOIN )
   \                     ??ZDO_DEVICE_DISC_6:
   \   000099   90....       MOV     DPTR,#devStartMode
   \   00009C   E0           MOVX    A,@DPTR
   \   00009D   700E         JNZ     ??ZDO_DEVICE_DISC_7
    308              {
    309                zgDefaultChannelList =0x0318C800;
   \   00009F   90....       MOV     DPTR,#__Constant_318c800
   \   0000A2   12....       LCALL   ?XLOAD_R2345
   \   0000A5   90....       MOV     DPTR,#zgDefaultChannelList
   \   0000A8   12....       LCALL   ?XSTORE_R2345
   \   0000AB   8025         SJMP    ??ZDO_DEVICE_DISC_8
    310              }
    311              
    312              else if(devStartMode == MODE_REJOIN)
   \                     ??ZDO_DEVICE_DISC_7:
   \   0000AD   90....       MOV     DPTR,#devStartMode
   \   0000B0   E0           MOVX    A,@DPTR
   \   0000B1   6403         XRL     A,#0x3
   \   0000B3   701D         JNZ     ??ZDO_DEVICE_DISC_8
    313              {
    314                zgDefaultChannelList =((uint32)0x00000001)<<_NIB.nwkLogicalChannel;
   \   0000B5   75..01       MOV     ?V0 + 0,#0x1
   \   0000B8   75..00       MOV     ?V0 + 1,#0x0
   \   0000BB   75..00       MOV     ?V0 + 2,#0x0
   \   0000BE   75..00       MOV     ?V0 + 3,#0x0
   \   0000C1   90....       MOV     DPTR,#_NIB + 22
   \   0000C4   E0           MOVX    A,@DPTR
   \   0000C5   78..         MOV     R0,#?V0 + 0
   \   0000C7   12....       LCALL   ?L_SHL
   \   0000CA   90....       MOV     DPTR,#zgDefaultChannelList
   \   0000CD   78..         MOV     R0,#?V0 + 0
   \   0000CF   12....       LCALL   ?L_MOV_TO_X
    315              }     
    316              zdoDiscCounter++;
   \                     ??ZDO_DEVICE_DISC_8:
   \   0000D2   90....       MOV     DPTR,#zdoDiscCounter
   \   0000D5   E0           MOVX    A,@DPTR
   \   0000D6   2401         ADD     A,#0x1
   \   0000D8   F0           MOVX    @DPTR,A
    317              
    318              ZDApp_NetworkInit(500 + (osal_rand()& 0x007F) );
   \   0000D9                ; Setup parameters for call to function ZDApp_NetworkInit
   \   0000D9                ; Setup parameters for call to function osal_rand
   \   0000D9   12....       LCALL   ??osal_rand?relay
   \   0000DC   8A..         MOV     ?V0 + 0,R2
   \   0000DE   8B..         MOV     ?V0 + 1,R3
   \   0000E0   E5..         MOV     A,?V0 + 0
   \   0000E2   547F         ANL     A,#0x7f
   \   0000E4   F8           MOV     R0,A
   \   0000E5   E5..         MOV     A,?V0 + 1
   \   0000E7   5400         ANL     A,#0x0
   \   0000E9   F9           MOV     R1,A
   \   0000EA   E8           MOV     A,R0
   \   0000EB   24F4         ADD     A,#-0xc
   \   0000ED   FA           MOV     R2,A
   \   0000EE   E9           MOV     A,R1
   \   0000EF   3401         ADDC    A,#0x1
   \   0000F1   FB           MOV     R3,A
   \   0000F2   12....       LCALL   ??ZDApp_NetworkInit?relay
   \   0000F5   02....       LJMP    ??ZDO_DEVICE_DISC_4 & 0xFFFF
    319              
    320            }
    321            
    322            else if(zdoDiscCounter==20)
   \                     ??ZDO_DEVICE_DISC_5:
   \   0000F8   90....       MOV     DPTR,#zdoDiscCounter
   \   0000FB   E0           MOVX    A,@DPTR
   \   0000FC   6414         XRL     A,#0x14
   \   0000FE   707F         JNZ     ??ZDO_DEVICE_DISC_4
    323            {
    324          
    325             if ( POWER_SAVING_FLAG == 1)
   \   000100   90....       MOV     DPTR,#POWER_SAVING_FLAG
   \   000103   E0           MOVX    A,@DPTR
   \   000104   6401         XRL     A,#0x1
   \   000106   7005         JNZ     ??ZDO_DEVICE_DISC_9
    326              osal_pwrmgr_device( PWRMGR_BATTERY ); 
   \   000108                ; Setup parameters for call to function osal_pwrmgr_device
   \   000108   7901         MOV     R1,#0x1
   \   00010A   12....       LCALL   ??osal_pwrmgr_device?relay
    327              
    328              if(devStartMode == MODE_REJOIN)
   \                     ??ZDO_DEVICE_DISC_9:
   \   00010D   90....       MOV     DPTR,#devStartMode
   \   000110   E0           MOVX    A,@DPTR
   \   000111   6403         XRL     A,#0x3
   \   000113   7031         JNZ     ??ZDO_DEVICE_DISC_10
    329                ZDApp_NetworkInit(60000 + 5*(osal_rand()& 0x007F) );
   \   000115                ; Setup parameters for call to function ZDApp_NetworkInit
   \   000115                ; Setup parameters for call to function osal_rand
   \   000115   12....       LCALL   ??osal_rand?relay
   \   000118   8A..         MOV     ?V0 + 0,R2
   \   00011A   8B..         MOV     ?V0 + 1,R3
   \   00011C   E5..         MOV     A,?V0 + 0
   \   00011E   547F         ANL     A,#0x7f
   \   000120   F8           MOV     R0,A
   \   000121   E5..         MOV     A,?V0 + 1
   \   000123   5400         ANL     A,#0x0
   \   000125   F9           MOV     R1,A
   \   000126   E8           MOV     A,R0
   \   000127   75F005       MOV     B,#0x5
   \   00012A   A4           MUL     AB
   \   00012B   C8           XCH     A,R0
   \   00012C   AAF0         MOV     R2,B
   \   00012E   75F000       MOV     B,#0x0
   \   000131   A4           MUL     AB
   \   000132   2A           ADD     A,R2
   \   000133   FA           MOV     R2,A
   \   000134   75F005       MOV     B,#0x5
   \   000137   E9           MOV     A,R1
   \   000138   A4           MUL     AB
   \   000139   2A           ADD     A,R2
   \   00013A   F9           MOV     R1,A
   \   00013B   E8           MOV     A,R0
   \   00013C   2460         ADD     A,#0x60
   \   00013E   FA           MOV     R2,A
   \   00013F   E9           MOV     A,R1
   \   000140   34EA         ADDC    A,#-0x16
   \   000142   FB           MOV     R3,A
   \   000143   12....       LCALL   ??ZDApp_NetworkInit?relay
    330              
    331              if( devStartMode == MODE_JOIN )
   \                     ??ZDO_DEVICE_DISC_10:
   \   000146   90....       MOV     DPTR,#devStartMode
   \   000149   E0           MOVX    A,@DPTR
   \   00014A   700E         JNZ     ??ZDO_DEVICE_DISC_11
    332              {
    333                zgDefaultChannelList =0x0318C800;
   \   00014C   90....       MOV     DPTR,#__Constant_318c800
   \   00014F   12....       LCALL   ?XLOAD_R2345
   \   000152   90....       MOV     DPTR,#zgDefaultChannelList
   \   000155   12....       LCALL   ?XSTORE_R2345
   \   000158   8025         SJMP    ??ZDO_DEVICE_DISC_4
    334              }
    335              else if(devStartMode == MODE_REJOIN)
   \                     ??ZDO_DEVICE_DISC_11:
   \   00015A   90....       MOV     DPTR,#devStartMode
   \   00015D   E0           MOVX    A,@DPTR
   \   00015E   6403         XRL     A,#0x3
   \   000160   701D         JNZ     ??ZDO_DEVICE_DISC_4
    336              {
    337                zgDefaultChannelList =((uint32)0x00000001)<<_NIB.nwkLogicalChannel;
   \   000162   75..01       MOV     ?V0 + 0,#0x1
   \   000165   75..00       MOV     ?V0 + 1,#0x0
   \   000168   75..00       MOV     ?V0 + 2,#0x0
   \   00016B   75..00       MOV     ?V0 + 3,#0x0
   \   00016E   90....       MOV     DPTR,#_NIB + 22
   \   000171   E0           MOVX    A,@DPTR
   \   000172   78..         MOV     R0,#?V0 + 0
   \   000174   12....       LCALL   ?L_SHL
   \   000177   90....       MOV     DPTR,#zgDefaultChannelList
   \   00017A   78..         MOV     R0,#?V0 + 0
   \   00017C   12....       LCALL   ?L_MOV_TO_X
    338              }
    339              
    340            }
    341            
    342          }
   \                     ??ZDO_DEVICE_DISC_4:
   \   00017F   7F04         MOV     R7,#0x4
   \   000181   02....       LJMP    ?BANKED_LEAVE_XDATA
    343          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    344          void ZDO_REJOIN_ERROR(void)
   \                     ZDO_REJOIN_ERROR:
    345          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    346                   SystemResetSoft();
   \   000000                ; Setup parameters for call to function Onboard_soft_reset
   \   000000   12....       LCALL   Onboard_soft_reset & 0xFFFF
    347          }
   \   000003   02....       LJMP    ?BRET
    348          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    349          void ZDO_ACK_DEAL_WITH(void)
   \                     ZDO_ACK_DEAL_WITH:
    350          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    351              nwkNeighborInitTable();
   \   000004                ; Setup parameters for call to function nwkNeighborInitTable
   \   000004   12....       LCALL   ??nwkNeighborInitTable?relay
    352              ZDApp_SendMsg( ZDAppTaskID, ZDO_NWK_JOIN_REQ, sizeof(osal_event_hdr_t), NULL );
   \   000007                ; Setup parameters for call to function ZDApp_SendMsg
   \   000007   7C00         MOV     R4,#0x0
   \   000009   7D00         MOV     R5,#0x0
   \   00000B   7B02         MOV     R3,#0x2
   \   00000D   7A03         MOV     R2,#0x3
   \   00000F   90....       MOV     DPTR,#ZDAppTaskID
   \   000012   E0           MOVX    A,@DPTR
   \   000013   F9           MOV     R1,A
   \   000014   12....       LCALL   ??ZDApp_SendMsg?relay
    353          
    354          }
   \   000017   D083         POP     DPH
   \   000019   D082         POP     DPL
   \   00001B   02....       LJMP    ?BRET
    355          
    356          // app 初始化的时候处理JOIN事宜

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    357          void APP_JOIN_INIT(void)
   \                     APP_JOIN_INIT:
    358          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    359            
    360            
    361           
    362           if ( RTR_NWK_FLAG == 1)
   \   00000A   90....       MOV     DPTR,#RTR_NWK_FLAG
   \   00000D   E0           MOVX    A,@DPTR
   \   00000E   6401         XRL     A,#0x1
   \   000010   7031         JNZ     ??APP_JOIN_INIT_0
    363           {
    364              for(uint8 i=0;i<NWK_MAX_DEVICES;i++)
   \   000012   7B00         MOV     R3,#0x0
   \                     ??APP_JOIN_INIT_1:
   \   000014   EB           MOV     A,R3
   \   000015   C3           CLR     C
   \   000016   9415         SUBB    A,#0x15
   \   000018   5029         JNC     ??APP_JOIN_INIT_0
    365              { 
    366                Child_list[i].heart_count=0;
   \   00001A   EB           MOV     A,R3
   \   00001B   F8           MOV     R0,A
   \   00001C   7900         MOV     R1,#0x0
   \   00001E   E8           MOV     A,R0
   \   00001F   75F002       MOV     B,#0x2
   \   000022   A4           MUL     AB
   \   000023   C8           XCH     A,R0
   \   000024   AAF0         MOV     R2,B
   \   000026   75F000       MOV     B,#0x0
   \   000029   A4           MUL     AB
   \   00002A   2A           ADD     A,R2
   \   00002B   FA           MOV     R2,A
   \   00002C   75F002       MOV     B,#0x2
   \   00002F   E9           MOV     A,R1
   \   000030   A4           MUL     AB
   \   000031   2A           ADD     A,R2
   \   000032   F9           MOV     R1,A
   \   000033   74..         MOV     A,#(Child_list + 1) & 0xff
   \   000035   28           ADD     A,R0
   \   000036   F582         MOV     DPL,A
   \   000038   74..         MOV     A,#((Child_list + 1) >> 8) & 0xff
   \   00003A   39           ADDC    A,R1
   \   00003B   F583         MOV     DPH,A
   \   00003D   7400         MOV     A,#0x0
   \   00003F   F0           MOVX    @DPTR,A
    367              }
   \   000040   0B           INC     R3
   \   000041   80D1         SJMP    ??APP_JOIN_INIT_1
    368           }
    369            
    370            
    371            uint8 startOptions= 0;
   \                     ??APP_JOIN_INIT_0:
   \   000043   85..82       MOV     DPL,?XSP + 0
   \   000046   85..83       MOV     DPH,?XSP + 1
   \   000049   7400         MOV     A,#0x0
   \   00004B   F0           MOVX    @DPTR,A
    372            zb_ReadConfiguration( ZCD_NV_STARTUP_OPTION, sizeof(uint8), &startOptions );
   \   00004C                ; Setup parameters for call to function zb_ReadConfiguration
   \   00004C   85..82       MOV     DPL,?XSP + 0
   \   00004F   85..83       MOV     DPH,?XSP + 1
   \   000052   AC82         MOV     R4,DPL
   \   000054   AD83         MOV     R5,DPH
   \   000056   7A01         MOV     R2,#0x1
   \   000058   7903         MOV     R1,#0x3
   \   00005A   12....       LCALL   ??zb_ReadConfiguration?relay
   \   00005D   E9           MOV     A,R1
    373            if ( startOptions & ZCD_STARTOPT_AUTO_START )
   \   00005E   85..82       MOV     DPL,?XSP + 0
   \   000061   85..83       MOV     DPH,?XSP + 1
   \   000064   E0           MOVX    A,@DPTR
   \   000065   A2E2         MOV     C,0xE0 /* A   */.2
   \   000067   5006         JNC     ??APP_JOIN_INIT_2
    374            {
    375              zb_StartRequest();
   \   000069                ; Setup parameters for call to function zb_StartRequest
   \   000069   12....       LCALL   ??zb_StartRequest?relay
   \   00006C   02....       LJMP    ??APP_JOIN_INIT_3 & 0xFFFF
    376            }
    377            
    378            else
    379            {  
    380              osal_nv_item_init(ZCD_NV_JOIN_ISSET_FLAG, 1, &Join_isset_flag);  // 判断是否为通过软件控制的入网机制
   \                     ??APP_JOIN_INIT_2:
   \   00006F                ; Setup parameters for call to function osal_nv_item_init
   \   00006F   75....       MOV     ?V0 + 0,#Join_isset_flag & 0xff
   \   000072   75....       MOV     ?V0 + 1,#(Join_isset_flag >> 8) & 0xff
   \   000075   78..         MOV     R0,#?V0 + 0
   \   000077   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00007A   7C01         MOV     R4,#0x1
   \   00007C   7D00         MOV     R5,#0x0
   \   00007E   7A38         MOV     R2,#0x38
   \   000080   7B04         MOV     R3,#0x4
   \   000082   12....       LCALL   ??osal_nv_item_init?relay
   \   000085   7402         MOV     A,#0x2
   \   000087   12....       LCALL   ?DEALLOC_XSTACK8
   \   00008A   E9           MOV     A,R1
    381              osal_nv_read(ZCD_NV_JOIN_ISSET_FLAG, 0, 1, &Join_isset_flag);
   \   00008B                ; Setup parameters for call to function osal_nv_read
   \   00008B   75....       MOV     ?V0 + 0,#Join_isset_flag & 0xff
   \   00008E   75....       MOV     ?V0 + 1,#(Join_isset_flag >> 8) & 0xff
   \   000091   78..         MOV     R0,#?V0 + 0
   \   000093   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000096   75..01       MOV     ?V0 + 0,#0x1
   \   000099   75..00       MOV     ?V0 + 1,#0x0
   \   00009C   78..         MOV     R0,#?V0 + 0
   \   00009E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000A1   7C00         MOV     R4,#0x0
   \   0000A3   7D00         MOV     R5,#0x0
   \   0000A5   7A38         MOV     R2,#0x38
   \   0000A7   7B04         MOV     R3,#0x4
   \   0000A9   12....       LCALL   ??osal_nv_read?relay
   \   0000AC   7404         MOV     A,#0x4
   \   0000AE   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000B1   E9           MOV     A,R1
    382              
    383              if(Join_isset_flag == 1)  //如果是的话 则读取上次离开网络后 被设置的参数，包括这次入网的角色定义和入网延迟时间
   \   0000B2   90....       MOV     DPTR,#Join_isset_flag
   \   0000B5   E0           MOVX    A,@DPTR
   \   0000B6   6401         XRL     A,#0x1
   \   0000B8   7045         JNZ     ??APP_JOIN_INIT_4
    384              { 
    385                
    386                osal_nv_item_init(ZCD_NV_JOIN_START_TIME_VALUE, 1, &New_join_delay_time); 
   \   0000BA                ; Setup parameters for call to function osal_nv_item_init
   \   0000BA   75....       MOV     ?V0 + 0,#New_join_delay_time & 0xff
   \   0000BD   75....       MOV     ?V0 + 1,#(New_join_delay_time >> 8) & 0xff
   \   0000C0   78..         MOV     R0,#?V0 + 0
   \   0000C2   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000C5   7C01         MOV     R4,#0x1
   \   0000C7   7D00         MOV     R5,#0x0
   \   0000C9   7A35         MOV     R2,#0x35
   \   0000CB   7B04         MOV     R3,#0x4
   \   0000CD   12....       LCALL   ??osal_nv_item_init?relay
   \   0000D0   7402         MOV     A,#0x2
   \   0000D2   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000D5   E9           MOV     A,R1
    387                osal_nv_read(ZCD_NV_JOIN_START_TIME_VALUE, 0, 1, &New_join_delay_time); 
   \   0000D6                ; Setup parameters for call to function osal_nv_read
   \   0000D6   75....       MOV     ?V0 + 0,#New_join_delay_time & 0xff
   \   0000D9   75....       MOV     ?V0 + 1,#(New_join_delay_time >> 8) & 0xff
   \   0000DC   78..         MOV     R0,#?V0 + 0
   \   0000DE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000E1   75..01       MOV     ?V0 + 0,#0x1
   \   0000E4   75..00       MOV     ?V0 + 1,#0x0
   \   0000E7   78..         MOV     R0,#?V0 + 0
   \   0000E9   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000EC   7C00         MOV     R4,#0x0
   \   0000EE   7D00         MOV     R5,#0x0
   \   0000F0   7A35         MOV     R2,#0x35
   \   0000F2   7B04         MOV     R3,#0x4
   \   0000F4   12....       LCALL   ??osal_nv_read?relay
   \   0000F7   7404         MOV     A,#0x4
   \   0000F9   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000FC   E9           MOV     A,R1
   \   0000FD   8016         SJMP    ??APP_JOIN_INIT_5
    388              }
    389              
    390              else  //如果不是从命令启动的则按照默认的启动路径  
    391              {
    392                
    393                if(LEAVE_NET_SET_FLAG==1)
   \                     ??APP_JOIN_INIT_4:
   \   0000FF   90....       MOV     DPTR,#LEAVE_NET_SET_FLAG
   \   000102   E0           MOVX    A,@DPTR
   \   000103   6401         XRL     A,#0x1
   \   000105   7008         JNZ     ??APP_JOIN_INIT_6
    394                {
    395                   New_join_delay_time = 0;
   \   000107   90....       MOV     DPTR,#New_join_delay_time
   \   00010A   7400         MOV     A,#0x0
   \   00010C   F0           MOVX    @DPTR,A
   \   00010D   8006         SJMP    ??APP_JOIN_INIT_5
    396                }
    397                else
    398                {
    399                  New_join_delay_time = 0xFF;  //没有定义的话 继续HOLD住 等待按键事件
   \                     ??APP_JOIN_INIT_6:
   \   00010F   90....       MOV     DPTR,#New_join_delay_time
   \   000112   74FF         MOV     A,#-0x1
   \   000114   F0           MOVX    @DPTR,A
    400                }
    401                
    402              } 
    403              
    404              
    405              if( (New_join_delay_time<255) && (New_join_delay_time>0))
   \                     ??APP_JOIN_INIT_5:
   \   000115   90....       MOV     DPTR,#New_join_delay_time
   \   000118   E0           MOVX    A,@DPTR
   \   000119   C3           CLR     C
   \   00011A   94FF         SUBB    A,#-0x1
   \   00011C   5062         JNC     ??APP_JOIN_INIT_7
   \   00011E   90....       MOV     DPTR,#New_join_delay_time
   \   000121   E0           MOVX    A,@DPTR
   \   000122   C3           CLR     C
   \   000123   9401         SUBB    A,#0x1
   \   000125   4059         JC      ??APP_JOIN_INIT_7
    406              {
    407                Minitue_join_delay_time =New_join_delay_time / 60;
   \   000127   75F03C       MOV     B,#0x3c
   \   00012A   90....       MOV     DPTR,#New_join_delay_time
   \   00012D   E0           MOVX    A,@DPTR
   \   00012E   84           DIV     AB
   \   00012F   90....       MOV     DPTR,#Minitue_join_delay_time
   \   000132   F0           MOVX    @DPTR,A
    408                Second_join_delay_time =New_join_delay_time % 60;
   \   000133   90....       MOV     DPTR,#New_join_delay_time
   \   000136   E0           MOVX    A,@DPTR
   \   000137   75F03C       MOV     B,#0x3c
   \   00013A   84           DIV     AB
   \   00013B   E5F0         MOV     A,B
   \   00013D   90....       MOV     DPTR,#Second_join_delay_time
   \   000140   F0           MOVX    @DPTR,A
    409                uint16 Second_time_temp=0;
   \   000141   7E00         MOV     R6,#0x0
   \   000143   7F00         MOV     R7,#0x0
    410                Second_time_temp = (Second_join_delay_time *1000) + 10;
   \   000145   90....       MOV     DPTR,#Second_join_delay_time
   \   000148   E0           MOVX    A,@DPTR
   \   000149   F8           MOV     R0,A
   \   00014A   7900         MOV     R1,#0x0
   \   00014C   E8           MOV     A,R0
   \   00014D   75F0E8       MOV     B,#-0x18
   \   000150   A4           MUL     AB
   \   000151   C8           XCH     A,R0
   \   000152   AAF0         MOV     R2,B
   \   000154   75F003       MOV     B,#0x3
   \   000157   A4           MUL     AB
   \   000158   2A           ADD     A,R2
   \   000159   FA           MOV     R2,A
   \   00015A   75F0E8       MOV     B,#-0x18
   \   00015D   E9           MOV     A,R1
   \   00015E   A4           MUL     AB
   \   00015F   2A           ADD     A,R2
   \   000160   F9           MOV     R1,A
   \   000161   E8           MOV     A,R0
   \   000162   240A         ADD     A,#0xa
   \   000164   F8           MOV     R0,A
   \   000165   E9           MOV     A,R1
   \   000166   3400         ADDC    A,#0x0
   \   000168   F9           MOV     R1,A
   \   000169   E8           MOV     A,R0
   \   00016A   FE           MOV     R6,A
   \   00016B   E9           MOV     A,R1
   \   00016C   FF           MOV     R7,A
    411                osal_start_timerEx( SampleApp_TaskID, NEW_JOIN_ROLE_EVT,Second_time_temp );//先处理掉秒
   \   00016D                ; Setup parameters for call to function osal_start_timerEx
   \   00016D   EE           MOV     A,R6
   \   00016E   FC           MOV     R4,A
   \   00016F   EF           MOV     A,R7
   \   000170   FD           MOV     R5,A
   \   000171   7A20         MOV     R2,#0x20
   \   000173   7B00         MOV     R3,#0x0
   \   000175   90....       MOV     DPTR,#SampleApp_TaskID
   \   000178   E0           MOVX    A,@DPTR
   \   000179   F9           MOV     R1,A
   \   00017A   12....       LCALL   ??osal_start_timerEx?relay
   \   00017D   E9           MOV     A,R1
   \   00017E   801F         SJMP    ??APP_JOIN_INIT_3
    412                
    413              }
    414              else if(New_join_delay_time == 0)
   \                     ??APP_JOIN_INIT_7:
   \   000180   90....       MOV     DPTR,#New_join_delay_time
   \   000183   E0           MOVX    A,@DPTR
   \   000184   7013         JNZ     ??APP_JOIN_INIT_8
    415              {
    416                osal_start_timerEx( SampleApp_TaskID, NEW_JOIN_ROLE_EVT,10 );//先处理掉秒
   \   000186                ; Setup parameters for call to function osal_start_timerEx
   \   000186   7C0A         MOV     R4,#0xa
   \   000188   7D00         MOV     R5,#0x0
   \   00018A   7A20         MOV     R2,#0x20
   \   00018C   7B00         MOV     R3,#0x0
   \   00018E   90....       MOV     DPTR,#SampleApp_TaskID
   \   000191   E0           MOVX    A,@DPTR
   \   000192   F9           MOV     R1,A
   \   000193   12....       LCALL   ??osal_start_timerEx?relay
   \   000196   E9           MOV     A,R1
   \   000197   8006         SJMP    ??APP_JOIN_INIT_3
    417              }
    418              else
    419              {
    420                devState = DEV_HOLD;
   \                     ??APP_JOIN_INIT_8:
   \   000199   90....       MOV     DPTR,#devState
   \   00019C   7400         MOV     A,#0x0
   \   00019E   F0           MOVX    @DPTR,A
    421                //hold住  不启动网络
    422              }  
    423            }
    424              osal_nv_item_init(ZCD_NV_HEART_MESG_FLAG, 1, &Heart_mesg_flag);  // 判断是否为通过软件控制的入网机制
   \                     ??APP_JOIN_INIT_3:
   \   00019F                ; Setup parameters for call to function osal_nv_item_init
   \   00019F   75....       MOV     ?V0 + 0,#Heart_mesg_flag & 0xff
   \   0001A2   75....       MOV     ?V0 + 1,#(Heart_mesg_flag >> 8) & 0xff
   \   0001A5   78..         MOV     R0,#?V0 + 0
   \   0001A7   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001AA   7C01         MOV     R4,#0x1
   \   0001AC   7D00         MOV     R5,#0x0
   \   0001AE   7A10         MOV     R2,#0x10
   \   0001B0   7B05         MOV     R3,#0x5
   \   0001B2   12....       LCALL   ??osal_nv_item_init?relay
   \   0001B5   7402         MOV     A,#0x2
   \   0001B7   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001BA   E9           MOV     A,R1
    425            osal_nv_read(ZCD_NV_HEART_MESG_FLAG, 0, 1, &Heart_mesg_flag);
   \   0001BB                ; Setup parameters for call to function osal_nv_read
   \   0001BB   75....       MOV     ?V0 + 0,#Heart_mesg_flag & 0xff
   \   0001BE   75....       MOV     ?V0 + 1,#(Heart_mesg_flag >> 8) & 0xff
   \   0001C1   78..         MOV     R0,#?V0 + 0
   \   0001C3   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001C6   75..01       MOV     ?V0 + 0,#0x1
   \   0001C9   75..00       MOV     ?V0 + 1,#0x0
   \   0001CC   78..         MOV     R0,#?V0 + 0
   \   0001CE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001D1   7C00         MOV     R4,#0x0
   \   0001D3   7D00         MOV     R5,#0x0
   \   0001D5   7A10         MOV     R2,#0x10
   \   0001D7   7B05         MOV     R3,#0x5
   \   0001D9   12....       LCALL   ??osal_nv_read?relay
   \   0001DC   7404         MOV     A,#0x4
   \   0001DE   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001E1   E9           MOV     A,R1
    426            if( (Heart_mesg_flag<1) || (Heart_mesg_flag>10))
   \   0001E2   90....       MOV     DPTR,#Heart_mesg_flag
   \   0001E5   E0           MOVX    A,@DPTR
   \   0001E6   C3           CLR     C
   \   0001E7   9401         SUBB    A,#0x1
   \   0001E9   4009         JC      ??APP_JOIN_INIT_9
   \   0001EB   90....       MOV     DPTR,#Heart_mesg_flag
   \   0001EE   E0           MOVX    A,@DPTR
   \   0001EF   C3           CLR     C
   \   0001F0   940B         SUBB    A,#0xb
   \   0001F2   4006         JC      ??APP_JOIN_INIT_10
    427            {
    428              Heart_mesg_flag = 1;
   \                     ??APP_JOIN_INIT_9:
   \   0001F4   90....       MOV     DPTR,#Heart_mesg_flag
   \   0001F7   7401         MOV     A,#0x1
   \   0001F9   F0           MOVX    @DPTR,A
    429            }
    430          
    431            
    432            
    433          }
   \                     ??APP_JOIN_INIT_10:
   \   0001FA   7401         MOV     A,#0x1
   \   0001FC   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001FF   7F02         MOV     R7,#0x2
   \   000201   02....       LJMP    ?BANKED_LEAVE_XDATA
    434          
    435          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    436          void APP_JOIN_DEAL_WITH(void)
   \                     APP_JOIN_DEAL_WITH:
    437          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 9
   \   000005   74F7         MOV     A,#-0x9
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    438            // ROUTER 只发送RS ENDDEVICE先发送RS后发送OS
    439           if ( RTR_NWK_FLAG == 1)
   \   00000A   90....       MOV     DPTR,#RTR_NWK_FLAG
   \   00000D   E0           MOVX    A,@DPTR
   \   00000E   6401         XRL     A,#0x1
   \   000010   7017         JNZ     ??APP_JOIN_DEAL_WITH_0
    440           {
    441             NLME_PermitJoiningRequest(0); 
   \   000012                ; Setup parameters for call to function NLME_PermitJoiningRequest
   \   000012   7900         MOV     R1,#0x0
   \   000014   12....       LCALL   ??NLME_PermitJoiningRequest?relay
   \   000017   E9           MOV     A,R1
    442             osal_start_timerEx( SampleApp_TaskID,ASSOCIA_MENTAIN_EVT, 60000 );//2011_10_22 暂时关闭此功能 测试                  
   \   000018                ; Setup parameters for call to function osal_start_timerEx
   \   000018   7C60         MOV     R4,#0x60
   \   00001A   7DEA         MOV     R5,#-0x16
   \   00001C   7A02         MOV     R2,#0x2
   \   00001E   7B00         MOV     R3,#0x0
   \   000020   90....       MOV     DPTR,#SampleApp_TaskID
   \   000023   E0           MOVX    A,@DPTR
   \   000024   F9           MOV     R1,A
   \   000025   12....       LCALL   ??osal_start_timerEx?relay
   \   000028   E9           MOV     A,R1
    443          
    444           }
    445           
    446            osal_start_timerEx( SampleApp_TaskID,SAMPLEAPP_SEND_RS_EVT, 2000+ 5*(osal_rand() & 0x00FF) );//8S后再发送
   \                     ??APP_JOIN_DEAL_WITH_0:
   \   000029                ; Setup parameters for call to function osal_rand
   \   000029   12....       LCALL   ??osal_rand?relay
   \   00002C   8A..         MOV     ?V0 + 0,R2
   \   00002E   8B..         MOV     ?V0 + 1,R3
   \   000030   A8..         MOV     R0,?V0 + 0
   \   000032   A9..         MOV     R1,?V0 + 1
   \   000034                ; Setup parameters for call to function osal_start_timerEx
   \   000034   E5..         MOV     A,?V0 + 0
   \   000036   54FF         ANL     A,#0xff
   \   000038   F8           MOV     R0,A
   \   000039   E5..         MOV     A,?V0 + 1
   \   00003B   5400         ANL     A,#0x0
   \   00003D   F9           MOV     R1,A
   \   00003E   E8           MOV     A,R0
   \   00003F   75F005       MOV     B,#0x5
   \   000042   A4           MUL     AB
   \   000043   C8           XCH     A,R0
   \   000044   AAF0         MOV     R2,B
   \   000046   75F000       MOV     B,#0x0
   \   000049   A4           MUL     AB
   \   00004A   2A           ADD     A,R2
   \   00004B   FA           MOV     R2,A
   \   00004C   75F005       MOV     B,#0x5
   \   00004F   E9           MOV     A,R1
   \   000050   A4           MUL     AB
   \   000051   2A           ADD     A,R2
   \   000052   F9           MOV     R1,A
   \   000053   E8           MOV     A,R0
   \   000054   24D0         ADD     A,#-0x30
   \   000056   FC           MOV     R4,A
   \   000057   E9           MOV     A,R1
   \   000058   3407         ADDC    A,#0x7
   \   00005A   FD           MOV     R5,A
   \   00005B   7A00         MOV     R2,#0x0
   \   00005D   7B40         MOV     R3,#0x40
   \   00005F   90....       MOV     DPTR,#SampleApp_TaskID
   \   000062   E0           MOVX    A,@DPTR
   \   000063   F9           MOV     R1,A
   \   000064   12....       LCALL   ??osal_start_timerEx?relay
   \   000067   E9           MOV     A,R1
    447            osal_start_timerEx( SampleApp_TaskID,SAMPLEAPP_SEND_NWKADDR_EVT, 8000+ 5*(osal_rand() & 0x00FF) );//8S后再发送
   \   000068                ; Setup parameters for call to function osal_rand
   \   000068   12....       LCALL   ??osal_rand?relay
   \   00006B   8A..         MOV     ?V0 + 0,R2
   \   00006D   8B..         MOV     ?V0 + 1,R3
   \   00006F   A8..         MOV     R0,?V0 + 0
   \   000071   A9..         MOV     R1,?V0 + 1
   \   000073                ; Setup parameters for call to function osal_start_timerEx
   \   000073   E5..         MOV     A,?V0 + 0
   \   000075   54FF         ANL     A,#0xff
   \   000077   F8           MOV     R0,A
   \   000078   E5..         MOV     A,?V0 + 1
   \   00007A   5400         ANL     A,#0x0
   \   00007C   F9           MOV     R1,A
   \   00007D   E8           MOV     A,R0
   \   00007E   75F005       MOV     B,#0x5
   \   000081   A4           MUL     AB
   \   000082   C8           XCH     A,R0
   \   000083   AAF0         MOV     R2,B
   \   000085   75F000       MOV     B,#0x0
   \   000088   A4           MUL     AB
   \   000089   2A           ADD     A,R2
   \   00008A   FA           MOV     R2,A
   \   00008B   75F005       MOV     B,#0x5
   \   00008E   E9           MOV     A,R1
   \   00008F   A4           MUL     AB
   \   000090   2A           ADD     A,R2
   \   000091   F9           MOV     R1,A
   \   000092   E8           MOV     A,R0
   \   000093   2440         ADD     A,#0x40
   \   000095   FC           MOV     R4,A
   \   000096   E9           MOV     A,R1
   \   000097   341F         ADDC    A,#0x1f
   \   000099   FD           MOV     R5,A
   \   00009A   7A04         MOV     R2,#0x4
   \   00009C   7B00         MOV     R3,#0x0
   \   00009E   90....       MOV     DPTR,#SampleApp_TaskID
   \   0000A1   E0           MOVX    A,@DPTR
   \   0000A2   F9           MOV     R1,A
   \   0000A3   12....       LCALL   ??osal_start_timerEx?relay
   \   0000A6   E9           MOV     A,R1
    448          
    449            
    450            if(ZDO_FIRST_join_flag == 1)
   \   0000A7   90....       MOV     DPTR,#ZDO_FIRST_join_flag
   \   0000AA   E0           MOVX    A,@DPTR
   \   0000AB   6401         XRL     A,#0x1
   \   0000AD   707E         JNZ     ??APP_JOIN_DEAL_WITH_1
    451            { 
    452              NLME_PermitJoiningRequest(180);
   \   0000AF                ; Setup parameters for call to function NLME_PermitJoiningRequest
   \   0000AF   79B4         MOV     R1,#-0x4c
   \   0000B1   12....       LCALL   ??NLME_PermitJoiningRequest?relay
   \   0000B4   E9           MOV     A,R1
    453              ZDO_FIRST_join_flag = 0;
   \   0000B5   90....       MOV     DPTR,#ZDO_FIRST_join_flag
   \   0000B8   7400         MOV     A,#0x0
   \   0000BA   F0           MOVX    @DPTR,A
    454              zAddrType_t dstAddr;
    455              dstAddr.addrMode = AddrBroadcast;
   \   0000BB   7408         MOV     A,#0x8
   \   0000BD   12....       LCALL   ?XSTACK_DISP0_8
   \   0000C0   740F         MOV     A,#0xf
   \   0000C2   F0           MOVX    @DPTR,A
    456              dstAddr.addr.shortAddr = 0XFFFC;   // Coordinator makes the match
   \   0000C3   85..82       MOV     DPL,?XSP + 0
   \   0000C6   85..83       MOV     DPH,?XSP + 1
   \   0000C9   74FC         MOV     A,#-0x4
   \   0000CB   F0           MOVX    @DPTR,A
   \   0000CC   A3           INC     DPTR
   \   0000CD   74FF         MOV     A,#-0x1
   \   0000CF   F0           MOVX    @DPTR,A
    457              //ZDP_MgmtPermitJoinReq( &dstAddr, 180, 1, 0);
    458              ZDP_MgmtPermitJoinReq( &dstAddr, 180, 0, 0);
   \   0000D0                ; Setup parameters for call to function ZDP_MgmtPermitJoinReq
   \   0000D0   7D00         MOV     R5,#0x0
   \   0000D2   7C00         MOV     R4,#0x0
   \   0000D4   79B4         MOV     R1,#-0x4c
   \   0000D6   85..82       MOV     DPL,?XSP + 0
   \   0000D9   85..83       MOV     DPH,?XSP + 1
   \   0000DC   AA82         MOV     R2,DPL
   \   0000DE   AB83         MOV     R3,DPH
   \   0000E0   12....       LCALL   ??ZDP_MgmtPermitJoinReq?relay
   \   0000E3   E9           MOV     A,R1
    459              
    460              Join_isset_flag = 0;
   \   0000E4   90....       MOV     DPTR,#Join_isset_flag
   \   0000E7   7400         MOV     A,#0x0
   \   0000E9   F0           MOVX    @DPTR,A
    461              osal_nv_item_init(ZCD_NV_JOIN_ISSET_FLAG, 1, &Join_isset_flag);  // 判断是否为通过按键控制的入网机制
   \   0000EA                ; Setup parameters for call to function osal_nv_item_init
   \   0000EA   75....       MOV     ?V0 + 0,#Join_isset_flag & 0xff
   \   0000ED   75....       MOV     ?V0 + 1,#(Join_isset_flag >> 8) & 0xff
   \   0000F0   78..         MOV     R0,#?V0 + 0
   \   0000F2   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000F5   7C01         MOV     R4,#0x1
   \   0000F7   7D00         MOV     R5,#0x0
   \   0000F9   7A38         MOV     R2,#0x38
   \   0000FB   7B04         MOV     R3,#0x4
   \   0000FD   12....       LCALL   ??osal_nv_item_init?relay
   \   000100   7402         MOV     A,#0x2
   \   000102   12....       LCALL   ?DEALLOC_XSTACK8
   \   000105   E9           MOV     A,R1
    462              osal_nv_write(ZCD_NV_JOIN_ISSET_FLAG, 0, 1, &Join_isset_flag);
   \   000106                ; Setup parameters for call to function osal_nv_write
   \   000106   75....       MOV     ?V0 + 0,#Join_isset_flag & 0xff
   \   000109   75....       MOV     ?V0 + 1,#(Join_isset_flag >> 8) & 0xff
   \   00010C   78..         MOV     R0,#?V0 + 0
   \   00010E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000111   75..01       MOV     ?V0 + 0,#0x1
   \   000114   75..00       MOV     ?V0 + 1,#0x0
   \   000117   78..         MOV     R0,#?V0 + 0
   \   000119   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00011C   7C00         MOV     R4,#0x0
   \   00011E   7D00         MOV     R5,#0x0
   \   000120   7A38         MOV     R2,#0x38
   \   000122   7B04         MOV     R3,#0x4
   \   000124   12....       LCALL   ??osal_nv_write?relay
   \   000127   7404         MOV     A,#0x4
   \   000129   12....       LCALL   ?DEALLOC_XSTACK8
   \   00012C   E9           MOV     A,R1
    463              
    464            }
    465            
    466            osal_start_timerEx( SampleApp_TaskID, SAMPLEAPP_SEND_PERIODIC_MSG_EVT,30000 );//心跳信息 
   \                     ??APP_JOIN_DEAL_WITH_1:
   \   00012D                ; Setup parameters for call to function osal_start_timerEx
   \   00012D   7C30         MOV     R4,#0x30
   \   00012F   7D75         MOV     R5,#0x75
   \   000131   7A01         MOV     R2,#0x1
   \   000133   7B00         MOV     R3,#0x0
   \   000135   90....       MOV     DPTR,#SampleApp_TaskID
   \   000138   E0           MOVX    A,@DPTR
   \   000139   F9           MOV     R1,A
   \   00013A   12....       LCALL   ??osal_start_timerEx?relay
   \   00013D   E9           MOV     A,R1
    467          
    468            
    469            
    470          }
   \   00013E   7409         MOV     A,#0x9
   \   000140   12....       LCALL   ?DEALLOC_XSTACK8
   \   000143   7F02         MOV     R7,#0x2
   \   000145   02....       LJMP    ?BANKED_LEAVE_XDATA
    471          
    472          
    473          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    474          void APP_JOIN_START_EVT(void)
   \                     APP_JOIN_START_EVT:
    475          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 1
   \   000004   74FF         MOV     A,#-0x1
   \   000006   12....       LCALL   ?ALLOC_XSTACK8
    476            if(Minitue_join_delay_time == 0)
   \   000009   90....       MOV     DPTR,#Minitue_join_delay_time
   \   00000C   E0           MOVX    A,@DPTR
   \   00000D   703B         JNZ     ??APP_JOIN_START_EVT_0
    477            {
    478              uint8 startOptions = 0;
   \   00000F   85..82       MOV     DPL,?XSP + 0
   \   000012   85..83       MOV     DPH,?XSP + 1
   \   000015   7400         MOV     A,#0x0
   \   000017   F0           MOVX    @DPTR,A
    479              zb_ReadConfiguration( ZCD_NV_STARTUP_OPTION, sizeof(uint8), &startOptions );
   \   000018                ; Setup parameters for call to function zb_ReadConfiguration
   \   000018   85..82       MOV     DPL,?XSP + 0
   \   00001B   85..83       MOV     DPH,?XSP + 1
   \   00001E   AC82         MOV     R4,DPL
   \   000020   AD83         MOV     R5,DPH
   \   000022   7A01         MOV     R2,#0x1
   \   000024   7903         MOV     R1,#0x3
   \   000026   12....       LCALL   ??zb_ReadConfiguration?relay
   \   000029   E9           MOV     A,R1
    480              startOptions = ZCD_STARTOPT_AUTO_START;
   \   00002A   85..82       MOV     DPL,?XSP + 0
   \   00002D   85..83       MOV     DPH,?XSP + 1
   \   000030   7404         MOV     A,#0x4
   \   000032   F0           MOVX    @DPTR,A
    481              zb_WriteConfiguration( ZCD_NV_STARTUP_OPTION, sizeof(uint8), &startOptions );
   \   000033                ; Setup parameters for call to function zb_WriteConfiguration
   \   000033   85..82       MOV     DPL,?XSP + 0
   \   000036   85..83       MOV     DPH,?XSP + 1
   \   000039   AC82         MOV     R4,DPL
   \   00003B   AD83         MOV     R5,DPH
   \   00003D   7A01         MOV     R2,#0x1
   \   00003F   7903         MOV     R1,#0x3
   \   000041   12....       LCALL   ??zb_WriteConfiguration?relay
   \   000044   E9           MOV     A,R1
    482              SystemResetSoft(); 
   \   000045                ; Setup parameters for call to function Onboard_soft_reset
   \   000045   12....       LCALL   Onboard_soft_reset & 0xFFFF
   \   000048   8018         SJMP    ??APP_JOIN_START_EVT_1
    483              
    484            }
    485            
    486            else 
    487            {
    488              Minitue_join_delay_time--;
   \                     ??APP_JOIN_START_EVT_0:
   \   00004A   90....       MOV     DPTR,#Minitue_join_delay_time
   \   00004D   E0           MOVX    A,@DPTR
   \   00004E   24FF         ADD     A,#-0x1
   \   000050   F0           MOVX    @DPTR,A
    489              osal_start_timerEx( SampleApp_TaskID, NEW_JOIN_ROLE_EVT, 60000);
   \   000051                ; Setup parameters for call to function osal_start_timerEx
   \   000051   7C60         MOV     R4,#0x60
   \   000053   7DEA         MOV     R5,#-0x16
   \   000055   7A20         MOV     R2,#0x20
   \   000057   7B00         MOV     R3,#0x0
   \   000059   90....       MOV     DPTR,#SampleApp_TaskID
   \   00005C   E0           MOVX    A,@DPTR
   \   00005D   F9           MOV     R1,A
   \   00005E   12....       LCALL   ??osal_start_timerEx?relay
   \   000061   E9           MOV     A,R1
    490            }
    491            
    492          }
   \                     ??APP_JOIN_START_EVT_1:
   \   000062   7401         MOV     A,#0x1
   \   000064   12....       LCALL   ?DEALLOC_XSTACK8
   \   000067   D083         POP     DPH
   \   000069   D082         POP     DPL
   \   00006B   02....       LJMP    ?BRET
    493          
    494          
    495          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    496          void SampleApp_SendNwkaddrMessage(uint8 type1_id,uint8 type2_id)
   \                     SampleApp_SendNwkaddrMessage:
    497          {
   \   000000   74EE         MOV     A,#-0x12
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 18
   \   000005                ; Auto size: 24
   \   000005   74E8         MOV     A,#-0x18
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   89..         MOV     ?V0 + 6,R1
   \   00000C   8A..         MOV     ?V0 + 5,R2
    498            
    499            //  extern uint8 *shortddr_mem;
    500            uint8 *Sample_myshort;
    501            uint8 *Sample_extendaddr;
    502            uint8 str[23];
    503            uint8 i;
    504            uint16 parent_short_adress=0;
   \   00000E   75..00       MOV     ?V0 + 0,#0x0
   \   000011   75..00       MOV     ?V0 + 1,#0x0
    505            
    506            str[0]=type1_id;
   \   000014   E5..         MOV     A,?V0 + 6
   \   000016   7401         MOV     A,#0x1
   \   000018   12....       LCALL   ?XSTACK_DISP0_8
   \   00001B   E5..         MOV     A,?V0 + 6
   \   00001D   F0           MOVX    @DPTR,A
    507            str[1]=type2_id;//
   \   00001E   E5..         MOV     A,?V0 + 5
   \   000020   7402         MOV     A,#0x2
   \   000022   12....       LCALL   ?XSTACK_DISP0_8
   \   000025   E5..         MOV     A,?V0 + 5
   \   000027   F0           MOVX    @DPTR,A
    508            
    509            Sample_myshort=SampleApp_GetShortAddr();
   \   000028                ; Setup parameters for call to function SampleApp_GetShortAddr
   \   000028   12....       LCALL   ??SampleApp_GetShortAddr?relay
   \   00002B   8A..         MOV     ?V0 + 8,R2
   \   00002D   8B..         MOV     ?V0 + 9,R3
   \   00002F   AE..         MOV     R6,?V0 + 8
   \   000031   AF..         MOV     R7,?V0 + 9
    510            str[2]=*Sample_myshort++;
   \   000033   8E82         MOV     DPL,R6
   \   000035   8F83         MOV     DPH,R7
   \   000037   E0           MOVX    A,@DPTR
   \   000038   C0E0         PUSH    A
   \   00003A   7403         MOV     A,#0x3
   \   00003C   12....       LCALL   ?XSTACK_DISP0_8
   \   00003F   D0E0         POP     A
   \   000041   F0           MOVX    @DPTR,A
   \   000042   8E82         MOV     DPL,R6
   \   000044   8F83         MOV     DPH,R7
   \   000046   A3           INC     DPTR
   \   000047   AE82         MOV     R6,DPL
   \   000049   AF83         MOV     R7,DPH
    511            str[3]=*Sample_myshort++;
   \   00004B   8E82         MOV     DPL,R6
   \   00004D   8F83         MOV     DPH,R7
   \   00004F   E0           MOVX    A,@DPTR
   \   000050   C0E0         PUSH    A
   \   000052   7404         MOV     A,#0x4
   \   000054   12....       LCALL   ?XSTACK_DISP0_8
   \   000057   D0E0         POP     A
   \   000059   F0           MOVX    @DPTR,A
   \   00005A   8E82         MOV     DPL,R6
   \   00005C   8F83         MOV     DPH,R7
   \   00005E   A3           INC     DPTR
   \   00005F   AE82         MOV     R6,DPL
   \   000061   AF83         MOV     R7,DPH
    512            str[4]=*Sample_myshort++;
   \   000063   8E82         MOV     DPL,R6
   \   000065   8F83         MOV     DPH,R7
   \   000067   E0           MOVX    A,@DPTR
   \   000068   C0E0         PUSH    A
   \   00006A   7405         MOV     A,#0x5
   \   00006C   12....       LCALL   ?XSTACK_DISP0_8
   \   00006F   D0E0         POP     A
   \   000071   F0           MOVX    @DPTR,A
   \   000072   8E82         MOV     DPL,R6
   \   000074   8F83         MOV     DPH,R7
   \   000076   A3           INC     DPTR
   \   000077   AE82         MOV     R6,DPL
   \   000079   AF83         MOV     R7,DPH
    513            str[5]=*Sample_myshort;
   \   00007B   8E82         MOV     DPL,R6
   \   00007D   8F83         MOV     DPH,R7
   \   00007F   E0           MOVX    A,@DPTR
   \   000080   C0E0         PUSH    A
   \   000082   7406         MOV     A,#0x6
   \   000084   12....       LCALL   ?XSTACK_DISP0_8
   \   000087   D0E0         POP     A
   \   000089   F0           MOVX    @DPTR,A
    514            osal_mem_free( shortddr_mem );
   \   00008A                ; Setup parameters for call to function osal_mem_free
   \   00008A   90....       MOV     DPTR,#shortddr_mem
   \   00008D   E0           MOVX    A,@DPTR
   \   00008E   FA           MOV     R2,A
   \   00008F   A3           INC     DPTR
   \   000090   E0           MOVX    A,@DPTR
   \   000091   FB           MOV     R3,A
   \   000092   12....       LCALL   ??osal_mem_free?relay
    515            
    516            Sample_extendaddr=SampleApp_GetExtendAddr();
   \   000095                ; Setup parameters for call to function SampleApp_GetExtendAddr
   \   000095   12....       LCALL   ??SampleApp_GetExtendAddr?relay
   \   000098   8A..         MOV     ?V0 + 8,R2
   \   00009A   8B..         MOV     ?V0 + 9,R3
   \   00009C   85....       MOV     ?V0 + 2,?V0 + 8
   \   00009F   85....       MOV     ?V0 + 3,?V0 + 9
    517            for(i=0;i<16;i++)
   \   0000A2   75..00       MOV     ?V0 + 4,#0x0
   \                     ??SampleApp_SendNwkaddrMessage_0:
   \   0000A5   E5..         MOV     A,?V0 + 4
   \   0000A7   C3           CLR     C
   \   0000A8   9410         SUBB    A,#0x10
   \   0000AA   503A         JNC     ??SampleApp_SendNwkaddrMessage_1
    518            {
    519              str[i+6]=*Sample_extendaddr++;
   \   0000AC   85..82       MOV     DPL,?V0 + 2
   \   0000AF   85..83       MOV     DPH,?V0 + 3
   \   0000B2   E0           MOVX    A,@DPTR
   \   0000B3   C0E0         PUSH    A
   \   0000B5   85....       MOV     ?V0 + 8,?V0 + 4
   \   0000B8   75..00       MOV     ?V0 + 9,#0x0
   \   0000BB   7401         MOV     A,#0x1
   \   0000BD   12....       LCALL   ?XSTACK_DISP0_8
   \   0000C0   E582         MOV     A,DPL
   \   0000C2   25..         ADD     A,?V0 + 8
   \   0000C4   F582         MOV     DPL,A
   \   0000C6   E583         MOV     A,DPH
   \   0000C8   35..         ADDC    A,?V0 + 9
   \   0000CA   F583         MOV     DPH,A
   \   0000CC   A3           INC     DPTR
   \   0000CD   A3           INC     DPTR
   \   0000CE   A3           INC     DPTR
   \   0000CF   A3           INC     DPTR
   \   0000D0   A3           INC     DPTR
   \   0000D1   A3           INC     DPTR
   \   0000D2   D0E0         POP     A
   \   0000D4   F0           MOVX    @DPTR,A
   \   0000D5   85..82       MOV     DPL,?V0 + 2
   \   0000D8   85..83       MOV     DPH,?V0 + 3
   \   0000DB   A3           INC     DPTR
   \   0000DC   8582..       MOV     ?V0 + 2,DPL
   \   0000DF   8583..       MOV     ?V0 + 3,DPH
    520            }
   \   0000E2   05..         INC     ?V0 + 4
   \   0000E4   80BF         SJMP    ??SampleApp_SendNwkaddrMessage_0
    521            osal_mem_free( extendaddr_mem );
   \                     ??SampleApp_SendNwkaddrMessage_1:
   \   0000E6                ; Setup parameters for call to function osal_mem_free
   \   0000E6   90....       MOV     DPTR,#extendaddr_mem
   \   0000E9   E0           MOVX    A,@DPTR
   \   0000EA   FA           MOV     R2,A
   \   0000EB   A3           INC     DPTR
   \   0000EC   E0           MOVX    A,@DPTR
   \   0000ED   FB           MOV     R3,A
   \   0000EE   12....       LCALL   ??osal_mem_free?relay
    522            
    523              if(RTR_NWK_FLAG==1)
   \   0000F1   90....       MOV     DPTR,#RTR_NWK_FLAG
   \   0000F4   E0           MOVX    A,@DPTR
   \   0000F5   6401         XRL     A,#0x1
   \   0000F7   7008         JNZ     ??SampleApp_SendNwkaddrMessage_2
    524              {
    525                parent_short_adress=0X0000;
   \   0000F9   75..00       MOV     ?V0 + 0,#0x0
   \   0000FC   75..00       MOV     ?V0 + 1,#0x0
   \   0000FF   800D         SJMP    ??SampleApp_SendNwkaddrMessage_3
    526              }   
    527              else
    528              {
    529                parent_short_adress= NLME_GetCoordShortAddr();
   \                     ??SampleApp_SendNwkaddrMessage_2:
   \   000101                ; Setup parameters for call to function NLME_GetCoordShortAddr
   \   000101   12....       LCALL   ??NLME_GetCoordShortAddr?relay
   \   000104   8A..         MOV     ?V0 + 8,R2
   \   000106   8B..         MOV     ?V0 + 9,R3
   \   000108   85....       MOV     ?V0 + 0,?V0 + 8
   \   00010B   85....       MOV     ?V0 + 1,?V0 + 9
    530              }  
    531              
    532            SampleApp_Addr_SendData_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \                     ??SampleApp_SendNwkaddrMessage_3:
   \   00010E   90....       MOV     DPTR,#SampleApp_Addr_SendData_DstAddr + 8
   \   000111   7402         MOV     A,#0x2
   \   000113   F0           MOVX    @DPTR,A
    533            SampleApp_Addr_SendData_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   000114   90....       MOV     DPTR,#SampleApp_Addr_SendData_DstAddr + 9
   \   000117   7414         MOV     A,#0x14
   \   000119   F0           MOVX    @DPTR,A
    534            SampleApp_Addr_SendData_DstAddr.addr.shortAddr = parent_short_adress;
   \   00011A   90....       MOV     DPTR,#SampleApp_Addr_SendData_DstAddr
   \   00011D   E5..         MOV     A,?V0 + 0
   \   00011F   F0           MOVX    @DPTR,A
   \   000120   A3           INC     DPTR
   \   000121   E5..         MOV     A,?V0 + 1
   \   000123   F0           MOVX    @DPTR,A
    535            
    536            /*修改完成*/
    537            if ( AF_DataRequest( &SampleApp_Addr_SendData_DstAddr,
    538                                (endPointDesc_t *)&SampleApp_epDesc,
    539                                SAMPLEAPP_ADDR_CLUSTERID ,
    540                                23, str,
    541                                &SampleApp_TransID, 
    542                                AF_DISCV_ROUTE, 
    543                                AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000124                ; Setup parameters for call to function AF_DataRequest
   \   000124   75..0F       MOV     ?V0 + 7,#0xf
   \   000127   78..         MOV     R0,#?V0 + 7
   \   000129   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00012C   75....       MOV     ?V0 + 8,#SampleApp_TransID & 0xff
   \   00012F   75....       MOV     ?V0 + 9,#(SampleApp_TransID >> 8) & 0xff
   \   000132   78..         MOV     R0,#?V0 + 8
   \   000134   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000137   7404         MOV     A,#0x4
   \   000139   12....       LCALL   ?XSTACK_DISP0_8
   \   00013C   8582..       MOV     ?V0 + 8,DPL
   \   00013F   8583..       MOV     ?V0 + 9,DPH
   \   000142   78..         MOV     R0,#?V0 + 8
   \   000144   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000147   75..17       MOV     ?V0 + 8,#0x17
   \   00014A   75..00       MOV     ?V0 + 9,#0x0
   \   00014D   78..         MOV     R0,#?V0 + 8
   \   00014F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000152   75..03       MOV     ?V0 + 8,#0x3
   \   000155   75..00       MOV     ?V0 + 9,#0x0
   \   000158   78..         MOV     R0,#?V0 + 8
   \   00015A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00015D   7920         MOV     R1,#0x20
   \   00015F   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000161   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000163   7A..         MOV     R2,#SampleApp_Addr_SendData_DstAddr & 0xff
   \   000165   7B..         MOV     R3,#(SampleApp_Addr_SendData_DstAddr >> 8) & 0xff
   \   000167   12....       LCALL   ??AF_DataRequest?relay
   \   00016A   7409         MOV     A,#0x9
   \   00016C   12....       LCALL   ?DEALLOC_XSTACK8
   \   00016F   E9           MOV     A,R1
   \   000170   85..82       MOV     DPL,?XSP + 0
   \   000173   85..83       MOV     DPH,?XSP + 1
   \   000176   F0           MOVX    @DPTR,A
    544            {
    545            }
    546            else
    547            {   
    548            }
    549            
    550          }
   \   000177   7418         MOV     A,#0x18
   \   000179   12....       LCALL   ?DEALLOC_XSTACK8
   \   00017C   7F0A         MOV     R7,#0xa
   \   00017E   02....       LJMP    ?BANKED_LEAVE_XDATA
    551          
    552          
    553          
    554          
    555          
    556          
    557          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    558          void APPLY_TO_JOIN_OF_KEY(void)
   \                     APPLY_TO_JOIN_OF_KEY:
    559          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 1
   \   000004   74FF         MOV     A,#-0x1
   \   000006   12....       LCALL   ?ALLOC_XSTACK8
    560            uint8 startOptions;
    561            zb_ReadConfiguration( ZCD_NV_STARTUP_OPTION, sizeof(uint8), &startOptions );
   \   000009                ; Setup parameters for call to function zb_ReadConfiguration
   \   000009   85..82       MOV     DPL,?XSP + 0
   \   00000C   85..83       MOV     DPH,?XSP + 1
   \   00000F   AC82         MOV     R4,DPL
   \   000011   AD83         MOV     R5,DPH
   \   000013   7A01         MOV     R2,#0x1
   \   000015   7903         MOV     R1,#0x3
   \   000017   12....       LCALL   ??zb_ReadConfiguration?relay
   \   00001A   E9           MOV     A,R1
    562            startOptions = ZCD_STARTOPT_AUTO_START;
   \   00001B   85..82       MOV     DPL,?XSP + 0
   \   00001E   85..83       MOV     DPH,?XSP + 1
   \   000021   7404         MOV     A,#0x4
   \   000023   F0           MOVX    @DPTR,A
    563            zb_WriteConfiguration( ZCD_NV_STARTUP_OPTION, sizeof(uint8), &startOptions );
   \   000024                ; Setup parameters for call to function zb_WriteConfiguration
   \   000024   85..82       MOV     DPL,?XSP + 0
   \   000027   85..83       MOV     DPH,?XSP + 1
   \   00002A   AC82         MOV     R4,DPL
   \   00002C   AD83         MOV     R5,DPH
   \   00002E   7A01         MOV     R2,#0x1
   \   000030   7903         MOV     R1,#0x3
   \   000032   12....       LCALL   ??zb_WriteConfiguration?relay
   \   000035   E9           MOV     A,R1
    564           // SystemResetSoft();  
    565            
    566            //HAL_SYSTEM_RESET();   
    567             osal_start_timerEx( SampleApp_TaskID,SAMPLEAPP_RESTORE_EVT,1000 );
   \   000036                ; Setup parameters for call to function osal_start_timerEx
   \   000036   7CE8         MOV     R4,#-0x18
   \   000038   7D03         MOV     R5,#0x3
   \   00003A   7A10         MOV     R2,#0x10
   \   00003C   7B00         MOV     R3,#0x0
   \   00003E   90....       MOV     DPTR,#SampleApp_TaskID
   \   000041   E0           MOVX    A,@DPTR
   \   000042   F9           MOV     R1,A
   \   000043   12....       LCALL   ??osal_start_timerEx?relay
   \   000046   E9           MOV     A,R1
    568            
    569          }
   \   000047   7401         MOV     A,#0x1
   \   000049   12....       LCALL   ?DEALLOC_XSTACK8
   \   00004C   D083         POP     DPH
   \   00004E   D082         POP     DPL
   \   000050   02....       LJMP    ?BRET
    570          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    571          void RESTORE_TO_FACTORY(void)
   \                     RESTORE_TO_FACTORY:
    572          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 13
   \   000005   74F3         MOV     A,#-0xd
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    573            uint8 startOptions;
    574            startOptions=0;    
   \   00000A   85..82       MOV     DPL,?XSP + 0
   \   00000D   85..83       MOV     DPH,?XSP + 1
   \   000010   7400         MOV     A,#0x0
   \   000012   F0           MOVX    @DPTR,A
    575            uint8 quit_str[12];
    576            uint8 *Sample_Cmd_shorAddr;
    577            Sample_Cmd_shorAddr=SampleApp_GetShortAddr();
   \   000013                ; Setup parameters for call to function SampleApp_GetShortAddr
   \   000013   12....       LCALL   ??SampleApp_GetShortAddr?relay
   \   000016   8A..         MOV     ?V0 + 0,R2
   \   000018   8B..         MOV     ?V0 + 1,R3
   \   00001A   AE..         MOV     R6,?V0 + 0
   \   00001C   AF..         MOV     R7,?V0 + 1
    578            quit_str[0]=*Sample_Cmd_shorAddr++;
   \   00001E   8E82         MOV     DPL,R6
   \   000020   8F83         MOV     DPH,R7
   \   000022   E0           MOVX    A,@DPTR
   \   000023   C0E0         PUSH    A
   \   000025   7401         MOV     A,#0x1
   \   000027   12....       LCALL   ?XSTACK_DISP0_8
   \   00002A   D0E0         POP     A
   \   00002C   F0           MOVX    @DPTR,A
   \   00002D   8E82         MOV     DPL,R6
   \   00002F   8F83         MOV     DPH,R7
   \   000031   A3           INC     DPTR
   \   000032   AE82         MOV     R6,DPL
   \   000034   AF83         MOV     R7,DPH
    579            quit_str[1]=*Sample_Cmd_shorAddr++;
   \   000036   8E82         MOV     DPL,R6
   \   000038   8F83         MOV     DPH,R7
   \   00003A   E0           MOVX    A,@DPTR
   \   00003B   C0E0         PUSH    A
   \   00003D   7402         MOV     A,#0x2
   \   00003F   12....       LCALL   ?XSTACK_DISP0_8
   \   000042   D0E0         POP     A
   \   000044   F0           MOVX    @DPTR,A
   \   000045   8E82         MOV     DPL,R6
   \   000047   8F83         MOV     DPH,R7
   \   000049   A3           INC     DPTR
   \   00004A   AE82         MOV     R6,DPL
   \   00004C   AF83         MOV     R7,DPH
    580            quit_str[2]=*Sample_Cmd_shorAddr++;
   \   00004E   8E82         MOV     DPL,R6
   \   000050   8F83         MOV     DPH,R7
   \   000052   E0           MOVX    A,@DPTR
   \   000053   C0E0         PUSH    A
   \   000055   7403         MOV     A,#0x3
   \   000057   12....       LCALL   ?XSTACK_DISP0_8
   \   00005A   D0E0         POP     A
   \   00005C   F0           MOVX    @DPTR,A
   \   00005D   8E82         MOV     DPL,R6
   \   00005F   8F83         MOV     DPH,R7
   \   000061   A3           INC     DPTR
   \   000062   AE82         MOV     R6,DPL
   \   000064   AF83         MOV     R7,DPH
    581            quit_str[3]=*Sample_Cmd_shorAddr;
   \   000066   8E82         MOV     DPL,R6
   \   000068   8F83         MOV     DPH,R7
   \   00006A   E0           MOVX    A,@DPTR
   \   00006B   C0E0         PUSH    A
   \   00006D   7404         MOV     A,#0x4
   \   00006F   12....       LCALL   ?XSTACK_DISP0_8
   \   000072   D0E0         POP     A
   \   000074   F0           MOVX    @DPTR,A
    582            quit_str[4]='/';
   \   000075   7405         MOV     A,#0x5
   \   000077   12....       LCALL   ?XSTACK_DISP0_8
   \   00007A   742F         MOV     A,#0x2f
   \   00007C   F0           MOVX    @DPTR,A
    583            quit_str[5]='C';
   \   00007D   7406         MOV     A,#0x6
   \   00007F   12....       LCALL   ?XSTACK_DISP0_8
   \   000082   7443         MOV     A,#0x43
   \   000084   F0           MOVX    @DPTR,A
    584            quit_str[6]='/';
   \   000085   7407         MOV     A,#0x7
   \   000087   12....       LCALL   ?XSTACK_DISP0_8
   \   00008A   742F         MOV     A,#0x2f
   \   00008C   F0           MOVX    @DPTR,A
    585            quit_str[7]='U';
   \   00008D   7408         MOV     A,#0x8
   \   00008F   12....       LCALL   ?XSTACK_DISP0_8
   \   000092   7455         MOV     A,#0x55
   \   000094   F0           MOVX    @DPTR,A
    586            quit_str[8]='U';
   \   000095   7409         MOV     A,#0x9
   \   000097   12....       LCALL   ?XSTACK_DISP0_8
   \   00009A   7455         MOV     A,#0x55
   \   00009C   F0           MOVX    @DPTR,A
    587            quit_str[9]=0xA0;
   \   00009D   740A         MOV     A,#0xa
   \   00009F   12....       LCALL   ?XSTACK_DISP0_8
   \   0000A2   74A0         MOV     A,#-0x60
   \   0000A4   F0           MOVX    @DPTR,A
    588            quit_str[10]=0xBB;
   \   0000A5   740B         MOV     A,#0xb
   \   0000A7   12....       LCALL   ?XSTACK_DISP0_8
   \   0000AA   74BB         MOV     A,#-0x45
   \   0000AC   F0           MOVX    @DPTR,A
    589            quit_str[11]=0;
   \   0000AD   740C         MOV     A,#0xc
   \   0000AF   12....       LCALL   ?XSTACK_DISP0_8
   \   0000B2   7400         MOV     A,#0x0
   \   0000B4   F0           MOVX    @DPTR,A
    590            SampleApp_SPI_SendCommand_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \   0000B5   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 8
   \   0000B8   7402         MOV     A,#0x2
   \   0000BA   F0           MOVX    @DPTR,A
    591            SampleApp_SPI_SendCommand_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   0000BB   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 9
   \   0000BE   7414         MOV     A,#0x14
   \   0000C0   F0           MOVX    @DPTR,A
    592            SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;//发送给来的设备
   \   0000C1   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr
   \   0000C4   7400         MOV     A,#0x0
   \   0000C6   F0           MOVX    @DPTR,A
   \   0000C7   A3           INC     DPTR
   \   0000C8   7400         MOV     A,#0x0
   \   0000CA   F0           MOVX    @DPTR,A
    593            if ( AF_DataRequest( &SampleApp_SPI_SendCommand_DstAddr,
    594                     (endPointDesc_t *)&SampleApp_epDesc,
    595                      SAMPLEAPP_COMMAND_CLUSTERID, //终端传过去，协调器处理了
    596                      12, quit_str,
    597                      &SampleApp_TransID, 
    598                      AF_DISCV_ROUTE, 
    599                      AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   0000CB                ; Setup parameters for call to function AF_DataRequest
   \   0000CB   75..0F       MOV     ?V0 + 0,#0xf
   \   0000CE   78..         MOV     R0,#?V0 + 0
   \   0000D0   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000D3   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   0000D6   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   0000D9   78..         MOV     R0,#?V0 + 0
   \   0000DB   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000DE   7404         MOV     A,#0x4
   \   0000E0   12....       LCALL   ?XSTACK_DISP0_8
   \   0000E3   8582..       MOV     ?V0 + 0,DPL
   \   0000E6   8583..       MOV     ?V0 + 1,DPH
   \   0000E9   78..         MOV     R0,#?V0 + 0
   \   0000EB   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000EE   75..0C       MOV     ?V0 + 0,#0xc
   \   0000F1   75..00       MOV     ?V0 + 1,#0x0
   \   0000F4   78..         MOV     R0,#?V0 + 0
   \   0000F6   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000F9   75..04       MOV     ?V0 + 0,#0x4
   \   0000FC   75..00       MOV     ?V0 + 1,#0x0
   \   0000FF   78..         MOV     R0,#?V0 + 0
   \   000101   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000104   7920         MOV     R1,#0x20
   \   000106   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000108   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   00010A   7A..         MOV     R2,#SampleApp_SPI_SendCommand_DstAddr & 0xff
   \   00010C   7B..         MOV     R3,#(SampleApp_SPI_SendCommand_DstAddr >> 8) & 0xff
   \   00010E   12....       LCALL   ??AF_DataRequest?relay
   \   000111   7409         MOV     A,#0x9
   \   000113   12....       LCALL   ?DEALLOC_XSTACK8
   \   000116   E9           MOV     A,R1
   \   000117   F5..         MOV     ?V0 + 2,A
    600            {
    601            }
    602            else
    603            {
    604            
    605            }  
    606            
    607            osal_nv_item_init(ZCD_NV_STARTUP_OPTION, 1, &startOptions);    
   \   000119                ; Setup parameters for call to function osal_nv_item_init
   \   000119   85..82       MOV     DPL,?XSP + 0
   \   00011C   85..83       MOV     DPH,?XSP + 1
   \   00011F   8582..       MOV     ?V0 + 0,DPL
   \   000122   8583..       MOV     ?V0 + 1,DPH
   \   000125   78..         MOV     R0,#?V0 + 0
   \   000127   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00012A   7C01         MOV     R4,#0x1
   \   00012C   7D00         MOV     R5,#0x0
   \   00012E   7A03         MOV     R2,#0x3
   \   000130   7B00         MOV     R3,#0x0
   \   000132   12....       LCALL   ??osal_nv_item_init?relay
   \   000135   7402         MOV     A,#0x2
   \   000137   12....       LCALL   ?DEALLOC_XSTACK8
   \   00013A   E9           MOV     A,R1
    608            startOptions |= ZCD_STARTOPT_DEFAULT_NETWORK_STATE;
   \   00013B   85..82       MOV     DPL,?XSP + 0
   \   00013E   85..83       MOV     DPH,?XSP + 1
   \   000141   E0           MOVX    A,@DPTR
   \   000142   D2E1         SETB    0xE0 /* A   */.1
   \   000144   F0           MOVX    @DPTR,A
    609            startOptions &= ~ZCD_STARTOPT_AUTO_START;
   \   000145   85..82       MOV     DPL,?XSP + 0
   \   000148   85..83       MOV     DPH,?XSP + 1
   \   00014B   E0           MOVX    A,@DPTR
   \   00014C   C2E2         CLR     0xE0 /* A   */.2
   \   00014E   F0           MOVX    @DPTR,A
    610            osal_nv_write(ZCD_NV_STARTUP_OPTION, 0, 1, &startOptions); 
   \   00014F                ; Setup parameters for call to function osal_nv_write
   \   00014F   85..82       MOV     DPL,?XSP + 0
   \   000152   85..83       MOV     DPH,?XSP + 1
   \   000155   8582..       MOV     ?V0 + 0,DPL
   \   000158   8583..       MOV     ?V0 + 1,DPH
   \   00015B   78..         MOV     R0,#?V0 + 0
   \   00015D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000160   75..01       MOV     ?V0 + 0,#0x1
   \   000163   75..00       MOV     ?V0 + 1,#0x0
   \   000166   78..         MOV     R0,#?V0 + 0
   \   000168   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00016B   7C00         MOV     R4,#0x0
   \   00016D   7D00         MOV     R5,#0x0
   \   00016F   7A03         MOV     R2,#0x3
   \   000171   7B00         MOV     R3,#0x0
   \   000173   12....       LCALL   ??osal_nv_write?relay
   \   000176   7404         MOV     A,#0x4
   \   000178   12....       LCALL   ?DEALLOC_XSTACK8
   \   00017B   E9           MOV     A,R1
    611            
    612            Join_isset_flag  =1; 
   \   00017C   90....       MOV     DPTR,#Join_isset_flag
   \   00017F   7401         MOV     A,#0x1
   \   000181   F0           MOVX    @DPTR,A
    613            osal_nv_item_init(ZCD_NV_JOIN_ISSET_FLAG, 1, &Join_isset_flag); 
   \   000182                ; Setup parameters for call to function osal_nv_item_init
   \   000182   75....       MOV     ?V0 + 0,#Join_isset_flag & 0xff
   \   000185   75....       MOV     ?V0 + 1,#(Join_isset_flag >> 8) & 0xff
   \   000188   78..         MOV     R0,#?V0 + 0
   \   00018A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00018D   7C01         MOV     R4,#0x1
   \   00018F   7D00         MOV     R5,#0x0
   \   000191   7A38         MOV     R2,#0x38
   \   000193   7B04         MOV     R3,#0x4
   \   000195   12....       LCALL   ??osal_nv_item_init?relay
   \   000198   7402         MOV     A,#0x2
   \   00019A   12....       LCALL   ?DEALLOC_XSTACK8
   \   00019D   E9           MOV     A,R1
    614            osal_nv_write(ZCD_NV_JOIN_ISSET_FLAG, 0, 1, &Join_isset_flag);
   \   00019E                ; Setup parameters for call to function osal_nv_write
   \   00019E   75....       MOV     ?V0 + 0,#Join_isset_flag & 0xff
   \   0001A1   75....       MOV     ?V0 + 1,#(Join_isset_flag >> 8) & 0xff
   \   0001A4   78..         MOV     R0,#?V0 + 0
   \   0001A6   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001A9   75..01       MOV     ?V0 + 0,#0x1
   \   0001AC   75..00       MOV     ?V0 + 1,#0x0
   \   0001AF   78..         MOV     R0,#?V0 + 0
   \   0001B1   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001B4   7C00         MOV     R4,#0x0
   \   0001B6   7D00         MOV     R5,#0x0
   \   0001B8   7A38         MOV     R2,#0x38
   \   0001BA   7B04         MOV     R3,#0x4
   \   0001BC   12....       LCALL   ??osal_nv_write?relay
   \   0001BF   7404         MOV     A,#0x4
   \   0001C1   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001C4   E9           MOV     A,R1
    615            
    616            New_join_delay_time = 0xff;
   \   0001C5   90....       MOV     DPTR,#New_join_delay_time
   \   0001C8   74FF         MOV     A,#-0x1
   \   0001CA   F0           MOVX    @DPTR,A
    617            osal_nv_item_init(ZCD_NV_JOIN_START_TIME_VALUE, 1, &New_join_delay_time); 
   \   0001CB                ; Setup parameters for call to function osal_nv_item_init
   \   0001CB   75....       MOV     ?V0 + 0,#New_join_delay_time & 0xff
   \   0001CE   75....       MOV     ?V0 + 1,#(New_join_delay_time >> 8) & 0xff
   \   0001D1   78..         MOV     R0,#?V0 + 0
   \   0001D3   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001D6   7C01         MOV     R4,#0x1
   \   0001D8   7D00         MOV     R5,#0x0
   \   0001DA   7A35         MOV     R2,#0x35
   \   0001DC   7B04         MOV     R3,#0x4
   \   0001DE   12....       LCALL   ??osal_nv_item_init?relay
   \   0001E1   7402         MOV     A,#0x2
   \   0001E3   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001E6   E9           MOV     A,R1
    618            osal_nv_write(ZCD_NV_JOIN_START_TIME_VALUE, 0, 1, &New_join_delay_time); 
   \   0001E7                ; Setup parameters for call to function osal_nv_write
   \   0001E7   75....       MOV     ?V0 + 0,#New_join_delay_time & 0xff
   \   0001EA   75....       MOV     ?V0 + 1,#(New_join_delay_time >> 8) & 0xff
   \   0001ED   78..         MOV     R0,#?V0 + 0
   \   0001EF   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001F2   75..01       MOV     ?V0 + 0,#0x1
   \   0001F5   75..00       MOV     ?V0 + 1,#0x0
   \   0001F8   78..         MOV     R0,#?V0 + 0
   \   0001FA   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001FD   7C00         MOV     R4,#0x0
   \   0001FF   7D00         MOV     R5,#0x0
   \   000201   7A35         MOV     R2,#0x35
   \   000203   7B04         MOV     R3,#0x4
   \   000205   12....       LCALL   ??osal_nv_write?relay
   \   000208   7404         MOV     A,#0x4
   \   00020A   12....       LCALL   ?DEALLOC_XSTACK8
   \   00020D   E9           MOV     A,R1
    619            
    620          }
   \   00020E   740D         MOV     A,#0xd
   \   000210   12....       LCALL   ?DEALLOC_XSTACK8
   \   000213   7F03         MOV     R7,#0x3
   \   000215   02....       LJMP    ?BANKED_LEAVE_XDATA
    621          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    622          void SampleApp_SendPeriodicMessage( void )
   \                     SampleApp_SendPeriodicMessage:
    623          {
   \   000000   74F3         MOV     A,#-0xd
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 13
   \   000005                ; Auto size: 4
   \   000005   74FC         MOV     A,#-0x4
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    624            /*##########################################*/
    625            
    626            uint8 buffer[4];
    627            uint8 *Sample_Cmd_shorAddr;
    628            uint16 parent_short_adress;
    629            
    630            Sample_Cmd_shorAddr=SampleApp_GetShortAddr();
   \   00000A                ; Setup parameters for call to function SampleApp_GetShortAddr
   \   00000A   12....       LCALL   ??SampleApp_GetShortAddr?relay
   \   00000D   8A..         MOV     ?V0 + 2,R2
   \   00000F   8B..         MOV     ?V0 + 3,R3
   \   000011   AE..         MOV     R6,?V0 + 2
   \   000013   AF..         MOV     R7,?V0 + 3
    631            buffer[0]=*Sample_Cmd_shorAddr++;
   \   000015   8E82         MOV     DPL,R6
   \   000017   8F83         MOV     DPH,R7
   \   000019   E0           MOVX    A,@DPTR
   \   00001A   85..82       MOV     DPL,?XSP + 0
   \   00001D   85..83       MOV     DPH,?XSP + 1
   \   000020   F0           MOVX    @DPTR,A
   \   000021   8E82         MOV     DPL,R6
   \   000023   8F83         MOV     DPH,R7
   \   000025   A3           INC     DPTR
   \   000026   AE82         MOV     R6,DPL
   \   000028   AF83         MOV     R7,DPH
    632            buffer[1]=*Sample_Cmd_shorAddr++;
   \   00002A   8E82         MOV     DPL,R6
   \   00002C   8F83         MOV     DPH,R7
   \   00002E   E0           MOVX    A,@DPTR
   \   00002F   C0E0         PUSH    A
   \   000031   7401         MOV     A,#0x1
   \   000033   12....       LCALL   ?XSTACK_DISP0_8
   \   000036   D0E0         POP     A
   \   000038   F0           MOVX    @DPTR,A
   \   000039   8E82         MOV     DPL,R6
   \   00003B   8F83         MOV     DPH,R7
   \   00003D   A3           INC     DPTR
   \   00003E   AE82         MOV     R6,DPL
   \   000040   AF83         MOV     R7,DPH
    633            buffer[2]=*Sample_Cmd_shorAddr++;
   \   000042   8E82         MOV     DPL,R6
   \   000044   8F83         MOV     DPH,R7
   \   000046   E0           MOVX    A,@DPTR
   \   000047   C0E0         PUSH    A
   \   000049   7402         MOV     A,#0x2
   \   00004B   12....       LCALL   ?XSTACK_DISP0_8
   \   00004E   D0E0         POP     A
   \   000050   F0           MOVX    @DPTR,A
   \   000051   8E82         MOV     DPL,R6
   \   000053   8F83         MOV     DPH,R7
   \   000055   A3           INC     DPTR
   \   000056   AE82         MOV     R6,DPL
   \   000058   AF83         MOV     R7,DPH
    634            buffer[3]=*Sample_Cmd_shorAddr;
   \   00005A   8E82         MOV     DPL,R6
   \   00005C   8F83         MOV     DPH,R7
   \   00005E   E0           MOVX    A,@DPTR
   \   00005F   C0E0         PUSH    A
   \   000061   7403         MOV     A,#0x3
   \   000063   12....       LCALL   ?XSTACK_DISP0_8
   \   000066   D0E0         POP     A
   \   000068   F0           MOVX    @DPTR,A
    635            
    636            osal_mem_free( shortddr_mem );
   \   000069                ; Setup parameters for call to function osal_mem_free
   \   000069   90....       MOV     DPTR,#shortddr_mem
   \   00006C   E0           MOVX    A,@DPTR
   \   00006D   FA           MOV     R2,A
   \   00006E   A3           INC     DPTR
   \   00006F   E0           MOVX    A,@DPTR
   \   000070   FB           MOV     R3,A
   \   000071   12....       LCALL   ??osal_mem_free?relay
    637            
    638            
    639          
    640            if(RTR_NWK_FLAG==1)
   \   000074   90....       MOV     DPTR,#RTR_NWK_FLAG
   \   000077   E0           MOVX    A,@DPTR
   \   000078   6401         XRL     A,#0x1
   \   00007A   706B         JNZ     ??SampleApp_SendPeriodicMessage_0
    641            {
    642                parent_short_adress=0X0000;//如果是路由的话则直接发给协调器
   \   00007C   75..00       MOV     ?V0 + 0,#0x0
   \   00007F   75..00       MOV     ?V0 + 1,#0x0
    643                SampleApp_Addr_SendData_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \   000082   90....       MOV     DPTR,#SampleApp_Addr_SendData_DstAddr + 8
   \   000085   7402         MOV     A,#0x2
   \   000087   F0           MOVX    @DPTR,A
    644                SampleApp_Addr_SendData_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   000088   90....       MOV     DPTR,#SampleApp_Addr_SendData_DstAddr + 9
   \   00008B   7414         MOV     A,#0x14
   \   00008D   F0           MOVX    @DPTR,A
    645                SampleApp_Addr_SendData_DstAddr.addr.shortAddr = parent_short_adress;
   \   00008E   90....       MOV     DPTR,#SampleApp_Addr_SendData_DstAddr
   \   000091   E5..         MOV     A,?V0 + 0
   \   000093   F0           MOVX    @DPTR,A
   \   000094   A3           INC     DPTR
   \   000095   E5..         MOV     A,?V0 + 1
   \   000097   F0           MOVX    @DPTR,A
    646                
    647                if ( AF_DataRequest( &SampleApp_Addr_SendData_DstAddr, &SampleApp_epDesc,
    648                                SAMPLEAPP_PERIODIC_CLUSTERID,
    649                                4,  //数据长度
    650                                buffer,//###添加的发送数据        
    651                                &SampleApp_TransID,
    652                                AF_DISCV_ROUTE,
    653                                AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000098                ; Setup parameters for call to function AF_DataRequest
   \   000098   75..0F       MOV     ?V0 + 2,#0xf
   \   00009B   78..         MOV     R0,#?V0 + 2
   \   00009D   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000A0   75....       MOV     ?V0 + 2,#SampleApp_TransID & 0xff
   \   0000A3   75....       MOV     ?V0 + 3,#(SampleApp_TransID >> 8) & 0xff
   \   0000A6   78..         MOV     R0,#?V0 + 2
   \   0000A8   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000AB   7403         MOV     A,#0x3
   \   0000AD   12....       LCALL   ?XSTACK_DISP0_8
   \   0000B0   8582..       MOV     ?V0 + 2,DPL
   \   0000B3   8583..       MOV     ?V0 + 3,DPH
   \   0000B6   78..         MOV     R0,#?V0 + 2
   \   0000B8   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000BB   75..04       MOV     ?V0 + 2,#0x4
   \   0000BE   75..00       MOV     ?V0 + 3,#0x0
   \   0000C1   78..         MOV     R0,#?V0 + 2
   \   0000C3   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000C6   75..05       MOV     ?V0 + 2,#0x5
   \   0000C9   75..00       MOV     ?V0 + 3,#0x0
   \   0000CC   78..         MOV     R0,#?V0 + 2
   \   0000CE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000D1   7920         MOV     R1,#0x20
   \   0000D3   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   0000D5   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   0000D7   7A..         MOV     R2,#SampleApp_Addr_SendData_DstAddr & 0xff
   \   0000D9   7B..         MOV     R3,#(SampleApp_Addr_SendData_DstAddr >> 8) & 0xff
   \   0000DB   12....       LCALL   ??AF_DataRequest?relay
   \   0000DE   7409         MOV     A,#0x9
   \   0000E0   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000E3   E9           MOV     A,R1
   \   0000E4   02....       LJMP    ??SampleApp_SendPeriodicMessage_1 & 0xFFFF
    654                {
    655                }
    656                else
    657                {
    658                
    659                }
    660            }
    661            else
    662            {
    663                parent_short_adress= NLME_GetCoordShortAddr();//如果是终端的话先转发给父节点get the parent adress
   \                     ??SampleApp_SendPeriodicMessage_0:
   \   0000E7                ; Setup parameters for call to function NLME_GetCoordShortAddr
   \   0000E7   12....       LCALL   ??NLME_GetCoordShortAddr?relay
   \   0000EA   8A..         MOV     ?V0 + 2,R2
   \   0000EC   8B..         MOV     ?V0 + 3,R3
   \   0000EE   85....       MOV     ?V0 + 0,?V0 + 2
   \   0000F1   85....       MOV     ?V0 + 1,?V0 + 3
    664                SampleApp_Addr_SendData_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \   0000F4   90....       MOV     DPTR,#SampleApp_Addr_SendData_DstAddr + 8
   \   0000F7   7402         MOV     A,#0x2
   \   0000F9   F0           MOVX    @DPTR,A
    665                SampleApp_Addr_SendData_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   0000FA   90....       MOV     DPTR,#SampleApp_Addr_SendData_DstAddr + 9
   \   0000FD   7414         MOV     A,#0x14
   \   0000FF   F0           MOVX    @DPTR,A
    666                SampleApp_Addr_SendData_DstAddr.addr.shortAddr = parent_short_adress;
   \   000100   90....       MOV     DPTR,#SampleApp_Addr_SendData_DstAddr
   \   000103   E5..         MOV     A,?V0 + 0
   \   000105   F0           MOVX    @DPTR,A
   \   000106   A3           INC     DPTR
   \   000107   E5..         MOV     A,?V0 + 1
   \   000109   F0           MOVX    @DPTR,A
    667                
    668                uint8 OPTION_AF=0;
   \   00010A   75..00       MOV     ?V0 + 4,#0x0
    669               if(HEART_NEED_ACK_FLAG==1)
   \   00010D   90....       MOV     DPTR,#HEART_NEED_ACK_FLAG
   \   000110   E0           MOVX    A,@DPTR
   \   000111   6401         XRL     A,#0x1
   \   000113   700B         JNZ     ??SampleApp_SendPeriodicMessage_2
    670               { 
    671                 HEART_NEED_ACK_FLAG = 0;
   \   000115   90....       MOV     DPTR,#HEART_NEED_ACK_FLAG
   \   000118   7400         MOV     A,#0x0
   \   00011A   F0           MOVX    @DPTR,A
    672                 OPTION_AF = AF_DISCV_ROUTE|AF_ACK_REQUEST;
   \   00011B   75..30       MOV     ?V0 + 4,#0x30
   \   00011E   8003         SJMP    ??SampleApp_SendPeriodicMessage_3
    673               }
    674               else
    675               {
    676                OPTION_AF = AF_DISCV_ROUTE;
   \                     ??SampleApp_SendPeriodicMessage_2:
   \   000120   75..20       MOV     ?V0 + 4,#0x20
    677               } 
    678                
    679                
    680                if ( AF_DataRequest( &SampleApp_Addr_SendData_DstAddr, &SampleApp_epDesc,
    681                                    SAMPLEAPP_PERIODIC_CLUSTERID,
    682                                    4,  //数据长度
    683                                    buffer,//###添加的发送数据        
    684                                    &SampleApp_TransID,
    685                                    OPTION_AF,
    686                                    AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \                     ??SampleApp_SendPeriodicMessage_3:
   \   000123                ; Setup parameters for call to function AF_DataRequest
   \   000123   75..0F       MOV     ?V0 + 2,#0xf
   \   000126   78..         MOV     R0,#?V0 + 2
   \   000128   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00012B   75....       MOV     ?V0 + 2,#SampleApp_TransID & 0xff
   \   00012E   75....       MOV     ?V0 + 3,#(SampleApp_TransID >> 8) & 0xff
   \   000131   78..         MOV     R0,#?V0 + 2
   \   000133   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000136   7403         MOV     A,#0x3
   \   000138   12....       LCALL   ?XSTACK_DISP0_8
   \   00013B   8582..       MOV     ?V0 + 2,DPL
   \   00013E   8583..       MOV     ?V0 + 3,DPH
   \   000141   78..         MOV     R0,#?V0 + 2
   \   000143   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000146   75..04       MOV     ?V0 + 2,#0x4
   \   000149   75..00       MOV     ?V0 + 3,#0x0
   \   00014C   78..         MOV     R0,#?V0 + 2
   \   00014E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000151   75..05       MOV     ?V0 + 2,#0x5
   \   000154   75..00       MOV     ?V0 + 3,#0x0
   \   000157   78..         MOV     R0,#?V0 + 2
   \   000159   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00015C   A9..         MOV     R1,?V0 + 4
   \   00015E   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000160   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000162   7A..         MOV     R2,#SampleApp_Addr_SendData_DstAddr & 0xff
   \   000164   7B..         MOV     R3,#(SampleApp_Addr_SendData_DstAddr >> 8) & 0xff
   \   000166   12....       LCALL   ??AF_DataRequest?relay
   \   000169   7409         MOV     A,#0x9
   \   00016B   12....       LCALL   ?DEALLOC_XSTACK8
   \   00016E   E9           MOV     A,R1
    687                {
    688                }
    689                else
    690                {
    691                  
    692                }
    693          
    694            }   
    695          
    696            
    697            
    698          }
   \                     ??SampleApp_SendPeriodicMessage_1:
   \   00016F   7404         MOV     A,#0x4
   \   000171   12....       LCALL   ?DEALLOC_XSTACK8
   \   000174   7F05         MOV     R7,#0x5
   \   000176   02....       LJMP    ?BANKED_LEAVE_XDATA
    699          
    700          
    701          /******************************************************************************
    702          * @fn          zb_ReadConfiguration
    703          *
    704          * @brief       The zb_ReadConfiguration function is used to get a
    705          *              Configuration Protperty from Nonvolatile memory.
    706          *
    707          * @param       configId - The identifier for the configuration property
    708          *              len - The size of the pValue buffer in bytes
    709          *              pValue - A buffer to hold the configuration property
    710          *
    711          * @return      none
    712          */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    713          uint8 zb_ReadConfiguration( uint8 configId, uint8 len, void *pValue )
   \                     zb_ReadConfiguration:
    714          {
   \   000000   74F3         MOV     A,#-0xd
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 13
   \   000005                ; Auto size: 0
   \   000005   89..         MOV     ?V0 + 4,R1
   \   000007   EA           MOV     A,R2
   \   000008   FE           MOV     R6,A
   \   000009   8C..         MOV     ?V0 + 2,R4
   \   00000B   8D..         MOV     ?V0 + 3,R5
    715            uint8 size;
    716            
    717            size = (uint8)osal_nv_item_len( configId );
   \   00000D                ; Setup parameters for call to function osal_nv_item_len
   \   00000D   85....       MOV     ?V0 + 0,?V0 + 4
   \   000010   75..00       MOV     ?V0 + 1,#0x0
   \   000013   AA..         MOV     R2,?V0 + 0
   \   000015   AB..         MOV     R3,?V0 + 1
   \   000017   12....       LCALL   ??osal_nv_item_len?relay
   \   00001A   EA           MOV     A,R2
   \   00001B   FF           MOV     R7,A
    718            if ( size > len )
   \   00001C   EE           MOV     A,R6
   \   00001D   C3           CLR     C
   \   00001E   9F           SUBB    A,R7
   \   00001F   5004         JNC     ??zb_ReadConfiguration_0
    719            {
    720              return ZFailure;
   \   000021   7901         MOV     R1,#0x1
   \   000023   8025         SJMP    ??zb_ReadConfiguration_1
    721            }
    722            else
    723            {
    724              return( osal_nv_read(configId, 0, size, pValue) );
   \                     ??zb_ReadConfiguration_0:
   \   000025                ; Setup parameters for call to function osal_nv_read
   \   000025   78..         MOV     R0,#?V0 + 2
   \   000027   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00002A   8F..         MOV     ?V0 + 0,R7
   \   00002C   75..00       MOV     ?V0 + 1,#0x0
   \   00002F   78..         MOV     R0,#?V0 + 0
   \   000031   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000034   7C00         MOV     R4,#0x0
   \   000036   7D00         MOV     R5,#0x0
   \   000038   85....       MOV     ?V0 + 0,?V0 + 4
   \   00003B   75..00       MOV     ?V0 + 1,#0x0
   \   00003E   AA..         MOV     R2,?V0 + 0
   \   000040   AB..         MOV     R3,?V0 + 1
   \   000042   12....       LCALL   ??osal_nv_read?relay
   \   000045   7404         MOV     A,#0x4
   \   000047   12....       LCALL   ?DEALLOC_XSTACK8
   \                     ??zb_ReadConfiguration_1:
   \   00004A   7F05         MOV     R7,#0x5
   \   00004C   02....       LJMP    ?BANKED_LEAVE_XDATA
    725            }
    726          }
    727          
    728          /******************************************************************************
    729          * @fn          zb_WriteConfiguration
    730          *
    731          * @brief       The zb_WriteConfiguration function is used to write a
    732          *              Configuration Property to nonvolatile memory.
    733          *
    734          * @param       configId - The identifier for the configuration property
    735          *              len - The size of the pValue buffer in bytes
    736          *              pValue - A buffer containing the new value of the
    737          *                       configuration property
    738          *
    739          * @return      none
    740          */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    741          uint8 zb_WriteConfiguration( uint8 configId, uint8 len, void *pValue )
   \                     zb_WriteConfiguration:
    742          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FF           MOV     R7,A
   \   000007   EA           MOV     A,R2
   \   000008   FE           MOV     R6,A
   \   000009   8C..         MOV     ?V0 + 2,R4
   \   00000B   8D..         MOV     ?V0 + 3,R5
    743            return( osal_nv_write(configId, 0, len, pValue) );
   \   00000D                ; Setup parameters for call to function osal_nv_write
   \   00000D   78..         MOV     R0,#?V0 + 2
   \   00000F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000012   8E..         MOV     ?V0 + 0,R6
   \   000014   75..00       MOV     ?V0 + 1,#0x0
   \   000017   78..         MOV     R0,#?V0 + 0
   \   000019   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00001C   7C00         MOV     R4,#0x0
   \   00001E   7D00         MOV     R5,#0x0
   \   000020   8F..         MOV     ?V0 + 0,R7
   \   000022   75..00       MOV     ?V0 + 1,#0x0
   \   000025   AA..         MOV     R2,?V0 + 0
   \   000027   AB..         MOV     R3,?V0 + 1
   \   000029   12....       LCALL   ??osal_nv_write?relay
   \   00002C   7404         MOV     A,#0x4
   \   00002E   12....       LCALL   ?DEALLOC_XSTACK8
   \   000031   7F04         MOV     R7,#0x4
   \   000033   02....       LJMP    ?BANKED_LEAVE_XDATA
    744          }
    745          
    746          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    747          uint8 *SampleApp_GetShortAddr(void)
   \                     SampleApp_GetShortAddr:
    748          {
   \   000000   74F2         MOV     A,#-0xe
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 0
    749            uint16 short_ddr;
    750            uint8 *shortddr;
    751            uint8 yy1;
    752            uint8 yy2; 
    753            //  uint8 *shortddr_mem;
    754            
    755            shortddr_mem=osal_mem_alloc(4); 
   \   000005                ; Setup parameters for call to function osal_mem_alloc
   \   000005   7A04         MOV     R2,#0x4
   \   000007   7B00         MOV     R3,#0x0
   \   000009   12....       LCALL   ??osal_mem_alloc?relay
   \   00000C   90....       MOV     DPTR,#shortddr_mem
   \   00000F   EA           MOV     A,R2
   \   000010   F0           MOVX    @DPTR,A
   \   000011   A3           INC     DPTR
   \   000012   EB           MOV     A,R3
   \   000013   F0           MOVX    @DPTR,A
    756            short_ddr=NLME_GetShortAddr();
   \   000014                ; Setup parameters for call to function NLME_GetShortAddr
   \   000014   12....       LCALL   ??NLME_GetShortAddr?relay
   \   000017   8A..         MOV     ?V0 + 4,R2
   \   000019   8B..         MOV     ?V0 + 5,R3
   \   00001B   85....       MOV     ?V0 + 0,?V0 + 4
   \   00001E   85....       MOV     ?V0 + 1,?V0 + 5
    757            yy1=(uint8)((short_ddr&0xff00)>>8);
   \   000021   A8..         MOV     R0,?V0 + 0
   \   000023   A9..         MOV     R1,?V0 + 1
   \   000025   E4           CLR     A
   \   000026   E5..         MOV     A,?V0 + 1
   \   000028   A8..         MOV     R0,?V0 + 1
   \   00002A   E5..         MOV     A,?V0 + 1
   \   00002C   F5..         MOV     ?V0 + 2,A
    758            yy2=(uint8)short_ddr;
   \   00002E   E5..         MOV     A,?V0 + 0
   \   000030   F5..         MOV     ?V0 + 3,A
    759            shortddr_mem[0]=hextoword1(yy1);
   \   000032                ; Setup parameters for call to function hextoword1
   \   000032   A9..         MOV     R1,?V0 + 2
   \   000034   12....       LCALL   ??hextoword1?relay
   \   000037   E9           MOV     A,R1
   \   000038   C0E0         PUSH    A
   \   00003A   90....       MOV     DPTR,#shortddr_mem
   \   00003D   E0           MOVX    A,@DPTR
   \   00003E   F8           MOV     R0,A
   \   00003F   A3           INC     DPTR
   \   000040   E0           MOVX    A,@DPTR
   \   000041   F583         MOV     DPH,A
   \   000043   8882         MOV     DPL,R0
   \   000045   D0E0         POP     A
   \   000047   F0           MOVX    @DPTR,A
    760            shortddr_mem[1]=hextoword2(yy1);
   \   000048                ; Setup parameters for call to function hextoword2
   \   000048   A9..         MOV     R1,?V0 + 2
   \   00004A   12....       LCALL   ??hextoword2?relay
   \   00004D   E9           MOV     A,R1
   \   00004E   C0E0         PUSH    A
   \   000050   90....       MOV     DPTR,#shortddr_mem
   \   000053   E0           MOVX    A,@DPTR
   \   000054   F8           MOV     R0,A
   \   000055   A3           INC     DPTR
   \   000056   E0           MOVX    A,@DPTR
   \   000057   F583         MOV     DPH,A
   \   000059   8882         MOV     DPL,R0
   \   00005B   A3           INC     DPTR
   \   00005C   D0E0         POP     A
   \   00005E   F0           MOVX    @DPTR,A
    761            shortddr_mem[2]=hextoword1(yy2);
   \   00005F                ; Setup parameters for call to function hextoword1
   \   00005F   A9..         MOV     R1,?V0 + 3
   \   000061   12....       LCALL   ??hextoword1?relay
   \   000064   E9           MOV     A,R1
   \   000065   C0E0         PUSH    A
   \   000067   90....       MOV     DPTR,#shortddr_mem
   \   00006A   E0           MOVX    A,@DPTR
   \   00006B   F8           MOV     R0,A
   \   00006C   A3           INC     DPTR
   \   00006D   E0           MOVX    A,@DPTR
   \   00006E   F583         MOV     DPH,A
   \   000070   8882         MOV     DPL,R0
   \   000072   A3           INC     DPTR
   \   000073   A3           INC     DPTR
   \   000074   D0E0         POP     A
   \   000076   F0           MOVX    @DPTR,A
    762            shortddr_mem[3]=hextoword2(yy2);
   \   000077                ; Setup parameters for call to function hextoword2
   \   000077   A9..         MOV     R1,?V0 + 3
   \   000079   12....       LCALL   ??hextoword2?relay
   \   00007C   E9           MOV     A,R1
   \   00007D   C0E0         PUSH    A
   \   00007F   90....       MOV     DPTR,#shortddr_mem
   \   000082   E0           MOVX    A,@DPTR
   \   000083   F8           MOV     R0,A
   \   000084   A3           INC     DPTR
   \   000085   E0           MOVX    A,@DPTR
   \   000086   F583         MOV     DPH,A
   \   000088   8882         MOV     DPL,R0
   \   00008A   A3           INC     DPTR
   \   00008B   A3           INC     DPTR
   \   00008C   A3           INC     DPTR
   \   00008D   D0E0         POP     A
   \   00008F   F0           MOVX    @DPTR,A
    763            shortddr=shortddr_mem;
   \   000090   90....       MOV     DPTR,#shortddr_mem
   \   000093   E0           MOVX    A,@DPTR
   \   000094   F8           MOV     R0,A
   \   000095   A3           INC     DPTR
   \   000096   E0           MOVX    A,@DPTR
   \   000097   F9           MOV     R1,A
   \   000098   E8           MOV     A,R0
   \   000099   FE           MOV     R6,A
   \   00009A   E9           MOV     A,R1
   \   00009B   FF           MOV     R7,A
    764            
    765            return shortddr;
   \   00009C   EE           MOV     A,R6
   \   00009D   FA           MOV     R2,A
   \   00009E   EF           MOV     A,R7
   \   00009F   FB           MOV     R3,A
   \   0000A0   7F06         MOV     R7,#0x6
   \   0000A2   02....       LJMP    ?BANKED_LEAVE_XDATA
    766          }
    767          
    768          
    769          /*********************************************************************
    770          * @fn      SampleApp_GetExtendAddr()
    771          *
    772          * @brief   get the entendaddr
    773          *
    774          * @param   none
    775          *
    776          * @return  uin8 *my_extendaddr
    777          */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    778          uint8 *SampleApp_GetExtendAddr(void)
   \                     SampleApp_GetExtendAddr:
    779          {
   \   000000   74F2         MOV     A,#-0xe
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 0
    780            uint8 i;
    781            uint8 *ext_addr;
    782            uint8 *extaddr;
    783            //  uint8 *extendaddr_mem;
    784            
    785            extendaddr_mem=osal_mem_alloc(16);
   \   000005                ; Setup parameters for call to function osal_mem_alloc
   \   000005   7A10         MOV     R2,#0x10
   \   000007   7B00         MOV     R3,#0x0
   \   000009   12....       LCALL   ??osal_mem_alloc?relay
   \   00000C   90....       MOV     DPTR,#extendaddr_mem
   \   00000F   EA           MOV     A,R2
   \   000010   F0           MOVX    @DPTR,A
   \   000011   A3           INC     DPTR
   \   000012   EB           MOV     A,R3
   \   000013   F0           MOVX    @DPTR,A
    786            ext_addr=NLME_GetExtAddr();
   \   000014                ; Setup parameters for call to function NLME_GetExtAddr
   \   000014   12....       LCALL   ??NLME_GetExtAddr?relay
   \   000017   8A..         MOV     ?V0 + 4,R2
   \   000019   8B..         MOV     ?V0 + 5,R3
   \   00001B   AE..         MOV     R6,?V0 + 4
   \   00001D   AF..         MOV     R7,?V0 + 5
    787            for(i=0;i<15;i=i+2)
   \   00001F   75..00       MOV     ?V0 + 2,#0x0
   \                     ??SampleApp_GetExtendAddr_0:
   \   000022   E5..         MOV     A,?V0 + 2
   \   000024   C3           CLR     C
   \   000025   940F         SUBB    A,#0xf
   \   000027   5055         JNC     ??SampleApp_GetExtendAddr_1
    788            {
    789              extendaddr_mem[i]=hextoword1(*ext_addr);
   \   000029                ; Setup parameters for call to function hextoword1
   \   000029   8E82         MOV     DPL,R6
   \   00002B   8F83         MOV     DPH,R7
   \   00002D   E0           MOVX    A,@DPTR
   \   00002E   F9           MOV     R1,A
   \   00002F   12....       LCALL   ??hextoword1?relay
   \   000032   E9           MOV     A,R1
   \   000033   C0E0         PUSH    A
   \   000035   E5..         MOV     A,?V0 + 2
   \   000037   A8..         MOV     R0,?V0 + 2
   \   000039   7900         MOV     R1,#0x0
   \   00003B   90....       MOV     DPTR,#extendaddr_mem
   \   00003E   E0           MOVX    A,@DPTR
   \   00003F   28           ADD     A,R0
   \   000040   FA           MOV     R2,A
   \   000041   A3           INC     DPTR
   \   000042   E0           MOVX    A,@DPTR
   \   000043   39           ADDC    A,R1
   \   000044   8A82         MOV     DPL,R2
   \   000046   F583         MOV     DPH,A
   \   000048   D0E0         POP     A
   \   00004A   F0           MOVX    @DPTR,A
    790              extendaddr_mem[i+1]=hextoword2(*ext_addr++);
   \   00004B                ; Setup parameters for call to function hextoword2
   \   00004B   8E82         MOV     DPL,R6
   \   00004D   8F83         MOV     DPH,R7
   \   00004F   E0           MOVX    A,@DPTR
   \   000050   F9           MOV     R1,A
   \   000051   12....       LCALL   ??hextoword2?relay
   \   000054   E9           MOV     A,R1
   \   000055   F8           MOV     R0,A
   \   000056   8E82         MOV     DPL,R6
   \   000058   8F83         MOV     DPH,R7
   \   00005A   A3           INC     DPTR
   \   00005B   AE82         MOV     R6,DPL
   \   00005D   AF83         MOV     R7,DPH
   \   00005F   C0E0         PUSH    A
   \   000061   E5..         MOV     A,?V0 + 2
   \   000063   A8..         MOV     R0,?V0 + 2
   \   000065   7900         MOV     R1,#0x0
   \   000067   90....       MOV     DPTR,#extendaddr_mem
   \   00006A   E0           MOVX    A,@DPTR
   \   00006B   28           ADD     A,R0
   \   00006C   FA           MOV     R2,A
   \   00006D   A3           INC     DPTR
   \   00006E   E0           MOVX    A,@DPTR
   \   00006F   39           ADDC    A,R1
   \   000070   8A82         MOV     DPL,R2
   \   000072   F583         MOV     DPH,A
   \   000074   A3           INC     DPTR
   \   000075   D0E0         POP     A
   \   000077   F0           MOVX    @DPTR,A
    791            }
   \   000078   05..         INC     ?V0 + 2
   \   00007A   05..         INC     ?V0 + 2
   \   00007C   80A4         SJMP    ??SampleApp_GetExtendAddr_0
    792            extaddr=extendaddr_mem;
   \                     ??SampleApp_GetExtendAddr_1:
   \   00007E   90....       MOV     DPTR,#extendaddr_mem
   \   000081   E0           MOVX    A,@DPTR
   \   000082   F8           MOV     R0,A
   \   000083   A3           INC     DPTR
   \   000084   E0           MOVX    A,@DPTR
   \   000085   F9           MOV     R1,A
   \   000086   88..         MOV     ?V0 + 0,R0
   \   000088   89..         MOV     ?V0 + 1,R1
    793            return extaddr;
   \   00008A   AA..         MOV     R2,?V0 + 0
   \   00008C   AB..         MOV     R3,?V0 + 1
   \   00008E   7F06         MOV     R7,#0x6
   \   000090   02....       LJMP    ?BANKED_LEAVE_XDATA
    794          }
    795          
    796          
    797          /*********************************************************************
    798          * @fn      hextoword1/2
    799          *
    800          * @brief   translate the hex to word.
    801          *
    802          * @param   uint8 t
    803          *
    804          * @return  none
    805          */
    806          //十六进制转字符函数

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    807          uint8 hextoword1(uint8 t )
   \                     hextoword1:
    808          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
   \   000000   E9           MOV     A,R1
   \   000001   F8           MOV     R0,A
    809            uint8 abc;
    810            uint8 cba;
    811            uint8 xx1;
    812            abc=t;
   \   000002   FA           MOV     R2,A
    813            cba=0xf0;
   \   000003   7BF0         MOV     R3,#-0x10
    814            abc=(abc&cba)>>4;
   \   000005   5B           ANL     A,R3
   \   000006   C4           SWAP    A
   \   000007   540F         ANL     A,#0xf
   \   000009   FA           MOV     R2,A
    815            if(abc<10)
   \   00000A   EA           MOV     A,R2
   \   00000B   C3           CLR     C
   \   00000C   940A         SUBB    A,#0xa
   \   00000E   5006         JNC     ??hextoword1_0
    816            {
    817              xx1=abc+48;
   \   000010   7430         MOV     A,#0x30
   \   000012   2A           ADD     A,R2
   \   000013   F9           MOV     R1,A
   \   000014   8004         SJMP    ??hextoword1_1
    818            }
    819            else
    820            {
    821              xx1=abc+55;
   \                     ??hextoword1_0:
   \   000016   7437         MOV     A,#0x37
   \   000018   2A           ADD     A,R2
   \   000019   F9           MOV     R1,A
    822            }
    823            return xx1;
   \                     ??hextoword1_1:
   \   00001A   02....       LJMP    ?BRET
    824          }
    825          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    826          uint8 hextoword2(uint8 t)
   \                     hextoword2:
    827          {
   \   000000   C0..         PUSH    ?V0 + 0
   \   000002                ; Saved register size: 1
   \   000002                ; Auto size: 0
   \   000002   E9           MOV     A,R1
   \   000003   F8           MOV     R0,A
    828            uint8 abc;
    829            uint8 cba;
    830            uint8 xx2;
    831            abc=t;
   \   000004   88..         MOV     ?V0 + 0,R0
    832            cba=0x0f;
   \   000006   7A0F         MOV     R2,#0xf
    833            abc=abc&cba;
   \   000008   EA           MOV     A,R2
   \   000009   52..         ANL     ?V0 + 0,A
    834            if(abc<10)
   \   00000B   E5..         MOV     A,?V0 + 0
   \   00000D   C3           CLR     C
   \   00000E   940A         SUBB    A,#0xa
   \   000010   5007         JNC     ??hextoword2_0
    835            {
    836              xx2=abc+48;
   \   000012   7430         MOV     A,#0x30
   \   000014   25..         ADD     A,?V0 + 0
   \   000016   F9           MOV     R1,A
   \   000017   8005         SJMP    ??hextoword2_1
    837            }
    838            else
    839            {
    840              xx2=abc+55;
   \                     ??hextoword2_0:
   \   000019   7437         MOV     A,#0x37
   \   00001B   25..         ADD     A,?V0 + 0
   \   00001D   F9           MOV     R1,A
    841            }
    842            return xx2;
   \                     ??hextoword2_1:
   \   00001E   D0..         POP     ?V0 + 0
   \   000020   02....       LJMP    ?BRET
    843          }
    844          
    845          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    846          uint8 wordtohex(uint8 x,uint8 y)
   \                     wordtohex:
    847          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
   \   000000   E9           MOV     A,R1
   \   000001   F8           MOV     R0,A
    848            uint8 z;
    849            if(x>0x39)
   \   000002   E8           MOV     A,R0
   \   000003   C3           CLR     C
   \   000004   943A         SUBB    A,#0x3a
   \   000006   4006         JC      ??wordtohex_0
    850            {x=x-0x37;}		//针对16进制中的A B C D E F ASICII码A对应16进制的0X41 B对应0X42   所以 转换为16进制时应该减去0X37  (0X41-0X0A)
   \   000008   74C9         MOV     A,#-0x37
   \   00000A   28           ADD     A,R0
   \   00000B   F8           MOV     R0,A
   \   00000C   8004         SJMP    ??wordtohex_1
    851            else
    852            {x=x-0x30;}		 //ASICII码0~9  对应的十六进制为0X30~0X39    减去0X30  即得到转换
   \                     ??wordtohex_0:
   \   00000E   74D0         MOV     A,#-0x30
   \   000010   28           ADD     A,R0
   \   000011   F8           MOV     R0,A
    853            if(y>0x39)
   \                     ??wordtohex_1:
   \   000012   EA           MOV     A,R2
   \   000013   C3           CLR     C
   \   000014   943A         SUBB    A,#0x3a
   \   000016   4006         JC      ??wordtohex_2
    854            {y=y-0x37;}
   \   000018   74C9         MOV     A,#-0x37
   \   00001A   2A           ADD     A,R2
   \   00001B   FA           MOV     R2,A
   \   00001C   8004         SJMP    ??wordtohex_3
    855            else
    856            {y=y-0x30;}
   \                     ??wordtohex_2:
   \   00001E   74D0         MOV     A,#-0x30
   \   000020   2A           ADD     A,R2
   \   000021   FA           MOV     R2,A
    857            x=x<<4;			    //放到高位上，因为232通信的范围（除了前面的w r : n）就是在0~F几个数字之间 ，转换成16进制后，最多至为4位，半字节
   \                     ??wordtohex_3:
   \   000022   E8           MOV     A,R0
   \   000023   C4           SWAP    A
   \   000024   54F0         ANL     A,#0xf0
   \   000026   F8           MOV     R0,A
    858            x=x&0xf0;
   \   000027   C8           XCH     A,R0
   \   000028   54F0         ANL     A,#0xf0
   \   00002A   F8           MOV     R0,A
    859            z=y|x;
   \   00002B   EA           MOV     A,R2
   \   00002C   48           ORL     A,R0
   \   00002D   F9           MOV     R1,A
    860            return(z);
   \   00002E   02....       LJMP    ?BRET
    861          }
    862          
    863          /*
    864          4位地址
    865          uint8 command_flag_8,uint8 command_flag_13,uint8 command_flag_14,uint8 command_flag_15,uint8 command_flag_16
    866          RSSI
    867          
    868          */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    869          void APP_NORMAL_COMMAND(uint8 *command_str)
   \                     APP_NORMAL_COMMAND:
    870          {
   \   000000   74EE         MOV     A,#-0x12
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 18
   \   000005                ; Auto size: 66
   \   000005   74BE         MOV     A,#-0x42
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
    871            uint8 *SET_str;
    872            //test 读取关联表信息发送到网关
    873            
    874            
    875            
    876            if(  command_str[4]==97)//a:97 读取关联表
   \   00000E   8E82         MOV     DPL,R6
   \   000010   8F83         MOV     DPH,R7
   \   000012   A3           INC     DPTR
   \   000013   A3           INC     DPTR
   \   000014   A3           INC     DPTR
   \   000015   A3           INC     DPTR
   \   000016   E0           MOVX    A,@DPTR
   \   000017   6461         XRL     A,#0x61
   \   000019   6003         JZ      $+5
   \   00001B   02....       LJMP    ??APP_NORMAL_COMMAND_0 & 0xFFFF
    877            {
    878              uint8 assi_count;
    879              uint8 active_assi_count=0;
   \   00001E   75..00       MOV     ?V0 + 6,#0x0
    880              uint8 total_count=0;
   \   000021   75..00       MOV     ?V0 + 2,#0x0
    881              
    882              
    883          //#if defined(RTR_NWK)
    884          //#ifdef  RTR_NWK_ZDO 
    885          //#if ( RTR_NWK_ZDO == 1)
    886          if ( RTR_NWK_FLAG == 1)
   \   000024   90....       MOV     DPTR,#RTR_NWK_FLAG
   \   000027   E0           MOVX    A,@DPTR
   \   000028   6401         XRL     A,#0x1
   \   00002A   6003         JZ      $+5
   \   00002C   02....       LJMP    ??APP_NORMAL_COMMAND_1 & 0xFFFF
    887              {
    888              assi_count = AssocCount( (command_str[5]-0x30), (command_str[6]-0x30) );
   \   00002F                ; Setup parameters for call to function AssocCount
   \   00002F   8E82         MOV     DPL,R6
   \   000031   8F83         MOV     DPH,R7
   \   000033   A3           INC     DPTR
   \   000034   A3           INC     DPTR
   \   000035   A3           INC     DPTR
   \   000036   A3           INC     DPTR
   \   000037   A3           INC     DPTR
   \   000038   A3           INC     DPTR
   \   000039   E0           MOVX    A,@DPTR
   \   00003A   24D0         ADD     A,#-0x30
   \   00003C   FA           MOV     R2,A
   \   00003D   8E82         MOV     DPL,R6
   \   00003F   8F83         MOV     DPH,R7
   \   000041   A3           INC     DPTR
   \   000042   A3           INC     DPTR
   \   000043   A3           INC     DPTR
   \   000044   A3           INC     DPTR
   \   000045   A3           INC     DPTR
   \   000046   E0           MOVX    A,@DPTR
   \   000047   24D0         ADD     A,#-0x30
   \   000049   F9           MOV     R1,A
   \   00004A   12....       LCALL   ??AssocCount?relay
   \   00004D   EA           MOV     A,R2
   \   00004E   F5..         MOV     ?V0 + 3,A
    889              total_count=12+(assi_count*2);
   \   000050   75F002       MOV     B,#0x2
   \   000053   E5..         MOV     A,?V0 + 3
   \   000055   A4           MUL     AB
   \   000056   240C         ADD     A,#0xc
   \   000058   F5..         MOV     ?V0 + 2,A
    890              SET_str=osal_mem_alloc(total_count);
   \   00005A                ; Setup parameters for call to function osal_mem_alloc
   \   00005A   85....       MOV     ?V0 + 4,?V0 + 2
   \   00005D   75..00       MOV     ?V0 + 5,#0x0
   \   000060   AA..         MOV     R2,?V0 + 4
   \   000062   AB..         MOV     R3,?V0 + 5
   \   000064   12....       LCALL   ??osal_mem_alloc?relay
   \   000067   8A..         MOV     ?V0 + 4,R2
   \   000069   8B..         MOV     ?V0 + 5,R3
   \   00006B   85....       MOV     ?V0 + 0,?V0 + 4
   \   00006E   85....       MOV     ?V0 + 1,?V0 + 5
    891              SET_str[0]=command_str[0];
   \   000071   8E82         MOV     DPL,R6
   \   000073   8F83         MOV     DPH,R7
   \   000075   E0           MOVX    A,@DPTR
   \   000076   85..82       MOV     DPL,?V0 + 0
   \   000079   85..83       MOV     DPH,?V0 + 1
   \   00007C   F0           MOVX    @DPTR,A
    892              SET_str[1]=command_str[1];
   \   00007D   8E82         MOV     DPL,R6
   \   00007F   8F83         MOV     DPH,R7
   \   000081   A3           INC     DPTR
   \   000082   E0           MOVX    A,@DPTR
   \   000083   85..82       MOV     DPL,?V0 + 0
   \   000086   85..83       MOV     DPH,?V0 + 1
   \   000089   A3           INC     DPTR
   \   00008A   F0           MOVX    @DPTR,A
    893              SET_str[2]=command_str[2];
   \   00008B   8E82         MOV     DPL,R6
   \   00008D   8F83         MOV     DPH,R7
   \   00008F   A3           INC     DPTR
   \   000090   A3           INC     DPTR
   \   000091   E0           MOVX    A,@DPTR
   \   000092   85..82       MOV     DPL,?V0 + 0
   \   000095   85..83       MOV     DPH,?V0 + 1
   \   000098   A3           INC     DPTR
   \   000099   A3           INC     DPTR
   \   00009A   F0           MOVX    @DPTR,A
    894              SET_str[3]=command_str[3];
   \   00009B   8E82         MOV     DPL,R6
   \   00009D   8F83         MOV     DPH,R7
   \   00009F   A3           INC     DPTR
   \   0000A0   A3           INC     DPTR
   \   0000A1   A3           INC     DPTR
   \   0000A2   E0           MOVX    A,@DPTR
   \   0000A3   85..82       MOV     DPL,?V0 + 0
   \   0000A6   85..83       MOV     DPH,?V0 + 1
   \   0000A9   A3           INC     DPTR
   \   0000AA   A3           INC     DPTR
   \   0000AB   A3           INC     DPTR
   \   0000AC   F0           MOVX    @DPTR,A
    895              SET_str[4]='/';
   \   0000AD   85..82       MOV     DPL,?V0 + 0
   \   0000B0   85..83       MOV     DPH,?V0 + 1
   \   0000B3   A3           INC     DPTR
   \   0000B4   A3           INC     DPTR
   \   0000B5   A3           INC     DPTR
   \   0000B6   A3           INC     DPTR
   \   0000B7   742F         MOV     A,#0x2f
   \   0000B9   F0           MOVX    @DPTR,A
    896              SET_str[5]='C';
   \   0000BA   85..82       MOV     DPL,?V0 + 0
   \   0000BD   85..83       MOV     DPH,?V0 + 1
   \   0000C0   A3           INC     DPTR
   \   0000C1   A3           INC     DPTR
   \   0000C2   A3           INC     DPTR
   \   0000C3   A3           INC     DPTR
   \   0000C4   A3           INC     DPTR
   \   0000C5   7443         MOV     A,#0x43
   \   0000C7   F0           MOVX    @DPTR,A
    897              SET_str[6]='/';
   \   0000C8   85..82       MOV     DPL,?V0 + 0
   \   0000CB   85..83       MOV     DPH,?V0 + 1
   \   0000CE   A3           INC     DPTR
   \   0000CF   A3           INC     DPTR
   \   0000D0   A3           INC     DPTR
   \   0000D1   A3           INC     DPTR
   \   0000D2   A3           INC     DPTR
   \   0000D3   A3           INC     DPTR
   \   0000D4   742F         MOV     A,#0x2f
   \   0000D6   F0           MOVX    @DPTR,A
    898              SET_str[7]='U';
   \   0000D7   85..82       MOV     DPL,?V0 + 0
   \   0000DA   85..83       MOV     DPH,?V0 + 1
   \   0000DD   A3           INC     DPTR
   \   0000DE   A3           INC     DPTR
   \   0000DF   A3           INC     DPTR
   \   0000E0   A3           INC     DPTR
   \   0000E1   A3           INC     DPTR
   \   0000E2   A3           INC     DPTR
   \   0000E3   A3           INC     DPTR
   \   0000E4   7455         MOV     A,#0x55
   \   0000E6   F0           MOVX    @DPTR,A
    899              SET_str[8]='U';
   \   0000E7   85..82       MOV     DPL,?V0 + 0
   \   0000EA   85..83       MOV     DPH,?V0 + 1
   \   0000ED   A3           INC     DPTR
   \   0000EE   A3           INC     DPTR
   \   0000EF   A3           INC     DPTR
   \   0000F0   A3           INC     DPTR
   \   0000F1   A3           INC     DPTR
   \   0000F2   A3           INC     DPTR
   \   0000F3   A3           INC     DPTR
   \   0000F4   A3           INC     DPTR
   \   0000F5   7455         MOV     A,#0x55
   \   0000F7   F0           MOVX    @DPTR,A
    900              SET_str[9]=0xA0; 
   \   0000F8   85..82       MOV     DPL,?V0 + 0
   \   0000FB   85..83       MOV     DPH,?V0 + 1
   \   0000FE   A3           INC     DPTR
   \   0000FF   A3           INC     DPTR
   \   000100   A3           INC     DPTR
   \   000101   A3           INC     DPTR
   \   000102   A3           INC     DPTR
   \   000103   A3           INC     DPTR
   \   000104   A3           INC     DPTR
   \   000105   A3           INC     DPTR
   \   000106   A3           INC     DPTR
   \   000107   74A0         MOV     A,#-0x60
   \   000109   F0           MOVX    @DPTR,A
    901              SET_str[10]=3;
   \   00010A   85..82       MOV     DPL,?V0 + 0
   \   00010D   85..83       MOV     DPH,?V0 + 1
   \   000110   A3           INC     DPTR
   \   000111   A3           INC     DPTR
   \   000112   A3           INC     DPTR
   \   000113   A3           INC     DPTR
   \   000114   A3           INC     DPTR
   \   000115   A3           INC     DPTR
   \   000116   A3           INC     DPTR
   \   000117   A3           INC     DPTR
   \   000118   A3           INC     DPTR
   \   000119   A3           INC     DPTR
   \   00011A   7403         MOV     A,#0x3
   \   00011C   F0           MOVX    @DPTR,A
    902              SET_str[11]=assi_count;
   \   00011D   E5..         MOV     A,?V0 + 3
   \   00011F   E5..         MOV     A,?V0 + 0
   \   000121   240B         ADD     A,#0xb
   \   000123   F582         MOV     DPL,A
   \   000125   E5..         MOV     A,?V0 + 1
   \   000127   3400         ADDC    A,#0x0
   \   000129   F583         MOV     DPH,A
   \   00012B   E5..         MOV     A,?V0 + 3
   \   00012D   F0           MOVX    @DPTR,A
    903              for(uint8 i=0;i<NWK_MAX_DEVICES;i++)
   \   00012E   7A00         MOV     R2,#0x0
   \                     ??APP_NORMAL_COMMAND_2:
   \   000130   EA           MOV     A,R2
   \   000131   C3           CLR     C
   \   000132   9415         SUBB    A,#0x15
   \   000134   4003         JC      $+5
   \   000136   02....       LJMP    ??APP_NORMAL_COMMAND_3 & 0xFFFF
    904              {
    905                if(AssociatedDevList[i].nodeRelation!=0xff)
   \   000139   EA           MOV     A,R2
   \   00013A   F8           MOV     R0,A
   \   00013B   7900         MOV     R1,#0x0
   \   00013D   E8           MOV     A,R0
   \   00013E   75F012       MOV     B,#0x12
   \   000141   A4           MUL     AB
   \   000142   C8           XCH     A,R0
   \   000143   ABF0         MOV     R3,B
   \   000145   75F000       MOV     B,#0x0
   \   000148   A4           MUL     AB
   \   000149   2B           ADD     A,R3
   \   00014A   FB           MOV     R3,A
   \   00014B   75F012       MOV     B,#0x12
   \   00014E   E9           MOV     A,R1
   \   00014F   A4           MUL     AB
   \   000150   2B           ADD     A,R3
   \   000151   F9           MOV     R1,A
   \   000152   74..         MOV     A,#(AssociatedDevList + 4) & 0xff
   \   000154   28           ADD     A,R0
   \   000155   F582         MOV     DPL,A
   \   000157   74..         MOV     A,#((AssociatedDevList + 4) >> 8) & 0xff
   \   000159   39           ADDC    A,R1
   \   00015A   F583         MOV     DPH,A
   \   00015C   E0           MOVX    A,@DPTR
   \   00015D   64FF         XRL     A,#0xff
   \   00015F   7003         JNZ     $+5
   \   000161   02....       LJMP    ??APP_NORMAL_COMMAND_4 & 0xFFFF
    906                {   
    907                  
    908                  SET_str[12+(2*active_assi_count)]=HI_UINT16(AssociatedDevList[i].shortAddr);
   \   000164   EA           MOV     A,R2
   \   000165   F8           MOV     R0,A
   \   000166   7900         MOV     R1,#0x0
   \   000168   E8           MOV     A,R0
   \   000169   75F012       MOV     B,#0x12
   \   00016C   A4           MUL     AB
   \   00016D   C8           XCH     A,R0
   \   00016E   ABF0         MOV     R3,B
   \   000170   75F000       MOV     B,#0x0
   \   000173   A4           MUL     AB
   \   000174   2B           ADD     A,R3
   \   000175   FB           MOV     R3,A
   \   000176   75F012       MOV     B,#0x12
   \   000179   E9           MOV     A,R1
   \   00017A   A4           MUL     AB
   \   00017B   2B           ADD     A,R3
   \   00017C   F9           MOV     R1,A
   \   00017D   74..         MOV     A,#AssociatedDevList & 0xff
   \   00017F   28           ADD     A,R0
   \   000180   F582         MOV     DPL,A
   \   000182   74..         MOV     A,#(AssociatedDevList >> 8) & 0xff
   \   000184   39           ADDC    A,R1
   \   000185   F583         MOV     DPH,A
   \   000187   E0           MOVX    A,@DPTR
   \   000188   F8           MOV     R0,A
   \   000189   A3           INC     DPTR
   \   00018A   E0           MOVX    A,@DPTR
   \   00018B   F9           MOV     R1,A
   \   00018C   E4           CLR     A
   \   00018D   E9           MOV     A,R1
   \   00018E   F8           MOV     R0,A
   \   00018F   C0E0         PUSH    A
   \   000191   E5..         MOV     A,?V0 + 6
   \   000193   A8..         MOV     R0,?V0 + 6
   \   000195   7900         MOV     R1,#0x0
   \   000197   E8           MOV     A,R0
   \   000198   75F002       MOV     B,#0x2
   \   00019B   A4           MUL     AB
   \   00019C   C8           XCH     A,R0
   \   00019D   ABF0         MOV     R3,B
   \   00019F   75F000       MOV     B,#0x0
   \   0001A2   A4           MUL     AB
   \   0001A3   2B           ADD     A,R3
   \   0001A4   FB           MOV     R3,A
   \   0001A5   75F002       MOV     B,#0x2
   \   0001A8   E9           MOV     A,R1
   \   0001A9   A4           MUL     AB
   \   0001AA   2B           ADD     A,R3
   \   0001AB   F9           MOV     R1,A
   \   0001AC   E5..         MOV     A,?V0 + 0
   \   0001AE   28           ADD     A,R0
   \   0001AF   F8           MOV     R0,A
   \   0001B0   E5..         MOV     A,?V0 + 1
   \   0001B2   39           ADDC    A,R1
   \   0001B3   F9           MOV     R1,A
   \   0001B4   E8           MOV     A,R0
   \   0001B5   240C         ADD     A,#0xc
   \   0001B7   F582         MOV     DPL,A
   \   0001B9   E9           MOV     A,R1
   \   0001BA   3400         ADDC    A,#0x0
   \   0001BC   F583         MOV     DPH,A
   \   0001BE   D0E0         POP     A
   \   0001C0   F0           MOVX    @DPTR,A
    909                  SET_str[13+(2*active_assi_count)]=LO_UINT16(AssociatedDevList[i].shortAddr);
   \   0001C1   EA           MOV     A,R2
   \   0001C2   F8           MOV     R0,A
   \   0001C3   7900         MOV     R1,#0x0
   \   0001C5   E8           MOV     A,R0
   \   0001C6   75F012       MOV     B,#0x12
   \   0001C9   A4           MUL     AB
   \   0001CA   C8           XCH     A,R0
   \   0001CB   ABF0         MOV     R3,B
   \   0001CD   75F000       MOV     B,#0x0
   \   0001D0   A4           MUL     AB
   \   0001D1   2B           ADD     A,R3
   \   0001D2   FB           MOV     R3,A
   \   0001D3   75F012       MOV     B,#0x12
   \   0001D6   E9           MOV     A,R1
   \   0001D7   A4           MUL     AB
   \   0001D8   2B           ADD     A,R3
   \   0001D9   F9           MOV     R1,A
   \   0001DA   74..         MOV     A,#AssociatedDevList & 0xff
   \   0001DC   28           ADD     A,R0
   \   0001DD   F582         MOV     DPL,A
   \   0001DF   74..         MOV     A,#(AssociatedDevList >> 8) & 0xff
   \   0001E1   39           ADDC    A,R1
   \   0001E2   F583         MOV     DPH,A
   \   0001E4   E0           MOVX    A,@DPTR
   \   0001E5   F8           MOV     R0,A
   \   0001E6   A3           INC     DPTR
   \   0001E7   E0           MOVX    A,@DPTR
   \   0001E8   F9           MOV     R1,A
   \   0001E9   E8           MOV     A,R0
   \   0001EA   C0E0         PUSH    A
   \   0001EC   E5..         MOV     A,?V0 + 6
   \   0001EE   A8..         MOV     R0,?V0 + 6
   \   0001F0   7900         MOV     R1,#0x0
   \   0001F2   E8           MOV     A,R0
   \   0001F3   75F002       MOV     B,#0x2
   \   0001F6   A4           MUL     AB
   \   0001F7   C8           XCH     A,R0
   \   0001F8   ABF0         MOV     R3,B
   \   0001FA   75F000       MOV     B,#0x0
   \   0001FD   A4           MUL     AB
   \   0001FE   2B           ADD     A,R3
   \   0001FF   FB           MOV     R3,A
   \   000200   75F002       MOV     B,#0x2
   \   000203   E9           MOV     A,R1
   \   000204   A4           MUL     AB
   \   000205   2B           ADD     A,R3
   \   000206   F9           MOV     R1,A
   \   000207   E5..         MOV     A,?V0 + 0
   \   000209   28           ADD     A,R0
   \   00020A   F8           MOV     R0,A
   \   00020B   E5..         MOV     A,?V0 + 1
   \   00020D   39           ADDC    A,R1
   \   00020E   F9           MOV     R1,A
   \   00020F   E8           MOV     A,R0
   \   000210   240D         ADD     A,#0xd
   \   000212   F582         MOV     DPL,A
   \   000214   E9           MOV     A,R1
   \   000215   3400         ADDC    A,#0x0
   \   000217   F583         MOV     DPH,A
   \   000219   D0E0         POP     A
   \   00021B   F0           MOVX    @DPTR,A
    910                  active_assi_count++;
   \   00021C   05..         INC     ?V0 + 6
    911                }
    912              }
   \                     ??APP_NORMAL_COMMAND_4:
   \   00021E   0A           INC     R2
   \   00021F   02....       LJMP    ??APP_NORMAL_COMMAND_2 & 0xFFFF
    913              }
    914              else     
    915              {
    916              uint16 parent_short_adress;
    917              assi_count=1;
   \                     ??APP_NORMAL_COMMAND_1:
   \   000222   75..01       MOV     ?V0 + 3,#0x1
    918              total_count=14;
   \   000225   75..0E       MOV     ?V0 + 2,#0xe
    919              
    920              SET_str=osal_mem_alloc(total_count);
   \   000228                ; Setup parameters for call to function osal_mem_alloc
   \   000228   85....       MOV     ?V0 + 8,?V0 + 2
   \   00022B   75..00       MOV     ?V0 + 9,#0x0
   \   00022E   AA..         MOV     R2,?V0 + 8
   \   000230   AB..         MOV     R3,?V0 + 9
   \   000232   12....       LCALL   ??osal_mem_alloc?relay
   \   000235   8A..         MOV     ?V0 + 8,R2
   \   000237   8B..         MOV     ?V0 + 9,R3
   \   000239   85....       MOV     ?V0 + 0,?V0 + 8
   \   00023C   85....       MOV     ?V0 + 1,?V0 + 9
    921              SET_str[0]=command_str[0];
   \   00023F   8E82         MOV     DPL,R6
   \   000241   8F83         MOV     DPH,R7
   \   000243   E0           MOVX    A,@DPTR
   \   000244   85..82       MOV     DPL,?V0 + 0
   \   000247   85..83       MOV     DPH,?V0 + 1
   \   00024A   F0           MOVX    @DPTR,A
    922              SET_str[1]=command_str[1];
   \   00024B   8E82         MOV     DPL,R6
   \   00024D   8F83         MOV     DPH,R7
   \   00024F   A3           INC     DPTR
   \   000250   E0           MOVX    A,@DPTR
   \   000251   85..82       MOV     DPL,?V0 + 0
   \   000254   85..83       MOV     DPH,?V0 + 1
   \   000257   A3           INC     DPTR
   \   000258   F0           MOVX    @DPTR,A
    923              SET_str[2]=command_str[2];
   \   000259   8E82         MOV     DPL,R6
   \   00025B   8F83         MOV     DPH,R7
   \   00025D   A3           INC     DPTR
   \   00025E   A3           INC     DPTR
   \   00025F   E0           MOVX    A,@DPTR
   \   000260   85..82       MOV     DPL,?V0 + 0
   \   000263   85..83       MOV     DPH,?V0 + 1
   \   000266   A3           INC     DPTR
   \   000267   A3           INC     DPTR
   \   000268   F0           MOVX    @DPTR,A
    924              SET_str[3]=command_str[3];
   \   000269   8E82         MOV     DPL,R6
   \   00026B   8F83         MOV     DPH,R7
   \   00026D   A3           INC     DPTR
   \   00026E   A3           INC     DPTR
   \   00026F   A3           INC     DPTR
   \   000270   E0           MOVX    A,@DPTR
   \   000271   85..82       MOV     DPL,?V0 + 0
   \   000274   85..83       MOV     DPH,?V0 + 1
   \   000277   A3           INC     DPTR
   \   000278   A3           INC     DPTR
   \   000279   A3           INC     DPTR
   \   00027A   F0           MOVX    @DPTR,A
    925              SET_str[4]='/';
   \   00027B   85..82       MOV     DPL,?V0 + 0
   \   00027E   85..83       MOV     DPH,?V0 + 1
   \   000281   A3           INC     DPTR
   \   000282   A3           INC     DPTR
   \   000283   A3           INC     DPTR
   \   000284   A3           INC     DPTR
   \   000285   742F         MOV     A,#0x2f
   \   000287   F0           MOVX    @DPTR,A
    926              SET_str[5]='C';
   \   000288   85..82       MOV     DPL,?V0 + 0
   \   00028B   85..83       MOV     DPH,?V0 + 1
   \   00028E   A3           INC     DPTR
   \   00028F   A3           INC     DPTR
   \   000290   A3           INC     DPTR
   \   000291   A3           INC     DPTR
   \   000292   A3           INC     DPTR
   \   000293   7443         MOV     A,#0x43
   \   000295   F0           MOVX    @DPTR,A
    927              SET_str[6]='/';
   \   000296   85..82       MOV     DPL,?V0 + 0
   \   000299   85..83       MOV     DPH,?V0 + 1
   \   00029C   A3           INC     DPTR
   \   00029D   A3           INC     DPTR
   \   00029E   A3           INC     DPTR
   \   00029F   A3           INC     DPTR
   \   0002A0   A3           INC     DPTR
   \   0002A1   A3           INC     DPTR
   \   0002A2   742F         MOV     A,#0x2f
   \   0002A4   F0           MOVX    @DPTR,A
    928              SET_str[7]='U';
   \   0002A5   85..82       MOV     DPL,?V0 + 0
   \   0002A8   85..83       MOV     DPH,?V0 + 1
   \   0002AB   A3           INC     DPTR
   \   0002AC   A3           INC     DPTR
   \   0002AD   A3           INC     DPTR
   \   0002AE   A3           INC     DPTR
   \   0002AF   A3           INC     DPTR
   \   0002B0   A3           INC     DPTR
   \   0002B1   A3           INC     DPTR
   \   0002B2   7455         MOV     A,#0x55
   \   0002B4   F0           MOVX    @DPTR,A
    929              SET_str[8]='U';
   \   0002B5   85..82       MOV     DPL,?V0 + 0
   \   0002B8   85..83       MOV     DPH,?V0 + 1
   \   0002BB   A3           INC     DPTR
   \   0002BC   A3           INC     DPTR
   \   0002BD   A3           INC     DPTR
   \   0002BE   A3           INC     DPTR
   \   0002BF   A3           INC     DPTR
   \   0002C0   A3           INC     DPTR
   \   0002C1   A3           INC     DPTR
   \   0002C2   A3           INC     DPTR
   \   0002C3   7455         MOV     A,#0x55
   \   0002C5   F0           MOVX    @DPTR,A
    930              SET_str[9]=0xA0;
   \   0002C6   85..82       MOV     DPL,?V0 + 0
   \   0002C9   85..83       MOV     DPH,?V0 + 1
   \   0002CC   A3           INC     DPTR
   \   0002CD   A3           INC     DPTR
   \   0002CE   A3           INC     DPTR
   \   0002CF   A3           INC     DPTR
   \   0002D0   A3           INC     DPTR
   \   0002D1   A3           INC     DPTR
   \   0002D2   A3           INC     DPTR
   \   0002D3   A3           INC     DPTR
   \   0002D4   A3           INC     DPTR
   \   0002D5   74A0         MOV     A,#-0x60
   \   0002D7   F0           MOVX    @DPTR,A
    931              SET_str[10]=3;
   \   0002D8   85..82       MOV     DPL,?V0 + 0
   \   0002DB   85..83       MOV     DPH,?V0 + 1
   \   0002DE   A3           INC     DPTR
   \   0002DF   A3           INC     DPTR
   \   0002E0   A3           INC     DPTR
   \   0002E1   A3           INC     DPTR
   \   0002E2   A3           INC     DPTR
   \   0002E3   A3           INC     DPTR
   \   0002E4   A3           INC     DPTR
   \   0002E5   A3           INC     DPTR
   \   0002E6   A3           INC     DPTR
   \   0002E7   A3           INC     DPTR
   \   0002E8   7403         MOV     A,#0x3
   \   0002EA   F0           MOVX    @DPTR,A
    932              SET_str[11]=assi_count;
   \   0002EB   E5..         MOV     A,?V0 + 3
   \   0002ED   E5..         MOV     A,?V0 + 0
   \   0002EF   240B         ADD     A,#0xb
   \   0002F1   F582         MOV     DPL,A
   \   0002F3   E5..         MOV     A,?V0 + 1
   \   0002F5   3400         ADDC    A,#0x0
   \   0002F7   F583         MOV     DPH,A
   \   0002F9   E5..         MOV     A,?V0 + 3
   \   0002FB   F0           MOVX    @DPTR,A
    933              parent_short_adress=NLME_GetCoordShortAddr();
   \   0002FC                ; Setup parameters for call to function NLME_GetCoordShortAddr
   \   0002FC   12....       LCALL   ??NLME_GetCoordShortAddr?relay
   \   0002FF   8A..         MOV     ?V0 + 8,R2
   \   000301   8B..         MOV     ?V0 + 9,R3
   \   000303   85....       MOV     ?V0 + 4,?V0 + 8
   \   000306   85....       MOV     ?V0 + 5,?V0 + 9
    934              SET_str[12]=HI_UINT16(parent_short_adress);
   \   000309   A8..         MOV     R0,?V0 + 4
   \   00030B   A9..         MOV     R1,?V0 + 5
   \   00030D   E4           CLR     A
   \   00030E   E5..         MOV     A,?V0 + 5
   \   000310   A8..         MOV     R0,?V0 + 5
   \   000312   E5..         MOV     A,?V0 + 5
   \   000314   E5..         MOV     A,?V0 + 0
   \   000316   240C         ADD     A,#0xc
   \   000318   F582         MOV     DPL,A
   \   00031A   E5..         MOV     A,?V0 + 1
   \   00031C   3400         ADDC    A,#0x0
   \   00031E   F583         MOV     DPH,A
   \   000320   E5..         MOV     A,?V0 + 5
   \   000322   F0           MOVX    @DPTR,A
    935              SET_str[13]=LO_UINT16(parent_short_adress);
   \   000323   E5..         MOV     A,?V0 + 4
   \   000325   E5..         MOV     A,?V0 + 0
   \   000327   240D         ADD     A,#0xd
   \   000329   F582         MOV     DPL,A
   \   00032B   E5..         MOV     A,?V0 + 1
   \   00032D   3400         ADDC    A,#0x0
   \   00032F   F583         MOV     DPH,A
   \   000331   E5..         MOV     A,?V0 + 4
   \   000333   F0           MOVX    @DPTR,A
    936              }
    937          
    938              
    939              
    940              //   if(data_sucess_flag==2)
    941              {    
    942                SampleApp_SPI_SendCommand_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \                     ??APP_NORMAL_COMMAND_3:
   \   000334   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 8
   \   000337   7402         MOV     A,#0x2
   \   000339   F0           MOVX    @DPTR,A
    943                SampleApp_SPI_SendCommand_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   00033A   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 9
   \   00033D   7414         MOV     A,#0x14
   \   00033F   F0           MOVX    @DPTR,A
    944                SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;
   \   000340   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr
   \   000343   7400         MOV     A,#0x0
   \   000345   F0           MOVX    @DPTR,A
   \   000346   A3           INC     DPTR
   \   000347   7400         MOV     A,#0x0
   \   000349   F0           MOVX    @DPTR,A
    945                //   SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = pkt->srcAddr.addr.shortAddr;//发送给来的设备
    946                
    947                if ( AF_DataRequest( &SampleApp_SPI_SendCommand_DstAddr,
    948                                    (endPointDesc_t *)&SampleApp_epDesc,
    949                                    SAMPLEAPP_COMMAND_CLUSTERID, //终端传过去，协调器处理了
    950                                    total_count, SET_str,
    951                                    &SampleApp_TransID, 
    952                                    AF_DISCV_ROUTE, 
    953                                    AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   00034A                ; Setup parameters for call to function AF_DataRequest
   \   00034A   75..0F       MOV     ?V0 + 4,#0xf
   \   00034D   78..         MOV     R0,#?V0 + 4
   \   00034F   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000352   75....       MOV     ?V0 + 4,#SampleApp_TransID & 0xff
   \   000355   75....       MOV     ?V0 + 5,#(SampleApp_TransID >> 8) & 0xff
   \   000358   78..         MOV     R0,#?V0 + 4
   \   00035A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00035D   78..         MOV     R0,#?V0 + 0
   \   00035F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000362   85....       MOV     ?V0 + 4,?V0 + 2
   \   000365   75..00       MOV     ?V0 + 5,#0x0
   \   000368   78..         MOV     R0,#?V0 + 4
   \   00036A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00036D   75..04       MOV     ?V0 + 4,#0x4
   \   000370   75..00       MOV     ?V0 + 5,#0x0
   \   000373   78..         MOV     R0,#?V0 + 4
   \   000375   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000378   7920         MOV     R1,#0x20
   \   00037A   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   00037C   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   00037E   7A..         MOV     R2,#SampleApp_SPI_SendCommand_DstAddr & 0xff
   \   000380   7B..         MOV     R3,#(SampleApp_SPI_SendCommand_DstAddr >> 8) & 0xff
   \   000382   12....       LCALL   ??AF_DataRequest?relay
   \   000385   7409         MOV     A,#0x9
   \   000387   12....       LCALL   ?DEALLOC_XSTACK8
   \   00038A   E9           MOV     A,R1
   \   00038B   700A         JNZ     ??APP_NORMAL_COMMAND_5
    954                {
    955                  osal_mem_free(SET_str);
   \   00038D                ; Setup parameters for call to function osal_mem_free
   \   00038D   AA..         MOV     R2,?V0 + 0
   \   00038F   AB..         MOV     R3,?V0 + 1
   \   000391   12....       LCALL   ??osal_mem_free?relay
   \   000394   02....       LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
    956                }
    957                else
    958                {
    959                  osal_mem_free(SET_str);
   \                     ??APP_NORMAL_COMMAND_5:
   \   000397                ; Setup parameters for call to function osal_mem_free
   \   000397   AA..         MOV     R2,?V0 + 0
   \   000399   AB..         MOV     R3,?V0 + 1
   \   00039B   12....       LCALL   ??osal_mem_free?relay
   \   00039E   02....       LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
    960                }  
    961              }
    962            }
    963            
    964            
    965            else if(command_str[4]=='f')//f
   \                     ??APP_NORMAL_COMMAND_0:
   \   0003A1   8E82         MOV     DPL,R6
   \   0003A3   8F83         MOV     DPH,R7
   \   0003A5   A3           INC     DPTR
   \   0003A6   A3           INC     DPTR
   \   0003A7   A3           INC     DPTR
   \   0003A8   A3           INC     DPTR
   \   0003A9   E0           MOVX    A,@DPTR
   \   0003AA   6466         XRL     A,#0x66
   \   0003AC   6003         JZ      $+5
   \   0003AE   02....       LJMP    ??APP_NORMAL_COMMAND_7 & 0xFFFF
    966            {
    967              
    968              SET_str=osal_mem_alloc(12);
   \   0003B1                ; Setup parameters for call to function osal_mem_alloc
   \   0003B1   7A0C         MOV     R2,#0xc
   \   0003B3   7B00         MOV     R3,#0x0
   \   0003B5   12....       LCALL   ??osal_mem_alloc?relay
   \   0003B8   8A..         MOV     ?V0 + 2,R2
   \   0003BA   8B..         MOV     ?V0 + 3,R3
   \   0003BC   85....       MOV     ?V0 + 0,?V0 + 2
   \   0003BF   85....       MOV     ?V0 + 1,?V0 + 3
    969              SET_str[0]=command_str[0];
   \   0003C2   8E82         MOV     DPL,R6
   \   0003C4   8F83         MOV     DPH,R7
   \   0003C6   E0           MOVX    A,@DPTR
   \   0003C7   85..82       MOV     DPL,?V0 + 0
   \   0003CA   85..83       MOV     DPH,?V0 + 1
   \   0003CD   F0           MOVX    @DPTR,A
    970              SET_str[1]=command_str[1];
   \   0003CE   8E82         MOV     DPL,R6
   \   0003D0   8F83         MOV     DPH,R7
   \   0003D2   A3           INC     DPTR
   \   0003D3   E0           MOVX    A,@DPTR
   \   0003D4   85..82       MOV     DPL,?V0 + 0
   \   0003D7   85..83       MOV     DPH,?V0 + 1
   \   0003DA   A3           INC     DPTR
   \   0003DB   F0           MOVX    @DPTR,A
    971              SET_str[2]=command_str[2];
   \   0003DC   8E82         MOV     DPL,R6
   \   0003DE   8F83         MOV     DPH,R7
   \   0003E0   A3           INC     DPTR
   \   0003E1   A3           INC     DPTR
   \   0003E2   E0           MOVX    A,@DPTR
   \   0003E3   85..82       MOV     DPL,?V0 + 0
   \   0003E6   85..83       MOV     DPH,?V0 + 1
   \   0003E9   A3           INC     DPTR
   \   0003EA   A3           INC     DPTR
   \   0003EB   F0           MOVX    @DPTR,A
    972              SET_str[3]=command_str[3];
   \   0003EC   8E82         MOV     DPL,R6
   \   0003EE   8F83         MOV     DPH,R7
   \   0003F0   A3           INC     DPTR
   \   0003F1   A3           INC     DPTR
   \   0003F2   A3           INC     DPTR
   \   0003F3   E0           MOVX    A,@DPTR
   \   0003F4   85..82       MOV     DPL,?V0 + 0
   \   0003F7   85..83       MOV     DPH,?V0 + 1
   \   0003FA   A3           INC     DPTR
   \   0003FB   A3           INC     DPTR
   \   0003FC   A3           INC     DPTR
   \   0003FD   F0           MOVX    @DPTR,A
    973              SET_str[4]='/';
   \   0003FE   85..82       MOV     DPL,?V0 + 0
   \   000401   85..83       MOV     DPH,?V0 + 1
   \   000404   A3           INC     DPTR
   \   000405   A3           INC     DPTR
   \   000406   A3           INC     DPTR
   \   000407   A3           INC     DPTR
   \   000408   742F         MOV     A,#0x2f
   \   00040A   F0           MOVX    @DPTR,A
    974              SET_str[5]='C';
   \   00040B   85..82       MOV     DPL,?V0 + 0
   \   00040E   85..83       MOV     DPH,?V0 + 1
   \   000411   A3           INC     DPTR
   \   000412   A3           INC     DPTR
   \   000413   A3           INC     DPTR
   \   000414   A3           INC     DPTR
   \   000415   A3           INC     DPTR
   \   000416   7443         MOV     A,#0x43
   \   000418   F0           MOVX    @DPTR,A
    975              SET_str[6]='/';
   \   000419   85..82       MOV     DPL,?V0 + 0
   \   00041C   85..83       MOV     DPH,?V0 + 1
   \   00041F   A3           INC     DPTR
   \   000420   A3           INC     DPTR
   \   000421   A3           INC     DPTR
   \   000422   A3           INC     DPTR
   \   000423   A3           INC     DPTR
   \   000424   A3           INC     DPTR
   \   000425   742F         MOV     A,#0x2f
   \   000427   F0           MOVX    @DPTR,A
    976              SET_str[7]='U';
   \   000428   85..82       MOV     DPL,?V0 + 0
   \   00042B   85..83       MOV     DPH,?V0 + 1
   \   00042E   A3           INC     DPTR
   \   00042F   A3           INC     DPTR
   \   000430   A3           INC     DPTR
   \   000431   A3           INC     DPTR
   \   000432   A3           INC     DPTR
   \   000433   A3           INC     DPTR
   \   000434   A3           INC     DPTR
   \   000435   7455         MOV     A,#0x55
   \   000437   F0           MOVX    @DPTR,A
    977              SET_str[8]='U';
   \   000438   85..82       MOV     DPL,?V0 + 0
   \   00043B   85..83       MOV     DPH,?V0 + 1
   \   00043E   A3           INC     DPTR
   \   00043F   A3           INC     DPTR
   \   000440   A3           INC     DPTR
   \   000441   A3           INC     DPTR
   \   000442   A3           INC     DPTR
   \   000443   A3           INC     DPTR
   \   000444   A3           INC     DPTR
   \   000445   A3           INC     DPTR
   \   000446   7455         MOV     A,#0x55
   \   000448   F0           MOVX    @DPTR,A
    978              SET_str[9]=0xA0;
   \   000449   85..82       MOV     DPL,?V0 + 0
   \   00044C   85..83       MOV     DPH,?V0 + 1
   \   00044F   A3           INC     DPTR
   \   000450   A3           INC     DPTR
   \   000451   A3           INC     DPTR
   \   000452   A3           INC     DPTR
   \   000453   A3           INC     DPTR
   \   000454   A3           INC     DPTR
   \   000455   A3           INC     DPTR
   \   000456   A3           INC     DPTR
   \   000457   A3           INC     DPTR
   \   000458   74A0         MOV     A,#-0x60
   \   00045A   F0           MOVX    @DPTR,A
    979              SET_str[10]=2;
   \   00045B   85..82       MOV     DPL,?V0 + 0
   \   00045E   85..83       MOV     DPH,?V0 + 1
   \   000461   A3           INC     DPTR
   \   000462   A3           INC     DPTR
   \   000463   A3           INC     DPTR
   \   000464   A3           INC     DPTR
   \   000465   A3           INC     DPTR
   \   000466   A3           INC     DPTR
   \   000467   A3           INC     DPTR
   \   000468   A3           INC     DPTR
   \   000469   A3           INC     DPTR
   \   00046A   A3           INC     DPTR
   \   00046B   7402         MOV     A,#0x2
   \   00046D   F0           MOVX    @DPTR,A
    980              SET_str[11]=command_str[9];//get the rssi
   \   00046E   8E82         MOV     DPL,R6
   \   000470   8F83         MOV     DPH,R7
   \   000472   A3           INC     DPTR
   \   000473   A3           INC     DPTR
   \   000474   A3           INC     DPTR
   \   000475   A3           INC     DPTR
   \   000476   A3           INC     DPTR
   \   000477   A3           INC     DPTR
   \   000478   A3           INC     DPTR
   \   000479   A3           INC     DPTR
   \   00047A   A3           INC     DPTR
   \   00047B   E0           MOVX    A,@DPTR
   \   00047C   C0E0         PUSH    A
   \   00047E   E5..         MOV     A,?V0 + 0
   \   000480   240B         ADD     A,#0xb
   \   000482   F582         MOV     DPL,A
   \   000484   E5..         MOV     A,?V0 + 1
   \   000486   3400         ADDC    A,#0x0
   \   000488   F583         MOV     DPH,A
   \   00048A   D0E0         POP     A
   \   00048C   F0           MOVX    @DPTR,A
    981              //   if(data_sucess_flag==3)
    982              {    
    983                SampleApp_SPI_SendCommand_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \   00048D   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 8
   \   000490   7402         MOV     A,#0x2
   \   000492   F0           MOVX    @DPTR,A
    984                SampleApp_SPI_SendCommand_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   000493   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 9
   \   000496   7414         MOV     A,#0x14
   \   000498   F0           MOVX    @DPTR,A
    985                SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;
   \   000499   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr
   \   00049C   7400         MOV     A,#0x0
   \   00049E   F0           MOVX    @DPTR,A
   \   00049F   A3           INC     DPTR
   \   0004A0   7400         MOV     A,#0x0
   \   0004A2   F0           MOVX    @DPTR,A
    986              //   SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = pkt->srcAddr.addr.shortAddr;//发送给来的设备
    987                
    988                if ( AF_DataRequest( &SampleApp_SPI_SendCommand_DstAddr,
    989                                    (endPointDesc_t *)&SampleApp_epDesc,
    990                                    SAMPLEAPP_COMMAND_CLUSTERID, //终端传过去，协调器处理了
    991                                    12, SET_str,
    992                                    &SampleApp_TransID, 
    993                                    AF_DISCV_ROUTE, 
    994                                    AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   0004A3                ; Setup parameters for call to function AF_DataRequest
   \   0004A3   75..0F       MOV     ?V0 + 2,#0xf
   \   0004A6   78..         MOV     R0,#?V0 + 2
   \   0004A8   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0004AB   75....       MOV     ?V0 + 2,#SampleApp_TransID & 0xff
   \   0004AE   75....       MOV     ?V0 + 3,#(SampleApp_TransID >> 8) & 0xff
   \   0004B1   78..         MOV     R0,#?V0 + 2
   \   0004B3   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0004B6   78..         MOV     R0,#?V0 + 0
   \   0004B8   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0004BB   75..0C       MOV     ?V0 + 2,#0xc
   \   0004BE   75..00       MOV     ?V0 + 3,#0x0
   \   0004C1   78..         MOV     R0,#?V0 + 2
   \   0004C3   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0004C6   75..04       MOV     ?V0 + 2,#0x4
   \   0004C9   75..00       MOV     ?V0 + 3,#0x0
   \   0004CC   78..         MOV     R0,#?V0 + 2
   \   0004CE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0004D1   7920         MOV     R1,#0x20
   \   0004D3   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   0004D5   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   0004D7   7A..         MOV     R2,#SampleApp_SPI_SendCommand_DstAddr & 0xff
   \   0004D9   7B..         MOV     R3,#(SampleApp_SPI_SendCommand_DstAddr >> 8) & 0xff
   \   0004DB   12....       LCALL   ??AF_DataRequest?relay
   \   0004DE   7409         MOV     A,#0x9
   \   0004E0   12....       LCALL   ?DEALLOC_XSTACK8
   \   0004E3   E9           MOV     A,R1
   \   0004E4   700A         JNZ     ??APP_NORMAL_COMMAND_8
    995                {
    996                  osal_mem_free(SET_str);
   \   0004E6                ; Setup parameters for call to function osal_mem_free
   \   0004E6   AA..         MOV     R2,?V0 + 0
   \   0004E8   AB..         MOV     R3,?V0 + 1
   \   0004EA   12....       LCALL   ??osal_mem_free?relay
   \   0004ED   02....       LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
    997                }
    998                else
    999                {
   1000                  osal_mem_free(SET_str);
   \                     ??APP_NORMAL_COMMAND_8:
   \   0004F0                ; Setup parameters for call to function osal_mem_free
   \   0004F0   AA..         MOV     R2,?V0 + 0
   \   0004F2   AB..         MOV     R3,?V0 + 1
   \   0004F4   12....       LCALL   ??osal_mem_free?relay
   \   0004F7   02....       LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
   1001                }  
   1002              }
   1003            }
   1004            
   1005            
   1006            
   1007            
   1008            else if(command_str[4]=='F')
   \                     ??APP_NORMAL_COMMAND_7:
   \   0004FA   8E82         MOV     DPL,R6
   \   0004FC   8F83         MOV     DPH,R7
   \   0004FE   A3           INC     DPTR
   \   0004FF   A3           INC     DPTR
   \   000500   A3           INC     DPTR
   \   000501   A3           INC     DPTR
   \   000502   E0           MOVX    A,@DPTR
   \   000503   6446         XRL     A,#0x46
   \   000505   7014         JNZ     ??APP_NORMAL_COMMAND_9
   1009            {
   1010              osal_start_timerEx( SampleApp_TaskID,SAMPLEAPP_RESTORE_EVT,2000 );
   \   000507                ; Setup parameters for call to function osal_start_timerEx
   \   000507   7CD0         MOV     R4,#-0x30
   \   000509   7D07         MOV     R5,#0x7
   \   00050B   7A10         MOV     R2,#0x10
   \   00050D   7B00         MOV     R3,#0x0
   \   00050F   90....       MOV     DPTR,#SampleApp_TaskID
   \   000512   E0           MOVX    A,@DPTR
   \   000513   F9           MOV     R1,A
   \   000514   12....       LCALL   ??osal_start_timerEx?relay
   \   000517   E9           MOV     A,R1
   \   000518   02....       LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
   1011            }
   1012            
   1013            else if(command_str[4]=='Q')
   \                     ??APP_NORMAL_COMMAND_9:
   \   00051B   8E82         MOV     DPL,R6
   \   00051D   8F83         MOV     DPH,R7
   \   00051F   A3           INC     DPTR
   \   000520   A3           INC     DPTR
   \   000521   A3           INC     DPTR
   \   000522   A3           INC     DPTR
   \   000523   E0           MOVX    A,@DPTR
   \   000524   6451         XRL     A,#0x51
   \   000526   6003         JZ      $+5
   \   000528   02....       LJMP    ??APP_NORMAL_COMMAND_10 & 0xFFFF
   1014            {
   1015              uint8 startOptions =0;
   \   00052B   85..82       MOV     DPL,?XSP + 0
   \   00052E   85..83       MOV     DPH,?XSP + 1
   \   000531   7400         MOV     A,#0x0
   \   000533   F0           MOVX    @DPTR,A
   1016              
   1017              HalLedBlink ( HAL_LED_1, 4, 50, 1000 );
   \   000534                ; Setup parameters for call to function HalLedBlink
   \   000534   7CE8         MOV     R4,#-0x18
   \   000536   7D03         MOV     R5,#0x3
   \   000538   7B32         MOV     R3,#0x32
   \   00053A   7A04         MOV     R2,#0x4
   \   00053C   7901         MOV     R1,#0x1
   \   00053E   12....       LCALL   ??HalLedBlink?relay
   1018              startOptions=0;    
   \   000541   85..82       MOV     DPL,?XSP + 0
   \   000544   85..83       MOV     DPH,?XSP + 1
   \   000547   7400         MOV     A,#0x0
   \   000549   F0           MOVX    @DPTR,A
   1019              
   1020              New_join_role_flag = command_str[5]-'0';
   \   00054A   8E82         MOV     DPL,R6
   \   00054C   8F83         MOV     DPH,R7
   \   00054E   A3           INC     DPTR
   \   00054F   A3           INC     DPTR
   \   000550   A3           INC     DPTR
   \   000551   A3           INC     DPTR
   \   000552   A3           INC     DPTR
   \   000553   E0           MOVX    A,@DPTR
   \   000554   24D0         ADD     A,#-0x30
   \   000556   90....       MOV     DPTR,#New_join_role_flag
   \   000559   F0           MOVX    @DPTR,A
   1021              New_join_delay_time = 100*(command_str[6]-'0')+10*(command_str[7]-'0')+command_str[8]-'0';
   \   00055A   8E82         MOV     DPL,R6
   \   00055C   8F83         MOV     DPH,R7
   \   00055E   A3           INC     DPTR
   \   00055F   A3           INC     DPTR
   \   000560   A3           INC     DPTR
   \   000561   A3           INC     DPTR
   \   000562   A3           INC     DPTR
   \   000563   A3           INC     DPTR
   \   000564   A3           INC     DPTR
   \   000565   A3           INC     DPTR
   \   000566   C082         PUSH    DPL
   \   000568   C083         PUSH    DPH
   \   00056A   75F00A       MOV     B,#0xa
   \   00056D   8E82         MOV     DPL,R6
   \   00056F   8F83         MOV     DPH,R7
   \   000571   A3           INC     DPTR
   \   000572   A3           INC     DPTR
   \   000573   A3           INC     DPTR
   \   000574   A3           INC     DPTR
   \   000575   A3           INC     DPTR
   \   000576   A3           INC     DPTR
   \   000577   A3           INC     DPTR
   \   000578   E0           MOVX    A,@DPTR
   \   000579   A4           MUL     AB
   \   00057A   F8           MOV     R0,A
   \   00057B   75F064       MOV     B,#0x64
   \   00057E   8E82         MOV     DPL,R6
   \   000580   8F83         MOV     DPH,R7
   \   000582   A3           INC     DPTR
   \   000583   A3           INC     DPTR
   \   000584   A3           INC     DPTR
   \   000585   A3           INC     DPTR
   \   000586   A3           INC     DPTR
   \   000587   A3           INC     DPTR
   \   000588   E0           MOVX    A,@DPTR
   \   000589   A4           MUL     AB
   \   00058A   28           ADD     A,R0
   \   00058B   D083         POP     DPH
   \   00058D   D082         POP     DPL
   \   00058F   F8           MOV     R0,A
   \   000590   E0           MOVX    A,@DPTR
   \   000591   28           ADD     A,R0
   \   000592   2430         ADD     A,#0x30
   \   000594   90....       MOV     DPTR,#New_join_delay_time
   \   000597   F0           MOVX    @DPTR,A
   1022              
   1023              Join_isset_flag  =1; //确保能够切换角色
   \   000598   90....       MOV     DPTR,#Join_isset_flag
   \   00059B   7401         MOV     A,#0x1
   \   00059D   F0           MOVX    @DPTR,A
   1024              osal_nv_item_init(ZCD_NV_JOIN_ISSET_FLAG, 1, &Join_isset_flag); 
   \   00059E                ; Setup parameters for call to function osal_nv_item_init
   \   00059E   75....       MOV     ?V0 + 2,#Join_isset_flag & 0xff
   \   0005A1   75....       MOV     ?V0 + 3,#(Join_isset_flag >> 8) & 0xff
   \   0005A4   78..         MOV     R0,#?V0 + 2
   \   0005A6   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0005A9   7C01         MOV     R4,#0x1
   \   0005AB   7D00         MOV     R5,#0x0
   \   0005AD   7A38         MOV     R2,#0x38
   \   0005AF   7B04         MOV     R3,#0x4
   \   0005B1   12....       LCALL   ??osal_nv_item_init?relay
   \   0005B4   7402         MOV     A,#0x2
   \   0005B6   12....       LCALL   ?DEALLOC_XSTACK8
   \   0005B9   E9           MOV     A,R1
   1025              osal_nv_write(ZCD_NV_JOIN_ISSET_FLAG, 0, 1, &Join_isset_flag);
   \   0005BA                ; Setup parameters for call to function osal_nv_write
   \   0005BA   75....       MOV     ?V0 + 2,#Join_isset_flag & 0xff
   \   0005BD   75....       MOV     ?V0 + 3,#(Join_isset_flag >> 8) & 0xff
   \   0005C0   78..         MOV     R0,#?V0 + 2
   \   0005C2   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0005C5   75..01       MOV     ?V0 + 2,#0x1
   \   0005C8   75..00       MOV     ?V0 + 3,#0x0
   \   0005CB   78..         MOV     R0,#?V0 + 2
   \   0005CD   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0005D0   7C00         MOV     R4,#0x0
   \   0005D2   7D00         MOV     R5,#0x0
   \   0005D4   7A38         MOV     R2,#0x38
   \   0005D6   7B04         MOV     R3,#0x4
   \   0005D8   12....       LCALL   ??osal_nv_write?relay
   \   0005DB   7404         MOV     A,#0x4
   \   0005DD   12....       LCALL   ?DEALLOC_XSTACK8
   \   0005E0   E9           MOV     A,R1
   1026              
   1027              osal_nv_item_init(ZCD_NV_JOIN_ROLE_FLAG, 1, &New_join_role_flag); 
   \   0005E1                ; Setup parameters for call to function osal_nv_item_init
   \   0005E1   75....       MOV     ?V0 + 2,#New_join_role_flag & 0xff
   \   0005E4   75....       MOV     ?V0 + 3,#(New_join_role_flag >> 8) & 0xff
   \   0005E7   78..         MOV     R0,#?V0 + 2
   \   0005E9   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0005EC   7C01         MOV     R4,#0x1
   \   0005EE   7D00         MOV     R5,#0x0
   \   0005F0   7A30         MOV     R2,#0x30
   \   0005F2   7B04         MOV     R3,#0x4
   \   0005F4   12....       LCALL   ??osal_nv_item_init?relay
   \   0005F7   7402         MOV     A,#0x2
   \   0005F9   12....       LCALL   ?DEALLOC_XSTACK8
   \   0005FC   E9           MOV     A,R1
   1028              osal_nv_write(ZCD_NV_JOIN_ROLE_FLAG, 0, 1, &New_join_role_flag);
   \   0005FD                ; Setup parameters for call to function osal_nv_write
   \   0005FD   75....       MOV     ?V0 + 2,#New_join_role_flag & 0xff
   \   000600   75....       MOV     ?V0 + 3,#(New_join_role_flag >> 8) & 0xff
   \   000603   78..         MOV     R0,#?V0 + 2
   \   000605   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000608   75..01       MOV     ?V0 + 2,#0x1
   \   00060B   75..00       MOV     ?V0 + 3,#0x0
   \   00060E   78..         MOV     R0,#?V0 + 2
   \   000610   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000613   7C00         MOV     R4,#0x0
   \   000615   7D00         MOV     R5,#0x0
   \   000617   7A30         MOV     R2,#0x30
   \   000619   7B04         MOV     R3,#0x4
   \   00061B   12....       LCALL   ??osal_nv_write?relay
   \   00061E   7404         MOV     A,#0x4
   \   000620   12....       LCALL   ?DEALLOC_XSTACK8
   \   000623   E9           MOV     A,R1
   1029              
   1030              osal_nv_item_init(ZCD_NV_JOIN_START_TIME_VALUE, 1, &New_join_delay_time); 
   \   000624                ; Setup parameters for call to function osal_nv_item_init
   \   000624   75....       MOV     ?V0 + 2,#New_join_delay_time & 0xff
   \   000627   75....       MOV     ?V0 + 3,#(New_join_delay_time >> 8) & 0xff
   \   00062A   78..         MOV     R0,#?V0 + 2
   \   00062C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00062F   7C01         MOV     R4,#0x1
   \   000631   7D00         MOV     R5,#0x0
   \   000633   7A35         MOV     R2,#0x35
   \   000635   7B04         MOV     R3,#0x4
   \   000637   12....       LCALL   ??osal_nv_item_init?relay
   \   00063A   7402         MOV     A,#0x2
   \   00063C   12....       LCALL   ?DEALLOC_XSTACK8
   \   00063F   E9           MOV     A,R1
   1031              osal_nv_write(ZCD_NV_JOIN_START_TIME_VALUE, 0, 1, &New_join_delay_time); 
   \   000640                ; Setup parameters for call to function osal_nv_write
   \   000640   75....       MOV     ?V0 + 2,#New_join_delay_time & 0xff
   \   000643   75....       MOV     ?V0 + 3,#(New_join_delay_time >> 8) & 0xff
   \   000646   78..         MOV     R0,#?V0 + 2
   \   000648   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00064B   75..01       MOV     ?V0 + 2,#0x1
   \   00064E   75..00       MOV     ?V0 + 3,#0x0
   \   000651   78..         MOV     R0,#?V0 + 2
   \   000653   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000656   7C00         MOV     R4,#0x0
   \   000658   7D00         MOV     R5,#0x0
   \   00065A   7A35         MOV     R2,#0x35
   \   00065C   7B04         MOV     R3,#0x4
   \   00065E   12....       LCALL   ??osal_nv_write?relay
   \   000661   7404         MOV     A,#0x4
   \   000663   12....       LCALL   ?DEALLOC_XSTACK8
   \   000666   E9           MOV     A,R1
   1032              
   1033              
   1034              uint8 quit_str[12];
   1035              
   1036              quit_str[0]=command_str[0];
   \   000667   8E82         MOV     DPL,R6
   \   000669   8F83         MOV     DPH,R7
   \   00066B   E0           MOVX    A,@DPTR
   \   00066C   C0E0         PUSH    A
   \   00066E   7436         MOV     A,#0x36
   \   000670   12....       LCALL   ?XSTACK_DISP0_8
   \   000673   D0E0         POP     A
   \   000675   F0           MOVX    @DPTR,A
   1037              quit_str[1]=command_str[1];
   \   000676   8E82         MOV     DPL,R6
   \   000678   8F83         MOV     DPH,R7
   \   00067A   A3           INC     DPTR
   \   00067B   E0           MOVX    A,@DPTR
   \   00067C   C0E0         PUSH    A
   \   00067E   7437         MOV     A,#0x37
   \   000680   12....       LCALL   ?XSTACK_DISP0_8
   \   000683   D0E0         POP     A
   \   000685   F0           MOVX    @DPTR,A
   1038              quit_str[2]=command_str[2];
   \   000686   8E82         MOV     DPL,R6
   \   000688   8F83         MOV     DPH,R7
   \   00068A   A3           INC     DPTR
   \   00068B   A3           INC     DPTR
   \   00068C   E0           MOVX    A,@DPTR
   \   00068D   C0E0         PUSH    A
   \   00068F   7438         MOV     A,#0x38
   \   000691   12....       LCALL   ?XSTACK_DISP0_8
   \   000694   D0E0         POP     A
   \   000696   F0           MOVX    @DPTR,A
   1039              quit_str[3]=command_str[3];
   \   000697   8E82         MOV     DPL,R6
   \   000699   8F83         MOV     DPH,R7
   \   00069B   A3           INC     DPTR
   \   00069C   A3           INC     DPTR
   \   00069D   A3           INC     DPTR
   \   00069E   E0           MOVX    A,@DPTR
   \   00069F   C0E0         PUSH    A
   \   0006A1   7439         MOV     A,#0x39
   \   0006A3   12....       LCALL   ?XSTACK_DISP0_8
   \   0006A6   D0E0         POP     A
   \   0006A8   F0           MOVX    @DPTR,A
   1040              
   1041              quit_str[4]='/';
   \   0006A9   743A         MOV     A,#0x3a
   \   0006AB   12....       LCALL   ?XSTACK_DISP0_8
   \   0006AE   742F         MOV     A,#0x2f
   \   0006B0   F0           MOVX    @DPTR,A
   1042              quit_str[5]='C';
   \   0006B1   743B         MOV     A,#0x3b
   \   0006B3   12....       LCALL   ?XSTACK_DISP0_8
   \   0006B6   7443         MOV     A,#0x43
   \   0006B8   F0           MOVX    @DPTR,A
   1043              quit_str[6]='/';
   \   0006B9   743C         MOV     A,#0x3c
   \   0006BB   12....       LCALL   ?XSTACK_DISP0_8
   \   0006BE   742F         MOV     A,#0x2f
   \   0006C0   F0           MOVX    @DPTR,A
   1044              quit_str[7]='U';
   \   0006C1   743D         MOV     A,#0x3d
   \   0006C3   12....       LCALL   ?XSTACK_DISP0_8
   \   0006C6   7455         MOV     A,#0x55
   \   0006C8   F0           MOVX    @DPTR,A
   1045              quit_str[8]='U';
   \   0006C9   743E         MOV     A,#0x3e
   \   0006CB   12....       LCALL   ?XSTACK_DISP0_8
   \   0006CE   7455         MOV     A,#0x55
   \   0006D0   F0           MOVX    @DPTR,A
   1046              quit_str[9]=0xA0;
   \   0006D1   743F         MOV     A,#0x3f
   \   0006D3   12....       LCALL   ?XSTACK_DISP0_8
   \   0006D6   74A0         MOV     A,#-0x60
   \   0006D8   F0           MOVX    @DPTR,A
   1047              quit_str[10]=0xBB;
   \   0006D9   7440         MOV     A,#0x40
   \   0006DB   12....       LCALL   ?XSTACK_DISP0_8
   \   0006DE   74BB         MOV     A,#-0x45
   \   0006E0   F0           MOVX    @DPTR,A
   1048              quit_str[11]=0;
   \   0006E1   7441         MOV     A,#0x41
   \   0006E3   12....       LCALL   ?XSTACK_DISP0_8
   \   0006E6   7400         MOV     A,#0x0
   \   0006E8   F0           MOVX    @DPTR,A
   1049              
   1050              SampleApp_SPI_SendCommand_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \   0006E9   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 8
   \   0006EC   7402         MOV     A,#0x2
   \   0006EE   F0           MOVX    @DPTR,A
   1051              SampleApp_SPI_SendCommand_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   0006EF   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 9
   \   0006F2   7414         MOV     A,#0x14
   \   0006F4   F0           MOVX    @DPTR,A
   1052              SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;
   \   0006F5   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr
   \   0006F8   7400         MOV     A,#0x0
   \   0006FA   F0           MOVX    @DPTR,A
   \   0006FB   A3           INC     DPTR
   \   0006FC   7400         MOV     A,#0x0
   \   0006FE   F0           MOVX    @DPTR,A
   1053              if ( AF_DataRequest( &SampleApp_SPI_SendCommand_DstAddr,
   1054                                  (endPointDesc_t *)&SampleApp_epDesc,
   1055                                  SAMPLEAPP_COMMAND_CLUSTERID, //终端传过去，协调器处理了
   1056                                  12, quit_str,
   1057                                  &SampleApp_TransID, 
   1058                                  AF_DISCV_ROUTE, 
   1059                                  AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   0006FF                ; Setup parameters for call to function AF_DataRequest
   \   0006FF   75..0F       MOV     ?V0 + 2,#0xf
   \   000702   78..         MOV     R0,#?V0 + 2
   \   000704   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000707   75....       MOV     ?V0 + 2,#SampleApp_TransID & 0xff
   \   00070A   75....       MOV     ?V0 + 3,#(SampleApp_TransID >> 8) & 0xff
   \   00070D   78..         MOV     R0,#?V0 + 2
   \   00070F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000712   7439         MOV     A,#0x39
   \   000714   12....       LCALL   ?XSTACK_DISP0_8
   \   000717   8582..       MOV     ?V0 + 2,DPL
   \   00071A   8583..       MOV     ?V0 + 3,DPH
   \   00071D   78..         MOV     R0,#?V0 + 2
   \   00071F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000722   75..0C       MOV     ?V0 + 2,#0xc
   \   000725   75..00       MOV     ?V0 + 3,#0x0
   \   000728   78..         MOV     R0,#?V0 + 2
   \   00072A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00072D   75..04       MOV     ?V0 + 2,#0x4
   \   000730   75..00       MOV     ?V0 + 3,#0x0
   \   000733   78..         MOV     R0,#?V0 + 2
   \   000735   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000738   7920         MOV     R1,#0x20
   \   00073A   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   00073C   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   00073E   7A..         MOV     R2,#SampleApp_SPI_SendCommand_DstAddr & 0xff
   \   000740   7B..         MOV     R3,#(SampleApp_SPI_SendCommand_DstAddr >> 8) & 0xff
   \   000742   12....       LCALL   ??AF_DataRequest?relay
   \   000745   7409         MOV     A,#0x9
   \   000747   12....       LCALL   ?DEALLOC_XSTACK8
   \   00074A   E9           MOV     A,R1
   \   00074B   F5..         MOV     ?V0 + 2,A
   1060              {
   1061              }
   1062              else
   1063              {
   1064                
   1065              }  
   1066              
   1067              osal_nv_item_init(ZCD_NV_STARTUP_OPTION, 1, &startOptions);    
   \   00074D                ; Setup parameters for call to function osal_nv_item_init
   \   00074D   85..82       MOV     DPL,?XSP + 0
   \   000750   85..83       MOV     DPH,?XSP + 1
   \   000753   8582..       MOV     ?V0 + 4,DPL
   \   000756   8583..       MOV     ?V0 + 5,DPH
   \   000759   78..         MOV     R0,#?V0 + 4
   \   00075B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00075E   7C01         MOV     R4,#0x1
   \   000760   7D00         MOV     R5,#0x0
   \   000762   7A03         MOV     R2,#0x3
   \   000764   7B00         MOV     R3,#0x0
   \   000766   12....       LCALL   ??osal_nv_item_init?relay
   \   000769   7402         MOV     A,#0x2
   \   00076B   12....       LCALL   ?DEALLOC_XSTACK8
   \   00076E   E9           MOV     A,R1
   1068              startOptions |= ZCD_STARTOPT_DEFAULT_NETWORK_STATE;
   \   00076F   85..82       MOV     DPL,?XSP + 0
   \   000772   85..83       MOV     DPH,?XSP + 1
   \   000775   E0           MOVX    A,@DPTR
   \   000776   D2E1         SETB    0xE0 /* A   */.1
   \   000778   F0           MOVX    @DPTR,A
   1069              startOptions &= ~ZCD_STARTOPT_AUTO_START;
   \   000779   85..82       MOV     DPL,?XSP + 0
   \   00077C   85..83       MOV     DPH,?XSP + 1
   \   00077F   E0           MOVX    A,@DPTR
   \   000780   C2E2         CLR     0xE0 /* A   */.2
   \   000782   F0           MOVX    @DPTR,A
   1070              osal_nv_write(ZCD_NV_STARTUP_OPTION, 0, 1, &startOptions);
   \   000783                ; Setup parameters for call to function osal_nv_write
   \   000783   85..82       MOV     DPL,?XSP + 0
   \   000786   85..83       MOV     DPH,?XSP + 1
   \   000789   8582..       MOV     ?V0 + 4,DPL
   \   00078C   8583..       MOV     ?V0 + 5,DPH
   \   00078F   78..         MOV     R0,#?V0 + 4
   \   000791   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000794   75..01       MOV     ?V0 + 4,#0x1
   \   000797   75..00       MOV     ?V0 + 5,#0x0
   \   00079A   78..         MOV     R0,#?V0 + 4
   \   00079C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00079F   7C00         MOV     R4,#0x0
   \   0007A1   7D00         MOV     R5,#0x0
   \   0007A3   7A03         MOV     R2,#0x3
   \   0007A5   7B00         MOV     R3,#0x0
   \   0007A7   12....       LCALL   ??osal_nv_write?relay
   \   0007AA   7404         MOV     A,#0x4
   \   0007AC   12....       LCALL   ?DEALLOC_XSTACK8
   \   0007AF   E9           MOV     A,R1
   1071              osal_start_timerEx( SampleApp_TaskID,SAMPLEAPP_RESTORE_EVT,5000 );
   \   0007B0                ; Setup parameters for call to function osal_start_timerEx
   \   0007B0   7C88         MOV     R4,#-0x78
   \   0007B2   7D13         MOV     R5,#0x13
   \   0007B4   7A10         MOV     R2,#0x10
   \   0007B6   7B00         MOV     R3,#0x0
   \   0007B8   90....       MOV     DPTR,#SampleApp_TaskID
   \   0007BB   E0           MOVX    A,@DPTR
   \   0007BC   F9           MOV     R1,A
   \   0007BD   12....       LCALL   ??osal_start_timerEx?relay
   \   0007C0   E9           MOV     A,R1
   \   0007C1   02....       LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
   1072            }
   1073            
   1074            
   1075            else if(command_str[4]=='g')//发射功率 调整   后面跟发射功率 为 YXX Y表示正负 XX表示功率 Y为1表示负 为0表示正
   \                     ??APP_NORMAL_COMMAND_10:
   \   0007C4   8E82         MOV     DPL,R6
   \   0007C6   8F83         MOV     DPH,R7
   \   0007C8   A3           INC     DPTR
   \   0007C9   A3           INC     DPTR
   \   0007CA   A3           INC     DPTR
   \   0007CB   A3           INC     DPTR
   \   0007CC   E0           MOVX    A,@DPTR
   \   0007CD   6467         XRL     A,#0x67
   \   0007CF   6003         JZ      $+5
   \   0007D1   02....       LJMP    ??APP_NORMAL_COMMAND_11 & 0xFFFF
   1076            {
   1077              uint8 fuhao_temp=0;
   \   0007D4   75..00       MOV     ?V0 + 3,#0x0
   1078              int8 transmitpower = 0;
   \   0007D7   75..00       MOV     ?V0 + 2,#0x0
   1079              fuhao_temp = command_str[5]-'0';
   \   0007DA   8E82         MOV     DPL,R6
   \   0007DC   8F83         MOV     DPH,R7
   \   0007DE   A3           INC     DPTR
   \   0007DF   A3           INC     DPTR
   \   0007E0   A3           INC     DPTR
   \   0007E1   A3           INC     DPTR
   \   0007E2   A3           INC     DPTR
   \   0007E3   E0           MOVX    A,@DPTR
   \   0007E4   24D0         ADD     A,#-0x30
   \   0007E6   F5..         MOV     ?V0 + 3,A
   1080              transmitpower = 10*(command_str[6]-'0')+command_str[7]-'0';
   \   0007E8   8E82         MOV     DPL,R6
   \   0007EA   8F83         MOV     DPH,R7
   \   0007EC   A3           INC     DPTR
   \   0007ED   A3           INC     DPTR
   \   0007EE   A3           INC     DPTR
   \   0007EF   A3           INC     DPTR
   \   0007F0   A3           INC     DPTR
   \   0007F1   A3           INC     DPTR
   \   0007F2   A3           INC     DPTR
   \   0007F3   C082         PUSH    DPL
   \   0007F5   C083         PUSH    DPH
   \   0007F7   75F00A       MOV     B,#0xa
   \   0007FA   8E82         MOV     DPL,R6
   \   0007FC   8F83         MOV     DPH,R7
   \   0007FE   A3           INC     DPTR
   \   0007FF   A3           INC     DPTR
   \   000800   A3           INC     DPTR
   \   000801   A3           INC     DPTR
   \   000802   A3           INC     DPTR
   \   000803   A3           INC     DPTR
   \   000804   E0           MOVX    A,@DPTR
   \   000805   A4           MUL     AB
   \   000806   D083         POP     DPH
   \   000808   D082         POP     DPL
   \   00080A   F8           MOV     R0,A
   \   00080B   E0           MOVX    A,@DPTR
   \   00080C   28           ADD     A,R0
   \   00080D   24F0         ADD     A,#-0x10
   \   00080F   F5..         MOV     ?V0 + 2,A
   1081          
   1082          if ( POWER_PA_FLAG == 1)
   \   000811   90....       MOV     DPTR,#POWER_PA_FLAG
   \   000814   E0           MOVX    A,@DPTR
   \   000815   6401         XRL     A,#0x1
   \   000817   701E         JNZ     ??APP_NORMAL_COMMAND_12
   1083          {
   1084              if (fuhao_temp == 1) //负值
   \   000819   7401         MOV     A,#0x1
   \   00081B   65..         XRL     A,?V0 + 3
   \   00081D   700F         JNZ     ??APP_NORMAL_COMMAND_13
   1085              {
   1086                transmitpower = 0 - transmitpower;
   \   00081F   E5..         MOV     A,?V0 + 2
   \   000821   F4           CPL     A
   \   000822   04           INC     A
   \   000823   F5..         MOV     ?V0 + 2,A
   1087                ZMacSetTransmitPower((ZMacTransmitPower_t)transmitpower);
   \   000825                ; Setup parameters for call to function ZMacSetTransmitPower
   \   000825   A9..         MOV     R1,?V0 + 2
   \   000827   12....       LCALL   ??ZMacSetTransmitPower?relay
   \   00082A   E9           MOV     A,R1
   \   00082B   02....       LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
   1088              }
   1089              else
   1090              {
   1091                ZMacSetTransmitPower ((ZMacTransmitPower_t)transmitpower);
   \                     ??APP_NORMAL_COMMAND_13:
   \   00082E                ; Setup parameters for call to function ZMacSetTransmitPower
   \   00082E   A9..         MOV     R1,?V0 + 2
   \   000830   12....       LCALL   ??ZMacSetTransmitPower?relay
   \   000833   E9           MOV     A,R1
   \   000834   02....       LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
   1092              } 
   1093          }
   1094          //#else
   1095            else
   1096            {
   1097              
   1098              if (fuhao_temp == 1) //负值
   \                     ??APP_NORMAL_COMMAND_12:
   \   000837   7401         MOV     A,#0x1
   \   000839   65..         XRL     A,?V0 + 3
   \   00083B   700F         JNZ     ??APP_NORMAL_COMMAND_14
   1099              {
   1100                transmitpower = 0 - transmitpower;
   \   00083D   E5..         MOV     A,?V0 + 2
   \   00083F   F4           CPL     A
   \   000840   04           INC     A
   \   000841   F5..         MOV     ?V0 + 2,A
   1101                ZMacSetTransmitPower((ZMacTransmitPower_t)transmitpower);
   \   000843                ; Setup parameters for call to function ZMacSetTransmitPower
   \   000843   A9..         MOV     R1,?V0 + 2
   \   000845   12....       LCALL   ??ZMacSetTransmitPower?relay
   \   000848   E9           MOV     A,R1
   \   000849   02....       LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
   1102              }
   1103              else 
   1104              {
   1105                if(transmitpower >4)
   \                     ??APP_NORMAL_COMMAND_14:
   \   00084C   E5..         MOV     A,?V0 + 2
   \   00084E   C3           CLR     C
   \   00084F   9405         SUBB    A,#0x5
   \   000851   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000853   65D0         XRL     A,PSW
   \   000855   33           RLC     A
   \   000856   4003         JC      ??APP_NORMAL_COMMAND_15
   1106                {
   1107                  transmitpower = 4;
   \   000858   75..04       MOV     ?V0 + 2,#0x4
   1108                }
   1109                ZMacSetTransmitPower ((ZMacTransmitPower_t)transmitpower);
   \                     ??APP_NORMAL_COMMAND_15:
   \   00085B                ; Setup parameters for call to function ZMacSetTransmitPower
   \   00085B   A9..         MOV     R1,?V0 + 2
   \   00085D   12....       LCALL   ??ZMacSetTransmitPower?relay
   \   000860   E9           MOV     A,R1
   \   000861   02....       LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
   1110              } 
   1111            }
   1112          //#endif
   1113              
   1114            }
   1115            
   1116                else if(command_str[4]=='O')//设置设备的POLL RATE时间
   \                     ??APP_NORMAL_COMMAND_11:
   \   000864   8E82         MOV     DPL,R6
   \   000866   8F83         MOV     DPH,R7
   \   000868   A3           INC     DPTR
   \   000869   A3           INC     DPTR
   \   00086A   A3           INC     DPTR
   \   00086B   A3           INC     DPTR
   \   00086C   E0           MOVX    A,@DPTR
   \   00086D   644F         XRL     A,#0x4f
   \   00086F   6003         JZ      $+5
   \   000871   02....       LJMP    ??APP_NORMAL_COMMAND_16 & 0xFFFF
   1117            {
   1118               if ( RTR_NWK_FLAG == 0)
   \   000874   90....       MOV     DPTR,#RTR_NWK_FLAG
   \   000877   E0           MOVX    A,@DPTR
   \   000878   6003         JZ      $+5
   \   00087A   02....       LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
   1119               {
   1120                    uint16 pollrate_time =0 ;
   \   00087D   75..00       MOV     ?V0 + 2,#0x0
   \   000880   75..00       MOV     ?V0 + 3,#0x0
   1121                    pollrate_time = 10*(command_str[5]-'0')+command_str[6]-'0';
   \   000883   8E82         MOV     DPL,R6
   \   000885   8F83         MOV     DPH,R7
   \   000887   A3           INC     DPTR
   \   000888   A3           INC     DPTR
   \   000889   A3           INC     DPTR
   \   00088A   A3           INC     DPTR
   \   00088B   A3           INC     DPTR
   \   00088C   E0           MOVX    A,@DPTR
   \   00088D   F8           MOV     R0,A
   \   00088E   7900         MOV     R1,#0x0
   \   000890   E8           MOV     A,R0
   \   000891   75F00A       MOV     B,#0xa
   \   000894   A4           MUL     AB
   \   000895   C8           XCH     A,R0
   \   000896   AAF0         MOV     R2,B
   \   000898   75F000       MOV     B,#0x0
   \   00089B   A4           MUL     AB
   \   00089C   2A           ADD     A,R2
   \   00089D   FA           MOV     R2,A
   \   00089E   75F00A       MOV     B,#0xa
   \   0008A1   E9           MOV     A,R1
   \   0008A2   A4           MUL     AB
   \   0008A3   2A           ADD     A,R2
   \   0008A4   F9           MOV     R1,A
   \   0008A5   8E82         MOV     DPL,R6
   \   0008A7   8F83         MOV     DPH,R7
   \   0008A9   A3           INC     DPTR
   \   0008AA   A3           INC     DPTR
   \   0008AB   A3           INC     DPTR
   \   0008AC   A3           INC     DPTR
   \   0008AD   A3           INC     DPTR
   \   0008AE   A3           INC     DPTR
   \   0008AF   E0           MOVX    A,@DPTR
   \   0008B0   FA           MOV     R2,A
   \   0008B1   7B00         MOV     R3,#0x0
   \   0008B3   E8           MOV     A,R0
   \   0008B4   2A           ADD     A,R2
   \   0008B5   F8           MOV     R0,A
   \   0008B6   E9           MOV     A,R1
   \   0008B7   3B           ADDC    A,R3
   \   0008B8   F9           MOV     R1,A
   \   0008B9   E8           MOV     A,R0
   \   0008BA   24F0         ADD     A,#-0x10
   \   0008BC   F8           MOV     R0,A
   \   0008BD   E9           MOV     A,R1
   \   0008BE   34FD         ADDC    A,#-0x3
   \   0008C0   F9           MOV     R1,A
   \   0008C1   88..         MOV     ?V0 + 2,R0
   \   0008C3   89..         MOV     ?V0 + 3,R1
   1122                    if(pollrate_time >60 )
   \   0008C5   C3           CLR     C
   \   0008C6   E5..         MOV     A,?V0 + 2
   \   0008C8   943D         SUBB    A,#0x3d
   \   0008CA   E5..         MOV     A,?V0 + 3
   \   0008CC   9400         SUBB    A,#0x0
   \   0008CE   4006         JC      ??APP_NORMAL_COMMAND_17
   1123                    {
   1124                    pollrate_time = 60;
   \   0008D0   75..3C       MOV     ?V0 + 2,#0x3c
   \   0008D3   75..00       MOV     ?V0 + 3,#0x0
   1125                    }
   1126                    
   1127                    pollrate_time = pollrate_time *1000;
   \                     ??APP_NORMAL_COMMAND_17:
   \   0008D6   E5..         MOV     A,?V0 + 2
   \   0008D8   75F0E8       MOV     B,#-0x18
   \   0008DB   A4           MUL     AB
   \   0008DC   C5..         XCH     A,?V0 + 2
   \   0008DE   A8F0         MOV     R0,B
   \   0008E0   75F003       MOV     B,#0x3
   \   0008E3   A4           MUL     AB
   \   0008E4   28           ADD     A,R0
   \   0008E5   F8           MOV     R0,A
   \   0008E6   75F0E8       MOV     B,#-0x18
   \   0008E9   E5..         MOV     A,?V0 + 3
   \   0008EB   A4           MUL     AB
   \   0008EC   28           ADD     A,R0
   \   0008ED   F5..         MOV     ?V0 + 3,A
   1128                    
   1129                    NLME_SetPollRate( pollrate_time );
   \   0008EF                ; Setup parameters for call to function NLME_SetPollRate
   \   0008EF   AA..         MOV     R2,?V0 + 2
   \   0008F1   AB..         MOV     R3,?V0 + 3
   \   0008F3   12....       LCALL   ??NLME_SetPollRate?relay
   \   0008F6   02....       LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
   1130                  //  DEEP_POLL_FLAG =0; 
   1131                   // osal_start_timerEx( SampleApp_TaskID, HALF_HOUR_NO_POLL_EVT,60000);//10分钟
   1132               }
   1133               
   1134            }
   1135            
   1136              else if(command_str[4]=='b')//修改设备的心跳上报时间
   \                     ??APP_NORMAL_COMMAND_16:
   \   0008F9   8E82         MOV     DPL,R6
   \   0008FB   8F83         MOV     DPH,R7
   \   0008FD   A3           INC     DPTR
   \   0008FE   A3           INC     DPTR
   \   0008FF   A3           INC     DPTR
   \   000900   A3           INC     DPTR
   \   000901   E0           MOVX    A,@DPTR
   \   000902   6462         XRL     A,#0x62
   \   000904   6003         JZ      $+5
   \   000906   02....       LJMP    ??APP_NORMAL_COMMAND_18 & 0xFFFF
   1137            {
   1138              //uint8 startOptions =0;
   1139              Heart_mesg_flag = 100*(command_str[5]-'0')+10*(command_str[6]-'0')+command_str[7]-'0';
   \   000909   8E82         MOV     DPL,R6
   \   00090B   8F83         MOV     DPH,R7
   \   00090D   A3           INC     DPTR
   \   00090E   A3           INC     DPTR
   \   00090F   A3           INC     DPTR
   \   000910   A3           INC     DPTR
   \   000911   A3           INC     DPTR
   \   000912   A3           INC     DPTR
   \   000913   A3           INC     DPTR
   \   000914   C082         PUSH    DPL
   \   000916   C083         PUSH    DPH
   \   000918   75F00A       MOV     B,#0xa
   \   00091B   8E82         MOV     DPL,R6
   \   00091D   8F83         MOV     DPH,R7
   \   00091F   A3           INC     DPTR
   \   000920   A3           INC     DPTR
   \   000921   A3           INC     DPTR
   \   000922   A3           INC     DPTR
   \   000923   A3           INC     DPTR
   \   000924   A3           INC     DPTR
   \   000925   E0           MOVX    A,@DPTR
   \   000926   A4           MUL     AB
   \   000927   F8           MOV     R0,A
   \   000928   75F064       MOV     B,#0x64
   \   00092B   8E82         MOV     DPL,R6
   \   00092D   8F83         MOV     DPH,R7
   \   00092F   A3           INC     DPTR
   \   000930   A3           INC     DPTR
   \   000931   A3           INC     DPTR
   \   000932   A3           INC     DPTR
   \   000933   A3           INC     DPTR
   \   000934   E0           MOVX    A,@DPTR
   \   000935   A4           MUL     AB
   \   000936   28           ADD     A,R0
   \   000937   D083         POP     DPH
   \   000939   D082         POP     DPL
   \   00093B   F8           MOV     R0,A
   \   00093C   E0           MOVX    A,@DPTR
   \   00093D   28           ADD     A,R0
   \   00093E   2430         ADD     A,#0x30
   \   000940   90....       MOV     DPTR,#Heart_mesg_flag
   \   000943   F0           MOVX    @DPTR,A
   1140              
   1141               if( (Heart_mesg_flag<1) || (Heart_mesg_flag>10))
   \   000944   90....       MOV     DPTR,#Heart_mesg_flag
   \   000947   E0           MOVX    A,@DPTR
   \   000948   C3           CLR     C
   \   000949   9401         SUBB    A,#0x1
   \   00094B   4009         JC      ??APP_NORMAL_COMMAND_19
   \   00094D   90....       MOV     DPTR,#Heart_mesg_flag
   \   000950   E0           MOVX    A,@DPTR
   \   000951   C3           CLR     C
   \   000952   940B         SUBB    A,#0xb
   \   000954   4006         JC      ??APP_NORMAL_COMMAND_20
   1142               {
   1143                 Heart_mesg_flag = 10;
   \                     ??APP_NORMAL_COMMAND_19:
   \   000956   90....       MOV     DPTR,#Heart_mesg_flag
   \   000959   740A         MOV     A,#0xa
   \   00095B   F0           MOVX    @DPTR,A
   1144               }
   1145               
   1146              osal_nv_item_init(ZCD_NV_HEART_MESG_FLAG, 1, &Heart_mesg_flag); 
   \                     ??APP_NORMAL_COMMAND_20:
   \   00095C                ; Setup parameters for call to function osal_nv_item_init
   \   00095C   75....       MOV     ?V0 + 2,#Heart_mesg_flag & 0xff
   \   00095F   75....       MOV     ?V0 + 3,#(Heart_mesg_flag >> 8) & 0xff
   \   000962   78..         MOV     R0,#?V0 + 2
   \   000964   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000967   7C01         MOV     R4,#0x1
   \   000969   7D00         MOV     R5,#0x0
   \   00096B   7A10         MOV     R2,#0x10
   \   00096D   7B05         MOV     R3,#0x5
   \   00096F   12....       LCALL   ??osal_nv_item_init?relay
   \   000972   7402         MOV     A,#0x2
   \   000974   12....       LCALL   ?DEALLOC_XSTACK8
   \   000977   E9           MOV     A,R1
   1147              osal_nv_write(ZCD_NV_HEART_MESG_FLAG, 0, 1, &Heart_mesg_flag); 
   \   000978                ; Setup parameters for call to function osal_nv_write
   \   000978   75....       MOV     ?V0 + 2,#Heart_mesg_flag & 0xff
   \   00097B   75....       MOV     ?V0 + 3,#(Heart_mesg_flag >> 8) & 0xff
   \   00097E   78..         MOV     R0,#?V0 + 2
   \   000980   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000983   75..01       MOV     ?V0 + 2,#0x1
   \   000986   75..00       MOV     ?V0 + 3,#0x0
   \   000989   78..         MOV     R0,#?V0 + 2
   \   00098B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00098E   7C00         MOV     R4,#0x0
   \   000990   7D00         MOV     R5,#0x0
   \   000992   7A10         MOV     R2,#0x10
   \   000994   7B05         MOV     R3,#0x5
   \   000996   12....       LCALL   ??osal_nv_write?relay
   \   000999   7404         MOV     A,#0x4
   \   00099B   12....       LCALL   ?DEALLOC_XSTACK8
   \   00099E   E9           MOV     A,R1
   1148              
   1149              
   1150                 uint8 HEART_str[12];
   1151                 
   1152                    HEART_str[0]=command_str[0];
   \   00099F   8E82         MOV     DPL,R6
   \   0009A1   8F83         MOV     DPH,R7
   \   0009A3   E0           MOVX    A,@DPTR
   \   0009A4   C0E0         PUSH    A
   \   0009A6   742A         MOV     A,#0x2a
   \   0009A8   12....       LCALL   ?XSTACK_DISP0_8
   \   0009AB   D0E0         POP     A
   \   0009AD   F0           MOVX    @DPTR,A
   1153                    HEART_str[1]=command_str[1];
   \   0009AE   8E82         MOV     DPL,R6
   \   0009B0   8F83         MOV     DPH,R7
   \   0009B2   A3           INC     DPTR
   \   0009B3   E0           MOVX    A,@DPTR
   \   0009B4   C0E0         PUSH    A
   \   0009B6   742B         MOV     A,#0x2b
   \   0009B8   12....       LCALL   ?XSTACK_DISP0_8
   \   0009BB   D0E0         POP     A
   \   0009BD   F0           MOVX    @DPTR,A
   1154                    HEART_str[2]=command_str[2];
   \   0009BE   8E82         MOV     DPL,R6
   \   0009C0   8F83         MOV     DPH,R7
   \   0009C2   A3           INC     DPTR
   \   0009C3   A3           INC     DPTR
   \   0009C4   E0           MOVX    A,@DPTR
   \   0009C5   C0E0         PUSH    A
   \   0009C7   742C         MOV     A,#0x2c
   \   0009C9   12....       LCALL   ?XSTACK_DISP0_8
   \   0009CC   D0E0         POP     A
   \   0009CE   F0           MOVX    @DPTR,A
   1155                    HEART_str[3]=command_str[3];
   \   0009CF   8E82         MOV     DPL,R6
   \   0009D1   8F83         MOV     DPH,R7
   \   0009D3   A3           INC     DPTR
   \   0009D4   A3           INC     DPTR
   \   0009D5   A3           INC     DPTR
   \   0009D6   E0           MOVX    A,@DPTR
   \   0009D7   C0E0         PUSH    A
   \   0009D9   742D         MOV     A,#0x2d
   \   0009DB   12....       LCALL   ?XSTACK_DISP0_8
   \   0009DE   D0E0         POP     A
   \   0009E0   F0           MOVX    @DPTR,A
   1156          
   1157                    HEART_str[4]='/';
   \   0009E1   742E         MOV     A,#0x2e
   \   0009E3   12....       LCALL   ?XSTACK_DISP0_8
   \   0009E6   742F         MOV     A,#0x2f
   \   0009E8   F0           MOVX    @DPTR,A
   1158                    HEART_str[5]='C';
   \   0009E9   742F         MOV     A,#0x2f
   \   0009EB   12....       LCALL   ?XSTACK_DISP0_8
   \   0009EE   7443         MOV     A,#0x43
   \   0009F0   F0           MOVX    @DPTR,A
   1159                    HEART_str[6]='/';
   \   0009F1   7430         MOV     A,#0x30
   \   0009F3   12....       LCALL   ?XSTACK_DISP0_8
   \   0009F6   742F         MOV     A,#0x2f
   \   0009F8   F0           MOVX    @DPTR,A
   1160                    HEART_str[7]='U';
   \   0009F9   7431         MOV     A,#0x31
   \   0009FB   12....       LCALL   ?XSTACK_DISP0_8
   \   0009FE   7455         MOV     A,#0x55
   \   000A00   F0           MOVX    @DPTR,A
   1161                    HEART_str[8]='U';
   \   000A01   7432         MOV     A,#0x32
   \   000A03   12....       LCALL   ?XSTACK_DISP0_8
   \   000A06   7455         MOV     A,#0x55
   \   000A08   F0           MOVX    @DPTR,A
   1162                    HEART_str[9]=0xA0;
   \   000A09   7433         MOV     A,#0x33
   \   000A0B   12....       LCALL   ?XSTACK_DISP0_8
   \   000A0E   74A0         MOV     A,#-0x60
   \   000A10   F0           MOVX    @DPTR,A
   1163                    HEART_str[10]=0xBC;
   \   000A11   7434         MOV     A,#0x34
   \   000A13   12....       LCALL   ?XSTACK_DISP0_8
   \   000A16   74BC         MOV     A,#-0x44
   \   000A18   F0           MOVX    @DPTR,A
   1164                    HEART_str[11]=Heart_mesg_flag;
   \   000A19   90....       MOV     DPTR,#Heart_mesg_flag
   \   000A1C   E0           MOVX    A,@DPTR
   \   000A1D   C0E0         PUSH    A
   \   000A1F   7435         MOV     A,#0x35
   \   000A21   12....       LCALL   ?XSTACK_DISP0_8
   \   000A24   D0E0         POP     A
   \   000A26   F0           MOVX    @DPTR,A
   1165                    
   1166                    SampleApp_SPI_SendCommand_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \   000A27   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 8
   \   000A2A   7402         MOV     A,#0x2
   \   000A2C   F0           MOVX    @DPTR,A
   1167                    SampleApp_SPI_SendCommand_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   000A2D   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 9
   \   000A30   7414         MOV     A,#0x14
   \   000A32   F0           MOVX    @DPTR,A
   1168                    // SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;
   1169                    SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;//发送给来的设备
   \   000A33   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr
   \   000A36   7400         MOV     A,#0x0
   \   000A38   F0           MOVX    @DPTR,A
   \   000A39   A3           INC     DPTR
   \   000A3A   7400         MOV     A,#0x0
   \   000A3C   F0           MOVX    @DPTR,A
   1170                    if ( AF_DataRequest( &SampleApp_SPI_SendCommand_DstAddr,
   1171                                   (endPointDesc_t *)&SampleApp_epDesc,
   1172                                    SAMPLEAPP_COMMAND_CLUSTERID, //终端传过去，协调器处理了
   1173                                    12, HEART_str,
   1174                                    &SampleApp_TransID, 
   1175                                    AF_DISCV_ROUTE, 
   1176                                    AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000A3D                ; Setup parameters for call to function AF_DataRequest
   \   000A3D   75..0F       MOV     ?V0 + 2,#0xf
   \   000A40   78..         MOV     R0,#?V0 + 2
   \   000A42   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000A45   75....       MOV     ?V0 + 2,#SampleApp_TransID & 0xff
   \   000A48   75....       MOV     ?V0 + 3,#(SampleApp_TransID >> 8) & 0xff
   \   000A4B   78..         MOV     R0,#?V0 + 2
   \   000A4D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000A50   742D         MOV     A,#0x2d
   \   000A52   12....       LCALL   ?XSTACK_DISP0_8
   \   000A55   8582..       MOV     ?V0 + 2,DPL
   \   000A58   8583..       MOV     ?V0 + 3,DPH
   \   000A5B   78..         MOV     R0,#?V0 + 2
   \   000A5D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000A60   75..0C       MOV     ?V0 + 2,#0xc
   \   000A63   75..00       MOV     ?V0 + 3,#0x0
   \   000A66   78..         MOV     R0,#?V0 + 2
   \   000A68   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000A6B   75..04       MOV     ?V0 + 2,#0x4
   \   000A6E   75..00       MOV     ?V0 + 3,#0x0
   \   000A71   78..         MOV     R0,#?V0 + 2
   \   000A73   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000A76   7920         MOV     R1,#0x20
   \   000A78   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000A7A   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000A7C   7A..         MOV     R2,#SampleApp_SPI_SendCommand_DstAddr & 0xff
   \   000A7E   7B..         MOV     R3,#(SampleApp_SPI_SendCommand_DstAddr >> 8) & 0xff
   \   000A80   12....       LCALL   ??AF_DataRequest?relay
   \   000A83   7409         MOV     A,#0x9
   \   000A85   12....       LCALL   ?DEALLOC_XSTACK8
   \   000A88   E9           MOV     A,R1
   \   000A89   C0E0         PUSH    A
   \   000A8B   7401         MOV     A,#0x1
   \   000A8D   12....       LCALL   ?XSTACK_DISP0_8
   \   000A90   D0E0         POP     A
   \   000A92   F0           MOVX    @DPTR,A
   \   000A93   02....       LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
   1177                    {
   1178                    }
   1179                    else
   1180                    {
   1181                    
   1182                    }  
   1183              
   1184            }
   1185            
   1186             else if(command_str[4]=='c')//变频 
   \                     ??APP_NORMAL_COMMAND_18:
   \   000A96   8E82         MOV     DPL,R6
   \   000A98   8F83         MOV     DPH,R7
   \   000A9A   A3           INC     DPTR
   \   000A9B   A3           INC     DPTR
   \   000A9C   A3           INC     DPTR
   \   000A9D   A3           INC     DPTR
   \   000A9E   E0           MOVX    A,@DPTR
   \   000A9F   6463         XRL     A,#0x63
   \   000AA1   6003         JZ      $+5
   \   000AA3   02....       LJMP    ??APP_NORMAL_COMMAND_21 & 0xFFFF
   1187            {
   1188             
   1189              uint8 NETSET_str[12];
   1190              NETSET_str[0]=command_str[0];
   \   000AA6   8E82         MOV     DPL,R6
   \   000AA8   8F83         MOV     DPH,R7
   \   000AAA   E0           MOVX    A,@DPTR
   \   000AAB   C0E0         PUSH    A
   \   000AAD   741E         MOV     A,#0x1e
   \   000AAF   12....       LCALL   ?XSTACK_DISP0_8
   \   000AB2   D0E0         POP     A
   \   000AB4   F0           MOVX    @DPTR,A
   1191              NETSET_str[1]=command_str[1];
   \   000AB5   8E82         MOV     DPL,R6
   \   000AB7   8F83         MOV     DPH,R7
   \   000AB9   A3           INC     DPTR
   \   000ABA   E0           MOVX    A,@DPTR
   \   000ABB   C0E0         PUSH    A
   \   000ABD   741F         MOV     A,#0x1f
   \   000ABF   12....       LCALL   ?XSTACK_DISP0_8
   \   000AC2   D0E0         POP     A
   \   000AC4   F0           MOVX    @DPTR,A
   1192              NETSET_str[2]=command_str[2];
   \   000AC5   8E82         MOV     DPL,R6
   \   000AC7   8F83         MOV     DPH,R7
   \   000AC9   A3           INC     DPTR
   \   000ACA   A3           INC     DPTR
   \   000ACB   E0           MOVX    A,@DPTR
   \   000ACC   C0E0         PUSH    A
   \   000ACE   7420         MOV     A,#0x20
   \   000AD0   12....       LCALL   ?XSTACK_DISP0_8
   \   000AD3   D0E0         POP     A
   \   000AD5   F0           MOVX    @DPTR,A
   1193              NETSET_str[3]=command_str[3];
   \   000AD6   8E82         MOV     DPL,R6
   \   000AD8   8F83         MOV     DPH,R7
   \   000ADA   A3           INC     DPTR
   \   000ADB   A3           INC     DPTR
   \   000ADC   A3           INC     DPTR
   \   000ADD   E0           MOVX    A,@DPTR
   \   000ADE   C0E0         PUSH    A
   \   000AE0   7421         MOV     A,#0x21
   \   000AE2   12....       LCALL   ?XSTACK_DISP0_8
   \   000AE5   D0E0         POP     A
   \   000AE7   F0           MOVX    @DPTR,A
   1194          
   1195              NETSET_str[4]='/';
   \   000AE8   7422         MOV     A,#0x22
   \   000AEA   12....       LCALL   ?XSTACK_DISP0_8
   \   000AED   742F         MOV     A,#0x2f
   \   000AEF   F0           MOVX    @DPTR,A
   1196              NETSET_str[5]='C';
   \   000AF0   7423         MOV     A,#0x23
   \   000AF2   12....       LCALL   ?XSTACK_DISP0_8
   \   000AF5   7443         MOV     A,#0x43
   \   000AF7   F0           MOVX    @DPTR,A
   1197              NETSET_str[6]='/';
   \   000AF8   7424         MOV     A,#0x24
   \   000AFA   12....       LCALL   ?XSTACK_DISP0_8
   \   000AFD   742F         MOV     A,#0x2f
   \   000AFF   F0           MOVX    @DPTR,A
   1198              NETSET_str[7]='U';
   \   000B00   7425         MOV     A,#0x25
   \   000B02   12....       LCALL   ?XSTACK_DISP0_8
   \   000B05   7455         MOV     A,#0x55
   \   000B07   F0           MOVX    @DPTR,A
   1199              NETSET_str[8]='U';
   \   000B08   7426         MOV     A,#0x26
   \   000B0A   12....       LCALL   ?XSTACK_DISP0_8
   \   000B0D   7455         MOV     A,#0x55
   \   000B0F   F0           MOVX    @DPTR,A
   1200              NETSET_str[9]=0xA0;
   \   000B10   7427         MOV     A,#0x27
   \   000B12   12....       LCALL   ?XSTACK_DISP0_8
   \   000B15   74A0         MOV     A,#-0x60
   \   000B17   F0           MOVX    @DPTR,A
   1201              NETSET_str[10]=0x31;
   \   000B18   7428         MOV     A,#0x28
   \   000B1A   12....       LCALL   ?XSTACK_DISP0_8
   \   000B1D   7431         MOV     A,#0x31
   \   000B1F   F0           MOVX    @DPTR,A
   1202              
   1203              New_Channel_list = 10*(command_str[5]-'0')+(command_str[6]-'0');
   \   000B20   8E82         MOV     DPL,R6
   \   000B22   8F83         MOV     DPH,R7
   \   000B24   A3           INC     DPTR
   \   000B25   A3           INC     DPTR
   \   000B26   A3           INC     DPTR
   \   000B27   A3           INC     DPTR
   \   000B28   A3           INC     DPTR
   \   000B29   A3           INC     DPTR
   \   000B2A   C082         PUSH    DPL
   \   000B2C   C083         PUSH    DPH
   \   000B2E   75F00A       MOV     B,#0xa
   \   000B31   8E82         MOV     DPL,R6
   \   000B33   8F83         MOV     DPH,R7
   \   000B35   A3           INC     DPTR
   \   000B36   A3           INC     DPTR
   \   000B37   A3           INC     DPTR
   \   000B38   A3           INC     DPTR
   \   000B39   A3           INC     DPTR
   \   000B3A   E0           MOVX    A,@DPTR
   \   000B3B   A4           MUL     AB
   \   000B3C   D083         POP     DPH
   \   000B3E   D082         POP     DPL
   \   000B40   F8           MOV     R0,A
   \   000B41   E0           MOVX    A,@DPTR
   \   000B42   28           ADD     A,R0
   \   000B43   24F0         ADD     A,#-0x10
   \   000B45   90....       MOV     DPTR,#New_Channel_list
   \   000B48   F0           MOVX    @DPTR,A
   1204              
   1205               if((New_Channel_list>=0x0B) && (New_Channel_list<=0x1A))
   \   000B49   90....       MOV     DPTR,#New_Channel_list
   \   000B4C   E0           MOVX    A,@DPTR
   \   000B4D   C3           CLR     C
   \   000B4E   940B         SUBB    A,#0xb
   \   000B50   4019         JC      ??APP_NORMAL_COMMAND_22
   \   000B52   90....       MOV     DPTR,#New_Channel_list
   \   000B55   E0           MOVX    A,@DPTR
   \   000B56   C3           CLR     C
   \   000B57   941B         SUBB    A,#0x1b
   \   000B59   5010         JNC     ??APP_NORMAL_COMMAND_22
   1206               {
   1207                NETSET_str[11]=New_Channel_list;
   \   000B5B   90....       MOV     DPTR,#New_Channel_list
   \   000B5E   E0           MOVX    A,@DPTR
   \   000B5F   C0E0         PUSH    A
   \   000B61   7429         MOV     A,#0x29
   \   000B63   12....       LCALL   ?XSTACK_DISP0_8
   \   000B66   D0E0         POP     A
   \   000B68   F0           MOVX    @DPTR,A
   \   000B69   8008         SJMP    ??APP_NORMAL_COMMAND_23
   1208               }
   1209               else
   1210               {
   1211                 NETSET_str[11]=0;
   \                     ??APP_NORMAL_COMMAND_22:
   \   000B6B   7429         MOV     A,#0x29
   \   000B6D   12....       LCALL   ?XSTACK_DISP0_8
   \   000B70   7400         MOV     A,#0x0
   \   000B72   F0           MOVX    @DPTR,A
   1212               }  
   1213              
   1214                    SampleApp_SPI_SendCommand_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \                     ??APP_NORMAL_COMMAND_23:
   \   000B73   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 8
   \   000B76   7402         MOV     A,#0x2
   \   000B78   F0           MOVX    @DPTR,A
   1215                    SampleApp_SPI_SendCommand_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   000B79   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 9
   \   000B7C   7414         MOV     A,#0x14
   \   000B7E   F0           MOVX    @DPTR,A
   1216                    // SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;
   1217                    SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;//发送给来的设备
   \   000B7F   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr
   \   000B82   7400         MOV     A,#0x0
   \   000B84   F0           MOVX    @DPTR,A
   \   000B85   A3           INC     DPTR
   \   000B86   7400         MOV     A,#0x0
   \   000B88   F0           MOVX    @DPTR,A
   1218                    if ( AF_DataRequest( &SampleApp_SPI_SendCommand_DstAddr,
   1219                                   (endPointDesc_t *)&SampleApp_epDesc,
   1220                                    SAMPLEAPP_COMMAND_CLUSTERID, //终端传过去，协调器处理了
   1221                                    12, NETSET_str,
   1222                                    &SampleApp_TransID, 
   1223                                  AF_DISCV_ROUTE, 
   1224                                    AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000B89                ; Setup parameters for call to function AF_DataRequest
   \   000B89   75..0F       MOV     ?V0 + 2,#0xf
   \   000B8C   78..         MOV     R0,#?V0 + 2
   \   000B8E   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000B91   75....       MOV     ?V0 + 2,#SampleApp_TransID & 0xff
   \   000B94   75....       MOV     ?V0 + 3,#(SampleApp_TransID >> 8) & 0xff
   \   000B97   78..         MOV     R0,#?V0 + 2
   \   000B99   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000B9C   7421         MOV     A,#0x21
   \   000B9E   12....       LCALL   ?XSTACK_DISP0_8
   \   000BA1   8582..       MOV     ?V0 + 2,DPL
   \   000BA4   8583..       MOV     ?V0 + 3,DPH
   \   000BA7   78..         MOV     R0,#?V0 + 2
   \   000BA9   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000BAC   75..0C       MOV     ?V0 + 2,#0xc
   \   000BAF   75..00       MOV     ?V0 + 3,#0x0
   \   000BB2   78..         MOV     R0,#?V0 + 2
   \   000BB4   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000BB7   75..04       MOV     ?V0 + 2,#0x4
   \   000BBA   75..00       MOV     ?V0 + 3,#0x0
   \   000BBD   78..         MOV     R0,#?V0 + 2
   \   000BBF   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000BC2   7920         MOV     R1,#0x20
   \   000BC4   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000BC6   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000BC8   7A..         MOV     R2,#SampleApp_SPI_SendCommand_DstAddr & 0xff
   \   000BCA   7B..         MOV     R3,#(SampleApp_SPI_SendCommand_DstAddr >> 8) & 0xff
   \   000BCC   12....       LCALL   ??AF_DataRequest?relay
   \   000BCF   7409         MOV     A,#0x9
   \   000BD1   12....       LCALL   ?DEALLOC_XSTACK8
   \   000BD4   E9           MOV     A,R1
   \   000BD5   F5..         MOV     ?V0 + 2,A
   1225                    {
   1226                    }
   1227                    else
   1228                    {
   1229                    
   1230                    }  
   1231                    
   1232                    
   1233                    New_Net_flag = 1;
   \   000BD7   90....       MOV     DPTR,#New_Net_flag
   \   000BDA   7401         MOV     A,#0x1
   \   000BDC   F0           MOVX    @DPTR,A
   1234                    
   1235                    osal_start_timerEx( SampleApp_TaskID,SAMPLEAPP_RESTORE_EVT,5000 );
   \   000BDD                ; Setup parameters for call to function osal_start_timerEx
   \   000BDD   7C88         MOV     R4,#-0x78
   \   000BDF   7D13         MOV     R5,#0x13
   \   000BE1   7A10         MOV     R2,#0x10
   \   000BE3   7B00         MOV     R3,#0x0
   \   000BE5   90....       MOV     DPTR,#SampleApp_TaskID
   \   000BE8   E0           MOVX    A,@DPTR
   \   000BE9   F9           MOV     R1,A
   \   000BEA   12....       LCALL   ??osal_start_timerEx?relay
   \   000BED   E9           MOV     A,R1
   \   000BEE   02....       LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
   1236                    
   1237                 
   1238            }
   1239            
   1240            
   1241             else if(command_str[4]=='p')//变PANID
   \                     ??APP_NORMAL_COMMAND_21:
   \   000BF1   8E82         MOV     DPL,R6
   \   000BF3   8F83         MOV     DPH,R7
   \   000BF5   A3           INC     DPTR
   \   000BF6   A3           INC     DPTR
   \   000BF7   A3           INC     DPTR
   \   000BF8   A3           INC     DPTR
   \   000BF9   E0           MOVX    A,@DPTR
   \   000BFA   6470         XRL     A,#0x70
   \   000BFC   6003         JZ      $+5
   \   000BFE   02....       LJMP    ??APP_NORMAL_COMMAND_24 & 0xFFFF
   1242            {
   1243            
   1244             
   1245                uint8 NETSET_str[13];
   1246                NETSET_str[0]=command_str[0];
   \   000C01   8E82         MOV     DPL,R6
   \   000C03   8F83         MOV     DPH,R7
   \   000C05   E0           MOVX    A,@DPTR
   \   000C06   C0E0         PUSH    A
   \   000C08   7411         MOV     A,#0x11
   \   000C0A   12....       LCALL   ?XSTACK_DISP0_8
   \   000C0D   D0E0         POP     A
   \   000C0F   F0           MOVX    @DPTR,A
   1247                NETSET_str[1]=command_str[1];
   \   000C10   8E82         MOV     DPL,R6
   \   000C12   8F83         MOV     DPH,R7
   \   000C14   A3           INC     DPTR
   \   000C15   E0           MOVX    A,@DPTR
   \   000C16   C0E0         PUSH    A
   \   000C18   7412         MOV     A,#0x12
   \   000C1A   12....       LCALL   ?XSTACK_DISP0_8
   \   000C1D   D0E0         POP     A
   \   000C1F   F0           MOVX    @DPTR,A
   1248                NETSET_str[2]=command_str[2];
   \   000C20   8E82         MOV     DPL,R6
   \   000C22   8F83         MOV     DPH,R7
   \   000C24   A3           INC     DPTR
   \   000C25   A3           INC     DPTR
   \   000C26   E0           MOVX    A,@DPTR
   \   000C27   C0E0         PUSH    A
   \   000C29   7413         MOV     A,#0x13
   \   000C2B   12....       LCALL   ?XSTACK_DISP0_8
   \   000C2E   D0E0         POP     A
   \   000C30   F0           MOVX    @DPTR,A
   1249                NETSET_str[3]=command_str[3];
   \   000C31   8E82         MOV     DPL,R6
   \   000C33   8F83         MOV     DPH,R7
   \   000C35   A3           INC     DPTR
   \   000C36   A3           INC     DPTR
   \   000C37   A3           INC     DPTR
   \   000C38   E0           MOVX    A,@DPTR
   \   000C39   C0E0         PUSH    A
   \   000C3B   7414         MOV     A,#0x14
   \   000C3D   12....       LCALL   ?XSTACK_DISP0_8
   \   000C40   D0E0         POP     A
   \   000C42   F0           MOVX    @DPTR,A
   1250                NETSET_str[4]='/';
   \   000C43   7415         MOV     A,#0x15
   \   000C45   12....       LCALL   ?XSTACK_DISP0_8
   \   000C48   742F         MOV     A,#0x2f
   \   000C4A   F0           MOVX    @DPTR,A
   1251                NETSET_str[5]='C';
   \   000C4B   7416         MOV     A,#0x16
   \   000C4D   12....       LCALL   ?XSTACK_DISP0_8
   \   000C50   7443         MOV     A,#0x43
   \   000C52   F0           MOVX    @DPTR,A
   1252                NETSET_str[6]='/';
   \   000C53   7417         MOV     A,#0x17
   \   000C55   12....       LCALL   ?XSTACK_DISP0_8
   \   000C58   742F         MOV     A,#0x2f
   \   000C5A   F0           MOVX    @DPTR,A
   1253                NETSET_str[7]='U';
   \   000C5B   7418         MOV     A,#0x18
   \   000C5D   12....       LCALL   ?XSTACK_DISP0_8
   \   000C60   7455         MOV     A,#0x55
   \   000C62   F0           MOVX    @DPTR,A
   1254                NETSET_str[8]='U';
   \   000C63   7419         MOV     A,#0x19
   \   000C65   12....       LCALL   ?XSTACK_DISP0_8
   \   000C68   7455         MOV     A,#0x55
   \   000C6A   F0           MOVX    @DPTR,A
   1255                NETSET_str[9]=0xA0;
   \   000C6B   741A         MOV     A,#0x1a
   \   000C6D   12....       LCALL   ?XSTACK_DISP0_8
   \   000C70   74A0         MOV     A,#-0x60
   \   000C72   F0           MOVX    @DPTR,A
   1256                NETSET_str[10]=0x32;
   \   000C73   741B         MOV     A,#0x1b
   \   000C75   12....       LCALL   ?XSTACK_DISP0_8
   \   000C78   7432         MOV     A,#0x32
   \   000C7A   F0           MOVX    @DPTR,A
   1257              
   1258                New_Panid=  10000*(command_str[5]-'0')+1000*(command_str[6]-'0')+100*(command_str[7]-'0')+10*(command_str[8]-'0')+(command_str[9]-'0');
   \   000C7B   8E82         MOV     DPL,R6
   \   000C7D   8F83         MOV     DPH,R7
   \   000C7F   A3           INC     DPTR
   \   000C80   A3           INC     DPTR
   \   000C81   A3           INC     DPTR
   \   000C82   A3           INC     DPTR
   \   000C83   A3           INC     DPTR
   \   000C84   E0           MOVX    A,@DPTR
   \   000C85   F8           MOV     R0,A
   \   000C86   7900         MOV     R1,#0x0
   \   000C88   E8           MOV     A,R0
   \   000C89   75F010       MOV     B,#0x10
   \   000C8C   A4           MUL     AB
   \   000C8D   C8           XCH     A,R0
   \   000C8E   AAF0         MOV     R2,B
   \   000C90   75F027       MOV     B,#0x27
   \   000C93   A4           MUL     AB
   \   000C94   2A           ADD     A,R2
   \   000C95   FA           MOV     R2,A
   \   000C96   75F010       MOV     B,#0x10
   \   000C99   E9           MOV     A,R1
   \   000C9A   A4           MUL     AB
   \   000C9B   2A           ADD     A,R2
   \   000C9C   F9           MOV     R1,A
   \   000C9D   8E82         MOV     DPL,R6
   \   000C9F   8F83         MOV     DPH,R7
   \   000CA1   A3           INC     DPTR
   \   000CA2   A3           INC     DPTR
   \   000CA3   A3           INC     DPTR
   \   000CA4   A3           INC     DPTR
   \   000CA5   A3           INC     DPTR
   \   000CA6   A3           INC     DPTR
   \   000CA7   E0           MOVX    A,@DPTR
   \   000CA8   FA           MOV     R2,A
   \   000CA9   7B00         MOV     R3,#0x0
   \   000CAB   EA           MOV     A,R2
   \   000CAC   75F0E8       MOV     B,#-0x18
   \   000CAF   A4           MUL     AB
   \   000CB0   CA           XCH     A,R2
   \   000CB1   ACF0         MOV     R4,B
   \   000CB3   75F003       MOV     B,#0x3
   \   000CB6   A4           MUL     AB
   \   000CB7   2C           ADD     A,R4
   \   000CB8   FC           MOV     R4,A
   \   000CB9   75F0E8       MOV     B,#-0x18
   \   000CBC   EB           MOV     A,R3
   \   000CBD   A4           MUL     AB
   \   000CBE   2C           ADD     A,R4
   \   000CBF   FB           MOV     R3,A
   \   000CC0   E8           MOV     A,R0
   \   000CC1   2A           ADD     A,R2
   \   000CC2   F8           MOV     R0,A
   \   000CC3   E9           MOV     A,R1
   \   000CC4   3B           ADDC    A,R3
   \   000CC5   F9           MOV     R1,A
   \   000CC6   8E82         MOV     DPL,R6
   \   000CC8   8F83         MOV     DPH,R7
   \   000CCA   A3           INC     DPTR
   \   000CCB   A3           INC     DPTR
   \   000CCC   A3           INC     DPTR
   \   000CCD   A3           INC     DPTR
   \   000CCE   A3           INC     DPTR
   \   000CCF   A3           INC     DPTR
   \   000CD0   A3           INC     DPTR
   \   000CD1   E0           MOVX    A,@DPTR
   \   000CD2   FA           MOV     R2,A
   \   000CD3   7B00         MOV     R3,#0x0
   \   000CD5   EA           MOV     A,R2
   \   000CD6   75F064       MOV     B,#0x64
   \   000CD9   A4           MUL     AB
   \   000CDA   CA           XCH     A,R2
   \   000CDB   ACF0         MOV     R4,B
   \   000CDD   75F000       MOV     B,#0x0
   \   000CE0   A4           MUL     AB
   \   000CE1   2C           ADD     A,R4
   \   000CE2   FC           MOV     R4,A
   \   000CE3   75F064       MOV     B,#0x64
   \   000CE6   EB           MOV     A,R3
   \   000CE7   A4           MUL     AB
   \   000CE8   2C           ADD     A,R4
   \   000CE9   FB           MOV     R3,A
   \   000CEA   E8           MOV     A,R0
   \   000CEB   2A           ADD     A,R2
   \   000CEC   F8           MOV     R0,A
   \   000CED   E9           MOV     A,R1
   \   000CEE   3B           ADDC    A,R3
   \   000CEF   F9           MOV     R1,A
   \   000CF0   8E82         MOV     DPL,R6
   \   000CF2   8F83         MOV     DPH,R7
   \   000CF4   A3           INC     DPTR
   \   000CF5   A3           INC     DPTR
   \   000CF6   A3           INC     DPTR
   \   000CF7   A3           INC     DPTR
   \   000CF8   A3           INC     DPTR
   \   000CF9   A3           INC     DPTR
   \   000CFA   A3           INC     DPTR
   \   000CFB   A3           INC     DPTR
   \   000CFC   E0           MOVX    A,@DPTR
   \   000CFD   FA           MOV     R2,A
   \   000CFE   7B00         MOV     R3,#0x0
   \   000D00   EA           MOV     A,R2
   \   000D01   75F00A       MOV     B,#0xa
   \   000D04   A4           MUL     AB
   \   000D05   CA           XCH     A,R2
   \   000D06   ACF0         MOV     R4,B
   \   000D08   75F000       MOV     B,#0x0
   \   000D0B   A4           MUL     AB
   \   000D0C   2C           ADD     A,R4
   \   000D0D   FC           MOV     R4,A
   \   000D0E   75F00A       MOV     B,#0xa
   \   000D11   EB           MOV     A,R3
   \   000D12   A4           MUL     AB
   \   000D13   2C           ADD     A,R4
   \   000D14   FB           MOV     R3,A
   \   000D15   E8           MOV     A,R0
   \   000D16   2A           ADD     A,R2
   \   000D17   F8           MOV     R0,A
   \   000D18   E9           MOV     A,R1
   \   000D19   3B           ADDC    A,R3
   \   000D1A   F9           MOV     R1,A
   \   000D1B   8E82         MOV     DPL,R6
   \   000D1D   8F83         MOV     DPH,R7
   \   000D1F   A3           INC     DPTR
   \   000D20   A3           INC     DPTR
   \   000D21   A3           INC     DPTR
   \   000D22   A3           INC     DPTR
   \   000D23   A3           INC     DPTR
   \   000D24   A3           INC     DPTR
   \   000D25   A3           INC     DPTR
   \   000D26   A3           INC     DPTR
   \   000D27   A3           INC     DPTR
   \   000D28   E0           MOVX    A,@DPTR
   \   000D29   FA           MOV     R2,A
   \   000D2A   7B00         MOV     R3,#0x0
   \   000D2C   E8           MOV     A,R0
   \   000D2D   2A           ADD     A,R2
   \   000D2E   F8           MOV     R0,A
   \   000D2F   E9           MOV     A,R1
   \   000D30   3B           ADDC    A,R3
   \   000D31   F9           MOV     R1,A
   \   000D32   E8           MOV     A,R0
   \   000D33   24B0         ADD     A,#-0x50
   \   000D35   F8           MOV     R0,A
   \   000D36   E9           MOV     A,R1
   \   000D37   34DC         ADDC    A,#-0x24
   \   000D39   F9           MOV     R1,A
   \   000D3A   90....       MOV     DPTR,#New_Panid
   \   000D3D   E8           MOV     A,R0
   \   000D3E   F0           MOVX    @DPTR,A
   \   000D3F   A3           INC     DPTR
   \   000D40   E9           MOV     A,R1
   \   000D41   F0           MOVX    @DPTR,A
   1259                if ( (New_Panid != 0xFFFF) || (New_Panid != INVALID_PAN_ID) )
   \   000D42   90....       MOV     DPTR,#New_Panid
   \   000D45   E0           MOVX    A,@DPTR
   \   000D46   64FF         XRL     A,#0xff
   \   000D48   7004         JNZ     ??APP_NORMAL_COMMAND_25
   \   000D4A   A3           INC     DPTR
   \   000D4B   E0           MOVX    A,@DPTR
   \   000D4C   64FF         XRL     A,#0xff
   \                     ??APP_NORMAL_COMMAND_25:
   \   000D4E   700E         JNZ     ??APP_NORMAL_COMMAND_26
   \   000D50   90....       MOV     DPTR,#New_Panid
   \   000D53   E0           MOVX    A,@DPTR
   \   000D54   64FE         XRL     A,#0xfe
   \   000D56   7004         JNZ     ??APP_NORMAL_COMMAND_27
   \   000D58   A3           INC     DPTR
   \   000D59   E0           MOVX    A,@DPTR
   \   000D5A   64FF         XRL     A,#0xff
   \                     ??APP_NORMAL_COMMAND_27:
   \   000D5C   6031         JZ      ??APP_NORMAL_COMMAND_28
   1260                {  
   1261                    NETSET_str[11]=New_Panid/256;
   \                     ??APP_NORMAL_COMMAND_26:
   \   000D5E   90....       MOV     DPTR,#New_Panid
   \   000D61   E0           MOVX    A,@DPTR
   \   000D62   F8           MOV     R0,A
   \   000D63   A3           INC     DPTR
   \   000D64   E0           MOVX    A,@DPTR
   \   000D65   F9           MOV     R1,A
   \   000D66   E4           CLR     A
   \   000D67   E9           MOV     A,R1
   \   000D68   F8           MOV     R0,A
   \   000D69   C0E0         PUSH    A
   \   000D6B   741C         MOV     A,#0x1c
   \   000D6D   12....       LCALL   ?XSTACK_DISP0_8
   \   000D70   D0E0         POP     A
   \   000D72   F0           MOVX    @DPTR,A
   1262                    NETSET_str[12]=New_Panid%256;
   \   000D73   90....       MOV     DPTR,#New_Panid
   \   000D76   E0           MOVX    A,@DPTR
   \   000D77   F8           MOV     R0,A
   \   000D78   A3           INC     DPTR
   \   000D79   E0           MOVX    A,@DPTR
   \   000D7A   F9           MOV     R1,A
   \   000D7B   7A00         MOV     R2,#0x0
   \   000D7D   7B01         MOV     R3,#0x1
   \   000D7F   12....       LCALL   ?US_DIV_MOD
   \   000D82   EA           MOV     A,R2
   \   000D83   C0E0         PUSH    A
   \   000D85   741D         MOV     A,#0x1d
   \   000D87   12....       LCALL   ?XSTACK_DISP0_8
   \   000D8A   D0E0         POP     A
   \   000D8C   F0           MOVX    @DPTR,A
   \   000D8D   8010         SJMP    ??APP_NORMAL_COMMAND_29
   1263                }
   1264                else
   1265                {
   1266                  NETSET_str[11]=0xff;
   \                     ??APP_NORMAL_COMMAND_28:
   \   000D8F   741C         MOV     A,#0x1c
   \   000D91   12....       LCALL   ?XSTACK_DISP0_8
   \   000D94   74FF         MOV     A,#-0x1
   \   000D96   F0           MOVX    @DPTR,A
   1267                  NETSET_str[12]=0xff;
   \   000D97   741D         MOV     A,#0x1d
   \   000D99   12....       LCALL   ?XSTACK_DISP0_8
   \   000D9C   74FF         MOV     A,#-0x1
   \   000D9E   F0           MOVX    @DPTR,A
   1268                }  
   1269          
   1270                    SampleApp_SPI_SendCommand_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \                     ??APP_NORMAL_COMMAND_29:
   \   000D9F   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 8
   \   000DA2   7402         MOV     A,#0x2
   \   000DA4   F0           MOVX    @DPTR,A
   1271                    SampleApp_SPI_SendCommand_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   000DA5   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 9
   \   000DA8   7414         MOV     A,#0x14
   \   000DAA   F0           MOVX    @DPTR,A
   1272                    // SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;
   1273                    SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;//发送给来的设备
   \   000DAB   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr
   \   000DAE   7400         MOV     A,#0x0
   \   000DB0   F0           MOVX    @DPTR,A
   \   000DB1   A3           INC     DPTR
   \   000DB2   7400         MOV     A,#0x0
   \   000DB4   F0           MOVX    @DPTR,A
   1274                    if ( AF_DataRequest( &SampleApp_SPI_SendCommand_DstAddr,
   1275                                   (endPointDesc_t *)&SampleApp_epDesc,
   1276                                    SAMPLEAPP_COMMAND_CLUSTERID, //终端传过去，协调器处理了
   1277                                    13, NETSET_str,
   1278                                    &SampleApp_TransID, 
   1279                                  AF_DISCV_ROUTE, 
   1280                                    AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000DB5                ; Setup parameters for call to function AF_DataRequest
   \   000DB5   75..0F       MOV     ?V0 + 2,#0xf
   \   000DB8   78..         MOV     R0,#?V0 + 2
   \   000DBA   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000DBD   75....       MOV     ?V0 + 2,#SampleApp_TransID & 0xff
   \   000DC0   75....       MOV     ?V0 + 3,#(SampleApp_TransID >> 8) & 0xff
   \   000DC3   78..         MOV     R0,#?V0 + 2
   \   000DC5   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000DC8   7414         MOV     A,#0x14
   \   000DCA   12....       LCALL   ?XSTACK_DISP0_8
   \   000DCD   8582..       MOV     ?V0 + 2,DPL
   \   000DD0   8583..       MOV     ?V0 + 3,DPH
   \   000DD3   78..         MOV     R0,#?V0 + 2
   \   000DD5   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000DD8   75..0D       MOV     ?V0 + 2,#0xd
   \   000DDB   75..00       MOV     ?V0 + 3,#0x0
   \   000DDE   78..         MOV     R0,#?V0 + 2
   \   000DE0   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000DE3   75..04       MOV     ?V0 + 2,#0x4
   \   000DE6   75..00       MOV     ?V0 + 3,#0x0
   \   000DE9   78..         MOV     R0,#?V0 + 2
   \   000DEB   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000DEE   7920         MOV     R1,#0x20
   \   000DF0   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000DF2   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000DF4   7A..         MOV     R2,#SampleApp_SPI_SendCommand_DstAddr & 0xff
   \   000DF6   7B..         MOV     R3,#(SampleApp_SPI_SendCommand_DstAddr >> 8) & 0xff
   \   000DF8   12....       LCALL   ??AF_DataRequest?relay
   \   000DFB   7409         MOV     A,#0x9
   \   000DFD   12....       LCALL   ?DEALLOC_XSTACK8
   \   000E00   E9           MOV     A,R1
   \   000E01   F5..         MOV     ?V0 + 2,A
   1281                    {
   1282                    }
   1283                    else
   1284                    {
   1285                    
   1286                    }  
   1287                    
   1288                      New_Net_flag = 2;
   \   000E03   90....       MOV     DPTR,#New_Net_flag
   \   000E06   7402         MOV     A,#0x2
   \   000E08   F0           MOVX    @DPTR,A
   1289                     osal_start_timerEx( SampleApp_TaskID,SAMPLEAPP_RESTORE_EVT,5000 );
   \   000E09                ; Setup parameters for call to function osal_start_timerEx
   \   000E09   7C88         MOV     R4,#-0x78
   \   000E0B   7D13         MOV     R5,#0x13
   \   000E0D   7A10         MOV     R2,#0x10
   \   000E0F   7B00         MOV     R3,#0x0
   \   000E11   90....       MOV     DPTR,#SampleApp_TaskID
   \   000E14   E0           MOVX    A,@DPTR
   \   000E15   F9           MOV     R1,A
   \   000E16   12....       LCALL   ??osal_start_timerEx?relay
   \   000E19   E9           MOV     A,R1
   \   000E1A   02....       LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
   1290                    
   1291                  
   1292            }
   1293            
   1294             //2014 9 28 test 
   1295            else if(command_str[4]=='t') //test 设置设备的干扰上报阀值参数，1 超过多少值开始计算 2 超过多少失败率开始上报 失败率是不能配置的，在协议站里已经写死
   \                     ??APP_NORMAL_COMMAND_24:
   \   000E1D   8E82         MOV     DPL,R6
   \   000E1F   8F83         MOV     DPH,R7
   \   000E21   A3           INC     DPTR
   \   000E22   A3           INC     DPTR
   \   000E23   A3           INC     DPTR
   \   000E24   A3           INC     DPTR
   \   000E25   E0           MOVX    A,@DPTR
   \   000E26   6474         XRL     A,#0x74
   \   000E28   6003         JZ      $+5
   \   000E2A   02....       LJMP    ??APP_NORMAL_COMMAND_6 & 0xFFFF
   1296            {  
   1297                 uint8 active_count=0;
   \   000E2D   75..00       MOV     ?V0 + 2,#0x0
   1298                uint8 TX_failure_str[15];
   1299                TX_failure_str[0]=command_str[0];
   \   000E30   8E82         MOV     DPL,R6
   \   000E32   8F83         MOV     DPH,R7
   \   000E34   E0           MOVX    A,@DPTR
   \   000E35   C0E0         PUSH    A
   \   000E37   7402         MOV     A,#0x2
   \   000E39   12....       LCALL   ?XSTACK_DISP0_8
   \   000E3C   D0E0         POP     A
   \   000E3E   F0           MOVX    @DPTR,A
   1300                TX_failure_str[1]=command_str[1];
   \   000E3F   8E82         MOV     DPL,R6
   \   000E41   8F83         MOV     DPH,R7
   \   000E43   A3           INC     DPTR
   \   000E44   E0           MOVX    A,@DPTR
   \   000E45   C0E0         PUSH    A
   \   000E47   7403         MOV     A,#0x3
   \   000E49   12....       LCALL   ?XSTACK_DISP0_8
   \   000E4C   D0E0         POP     A
   \   000E4E   F0           MOVX    @DPTR,A
   1301                TX_failure_str[2]=command_str[2];
   \   000E4F   8E82         MOV     DPL,R6
   \   000E51   8F83         MOV     DPH,R7
   \   000E53   A3           INC     DPTR
   \   000E54   A3           INC     DPTR
   \   000E55   E0           MOVX    A,@DPTR
   \   000E56   C0E0         PUSH    A
   \   000E58   7404         MOV     A,#0x4
   \   000E5A   12....       LCALL   ?XSTACK_DISP0_8
   \   000E5D   D0E0         POP     A
   \   000E5F   F0           MOVX    @DPTR,A
   1302                TX_failure_str[3]=command_str[3];
   \   000E60   8E82         MOV     DPL,R6
   \   000E62   8F83         MOV     DPH,R7
   \   000E64   A3           INC     DPTR
   \   000E65   A3           INC     DPTR
   \   000E66   A3           INC     DPTR
   \   000E67   E0           MOVX    A,@DPTR
   \   000E68   C0E0         PUSH    A
   \   000E6A   7405         MOV     A,#0x5
   \   000E6C   12....       LCALL   ?XSTACK_DISP0_8
   \   000E6F   D0E0         POP     A
   \   000E71   F0           MOVX    @DPTR,A
   1303                TX_failure_str[4]='/';
   \   000E72   7406         MOV     A,#0x6
   \   000E74   12....       LCALL   ?XSTACK_DISP0_8
   \   000E77   742F         MOV     A,#0x2f
   \   000E79   F0           MOVX    @DPTR,A
   1304                TX_failure_str[5]='C';
   \   000E7A   7407         MOV     A,#0x7
   \   000E7C   12....       LCALL   ?XSTACK_DISP0_8
   \   000E7F   7443         MOV     A,#0x43
   \   000E81   F0           MOVX    @DPTR,A
   1305                TX_failure_str[6]='/';
   \   000E82   7408         MOV     A,#0x8
   \   000E84   12....       LCALL   ?XSTACK_DISP0_8
   \   000E87   742F         MOV     A,#0x2f
   \   000E89   F0           MOVX    @DPTR,A
   1306                TX_failure_str[7]='U';
   \   000E8A   7409         MOV     A,#0x9
   \   000E8C   12....       LCALL   ?XSTACK_DISP0_8
   \   000E8F   7455         MOV     A,#0x55
   \   000E91   F0           MOVX    @DPTR,A
   1307                TX_failure_str[8]='U';
   \   000E92   740A         MOV     A,#0xa
   \   000E94   12....       LCALL   ?XSTACK_DISP0_8
   \   000E97   7455         MOV     A,#0x55
   \   000E99   F0           MOVX    @DPTR,A
   1308                TX_failure_str[9]=0xA0;
   \   000E9A   740B         MOV     A,#0xb
   \   000E9C   12....       LCALL   ?XSTACK_DISP0_8
   \   000E9F   74A0         MOV     A,#-0x60
   \   000EA1   F0           MOVX    @DPTR,A
   1309            
   1310             
   1311          
   1312            if(command_str[5]=='1') //读取
   \   000EA2   8E82         MOV     DPL,R6
   \   000EA4   8F83         MOV     DPH,R7
   \   000EA6   A3           INC     DPTR
   \   000EA7   A3           INC     DPTR
   \   000EA8   A3           INC     DPTR
   \   000EA9   A3           INC     DPTR
   \   000EAA   A3           INC     DPTR
   \   000EAB   E0           MOVX    A,@DPTR
   \   000EAC   6431         XRL     A,#0x31
   \   000EAE   6003         JZ      $+5
   \   000EB0   02....       LJMP    ??APP_NORMAL_COMMAND_30 & 0xFFFF
   1313            {
   1314            TX_failure_str[10]=0x41; 
   \   000EB3   740C         MOV     A,#0xc
   \   000EB5   12....       LCALL   ?XSTACK_DISP0_8
   \   000EB8   7441         MOV     A,#0x41
   \   000EBA   F0           MOVX    @DPTR,A
   1315            TX_failure_str[11]= _NIB.nwkTotalTransmissions/256;
   \   000EBB   90....       MOV     DPTR,#_NIB + 107
   \   000EBE   E0           MOVX    A,@DPTR
   \   000EBF   F8           MOV     R0,A
   \   000EC0   A3           INC     DPTR
   \   000EC1   E0           MOVX    A,@DPTR
   \   000EC2   F9           MOV     R1,A
   \   000EC3   E4           CLR     A
   \   000EC4   E9           MOV     A,R1
   \   000EC5   F8           MOV     R0,A
   \   000EC6   C0E0         PUSH    A
   \   000EC8   740D         MOV     A,#0xd
   \   000ECA   12....       LCALL   ?XSTACK_DISP0_8
   \   000ECD   D0E0         POP     A
   \   000ECF   F0           MOVX    @DPTR,A
   1316            TX_failure_str[12]= _NIB.nwkTotalTransmissions%256;
   \   000ED0   90....       MOV     DPTR,#_NIB + 107
   \   000ED3   E0           MOVX    A,@DPTR
   \   000ED4   F8           MOV     R0,A
   \   000ED5   A3           INC     DPTR
   \   000ED6   E0           MOVX    A,@DPTR
   \   000ED7   F9           MOV     R1,A
   \   000ED8   7A00         MOV     R2,#0x0
   \   000EDA   7B01         MOV     R3,#0x1
   \   000EDC   12....       LCALL   ?US_DIV_MOD
   \   000EDF   EA           MOV     A,R2
   \   000EE0   C0E0         PUSH    A
   \   000EE2   740E         MOV     A,#0xe
   \   000EE4   12....       LCALL   ?XSTACK_DISP0_8
   \   000EE7   D0E0         POP     A
   \   000EE9   F0           MOVX    @DPTR,A
   1317            
   1318            uint16 app_txFailure=0;
   \   000EEA   7C00         MOV     R4,#0x0
   \   000EEC   7D00         MOV     R5,#0x0
   1319               for ( uint8 i = 0; i < gNWK_MAX_DEVICE_LIST; i++ )
   \   000EEE   7B00         MOV     R3,#0x0
   \                     ??APP_NORMAL_COMMAND_31:
   \   000EF0   8B..         MOV     ?V0 + 4,R3
   \   000EF2   75..00       MOV     ?V0 + 5,#0x0
   \   000EF5   90....       MOV     DPTR,#gNWK_MAX_DEVICE_LIST
   \   000EF8   E4           CLR     A
   \   000EF9   93           MOVC    A,@A+DPTR
   \   000EFA   F8           MOV     R0,A
   \   000EFB   7401         MOV     A,#0x1
   \   000EFD   93           MOVC    A,@A+DPTR
   \   000EFE   F9           MOV     R1,A
   \   000EFF   C3           CLR     C
   \   000F00   E5..         MOV     A,?V0 + 4
   \   000F02   98           SUBB    A,R0
   \   000F03   E5..         MOV     A,?V0 + 5
   \   000F05   99           SUBB    A,R1
   \   000F06   4003         JC      $+5
   \   000F08   02....       LJMP    ??APP_NORMAL_COMMAND_32 & 0xFFFF
   1320              {
   1321                if ( AssociatedDevList[i].nodeRelation != NOTUSED
   1322                     && AssociatedDevList[i].linkInfo.txFailure > 0 )
   \   000F0B   EB           MOV     A,R3
   \   000F0C   F8           MOV     R0,A
   \   000F0D   7900         MOV     R1,#0x0
   \   000F0F   E8           MOV     A,R0
   \   000F10   75F012       MOV     B,#0x12
   \   000F13   A4           MUL     AB
   \   000F14   C8           XCH     A,R0
   \   000F15   AAF0         MOV     R2,B
   \   000F17   75F000       MOV     B,#0x0
   \   000F1A   A4           MUL     AB
   \   000F1B   2A           ADD     A,R2
   \   000F1C   FA           MOV     R2,A
   \   000F1D   75F012       MOV     B,#0x12
   \   000F20   E9           MOV     A,R1
   \   000F21   A4           MUL     AB
   \   000F22   2A           ADD     A,R2
   \   000F23   F9           MOV     R1,A
   \   000F24   74..         MOV     A,#(AssociatedDevList + 4) & 0xff
   \   000F26   28           ADD     A,R0
   \   000F27   F582         MOV     DPL,A
   \   000F29   74..         MOV     A,#((AssociatedDevList + 4) >> 8) & 0xff
   \   000F2B   39           ADDC    A,R1
   \   000F2C   F583         MOV     DPH,A
   \   000F2E   E0           MOVX    A,@DPTR
   \   000F2F   64FF         XRL     A,#0xff
   \   000F31   6056         JZ      ??APP_NORMAL_COMMAND_33
   \   000F33   EB           MOV     A,R3
   \   000F34   F8           MOV     R0,A
   \   000F35   7900         MOV     R1,#0x0
   \   000F37   E8           MOV     A,R0
   \   000F38   75F012       MOV     B,#0x12
   \   000F3B   A4           MUL     AB
   \   000F3C   C8           XCH     A,R0
   \   000F3D   AAF0         MOV     R2,B
   \   000F3F   75F000       MOV     B,#0x0
   \   000F42   A4           MUL     AB
   \   000F43   2A           ADD     A,R2
   \   000F44   FA           MOV     R2,A
   \   000F45   75F012       MOV     B,#0x12
   \   000F48   E9           MOV     A,R1
   \   000F49   A4           MUL     AB
   \   000F4A   2A           ADD     A,R2
   \   000F4B   F9           MOV     R1,A
   \   000F4C   74..         MOV     A,#(AssociatedDevList + 16) & 0xff
   \   000F4E   28           ADD     A,R0
   \   000F4F   F582         MOV     DPL,A
   \   000F51   74..         MOV     A,#((AssociatedDevList + 16) >> 8) & 0xff
   \   000F53   39           ADDC    A,R1
   \   000F54   F583         MOV     DPH,A
   \   000F56   E0           MOVX    A,@DPTR
   \   000F57   F8           MOV     R0,A
   \   000F58   A3           INC     DPTR
   \   000F59   E0           MOVX    A,@DPTR
   \   000F5A   F9           MOV     R1,A
   \   000F5B   E8           MOV     A,R0
   \   000F5C   49           ORL     A,R1
   \   000F5D   602A         JZ      ??APP_NORMAL_COMMAND_33
   1323                {
   1324                    app_txFailure += AssociatedDevList[i].linkInfo.txFailure;
   \   000F5F   EB           MOV     A,R3
   \   000F60   F8           MOV     R0,A
   \   000F61   7900         MOV     R1,#0x0
   \   000F63   E8           MOV     A,R0
   \   000F64   75F012       MOV     B,#0x12
   \   000F67   A4           MUL     AB
   \   000F68   C8           XCH     A,R0
   \   000F69   AAF0         MOV     R2,B
   \   000F6B   75F000       MOV     B,#0x0
   \   000F6E   A4           MUL     AB
   \   000F6F   2A           ADD     A,R2
   \   000F70   FA           MOV     R2,A
   \   000F71   75F012       MOV     B,#0x12
   \   000F74   E9           MOV     A,R1
   \   000F75   A4           MUL     AB
   \   000F76   2A           ADD     A,R2
   \   000F77   F9           MOV     R1,A
   \   000F78   74..         MOV     A,#(AssociatedDevList + 16) & 0xff
   \   000F7A   28           ADD     A,R0
   \   000F7B   F582         MOV     DPL,A
   \   000F7D   74..         MOV     A,#((AssociatedDevList + 16) >> 8) & 0xff
   \   000F7F   39           ADDC    A,R1
   \   000F80   F583         MOV     DPH,A
   \   000F82   E0           MOVX    A,@DPTR
   \   000F83   2C           ADD     A,R4
   \   000F84   FC           MOV     R4,A
   \   000F85   A3           INC     DPTR
   \   000F86   E0           MOVX    A,@DPTR
   \   000F87   3D           ADDC    A,R5
   \   000F88   FD           MOV     R5,A
   1325                }
   1326              }
   \                     ??APP_NORMAL_COMMAND_33:
   \   000F89   0B           INC     R3
   \   000F8A   02....       LJMP    ??APP_NORMAL_COMMAND_31 & 0xFFFF
   1327          
   1328              // Sum up the transmission failures in the neighbor table
   1329              for ( uint8 i = 0; i < gMAX_NEIGHBOR_ENTRIES; i++ )
   \                     ??APP_NORMAL_COMMAND_32:
   \   000F8D   7B00         MOV     R3,#0x0
   \                     ??APP_NORMAL_COMMAND_34:
   \   000F8F   90....       MOV     DPTR,#gMAX_NEIGHBOR_ENTRIES
   \   000F92   E4           CLR     A
   \   000F93   93           MOVC    A,@A+DPTR
   \   000F94   F8           MOV     R0,A
   \   000F95   EB           MOV     A,R3
   \   000F96   C3           CLR     C
   \   000F97   98           SUBB    A,R0
   \   000F98   4003         JC      $+5
   \   000F9A   02....       LJMP    ??APP_NORMAL_COMMAND_35 & 0xFFFF
   1330              {
   1331                if ( neighborTable[i].neighborAddress != INVALID_NODE_ADDR
   1332                     /*&& neighborTable[i].linkInfo.txCost > 0
   1333                     && neighborTable[i].linkInfo.txCost < MAX_LINK_COST*/
   1334                     && neighborTable[i].linkInfo.txFailure > 0 )
   \   000F9D   EB           MOV     A,R3
   \   000F9E   F8           MOV     R0,A
   \   000F9F   7900         MOV     R1,#0x0
   \   000FA1   E8           MOV     A,R0
   \   000FA2   75F017       MOV     B,#0x17
   \   000FA5   A4           MUL     AB
   \   000FA6   C8           XCH     A,R0
   \   000FA7   AAF0         MOV     R2,B
   \   000FA9   75F000       MOV     B,#0x0
   \   000FAC   A4           MUL     AB
   \   000FAD   2A           ADD     A,R2
   \   000FAE   FA           MOV     R2,A
   \   000FAF   75F017       MOV     B,#0x17
   \   000FB2   E9           MOV     A,R1
   \   000FB3   A4           MUL     AB
   \   000FB4   2A           ADD     A,R2
   \   000FB5   F9           MOV     R1,A
   \   000FB6   74..         MOV     A,#neighborTable & 0xff
   \   000FB8   28           ADD     A,R0
   \   000FB9   F582         MOV     DPL,A
   \   000FBB   74..         MOV     A,#(neighborTable >> 8) & 0xff
   \   000FBD   39           ADDC    A,R1
   \   000FBE   F583         MOV     DPH,A
   \   000FC0   E0           MOVX    A,@DPTR
   \   000FC1   64FE         XRL     A,#0xfe
   \   000FC3   7004         JNZ     ??APP_NORMAL_COMMAND_36
   \   000FC5   A3           INC     DPTR
   \   000FC6   E0           MOVX    A,@DPTR
   \   000FC7   64FF         XRL     A,#0xff
   \                     ??APP_NORMAL_COMMAND_36:
   \   000FC9   6056         JZ      ??APP_NORMAL_COMMAND_37
   \   000FCB   EB           MOV     A,R3
   \   000FCC   F8           MOV     R0,A
   \   000FCD   7900         MOV     R1,#0x0
   \   000FCF   E8           MOV     A,R0
   \   000FD0   75F017       MOV     B,#0x17
   \   000FD3   A4           MUL     AB
   \   000FD4   C8           XCH     A,R0
   \   000FD5   AAF0         MOV     R2,B
   \   000FD7   75F000       MOV     B,#0x0
   \   000FDA   A4           MUL     AB
   \   000FDB   2A           ADD     A,R2
   \   000FDC   FA           MOV     R2,A
   \   000FDD   75F017       MOV     B,#0x17
   \   000FE0   E9           MOV     A,R1
   \   000FE1   A4           MUL     AB
   \   000FE2   2A           ADD     A,R2
   \   000FE3   F9           MOV     R1,A
   \   000FE4   74..         MOV     A,#(neighborTable + 21) & 0xff
   \   000FE6   28           ADD     A,R0
   \   000FE7   F582         MOV     DPL,A
   \   000FE9   74..         MOV     A,#((neighborTable + 21) >> 8) & 0xff
   \   000FEB   39           ADDC    A,R1
   \   000FEC   F583         MOV     DPH,A
   \   000FEE   E0           MOVX    A,@DPTR
   \   000FEF   F8           MOV     R0,A
   \   000FF0   A3           INC     DPTR
   \   000FF1   E0           MOVX    A,@DPTR
   \   000FF2   F9           MOV     R1,A
   \   000FF3   E8           MOV     A,R0
   \   000FF4   49           ORL     A,R1
   \   000FF5   602A         JZ      ??APP_NORMAL_COMMAND_37
   1335                {
   1336                    app_txFailure += neighborTable[i].linkInfo.txFailure;
   \   000FF7   EB           MOV     A,R3
   \   000FF8   F8           MOV     R0,A
   \   000FF9   7900         MOV     R1,#0x0
   \   000FFB   E8           MOV     A,R0
   \   000FFC   75F017       MOV     B,#0x17
   \   000FFF   A4           MUL     AB
   \   001000   C8           XCH     A,R0
   \   001001   AAF0         MOV     R2,B
   \   001003   75F000       MOV     B,#0x0
   \   001006   A4           MUL     AB
   \   001007   2A           ADD     A,R2
   \   001008   FA           MOV     R2,A
   \   001009   75F017       MOV     B,#0x17
   \   00100C   E9           MOV     A,R1
   \   00100D   A4           MUL     AB
   \   00100E   2A           ADD     A,R2
   \   00100F   F9           MOV     R1,A
   \   001010   74..         MOV     A,#(neighborTable + 21) & 0xff
   \   001012   28           ADD     A,R0
   \   001013   F582         MOV     DPL,A
   \   001015   74..         MOV     A,#((neighborTable + 21) >> 8) & 0xff
   \   001017   39           ADDC    A,R1
   \   001018   F583         MOV     DPH,A
   \   00101A   E0           MOVX    A,@DPTR
   \   00101B   2C           ADD     A,R4
   \   00101C   FC           MOV     R4,A
   \   00101D   A3           INC     DPTR
   \   00101E   E0           MOVX    A,@DPTR
   \   00101F   3D           ADDC    A,R5
   \   001020   FD           MOV     R5,A
   1337                }
   1338              }
   \                     ??APP_NORMAL_COMMAND_37:
   \   001021   0B           INC     R3
   \   001022   02....       LJMP    ??APP_NORMAL_COMMAND_34 & 0xFFFF
   1339          
   1340            
   1341            TX_failure_str[13]= app_txFailure/256;
   \                     ??APP_NORMAL_COMMAND_35:
   \   001025   EC           MOV     A,R4
   \   001026   F8           MOV     R0,A
   \   001027   ED           MOV     A,R5
   \   001028   F9           MOV     R1,A
   \   001029   E4           CLR     A
   \   00102A   E9           MOV     A,R1
   \   00102B   F8           MOV     R0,A
   \   00102C   C0E0         PUSH    A
   \   00102E   740F         MOV     A,#0xf
   \   001030   12....       LCALL   ?XSTACK_DISP0_8
   \   001033   D0E0         POP     A
   \   001035   F0           MOVX    @DPTR,A
   1342            TX_failure_str[14]= app_txFailure%256;
   \   001036   EC           MOV     A,R4
   \   001037   F8           MOV     R0,A
   \   001038   ED           MOV     A,R5
   \   001039   F9           MOV     R1,A
   \   00103A   7A00         MOV     R2,#0x0
   \   00103C   7B01         MOV     R3,#0x1
   \   00103E   12....       LCALL   ?US_DIV_MOD
   \   001041   EA           MOV     A,R2
   \   001042   C0E0         PUSH    A
   \   001044   7410         MOV     A,#0x10
   \   001046   12....       LCALL   ?XSTACK_DISP0_8
   \   001049   D0E0         POP     A
   \   00104B   F0           MOVX    @DPTR,A
   1343            active_count = 15;
   \   00104C   75..0F       MOV     ?V0 + 2,#0xf
   \   00104F   02....       LJMP    ??APP_NORMAL_COMMAND_38 & 0xFFFF
   1344              
   1345            }
   1346            else if(command_str[5]=='2') //配置
   \                     ??APP_NORMAL_COMMAND_30:
   \   001052   8E82         MOV     DPL,R6
   \   001054   8F83         MOV     DPH,R7
   \   001056   A3           INC     DPTR
   \   001057   A3           INC     DPTR
   \   001058   A3           INC     DPTR
   \   001059   A3           INC     DPTR
   \   00105A   A3           INC     DPTR
   \   00105B   E0           MOVX    A,@DPTR
   \   00105C   6432         XRL     A,#0x32
   \   00105E   6003         JZ      $+5
   \   001060   02....       LJMP    ??APP_NORMAL_COMMAND_38 & 0xFFFF
   1347            {
   1348            uint16 set_tx_total_count=0;
   \   001063   7C00         MOV     R4,#0x0
   \   001065   7D00         MOV     R5,#0x0
   1349            TX_failure_str[10]=0x42; 
   \   001067   740C         MOV     A,#0xc
   \   001069   12....       LCALL   ?XSTACK_DISP0_8
   \   00106C   7442         MOV     A,#0x42
   \   00106E   F0           MOVX    @DPTR,A
   1350            set_tx_total_count = (command_str[6]-0x30)*100 + (command_str[7]-0x30)*10 + (command_str[8]-0x30);
   \   00106F   8E82         MOV     DPL,R6
   \   001071   8F83         MOV     DPH,R7
   \   001073   A3           INC     DPTR
   \   001074   A3           INC     DPTR
   \   001075   A3           INC     DPTR
   \   001076   A3           INC     DPTR
   \   001077   A3           INC     DPTR
   \   001078   A3           INC     DPTR
   \   001079   E0           MOVX    A,@DPTR
   \   00107A   F8           MOV     R0,A
   \   00107B   7900         MOV     R1,#0x0
   \   00107D   E8           MOV     A,R0
   \   00107E   75F064       MOV     B,#0x64
   \   001081   A4           MUL     AB
   \   001082   C8           XCH     A,R0
   \   001083   AAF0         MOV     R2,B
   \   001085   75F000       MOV     B,#0x0
   \   001088   A4           MUL     AB
   \   001089   2A           ADD     A,R2
   \   00108A   FA           MOV     R2,A
   \   00108B   75F064       MOV     B,#0x64
   \   00108E   E9           MOV     A,R1
   \   00108F   A4           MUL     AB
   \   001090   2A           ADD     A,R2
   \   001091   F9           MOV     R1,A
   \   001092   8E82         MOV     DPL,R6
   \   001094   8F83         MOV     DPH,R7
   \   001096   A3           INC     DPTR
   \   001097   A3           INC     DPTR
   \   001098   A3           INC     DPTR
   \   001099   A3           INC     DPTR
   \   00109A   A3           INC     DPTR
   \   00109B   A3           INC     DPTR
   \   00109C   A3           INC     DPTR
   \   00109D   E0           MOVX    A,@DPTR
   \   00109E   FA           MOV     R2,A
   \   00109F   7B00         MOV     R3,#0x0
   \   0010A1   EA           MOV     A,R2
   \   0010A2   75F00A       MOV     B,#0xa
   \   0010A5   A4           MUL     AB
   \   0010A6   CA           XCH     A,R2
   \   0010A7   85F0..       MOV     ?V0 + 3,B
   \   0010AA   75F000       MOV     B,#0x0
   \   0010AD   A4           MUL     AB
   \   0010AE   25..         ADD     A,?V0 + 3
   \   0010B0   F5..         MOV     ?V0 + 3,A
   \   0010B2   75F00A       MOV     B,#0xa
   \   0010B5   EB           MOV     A,R3
   \   0010B6   A4           MUL     AB
   \   0010B7   25..         ADD     A,?V0 + 3
   \   0010B9   FB           MOV     R3,A
   \   0010BA   E8           MOV     A,R0
   \   0010BB   2A           ADD     A,R2
   \   0010BC   F8           MOV     R0,A
   \   0010BD   E9           MOV     A,R1
   \   0010BE   3B           ADDC    A,R3
   \   0010BF   F9           MOV     R1,A
   \   0010C0   8E82         MOV     DPL,R6
   \   0010C2   8F83         MOV     DPH,R7
   \   0010C4   A3           INC     DPTR
   \   0010C5   A3           INC     DPTR
   \   0010C6   A3           INC     DPTR
   \   0010C7   A3           INC     DPTR
   \   0010C8   A3           INC     DPTR
   \   0010C9   A3           INC     DPTR
   \   0010CA   A3           INC     DPTR
   \   0010CB   A3           INC     DPTR
   \   0010CC   E0           MOVX    A,@DPTR
   \   0010CD   FA           MOV     R2,A
   \   0010CE   7B00         MOV     R3,#0x0
   \   0010D0   E8           MOV     A,R0
   \   0010D1   2A           ADD     A,R2
   \   0010D2   F8           MOV     R0,A
   \   0010D3   E9           MOV     A,R1
   \   0010D4   3B           ADDC    A,R3
   \   0010D5   F9           MOV     R1,A
   \   0010D6   E8           MOV     A,R0
   \   0010D7   2430         ADD     A,#0x30
   \   0010D9   F8           MOV     R0,A
   \   0010DA   E9           MOV     A,R1
   \   0010DB   34EB         ADDC    A,#-0x15
   \   0010DD   F9           MOV     R1,A
   \   0010DE   E8           MOV     A,R0
   \   0010DF   FC           MOV     R4,A
   \   0010E0   E9           MOV     A,R1
   \   0010E1   FD           MOV     R5,A
   1351           // set_CI_TX_FAILURE = (pkt->cmd.Data[16]-0x30)*100 + (pkt->cmd.Data[17]-0x30)*10 + (pkt->cmd.Data[18]-0x30);
   1352            
   1353            zgNwkMgrMinTransmissions = set_tx_total_count;
   \   0010E2   EC           MOV     A,R4
   \   0010E3   90....       MOV     DPTR,#zgNwkMgrMinTransmissions
   \   0010E6   F0           MOVX    @DPTR,A
   1354            TX_failure_str[11]= set_tx_total_count/256;
   \   0010E7   EC           MOV     A,R4
   \   0010E8   F8           MOV     R0,A
   \   0010E9   ED           MOV     A,R5
   \   0010EA   F9           MOV     R1,A
   \   0010EB   E4           CLR     A
   \   0010EC   E9           MOV     A,R1
   \   0010ED   F8           MOV     R0,A
   \   0010EE   C0E0         PUSH    A
   \   0010F0   740D         MOV     A,#0xd
   \   0010F2   12....       LCALL   ?XSTACK_DISP0_8
   \   0010F5   D0E0         POP     A
   \   0010F7   F0           MOVX    @DPTR,A
   1355            TX_failure_str[12]= set_tx_total_count%256;
   \   0010F8   EC           MOV     A,R4
   \   0010F9   F8           MOV     R0,A
   \   0010FA   ED           MOV     A,R5
   \   0010FB   F9           MOV     R1,A
   \   0010FC   7A00         MOV     R2,#0x0
   \   0010FE   7B01         MOV     R3,#0x1
   \   001100   12....       LCALL   ?US_DIV_MOD
   \   001103   EA           MOV     A,R2
   \   001104   C0E0         PUSH    A
   \   001106   740E         MOV     A,#0xe
   \   001108   12....       LCALL   ?XSTACK_DISP0_8
   \   00110B   D0E0         POP     A
   \   00110D   F0           MOVX    @DPTR,A
   1356            TX_failure_str[13]= 0;
   \   00110E   740F         MOV     A,#0xf
   \   001110   12....       LCALL   ?XSTACK_DISP0_8
   \   001113   7400         MOV     A,#0x0
   \   001115   F0           MOVX    @DPTR,A
   1357            TX_failure_str[14]= 25;
   \   001116   7410         MOV     A,#0x10
   \   001118   12....       LCALL   ?XSTACK_DISP0_8
   \   00111B   7419         MOV     A,#0x19
   \   00111D   F0           MOVX    @DPTR,A
   1358            active_count = 15;
   \   00111E   75..0F       MOV     ?V0 + 2,#0xf
   1359            }
   1360            
   1361            /*
   1362             else if(pkt->cmd.Data[13]=='3') //test
   1363             {  
   1364                Period_Time_Set = 100*(pkt->cmd.Data[14]-'0')+10*(pkt->cmd.Data[15]-'0')+pkt->cmd.Data[16]-'0';
   1365                Period_Time_minute = Period_Time_Set/60;
   1366                Period_Time_second = Period_Time_Set%60;
   1367          
   1368                if(Period_Time_Set > 0)
   1369                {  
   1370                  Second_expend_flag =0 ;
   1371                  osal_start_timerEx( SampleApp_TaskID, PERIOD_SEND_TXTEST_VALUE_EVT,100 );
   1372                }
   1373                else 
   1374                {
   1375                  osal_stop_timerEx( SampleApp_TaskID, PERIOD_SEND_TXTEST_VALUE_EVT);
   1376                } 
   1377             }
   1378                   
   1379            }  
   1380          */
   1381            
   1382                SampleApp_SPI_SendCommand_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \                     ??APP_NORMAL_COMMAND_38:
   \   001121   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 8
   \   001124   7402         MOV     A,#0x2
   \   001126   F0           MOVX    @DPTR,A
   1383                SampleApp_SPI_SendCommand_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   001127   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 9
   \   00112A   7414         MOV     A,#0x14
   \   00112C   F0           MOVX    @DPTR,A
   1384                SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;
   \   00112D   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr
   \   001130   7400         MOV     A,#0x0
   \   001132   F0           MOVX    @DPTR,A
   \   001133   A3           INC     DPTR
   \   001134   7400         MOV     A,#0x0
   \   001136   F0           MOVX    @DPTR,A
   1385              //   SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = pkt->srcAddr.addr.shortAddr;//发送给来的设备
   1386                
   1387                if ( AF_DataRequest( &SampleApp_SPI_SendCommand_DstAddr,
   1388                                    (endPointDesc_t *)&SampleApp_epDesc,
   1389                                    SAMPLEAPP_COMMAND_CLUSTERID, //终端传过去，协调器处理了
   1390                                    active_count, TX_failure_str,
   1391                                    &SampleApp_TransID, 
   1392                                    AF_DISCV_ROUTE, 
   1393                                    AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   001137                ; Setup parameters for call to function AF_DataRequest
   \   001137   75..0F       MOV     ?V0 + 3,#0xf
   \   00113A   78..         MOV     R0,#?V0 + 3
   \   00113C   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00113F   75....       MOV     ?V0 + 4,#SampleApp_TransID & 0xff
   \   001142   75....       MOV     ?V0 + 5,#(SampleApp_TransID >> 8) & 0xff
   \   001145   78..         MOV     R0,#?V0 + 4
   \   001147   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00114A   7405         MOV     A,#0x5
   \   00114C   12....       LCALL   ?XSTACK_DISP0_8
   \   00114F   8582..       MOV     ?V0 + 4,DPL
   \   001152   8583..       MOV     ?V0 + 5,DPH
   \   001155   78..         MOV     R0,#?V0 + 4
   \   001157   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00115A   85....       MOV     ?V0 + 4,?V0 + 2
   \   00115D   75..00       MOV     ?V0 + 5,#0x0
   \   001160   78..         MOV     R0,#?V0 + 4
   \   001162   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   001165   75..04       MOV     ?V0 + 4,#0x4
   \   001168   75..00       MOV     ?V0 + 5,#0x0
   \   00116B   78..         MOV     R0,#?V0 + 4
   \   00116D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   001170   7920         MOV     R1,#0x20
   \   001172   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   001174   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   001176   7A..         MOV     R2,#SampleApp_SPI_SendCommand_DstAddr & 0xff
   \   001178   7B..         MOV     R3,#(SampleApp_SPI_SendCommand_DstAddr >> 8) & 0xff
   \   00117A   12....       LCALL   ??AF_DataRequest?relay
   \   00117D   7409         MOV     A,#0x9
   \   00117F   12....       LCALL   ?DEALLOC_XSTACK8
   \   001182   E9           MOV     A,R1
   \   001183   C0E0         PUSH    A
   \   001185   7401         MOV     A,#0x1
   \   001187   12....       LCALL   ?XSTACK_DISP0_8
   \   00118A   D0E0         POP     A
   \   00118C   F0           MOVX    @DPTR,A
   1394                {
   1395                }
   1396                else
   1397                {
   1398                }  
   1399            }
   1400          
   1401            
   1402          
   1403          
   1404            
   1405          }
   \                     ??APP_NORMAL_COMMAND_6:
   \   00118D   7442         MOV     A,#0x42
   \   00118F   12....       LCALL   ?DEALLOC_XSTACK8
   \   001192   7F0A         MOV     R7,#0xa
   \   001194   02....       LJMP    ?BANKED_LEAVE_XDATA
   1406          
   1407          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1408          void zb_StartRequest()
   \                     zb_StartRequest:
   1409          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   1410            // uint8 logicalType1;
   1411            uint8 zgStartDelay = START_DELAY;
   \   000005   7E0A         MOV     R6,#0xa
   1412            
   1413            devState = DEV_INIT;
   \   000007   90....       MOV     DPTR,#devState
   \   00000A   7401         MOV     A,#0x1
   \   00000C   F0           MOVX    @DPTR,A
   1414            ZDOInitDevice(zgStartDelay);
   \   00000D                ; Setup parameters for call to function ZDOInitDevice
   \   00000D   8E..         MOV     ?V0 + 0,R6
   \   00000F   75..00       MOV     ?V0 + 1,#0x0
   \   000012   AA..         MOV     R2,?V0 + 0
   \   000014   AB..         MOV     R3,?V0 + 1
   \   000016   12....       LCALL   ??ZDOInitDevice?relay
   \   000019   E9           MOV     A,R1
   1415            
   1416            // }
   1417            
   1418            
   1419            return;
   \   00001A   7F02         MOV     R7,#0x2
   \   00001C   02....       LJMP    ?BANKED_LEAVE_XDATA
   1420          }
   1421          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1422          void APP_DEAL_WITH_ASSOCIATED(void)
   \                     APP_DEAL_WITH_ASSOCIATED:
   1423          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   1424            uint8 nr;
   1425            for(uint8 i=0;i<NWK_MAX_DEVICES;i++)
   \   000005   7F00         MOV     R7,#0x0
   \                     ??APP_DEAL_WITH_ASSOCIATED_0:
   \   000007   EF           MOV     A,R7
   \   000008   C3           CLR     C
   \   000009   9415         SUBB    A,#0x15
   \   00000B   4003         JC      $+5
   \   00000D   02....       LJMP    ??APP_DEAL_WITH_ASSOCIATED_1 & 0xFFFF
   1426            {
   1427              nr =  AssociatedDevList[i].nodeRelation;
   \   000010   EF           MOV     A,R7
   \   000011   F8           MOV     R0,A
   \   000012   7900         MOV     R1,#0x0
   \   000014   E8           MOV     A,R0
   \   000015   75F012       MOV     B,#0x12
   \   000018   A4           MUL     AB
   \   000019   C8           XCH     A,R0
   \   00001A   AAF0         MOV     R2,B
   \   00001C   75F000       MOV     B,#0x0
   \   00001F   A4           MUL     AB
   \   000020   2A           ADD     A,R2
   \   000021   FA           MOV     R2,A
   \   000022   75F012       MOV     B,#0x12
   \   000025   E9           MOV     A,R1
   \   000026   A4           MUL     AB
   \   000027   2A           ADD     A,R2
   \   000028   F9           MOV     R1,A
   \   000029   74..         MOV     A,#(AssociatedDevList + 4) & 0xff
   \   00002B   28           ADD     A,R0
   \   00002C   F582         MOV     DPL,A
   \   00002E   74..         MOV     A,#((AssociatedDevList + 4) >> 8) & 0xff
   \   000030   39           ADDC    A,R1
   \   000031   F583         MOV     DPH,A
   \   000033   E0           MOVX    A,@DPTR
   \   000034   FE           MOV     R6,A
   1428              if (nr == CHILD_RFD || nr == CHILD_RFD_RX_IDLE)// || nr == CHILD_FFD || nr == CHILD_FFD_RX_IDLE)
   \   000035   7401         MOV     A,#0x1
   \   000037   6E           XRL     A,R6
   \   000038   6008         JZ      ??APP_DEAL_WITH_ASSOCIATED_2
   \   00003A   7402         MOV     A,#0x2
   \   00003C   6E           XRL     A,R6
   \   00003D   6003         JZ      $+5
   \   00003F   02....       LJMP    ??APP_DEAL_WITH_ASSOCIATED_3 & 0xFFFF
   1429              {
   1430                Child_list[i].heart_count++;
   \                     ??APP_DEAL_WITH_ASSOCIATED_2:
   \   000042   EF           MOV     A,R7
   \   000043   F8           MOV     R0,A
   \   000044   7900         MOV     R1,#0x0
   \   000046   E8           MOV     A,R0
   \   000047   75F002       MOV     B,#0x2
   \   00004A   A4           MUL     AB
   \   00004B   C8           XCH     A,R0
   \   00004C   AAF0         MOV     R2,B
   \   00004E   75F000       MOV     B,#0x0
   \   000051   A4           MUL     AB
   \   000052   2A           ADD     A,R2
   \   000053   FA           MOV     R2,A
   \   000054   75F002       MOV     B,#0x2
   \   000057   E9           MOV     A,R1
   \   000058   A4           MUL     AB
   \   000059   2A           ADD     A,R2
   \   00005A   F9           MOV     R1,A
   \   00005B   74..         MOV     A,#(Child_list + 1) & 0xff
   \   00005D   28           ADD     A,R0
   \   00005E   F582         MOV     DPL,A
   \   000060   74..         MOV     A,#((Child_list + 1) >> 8) & 0xff
   \   000062   39           ADDC    A,R1
   \   000063   F583         MOV     DPH,A
   \   000065   E0           MOVX    A,@DPTR
   \   000066   2401         ADD     A,#0x1
   \   000068   F0           MOVX    @DPTR,A
   1431                
   1432                if  (Child_list[i].heart_count>=4)
   \   000069   EF           MOV     A,R7
   \   00006A   F8           MOV     R0,A
   \   00006B   7900         MOV     R1,#0x0
   \   00006D   E8           MOV     A,R0
   \   00006E   75F002       MOV     B,#0x2
   \   000071   A4           MUL     AB
   \   000072   C8           XCH     A,R0
   \   000073   AAF0         MOV     R2,B
   \   000075   75F000       MOV     B,#0x0
   \   000078   A4           MUL     AB
   \   000079   2A           ADD     A,R2
   \   00007A   FA           MOV     R2,A
   \   00007B   75F002       MOV     B,#0x2
   \   00007E   E9           MOV     A,R1
   \   00007F   A4           MUL     AB
   \   000080   2A           ADD     A,R2
   \   000081   F9           MOV     R1,A
   \   000082   74..         MOV     A,#(Child_list + 1) & 0xff
   \   000084   28           ADD     A,R0
   \   000085   F582         MOV     DPL,A
   \   000087   74..         MOV     A,#((Child_list + 1) >> 8) & 0xff
   \   000089   39           ADDC    A,R1
   \   00008A   F583         MOV     DPH,A
   \   00008C   E0           MOVX    A,@DPTR
   \   00008D   C3           CLR     C
   \   00008E   9404         SUBB    A,#0x4
   \   000090   5003         JNC     $+5
   \   000092   02....       LJMP    ??APP_DEAL_WITH_ASSOCIATED_4 & 0xFFFF
   1433                {  
   1434                  if(RemoveStaleNode(AssociatedDevList[i].addrIdx))
   \   000095                ; Setup parameters for call to function RemoveStaleNode
   \   000095   EF           MOV     A,R7
   \   000096   F8           MOV     R0,A
   \   000097   7900         MOV     R1,#0x0
   \   000099   E8           MOV     A,R0
   \   00009A   75F012       MOV     B,#0x12
   \   00009D   A4           MUL     AB
   \   00009E   C8           XCH     A,R0
   \   00009F   AAF0         MOV     R2,B
   \   0000A1   75F000       MOV     B,#0x0
   \   0000A4   A4           MUL     AB
   \   0000A5   2A           ADD     A,R2
   \   0000A6   FA           MOV     R2,A
   \   0000A7   75F012       MOV     B,#0x12
   \   0000AA   E9           MOV     A,R1
   \   0000AB   A4           MUL     AB
   \   0000AC   2A           ADD     A,R2
   \   0000AD   F9           MOV     R1,A
   \   0000AE   74..         MOV     A,#(AssociatedDevList + 2) & 0xff
   \   0000B0   28           ADD     A,R0
   \   0000B1   F582         MOV     DPL,A
   \   0000B3   74..         MOV     A,#((AssociatedDevList + 2) >> 8) & 0xff
   \   0000B5   39           ADDC    A,R1
   \   0000B6   F583         MOV     DPH,A
   \   0000B8   E0           MOVX    A,@DPTR
   \   0000B9   F8           MOV     R0,A
   \   0000BA   A3           INC     DPTR
   \   0000BB   E0           MOVX    A,@DPTR
   \   0000BC   F9           MOV     R1,A
   \   0000BD   E8           MOV     A,R0
   \   0000BE   F9           MOV     R1,A
   \   0000BF   12....       LCALL   ??RemoveStaleNode?relay
   \   0000C2   E9           MOV     A,R1
   \   0000C3   7003         JNZ     $+5
   \   0000C5   02....       LJMP    ??APP_DEAL_WITH_ASSOCIATED_4 & 0xFFFF
   1435                  {
   1436                    Child_list[i].heart_count=0;
   \   0000C8   EF           MOV     A,R7
   \   0000C9   F8           MOV     R0,A
   \   0000CA   7900         MOV     R1,#0x0
   \   0000CC   E8           MOV     A,R0
   \   0000CD   75F002       MOV     B,#0x2
   \   0000D0   A4           MUL     AB
   \   0000D1   C8           XCH     A,R0
   \   0000D2   AAF0         MOV     R2,B
   \   0000D4   75F000       MOV     B,#0x0
   \   0000D7   A4           MUL     AB
   \   0000D8   2A           ADD     A,R2
   \   0000D9   FA           MOV     R2,A
   \   0000DA   75F002       MOV     B,#0x2
   \   0000DD   E9           MOV     A,R1
   \   0000DE   A4           MUL     AB
   \   0000DF   2A           ADD     A,R2
   \   0000E0   F9           MOV     R1,A
   \   0000E1   74..         MOV     A,#(Child_list + 1) & 0xff
   \   0000E3   28           ADD     A,R0
   \   0000E4   F582         MOV     DPL,A
   \   0000E6   74..         MOV     A,#((Child_list + 1) >> 8) & 0xff
   \   0000E8   39           ADDC    A,R1
   \   0000E9   F583         MOV     DPH,A
   \   0000EB   7400         MOV     A,#0x0
   \   0000ED   F0           MOVX    @DPTR,A
   \   0000EE   02....       LJMP    ??APP_DEAL_WITH_ASSOCIATED_4 & 0xFFFF
   1437                    //   break;  //test 删除一个后先跳出，等待下一次删除另外一个。错开时间
   1438                  }
   1439                }
   1440              }
   1441              
   1442              else if( nr == CHILD_FFD || nr == CHILD_FFD_RX_IDLE)
   \                     ??APP_DEAL_WITH_ASSOCIATED_3:
   \   0000F1   7403         MOV     A,#0x3
   \   0000F3   6E           XRL     A,R6
   \   0000F4   6005         JZ      ??APP_DEAL_WITH_ASSOCIATED_5
   \   0000F6   7404         MOV     A,#0x4
   \   0000F8   6E           XRL     A,R6
   \   0000F9   707F         JNZ     ??APP_DEAL_WITH_ASSOCIATED_4
   1443              {
   1444                //对于FFD设备需要通过LINK STATE的信号来判断AGE的值从而达到清除的目的 也就是4*15=60S,60S内没收到这个设备的LINK STATE 则清除 2012 8 12 
   1445                if ( AssociatedDevList[i].age > 8 )//对于FFD设备需要通过LINK STATE的信号来判断AGE的值从而达到清除的目的 2012 8 12
   \                     ??APP_DEAL_WITH_ASSOCIATED_5:
   \   0000FB   EF           MOV     A,R7
   \   0000FC   F8           MOV     R0,A
   \   0000FD   7900         MOV     R1,#0x0
   \   0000FF   E8           MOV     A,R0
   \   000100   75F012       MOV     B,#0x12
   \   000103   A4           MUL     AB
   \   000104   C8           XCH     A,R0
   \   000105   AAF0         MOV     R2,B
   \   000107   75F000       MOV     B,#0x0
   \   00010A   A4           MUL     AB
   \   00010B   2A           ADD     A,R2
   \   00010C   FA           MOV     R2,A
   \   00010D   75F012       MOV     B,#0x12
   \   000110   E9           MOV     A,R1
   \   000111   A4           MUL     AB
   \   000112   2A           ADD     A,R2
   \   000113   F9           MOV     R1,A
   \   000114   74..         MOV     A,#(AssociatedDevList + 7) & 0xff
   \   000116   28           ADD     A,R0
   \   000117   F582         MOV     DPL,A
   \   000119   74..         MOV     A,#((AssociatedDevList + 7) >> 8) & 0xff
   \   00011B   39           ADDC    A,R1
   \   00011C   F583         MOV     DPH,A
   \   00011E   E0           MOVX    A,@DPTR
   \   00011F   C3           CLR     C
   \   000120   9409         SUBB    A,#0x9
   \   000122   4056         JC      ??APP_DEAL_WITH_ASSOCIATED_4
   1446                {    
   1447                  if(RemoveStaleNode(AssociatedDevList[i].addrIdx))//do noting,because router can,t be removed now
   \   000124                ; Setup parameters for call to function RemoveStaleNode
   \   000124   EF           MOV     A,R7
   \   000125   F8           MOV     R0,A
   \   000126   7900         MOV     R1,#0x0
   \   000128   E8           MOV     A,R0
   \   000129   75F012       MOV     B,#0x12
   \   00012C   A4           MUL     AB
   \   00012D   C8           XCH     A,R0
   \   00012E   AAF0         MOV     R2,B
   \   000130   75F000       MOV     B,#0x0
   \   000133   A4           MUL     AB
   \   000134   2A           ADD     A,R2
   \   000135   FA           MOV     R2,A
   \   000136   75F012       MOV     B,#0x12
   \   000139   E9           MOV     A,R1
   \   00013A   A4           MUL     AB
   \   00013B   2A           ADD     A,R2
   \   00013C   F9           MOV     R1,A
   \   00013D   74..         MOV     A,#(AssociatedDevList + 2) & 0xff
   \   00013F   28           ADD     A,R0
   \   000140   F582         MOV     DPL,A
   \   000142   74..         MOV     A,#((AssociatedDevList + 2) >> 8) & 0xff
   \   000144   39           ADDC    A,R1
   \   000145   F583         MOV     DPH,A
   \   000147   E0           MOVX    A,@DPTR
   \   000148   F8           MOV     R0,A
   \   000149   A3           INC     DPTR
   \   00014A   E0           MOVX    A,@DPTR
   \   00014B   F9           MOV     R1,A
   \   00014C   E8           MOV     A,R0
   \   00014D   F9           MOV     R1,A
   \   00014E   12....       LCALL   ??RemoveStaleNode?relay
   \   000151   E9           MOV     A,R1
   \   000152   6026         JZ      ??APP_DEAL_WITH_ASSOCIATED_4
   1448                  {
   1449                    Child_list[i].heart_count=0;
   \   000154   EF           MOV     A,R7
   \   000155   F8           MOV     R0,A
   \   000156   7900         MOV     R1,#0x0
   \   000158   E8           MOV     A,R0
   \   000159   75F002       MOV     B,#0x2
   \   00015C   A4           MUL     AB
   \   00015D   C8           XCH     A,R0
   \   00015E   AAF0         MOV     R2,B
   \   000160   75F000       MOV     B,#0x0
   \   000163   A4           MUL     AB
   \   000164   2A           ADD     A,R2
   \   000165   FA           MOV     R2,A
   \   000166   75F002       MOV     B,#0x2
   \   000169   E9           MOV     A,R1
   \   00016A   A4           MUL     AB
   \   00016B   2A           ADD     A,R2
   \   00016C   F9           MOV     R1,A
   \   00016D   74..         MOV     A,#(Child_list + 1) & 0xff
   \   00016F   28           ADD     A,R0
   \   000170   F582         MOV     DPL,A
   \   000172   74..         MOV     A,#((Child_list + 1) >> 8) & 0xff
   \   000174   39           ADDC    A,R1
   \   000175   F583         MOV     DPH,A
   \   000177   7400         MOV     A,#0x0
   \   000179   F0           MOVX    @DPTR,A
   1450                  }
   1451                  
   1452                }
   1453              }
   1454            }
   \                     ??APP_DEAL_WITH_ASSOCIATED_4:
   \   00017A   0F           INC     R7
   \   00017B   02....       LJMP    ??APP_DEAL_WITH_ASSOCIATED_0 & 0xFFFF
   1455            osal_start_timerEx( SampleApp_TaskID,ASSOCIA_MENTAIN_EVT, 60000 );  
   \                     ??APP_DEAL_WITH_ASSOCIATED_1:
   \   00017E                ; Setup parameters for call to function osal_start_timerEx
   \   00017E   7C60         MOV     R4,#0x60
   \   000180   7DEA         MOV     R5,#-0x16
   \   000182   7A02         MOV     R2,#0x2
   \   000184   7B00         MOV     R3,#0x0
   \   000186   90....       MOV     DPTR,#SampleApp_TaskID
   \   000189   E0           MOVX    A,@DPTR
   \   00018A   F9           MOV     R1,A
   \   00018B   12....       LCALL   ??osal_start_timerEx?relay
   \   00018E   E9           MOV     A,R1
   1456          }
   \   00018F   7F01         MOV     R7,#0x1
   \   000191   02....       LJMP    ?BANKED_LEAVE_XDATA
   1457          
   1458          
   1459          
   1460          /* 3 7 添加*/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1461          void SampleApp_ProcessNwkaddrMessage(afIncomingMSGPacket_t *pkt)
   \                     SampleApp_ProcessNwkaddrMessage:
   1462          {
   \   000000   74F2         MOV     A,#-0xe
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 3
   \   000005   74FD         MOV     A,#-0x3
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
   1463            
   1464            uint16 short_adress=0;
   \   00000E   75..00       MOV     ?V0 + 0,#0x0
   \   000011   75..00       MOV     ?V0 + 1,#0x0
   1465          //  uint8 *ieee_adress;
   1466            
   1467            
   1468          
   1469            SampleApp_Periodic_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \   000014   90....       MOV     DPTR,#SampleApp_Periodic_DstAddr + 8
   \   000017   7402         MOV     A,#0x2
   \   000019   F0           MOVX    @DPTR,A
   1470            SampleApp_Periodic_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   00001A   90....       MOV     DPTR,#SampleApp_Periodic_DstAddr + 9
   \   00001D   7414         MOV     A,#0x14
   \   00001F   F0           MOVX    @DPTR,A
   1471            SampleApp_Periodic_DstAddr.addr.shortAddr = 0X0000;  //give the coodinator
   \   000020   90....       MOV     DPTR,#SampleApp_Periodic_DstAddr
   \   000023   7400         MOV     A,#0x0
   \   000025   F0           MOVX    @DPTR,A
   \   000026   A3           INC     DPTR
   \   000027   7400         MOV     A,#0x0
   \   000029   F0           MOVX    @DPTR,A
   1472            //  SampleApp_Periodic_DstAddr.addr.shortAddr = parent_short_adress;//test
   1473            
   1474            if ( AF_DataRequest( &SampleApp_Periodic_DstAddr, &SampleApp_epDesc,
   1475                                SAMPLEAPP_ADDR_CLUSTERID,
   1476                                23,  //数据长度
   1477                                pkt->cmd.Data,//###添加的发送数据        
   1478                                &SampleApp_TransID,
   1479                                AF_DISCV_ROUTE,
   1480                                AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   00002A                ; Setup parameters for call to function AF_DataRequest
   \   00002A   75..0F       MOV     ?V0 + 2,#0xf
   \   00002D   78..         MOV     R0,#?V0 + 2
   \   00002F   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000032   75....       MOV     ?V0 + 2,#SampleApp_TransID & 0xff
   \   000035   75....       MOV     ?V0 + 3,#(SampleApp_TransID >> 8) & 0xff
   \   000038   78..         MOV     R0,#?V0 + 2
   \   00003A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00003D   EE           MOV     A,R6
   \   00003E   2422         ADD     A,#0x22
   \   000040   F582         MOV     DPL,A
   \   000042   EF           MOV     A,R7
   \   000043   3400         ADDC    A,#0x0
   \   000045   F583         MOV     DPH,A
   \   000047   12....       LCALL   ?PUSH_XSTACK8_X_TWO
   \   00004A   75..17       MOV     ?V0 + 2,#0x17
   \   00004D   75..00       MOV     ?V0 + 3,#0x0
   \   000050   78..         MOV     R0,#?V0 + 2
   \   000052   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000055   75..03       MOV     ?V0 + 2,#0x3
   \   000058   75..00       MOV     ?V0 + 3,#0x0
   \   00005B   78..         MOV     R0,#?V0 + 2
   \   00005D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000060   7920         MOV     R1,#0x20
   \   000062   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000064   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000066   7A..         MOV     R2,#SampleApp_Periodic_DstAddr & 0xff
   \   000068   7B..         MOV     R3,#(SampleApp_Periodic_DstAddr >> 8) & 0xff
   \   00006A   12....       LCALL   ??AF_DataRequest?relay
   \   00006D   7409         MOV     A,#0x9
   \   00006F   12....       LCALL   ?DEALLOC_XSTACK8
   \   000072   E9           MOV     A,R1
   \   000073   F5..         MOV     ?V0 + 4,A
   1481            {
   1482            }
   1483            else
   1484            {
   1485              // Error occurred in request to send.
   1486            }
   1487          
   1488            
   1489            
   1490            short_adress = BUILD_UINT16 (wordtohex(pkt->cmd.Data[4],pkt->cmd.Data[5]),wordtohex(pkt->cmd.Data[2],pkt->cmd.Data[3]));
   \   000075                ; Setup parameters for call to function wordtohex
   \   000075   EE           MOV     A,R6
   \   000076   2422         ADD     A,#0x22
   \   000078   F582         MOV     DPL,A
   \   00007A   EF           MOV     A,R7
   \   00007B   3400         ADDC    A,#0x0
   \   00007D   F583         MOV     DPH,A
   \   00007F   E0           MOVX    A,@DPTR
   \   000080   F8           MOV     R0,A
   \   000081   A3           INC     DPTR
   \   000082   E0           MOVX    A,@DPTR
   \   000083   F583         MOV     DPH,A
   \   000085   8882         MOV     DPL,R0
   \   000087   A3           INC     DPTR
   \   000088   A3           INC     DPTR
   \   000089   A3           INC     DPTR
   \   00008A   A3           INC     DPTR
   \   00008B   A3           INC     DPTR
   \   00008C   E0           MOVX    A,@DPTR
   \   00008D   FA           MOV     R2,A
   \   00008E   EE           MOV     A,R6
   \   00008F   2422         ADD     A,#0x22
   \   000091   F582         MOV     DPL,A
   \   000093   EF           MOV     A,R7
   \   000094   3400         ADDC    A,#0x0
   \   000096   F583         MOV     DPH,A
   \   000098   E0           MOVX    A,@DPTR
   \   000099   F8           MOV     R0,A
   \   00009A   A3           INC     DPTR
   \   00009B   E0           MOVX    A,@DPTR
   \   00009C   F583         MOV     DPH,A
   \   00009E   8882         MOV     DPL,R0
   \   0000A0   A3           INC     DPTR
   \   0000A1   A3           INC     DPTR
   \   0000A2   A3           INC     DPTR
   \   0000A3   A3           INC     DPTR
   \   0000A4   E0           MOVX    A,@DPTR
   \   0000A5   F9           MOV     R1,A
   \   0000A6   12....       LCALL   ??wordtohex?relay
   \   0000A9   E9           MOV     A,R1
   \   0000AA   F5..         MOV     ?V0 + 2,A
   \   0000AC   75..00       MOV     ?V0 + 3,#0x0
   \   0000AF                ; Setup parameters for call to function wordtohex
   \   0000AF   EE           MOV     A,R6
   \   0000B0   2422         ADD     A,#0x22
   \   0000B2   F582         MOV     DPL,A
   \   0000B4   EF           MOV     A,R7
   \   0000B5   3400         ADDC    A,#0x0
   \   0000B7   F583         MOV     DPH,A
   \   0000B9   E0           MOVX    A,@DPTR
   \   0000BA   F8           MOV     R0,A
   \   0000BB   A3           INC     DPTR
   \   0000BC   E0           MOVX    A,@DPTR
   \   0000BD   F583         MOV     DPH,A
   \   0000BF   8882         MOV     DPL,R0
   \   0000C1   A3           INC     DPTR
   \   0000C2   A3           INC     DPTR
   \   0000C3   A3           INC     DPTR
   \   0000C4   E0           MOVX    A,@DPTR
   \   0000C5   FA           MOV     R2,A
   \   0000C6   EE           MOV     A,R6
   \   0000C7   2422         ADD     A,#0x22
   \   0000C9   F582         MOV     DPL,A
   \   0000CB   EF           MOV     A,R7
   \   0000CC   3400         ADDC    A,#0x0
   \   0000CE   F583         MOV     DPH,A
   \   0000D0   E0           MOVX    A,@DPTR
   \   0000D1   F8           MOV     R0,A
   \   0000D2   A3           INC     DPTR
   \   0000D3   E0           MOVX    A,@DPTR
   \   0000D4   F583         MOV     DPH,A
   \   0000D6   8882         MOV     DPL,R0
   \   0000D8   A3           INC     DPTR
   \   0000D9   A3           INC     DPTR
   \   0000DA   E0           MOVX    A,@DPTR
   \   0000DB   F9           MOV     R1,A
   \   0000DC   12....       LCALL   ??wordtohex?relay
   \   0000DF   E9           MOV     A,R1
   \   0000E0   F8           MOV     R0,A
   \   0000E1   7900         MOV     R1,#0x0
   \   0000E3   E4           CLR     A
   \   0000E4   C8           XCH     A,R0
   \   0000E5   F9           MOV     R1,A
   \   0000E6   E5..         MOV     A,?V0 + 2
   \   0000E8   28           ADD     A,R0
   \   0000E9   F8           MOV     R0,A
   \   0000EA   E5..         MOV     A,?V0 + 3
   \   0000EC   39           ADDC    A,R1
   \   0000ED   F9           MOV     R1,A
   \   0000EE   88..         MOV     ?V0 + 0,R0
   \   0000F0   89..         MOV     ?V0 + 1,R1
   1491            
   1492            
   1493            
   1494            if (  (pkt->cmd.Data[0]%2)==1)
   \   0000F2   EE           MOV     A,R6
   \   0000F3   2422         ADD     A,#0x22
   \   0000F5   F582         MOV     DPL,A
   \   0000F7   EF           MOV     A,R7
   \   0000F8   3400         ADDC    A,#0x0
   \   0000FA   F583         MOV     DPH,A
   \   0000FC   E0           MOVX    A,@DPTR
   \   0000FD   F8           MOV     R0,A
   \   0000FE   A3           INC     DPTR
   \   0000FF   E0           MOVX    A,@DPTR
   \   000100   F583         MOV     DPH,A
   \   000102   8882         MOV     DPL,R0
   \   000104   E0           MOVX    A,@DPTR
   \   000105   75F002       MOV     B,#0x2
   \   000108   84           DIV     AB
   \   000109   E5F0         MOV     A,B
   \   00010B   6401         XRL     A,#0x1
   \   00010D   6003         JZ      $+5
   \   00010F   02....       LJMP    ??SampleApp_ProcessNwkaddrMessage_0 & 0xFFFF
   1495            {  
   1496              
   1497              uint8 osack[3]={1,2,3};
   \   000112   90....       MOV     DPTR,#`?<Constant {1, 2, 3}>`
   \   000115   C082         PUSH    DPL
   \   000117   C083         PUSH    DPH
   \   000119   85..82       MOV     DPL,?XSP + 0
   \   00011C   85..83       MOV     DPH,?XSP + 1
   \   00011F   AC82         MOV     R4,DPL
   \   000121   AD83         MOV     R5,DPH
   \   000123   D083         POP     DPH
   \   000125   D082         POP     DPL
   \   000127   7403         MOV     A,#0x3
   \   000129   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1498              uint8 nr=0;
   \   00012C   75..00       MOV     ?V0 + 2,#0x0
   1499              
   1500              SampleApp_Flash_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;//
   \   00012F   90....       MOV     DPTR,#SampleApp_Flash_DstAddr + 8
   \   000132   7402         MOV     A,#0x2
   \   000134   F0           MOVX    @DPTR,A
   1501              SampleApp_Flash_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;//
   \   000135   90....       MOV     DPTR,#SampleApp_Flash_DstAddr + 9
   \   000138   7414         MOV     A,#0x14
   \   00013A   F0           MOVX    @DPTR,A
   1502              SampleApp_Flash_DstAddr.addr.shortAddr = short_adress;//
   \   00013B   90....       MOV     DPTR,#SampleApp_Flash_DstAddr
   \   00013E   E5..         MOV     A,?V0 + 0
   \   000140   F0           MOVX    @DPTR,A
   \   000141   A3           INC     DPTR
   \   000142   E5..         MOV     A,?V0 + 1
   \   000144   F0           MOVX    @DPTR,A
   1503              
   1504              if ( AF_DataRequest( &SampleApp_Flash_DstAddr, &SampleApp_epDesc,
   1505                                  SAMPLEAPP_FLASH_CLUSTERID,
   1506                                  3,  //数据长度
   1507                                  osack,//###添加的发送数据        
   1508                                  &SampleApp_TransID,
   1509                                  AF_DISCV_ROUTE,
   1510                                  AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000145                ; Setup parameters for call to function AF_DataRequest
   \   000145   75..0F       MOV     ?V0 + 3,#0xf
   \   000148   78..         MOV     R0,#?V0 + 3
   \   00014A   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00014D   75....       MOV     ?V0 + 4,#SampleApp_TransID & 0xff
   \   000150   75....       MOV     ?V0 + 5,#(SampleApp_TransID >> 8) & 0xff
   \   000153   78..         MOV     R0,#?V0 + 4
   \   000155   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000158   7403         MOV     A,#0x3
   \   00015A   12....       LCALL   ?XSTACK_DISP0_8
   \   00015D   8582..       MOV     ?V0 + 4,DPL
   \   000160   8583..       MOV     ?V0 + 5,DPH
   \   000163   78..         MOV     R0,#?V0 + 4
   \   000165   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000168   75..03       MOV     ?V0 + 4,#0x3
   \   00016B   75..00       MOV     ?V0 + 5,#0x0
   \   00016E   78..         MOV     R0,#?V0 + 4
   \   000170   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000173   75..02       MOV     ?V0 + 4,#0x2
   \   000176   75..00       MOV     ?V0 + 5,#0x0
   \   000179   78..         MOV     R0,#?V0 + 4
   \   00017B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00017E   7920         MOV     R1,#0x20
   \   000180   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000182   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000184   7A..         MOV     R2,#SampleApp_Flash_DstAddr & 0xff
   \   000186   7B..         MOV     R3,#(SampleApp_Flash_DstAddr >> 8) & 0xff
   \   000188   12....       LCALL   ??AF_DataRequest?relay
   \   00018B   7409         MOV     A,#0x9
   \   00018D   12....       LCALL   ?DEALLOC_XSTACK8
   \   000190   E9           MOV     A,R1
   1511              {
   1512              }
   1513              else
   1514              {
   1515                // Error occurred in request to send.
   1516              }
   1517              
   1518              for(uint8 j=0;j<NWK_MAX_DEVICES;j++)
   \   000191   7B00         MOV     R3,#0x0
   \                     ??SampleApp_ProcessNwkaddrMessage_1:
   \   000193   EB           MOV     A,R3
   \   000194   C3           CLR     C
   \   000195   9415         SUBB    A,#0x15
   \   000197   4003         JC      $+5
   \   000199   02....       LJMP    ??SampleApp_ProcessNwkaddrMessage_0 & 0xFFFF
   1519              {
   1520                nr =  AssociatedDevList[j].nodeRelation;
   \   00019C   EB           MOV     A,R3
   \   00019D   F8           MOV     R0,A
   \   00019E   7900         MOV     R1,#0x0
   \   0001A0   E8           MOV     A,R0
   \   0001A1   75F012       MOV     B,#0x12
   \   0001A4   A4           MUL     AB
   \   0001A5   C8           XCH     A,R0
   \   0001A6   AAF0         MOV     R2,B
   \   0001A8   75F000       MOV     B,#0x0
   \   0001AB   A4           MUL     AB
   \   0001AC   2A           ADD     A,R2
   \   0001AD   FA           MOV     R2,A
   \   0001AE   75F012       MOV     B,#0x12
   \   0001B1   E9           MOV     A,R1
   \   0001B2   A4           MUL     AB
   \   0001B3   2A           ADD     A,R2
   \   0001B4   F9           MOV     R1,A
   \   0001B5   74..         MOV     A,#(AssociatedDevList + 4) & 0xff
   \   0001B7   28           ADD     A,R0
   \   0001B8   F582         MOV     DPL,A
   \   0001BA   74..         MOV     A,#((AssociatedDevList + 4) >> 8) & 0xff
   \   0001BC   39           ADDC    A,R1
   \   0001BD   F583         MOV     DPH,A
   \   0001BF   E0           MOVX    A,@DPTR
   \   0001C0   F5..         MOV     ?V0 + 2,A
   1521                if (nr == CHILD_RFD || nr == CHILD_RFD_RX_IDLE)// || nr == CHILD_FFD || nr == CHILD_FFD_RX_IDLE)    
   \   0001C2   7401         MOV     A,#0x1
   \   0001C4   65..         XRL     A,?V0 + 2
   \   0001C6   6006         JZ      ??SampleApp_ProcessNwkaddrMessage_2
   \   0001C8   7402         MOV     A,#0x2
   \   0001CA   65..         XRL     A,?V0 + 2
   \   0001CC   7056         JNZ     ??SampleApp_ProcessNwkaddrMessage_3
   1522                {
   1523                  if(AssociatedDevList[j].shortAddr==short_adress)
   \                     ??SampleApp_ProcessNwkaddrMessage_2:
   \   0001CE   EB           MOV     A,R3
   \   0001CF   F8           MOV     R0,A
   \   0001D0   7900         MOV     R1,#0x0
   \   0001D2   E8           MOV     A,R0
   \   0001D3   75F012       MOV     B,#0x12
   \   0001D6   A4           MUL     AB
   \   0001D7   C8           XCH     A,R0
   \   0001D8   AAF0         MOV     R2,B
   \   0001DA   75F000       MOV     B,#0x0
   \   0001DD   A4           MUL     AB
   \   0001DE   2A           ADD     A,R2
   \   0001DF   FA           MOV     R2,A
   \   0001E0   75F012       MOV     B,#0x12
   \   0001E3   E9           MOV     A,R1
   \   0001E4   A4           MUL     AB
   \   0001E5   2A           ADD     A,R2
   \   0001E6   F9           MOV     R1,A
   \   0001E7   74..         MOV     A,#AssociatedDevList & 0xff
   \   0001E9   28           ADD     A,R0
   \   0001EA   F582         MOV     DPL,A
   \   0001EC   74..         MOV     A,#(AssociatedDevList >> 8) & 0xff
   \   0001EE   39           ADDC    A,R1
   \   0001EF   F583         MOV     DPH,A
   \   0001F1   E0           MOVX    A,@DPTR
   \   0001F2   65..         XRL     A,?V0 + 0
   \   0001F4   7004         JNZ     ??SampleApp_ProcessNwkaddrMessage_4
   \   0001F6   A3           INC     DPTR
   \   0001F7   E0           MOVX    A,@DPTR
   \   0001F8   65..         XRL     A,?V0 + 1
   \                     ??SampleApp_ProcessNwkaddrMessage_4:
   \   0001FA   7028         JNZ     ??SampleApp_ProcessNwkaddrMessage_3
   1524                  {
   1525                    Child_list[j].heart_count=0; 
   \   0001FC   EB           MOV     A,R3
   \   0001FD   F8           MOV     R0,A
   \   0001FE   7900         MOV     R1,#0x0
   \   000200   E8           MOV     A,R0
   \   000201   75F002       MOV     B,#0x2
   \   000204   A4           MUL     AB
   \   000205   C8           XCH     A,R0
   \   000206   AAF0         MOV     R2,B
   \   000208   75F000       MOV     B,#0x0
   \   00020B   A4           MUL     AB
   \   00020C   2A           ADD     A,R2
   \   00020D   FA           MOV     R2,A
   \   00020E   75F002       MOV     B,#0x2
   \   000211   E9           MOV     A,R1
   \   000212   A4           MUL     AB
   \   000213   2A           ADD     A,R2
   \   000214   F9           MOV     R1,A
   \   000215   74..         MOV     A,#(Child_list + 1) & 0xff
   \   000217   28           ADD     A,R0
   \   000218   F582         MOV     DPL,A
   \   00021A   74..         MOV     A,#((Child_list + 1) >> 8) & 0xff
   \   00021C   39           ADDC    A,R1
   \   00021D   F583         MOV     DPH,A
   \   00021F   7400         MOV     A,#0x0
   \   000221   F0           MOVX    @DPTR,A
   1526                    //  Child_list[j].isActive=true;//收到心跳了在线的
   1527                    break;
   \   000222   8004         SJMP    ??SampleApp_ProcessNwkaddrMessage_0
   1528                  }
   1529                }
   1530              }
   \                     ??SampleApp_ProcessNwkaddrMessage_3:
   \   000224   0B           INC     R3
   \   000225   02....       LJMP    ??SampleApp_ProcessNwkaddrMessage_1 & 0xFFFF
   1531              
   1532              
   1533            }
   1534            
   1535            
   1536          }
   \                     ??SampleApp_ProcessNwkaddrMessage_0:
   \   000228   7403         MOV     A,#0x3
   \   00022A   12....       LCALL   ?DEALLOC_XSTACK8
   \   00022D   7F06         MOV     R7,#0x6
   \   00022F   02....       LJMP    ?BANKED_LEAVE_XDATA
   1537          
   1538          //remove the stale nodes

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1539          uint8 RemoveStaleNode(uint8 index)
   \                     RemoveStaleNode:
   1540          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 18
   \   000005   74EE         MOV     A,#-0x12
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   E9           MOV     A,R1
   \   00000B   FE           MOV     R6,A
   1541            AddrMgrEntry_t addrEntry;
   1542            NLME_LeaveReq_t req;
   1543            
   1544            // Set up device info
   1545            
   1546            addrEntry.user  = ADDRMGR_USER_DEFAULT;
   \   00000C   7405         MOV     A,#0x5
   \   00000E   12....       LCALL   ?XSTACK_DISP0_8
   \   000011   7400         MOV     A,#0x0
   \   000013   F0           MOVX    @DPTR,A
   1547            addrEntry.index = index;
   \   000014   EE           MOV     A,R6
   \   000015   F8           MOV     R0,A
   \   000016   7900         MOV     R1,#0x0
   \   000018   7410         MOV     A,#0x10
   \   00001A   12....       LCALL   ?XSTACK_DISP0_8
   \   00001D   E8           MOV     A,R0
   \   00001E   F0           MOVX    @DPTR,A
   \   00001F   A3           INC     DPTR
   \   000020   E9           MOV     A,R1
   \   000021   F0           MOVX    @DPTR,A
   1548            
   1549            if (AddrMgrEntryGet( &addrEntry )) 
   \   000022                ; Setup parameters for call to function AddrMgrEntryGet
   \   000022   7405         MOV     A,#0x5
   \   000024   12....       LCALL   ?XSTACK_DISP0_8
   \   000027   AA82         MOV     R2,DPL
   \   000029   AB83         MOV     R3,DPH
   \   00002B   12....       LCALL   ??AddrMgrEntryGet?relay
   \   00002E   E9           MOV     A,R1
   \   00002F   603E         JZ      ??RemoveStaleNode_0
   1550            {
   1551              // Remove device
   1552              req.extAddr = addrEntry.extAddr;
   \   000031   7408         MOV     A,#0x8
   \   000033   12....       LCALL   ?XSTACK_DISP0_8
   \   000036   A882         MOV     R0,DPL
   \   000038   A983         MOV     R1,DPH
   \   00003A   85..82       MOV     DPL,?XSP + 0
   \   00003D   85..83       MOV     DPH,?XSP + 1
   \   000040   E8           MOV     A,R0
   \   000041   F0           MOVX    @DPTR,A
   \   000042   A3           INC     DPTR
   \   000043   E9           MOV     A,R1
   \   000044   F0           MOVX    @DPTR,A
   1553              req.removeChildren = FALSE;
   \   000045   7402         MOV     A,#0x2
   \   000047   12....       LCALL   ?XSTACK_DISP0_8
   \   00004A   7400         MOV     A,#0x0
   \   00004C   F0           MOVX    @DPTR,A
   1554              req.rejoin = FALSE;
   \   00004D   7403         MOV     A,#0x3
   \   00004F   12....       LCALL   ?XSTACK_DISP0_8
   \   000052   7400         MOV     A,#0x0
   \   000054   F0           MOVX    @DPTR,A
   1555              req.silent = TRUE;
   \   000055   7404         MOV     A,#0x4
   \   000057   12....       LCALL   ?XSTACK_DISP0_8
   \   00005A   7401         MOV     A,#0x1
   \   00005C   F0           MOVX    @DPTR,A
   1556              
   1557              NLME_LeaveReq( &req );
   \   00005D                ; Setup parameters for call to function NLME_LeaveReq
   \   00005D   85..82       MOV     DPL,?XSP + 0
   \   000060   85..83       MOV     DPH,?XSP + 1
   \   000063   AA82         MOV     R2,DPL
   \   000065   AB83         MOV     R3,DPH
   \   000067   12....       LCALL   ??NLME_LeaveReq?relay
   \   00006A   E9           MOV     A,R1
   1558              
   1559              
   1560              return true;
   \   00006B   7901         MOV     R1,#0x1
   \   00006D   8002         SJMP    ??RemoveStaleNode_1
   1561            }
   1562            return false;
   \                     ??RemoveStaleNode_0:
   \   00006F   7900         MOV     R1,#0x0
   \                     ??RemoveStaleNode_1:
   \   000071   7412         MOV     A,#0x12
   \   000073   12....       LCALL   ?DEALLOC_XSTACK8
   \   000076   7F01         MOV     R7,#0x1
   \   000078   02....       LJMP    ?BANKED_LEAVE_XDATA
   1563          }
   1564          
   1565          
   1566          //remove the stale router

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1567          uint8 RemoveStaleRouter(uint8 index)
   \                     RemoveStaleRouter:
   1568          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 18
   \   000005   74EE         MOV     A,#-0x12
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   E9           MOV     A,R1
   \   00000B   FE           MOV     R6,A
   1569            AddrMgrEntry_t addrEntry;
   1570            NLME_LeaveReq_t req;
   1571          //  APSME_RemoveDeviceReq_t remDevReq;
   1572            // Set up device info
   1573            
   1574            addrEntry.user  = ADDRMGR_USER_DEFAULT;
   \   00000C   7405         MOV     A,#0x5
   \   00000E   12....       LCALL   ?XSTACK_DISP0_8
   \   000011   7400         MOV     A,#0x0
   \   000013   F0           MOVX    @DPTR,A
   1575            addrEntry.index = index;
   \   000014   EE           MOV     A,R6
   \   000015   F8           MOV     R0,A
   \   000016   7900         MOV     R1,#0x0
   \   000018   7410         MOV     A,#0x10
   \   00001A   12....       LCALL   ?XSTACK_DISP0_8
   \   00001D   E8           MOV     A,R0
   \   00001E   F0           MOVX    @DPTR,A
   \   00001F   A3           INC     DPTR
   \   000020   E9           MOV     A,R1
   \   000021   F0           MOVX    @DPTR,A
   1576            
   1577            if (AddrMgrEntryGet( &addrEntry )) 
   \   000022                ; Setup parameters for call to function AddrMgrEntryGet
   \   000022   7405         MOV     A,#0x5
   \   000024   12....       LCALL   ?XSTACK_DISP0_8
   \   000027   AA82         MOV     R2,DPL
   \   000029   AB83         MOV     R3,DPH
   \   00002B   12....       LCALL   ??AddrMgrEntryGet?relay
   \   00002E   E9           MOV     A,R1
   \   00002F   603E         JZ      ??RemoveStaleRouter_0
   1578            {
   1579              // Remove device
   1580              req.extAddr = addrEntry.extAddr;
   \   000031   7408         MOV     A,#0x8
   \   000033   12....       LCALL   ?XSTACK_DISP0_8
   \   000036   A882         MOV     R0,DPL
   \   000038   A983         MOV     R1,DPH
   \   00003A   85..82       MOV     DPL,?XSP + 0
   \   00003D   85..83       MOV     DPH,?XSP + 1
   \   000040   E8           MOV     A,R0
   \   000041   F0           MOVX    @DPTR,A
   \   000042   A3           INC     DPTR
   \   000043   E9           MOV     A,R1
   \   000044   F0           MOVX    @DPTR,A
   1581              req.removeChildren = FALSE;
   \   000045   7402         MOV     A,#0x2
   \   000047   12....       LCALL   ?XSTACK_DISP0_8
   \   00004A   7400         MOV     A,#0x0
   \   00004C   F0           MOVX    @DPTR,A
   1582              req.rejoin = FALSE;
   \   00004D   7403         MOV     A,#0x3
   \   00004F   12....       LCALL   ?XSTACK_DISP0_8
   \   000052   7400         MOV     A,#0x0
   \   000054   F0           MOVX    @DPTR,A
   1583              req.silent = TRUE;
   \   000055   7404         MOV     A,#0x4
   \   000057   12....       LCALL   ?XSTACK_DISP0_8
   \   00005A   7401         MOV     A,#0x1
   \   00005C   F0           MOVX    @DPTR,A
   1584              
   1585              NLME_LeaveReq( &req );
   \   00005D                ; Setup parameters for call to function NLME_LeaveReq
   \   00005D   85..82       MOV     DPL,?XSP + 0
   \   000060   85..83       MOV     DPH,?XSP + 1
   \   000063   AA82         MOV     R2,DPL
   \   000065   AB83         MOV     R3,DPH
   \   000067   12....       LCALL   ??NLME_LeaveReq?relay
   \   00006A   E9           MOV     A,R1
   1586              
   1587              
   1588              return true;
   \   00006B   7901         MOV     R1,#0x1
   \   00006D   8002         SJMP    ??RemoveStaleRouter_1
   1589            }
   1590            return false;
   \                     ??RemoveStaleRouter_0:
   \   00006F   7900         MOV     R1,#0x0
   \                     ??RemoveStaleRouter_1:
   \   000071   7412         MOV     A,#0x12
   \   000073   12....       LCALL   ?DEALLOC_XSTACK8
   \   000076   7F01         MOV     R7,#0x1
   \   000078   02....       LJMP    ?BANKED_LEAVE_XDATA
   1591          }
   1592          
   1593          /*
   1594          1 转发心跳包，最终发给COORDINATOR
   1595          2 处理关联表，根据心跳包设置ACTIVE OR INACTIVE的CHIRDREN
   1596          */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1597          void SampleApp_ROUTER_ProcessPeriodicMessage_Data(afIncomingMSGPacket_t *pkt)
   \                     SampleApp_ROUTER_ProcessPeriodicMessage_Data:
   1598          {
   \   000000   74EE         MOV     A,#-0x12
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 18
   \   000005                ; Auto size: 8
   \   000005   74F8         MOV     A,#-0x8
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
   1599            
   1600            uint8 HEART_BUFFER[4];
   1601            uint8 Child_short_adress_buffer[4];
   1602            // uint8 *Sample_Cmd_shorAddr;
   1603            uint8 shortAddr_H8;
   1604            uint8 shortAddr_L8;
   1605            uint16 Child_short_adress;
   1606            uint16 parent_short_adress;
   1607            uint8 nr;
   1608            
   1609            for(uint8 i=0;i<4;i++)
   \   00000E   7B00         MOV     R3,#0x0
   \                     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_0:
   \   000010   EB           MOV     A,R3
   \   000011   C3           CLR     C
   \   000012   9404         SUBB    A,#0x4
   \   000014   5037         JNC     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_1
   1610            {
   1611              HEART_BUFFER[i]=pkt->cmd.Data[i];//get the heart message
   \   000016   EB           MOV     A,R3
   \   000017   F8           MOV     R0,A
   \   000018   7900         MOV     R1,#0x0
   \   00001A   EE           MOV     A,R6
   \   00001B   2422         ADD     A,#0x22
   \   00001D   F582         MOV     DPL,A
   \   00001F   EF           MOV     A,R7
   \   000020   3400         ADDC    A,#0x0
   \   000022   F583         MOV     DPH,A
   \   000024   E0           MOVX    A,@DPTR
   \   000025   28           ADD     A,R0
   \   000026   FA           MOV     R2,A
   \   000027   A3           INC     DPTR
   \   000028   E0           MOVX    A,@DPTR
   \   000029   39           ADDC    A,R1
   \   00002A   8A82         MOV     DPL,R2
   \   00002C   F583         MOV     DPH,A
   \   00002E   E0           MOVX    A,@DPTR
   \   00002F   C0E0         PUSH    A
   \   000031   8B..         MOV     ?V0 + 8,R3
   \   000033   75..00       MOV     ?V0 + 9,#0x0
   \   000036   7404         MOV     A,#0x4
   \   000038   12....       LCALL   ?XSTACK_DISP0_8
   \   00003B   E582         MOV     A,DPL
   \   00003D   25..         ADD     A,?V0 + 8
   \   00003F   F582         MOV     DPL,A
   \   000041   E583         MOV     A,DPH
   \   000043   35..         ADDC    A,?V0 + 9
   \   000045   F583         MOV     DPH,A
   \   000047   D0E0         POP     A
   \   000049   F0           MOVX    @DPTR,A
   1612            }
   \   00004A   0B           INC     R3
   \   00004B   80C3         SJMP    ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_0
   1613            
   1614            for(uint8 i=0;i<4;i++)
   \                     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_1:
   \   00004D   7A00         MOV     R2,#0x0
   \                     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_2:
   \   00004F   EA           MOV     A,R2
   \   000050   C3           CLR     C
   \   000051   9404         SUBB    A,#0x4
   \   000053   4003         JC      $+5
   \   000055   02....       LJMP    ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_3 & 0xFFFF
   1615            {//转换短地址 从ACII码到UINT16
   1616              if((pkt->cmd.Data[i]>47)&&(pkt->cmd.Data[i]<58))      //0~9  
   \   000058   EA           MOV     A,R2
   \   000059   F8           MOV     R0,A
   \   00005A   7900         MOV     R1,#0x0
   \   00005C   EE           MOV     A,R6
   \   00005D   2422         ADD     A,#0x22
   \   00005F   F582         MOV     DPL,A
   \   000061   EF           MOV     A,R7
   \   000062   3400         ADDC    A,#0x0
   \   000064   F583         MOV     DPH,A
   \   000066   E0           MOVX    A,@DPTR
   \   000067   28           ADD     A,R0
   \   000068   FB           MOV     R3,A
   \   000069   A3           INC     DPTR
   \   00006A   E0           MOVX    A,@DPTR
   \   00006B   39           ADDC    A,R1
   \   00006C   8B82         MOV     DPL,R3
   \   00006E   F583         MOV     DPH,A
   \   000070   E0           MOVX    A,@DPTR
   \   000071   C3           CLR     C
   \   000072   9430         SUBB    A,#0x30
   \   000074   4057         JC      ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_4
   \   000076   EA           MOV     A,R2
   \   000077   F8           MOV     R0,A
   \   000078   7900         MOV     R1,#0x0
   \   00007A   EE           MOV     A,R6
   \   00007B   2422         ADD     A,#0x22
   \   00007D   F582         MOV     DPL,A
   \   00007F   EF           MOV     A,R7
   \   000080   3400         ADDC    A,#0x0
   \   000082   F583         MOV     DPH,A
   \   000084   E0           MOVX    A,@DPTR
   \   000085   28           ADD     A,R0
   \   000086   FB           MOV     R3,A
   \   000087   A3           INC     DPTR
   \   000088   E0           MOVX    A,@DPTR
   \   000089   39           ADDC    A,R1
   \   00008A   8B82         MOV     DPL,R3
   \   00008C   F583         MOV     DPH,A
   \   00008E   E0           MOVX    A,@DPTR
   \   00008F   C3           CLR     C
   \   000090   943A         SUBB    A,#0x3a
   \   000092   5039         JNC     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_4
   1617                Child_short_adress_buffer[i]=pkt->cmd.Data[i]-48;
   \   000094   EA           MOV     A,R2
   \   000095   F8           MOV     R0,A
   \   000096   7900         MOV     R1,#0x0
   \   000098   EE           MOV     A,R6
   \   000099   2422         ADD     A,#0x22
   \   00009B   F582         MOV     DPL,A
   \   00009D   EF           MOV     A,R7
   \   00009E   3400         ADDC    A,#0x0
   \   0000A0   F583         MOV     DPH,A
   \   0000A2   E0           MOVX    A,@DPTR
   \   0000A3   28           ADD     A,R0
   \   0000A4   FB           MOV     R3,A
   \   0000A5   A3           INC     DPTR
   \   0000A6   E0           MOVX    A,@DPTR
   \   0000A7   39           ADDC    A,R1
   \   0000A8   8B82         MOV     DPL,R3
   \   0000AA   F583         MOV     DPH,A
   \   0000AC   E0           MOVX    A,@DPTR
   \   0000AD   24D0         ADD     A,#-0x30
   \   0000AF   C0E0         PUSH    A
   \   0000B1   8A..         MOV     ?V0 + 8,R2
   \   0000B3   75..00       MOV     ?V0 + 9,#0x0
   \   0000B6   85..82       MOV     DPL,?XSP + 0
   \   0000B9   85..83       MOV     DPH,?XSP + 1
   \   0000BC   E582         MOV     A,DPL
   \   0000BE   25..         ADD     A,?V0 + 8
   \   0000C0   F582         MOV     DPL,A
   \   0000C2   E583         MOV     A,DPH
   \   0000C4   35..         ADDC    A,?V0 + 9
   \   0000C6   F583         MOV     DPH,A
   \   0000C8   D0E0         POP     A
   \   0000CA   F0           MOVX    @DPTR,A
   \   0000CB   8073         SJMP    ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_5
   1618              else if((pkt->cmd.Data[i]>64)&&(pkt->cmd.Data[i]<71)) //A~F
   \                     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_4:
   \   0000CD   EA           MOV     A,R2
   \   0000CE   F8           MOV     R0,A
   \   0000CF   7900         MOV     R1,#0x0
   \   0000D1   EE           MOV     A,R6
   \   0000D2   2422         ADD     A,#0x22
   \   0000D4   F582         MOV     DPL,A
   \   0000D6   EF           MOV     A,R7
   \   0000D7   3400         ADDC    A,#0x0
   \   0000D9   F583         MOV     DPH,A
   \   0000DB   E0           MOVX    A,@DPTR
   \   0000DC   28           ADD     A,R0
   \   0000DD   FB           MOV     R3,A
   \   0000DE   A3           INC     DPTR
   \   0000DF   E0           MOVX    A,@DPTR
   \   0000E0   39           ADDC    A,R1
   \   0000E1   8B82         MOV     DPL,R3
   \   0000E3   F583         MOV     DPH,A
   \   0000E5   E0           MOVX    A,@DPTR
   \   0000E6   C3           CLR     C
   \   0000E7   9441         SUBB    A,#0x41
   \   0000E9   4055         JC      ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_5
   \   0000EB   EA           MOV     A,R2
   \   0000EC   F8           MOV     R0,A
   \   0000ED   7900         MOV     R1,#0x0
   \   0000EF   EE           MOV     A,R6
   \   0000F0   2422         ADD     A,#0x22
   \   0000F2   F582         MOV     DPL,A
   \   0000F4   EF           MOV     A,R7
   \   0000F5   3400         ADDC    A,#0x0
   \   0000F7   F583         MOV     DPH,A
   \   0000F9   E0           MOVX    A,@DPTR
   \   0000FA   28           ADD     A,R0
   \   0000FB   FB           MOV     R3,A
   \   0000FC   A3           INC     DPTR
   \   0000FD   E0           MOVX    A,@DPTR
   \   0000FE   39           ADDC    A,R1
   \   0000FF   8B82         MOV     DPL,R3
   \   000101   F583         MOV     DPH,A
   \   000103   E0           MOVX    A,@DPTR
   \   000104   C3           CLR     C
   \   000105   9447         SUBB    A,#0x47
   \   000107   5037         JNC     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_5
   1619                Child_short_adress_buffer[i]=pkt->cmd.Data[i]-55;
   \   000109   EA           MOV     A,R2
   \   00010A   F8           MOV     R0,A
   \   00010B   7900         MOV     R1,#0x0
   \   00010D   EE           MOV     A,R6
   \   00010E   2422         ADD     A,#0x22
   \   000110   F582         MOV     DPL,A
   \   000112   EF           MOV     A,R7
   \   000113   3400         ADDC    A,#0x0
   \   000115   F583         MOV     DPH,A
   \   000117   E0           MOVX    A,@DPTR
   \   000118   28           ADD     A,R0
   \   000119   FB           MOV     R3,A
   \   00011A   A3           INC     DPTR
   \   00011B   E0           MOVX    A,@DPTR
   \   00011C   39           ADDC    A,R1
   \   00011D   8B82         MOV     DPL,R3
   \   00011F   F583         MOV     DPH,A
   \   000121   E0           MOVX    A,@DPTR
   \   000122   24C9         ADD     A,#-0x37
   \   000124   C0E0         PUSH    A
   \   000126   8A..         MOV     ?V0 + 8,R2
   \   000128   75..00       MOV     ?V0 + 9,#0x0
   \   00012B   85..82       MOV     DPL,?XSP + 0
   \   00012E   85..83       MOV     DPH,?XSP + 1
   \   000131   E582         MOV     A,DPL
   \   000133   25..         ADD     A,?V0 + 8
   \   000135   F582         MOV     DPL,A
   \   000137   E583         MOV     A,DPH
   \   000139   35..         ADDC    A,?V0 + 9
   \   00013B   F583         MOV     DPH,A
   \   00013D   D0E0         POP     A
   \   00013F   F0           MOVX    @DPTR,A
   1620            }
   \                     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_5:
   \   000140   0A           INC     R2
   \   000141   02....       LJMP    ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_2 & 0xFFFF
   1621            shortAddr_H8=(Child_short_adress_buffer[0]<<4)+Child_short_adress_buffer[1];
   \                     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_3:
   \   000144   7401         MOV     A,#0x1
   \   000146   12....       LCALL   ?XSTACK_DISP0_8
   \   000149   C082         PUSH    DPL
   \   00014B   C083         PUSH    DPH
   \   00014D   85..82       MOV     DPL,?XSP + 0
   \   000150   85..83       MOV     DPH,?XSP + 1
   \   000153   E0           MOVX    A,@DPTR
   \   000154   C4           SWAP    A
   \   000155   54F0         ANL     A,#0xf0
   \   000157   D083         POP     DPH
   \   000159   D082         POP     DPL
   \   00015B   F8           MOV     R0,A
   \   00015C   E0           MOVX    A,@DPTR
   \   00015D   28           ADD     A,R0
   \   00015E   F5..         MOV     ?V0 + 6,A
   1622            shortAddr_L8=(Child_short_adress_buffer[2]<<4)+Child_short_adress_buffer[3];
   \   000160   7403         MOV     A,#0x3
   \   000162   12....       LCALL   ?XSTACK_DISP0_8
   \   000165   C082         PUSH    DPL
   \   000167   C083         PUSH    DPH
   \   000169   7402         MOV     A,#0x2
   \   00016B   12....       LCALL   ?XSTACK_DISP0_8
   \   00016E   E0           MOVX    A,@DPTR
   \   00016F   C4           SWAP    A
   \   000170   54F0         ANL     A,#0xf0
   \   000172   D083         POP     DPH
   \   000174   D082         POP     DPL
   \   000176   F8           MOV     R0,A
   \   000177   E0           MOVX    A,@DPTR
   \   000178   28           ADD     A,R0
   \   000179   F5..         MOV     ?V0 + 4,A
   1623            Child_short_adress=((uint16)(shortAddr_H8)<<8)+((uint16)shortAddr_L8);
   \   00017B   E5..         MOV     A,?V0 + 6
   \   00017D   A8..         MOV     R0,?V0 + 6
   \   00017F   7900         MOV     R1,#0x0
   \   000181   E4           CLR     A
   \   000182   C8           XCH     A,R0
   \   000183   F9           MOV     R1,A
   \   000184   85....       MOV     ?V0 + 8,?V0 + 4
   \   000187   75..00       MOV     ?V0 + 9,#0x0
   \   00018A   E8           MOV     A,R0
   \   00018B   25..         ADD     A,?V0 + 8
   \   00018D   F8           MOV     R0,A
   \   00018E   E9           MOV     A,R1
   \   00018F   35..         ADDC    A,?V0 + 9
   \   000191   F9           MOV     R1,A
   \   000192   88..         MOV     ?V0 + 2,R0
   \   000194   89..         MOV     ?V0 + 3,R1
   1624            
   1625            parent_short_adress= NLME_GetShortAddr();//NLME_GetCoordShortAddr();//get the parent adress
   \   000196                ; Setup parameters for call to function NLME_GetShortAddr
   \   000196   12....       LCALL   ??NLME_GetShortAddr?relay
   \   000199   8A..         MOV     ?V0 + 8,R2
   \   00019B   8B..         MOV     ?V0 + 9,R3
   \   00019D   85....       MOV     ?V0 + 0,?V0 + 8
   \   0001A0   85....       MOV     ?V0 + 1,?V0 + 9
   1626            
   1627            if( (parent_short_adress!=Child_short_adress) && (parent_short_adress!=0x0000)) //if it is not itself and it is not the coordinator
   \   0001A3   E5..         MOV     A,?V0 + 2
   \   0001A5   65..         XRL     A,?V0 + 0
   \   0001A7   7004         JNZ     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_6
   \   0001A9   E5..         MOV     A,?V0 + 3
   \   0001AB   65..         XRL     A,?V0 + 1
   \                     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_6:
   \   0001AD   6068         JZ      ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_7
   \   0001AF   E5..         MOV     A,?V0 + 0
   \   0001B1   45..         ORL     A,?V0 + 1
   \   0001B3   6062         JZ      ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_7
   1628            {
   1629              SampleApp_Periodic_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \   0001B5   90....       MOV     DPTR,#SampleApp_Periodic_DstAddr + 8
   \   0001B8   7402         MOV     A,#0x2
   \   0001BA   F0           MOVX    @DPTR,A
   1630              SampleApp_Periodic_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   0001BB   90....       MOV     DPTR,#SampleApp_Periodic_DstAddr + 9
   \   0001BE   7414         MOV     A,#0x14
   \   0001C0   F0           MOVX    @DPTR,A
   1631              SampleApp_Periodic_DstAddr.addr.shortAddr = 0X0000;  //give the coodinator
   \   0001C1   90....       MOV     DPTR,#SampleApp_Periodic_DstAddr
   \   0001C4   7400         MOV     A,#0x0
   \   0001C6   F0           MOVX    @DPTR,A
   \   0001C7   A3           INC     DPTR
   \   0001C8   7400         MOV     A,#0x0
   \   0001CA   F0           MOVX    @DPTR,A
   1632              //  SampleApp_Periodic_DstAddr.addr.shortAddr = parent_short_adress;//test
   1633              
   1634              if ( AF_DataRequest( &SampleApp_Periodic_DstAddr, &SampleApp_epDesc,
   1635                                  SAMPLEAPP_PERIODIC_COORDINATOR_CLUSTERID,
   1636                                  4,  //数据长度
   1637                                  HEART_BUFFER,//###添加的发送数据        
   1638                                  &SampleApp_TransID,
   1639                                  AF_DISCV_ROUTE,
   1640                                  AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   0001CB                ; Setup parameters for call to function AF_DataRequest
   \   0001CB   75..0F       MOV     ?V0 + 7,#0xf
   \   0001CE   78..         MOV     R0,#?V0 + 7
   \   0001D0   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0001D3   75....       MOV     ?V0 + 8,#SampleApp_TransID & 0xff
   \   0001D6   75....       MOV     ?V0 + 9,#(SampleApp_TransID >> 8) & 0xff
   \   0001D9   78..         MOV     R0,#?V0 + 8
   \   0001DB   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001DE   7407         MOV     A,#0x7
   \   0001E0   12....       LCALL   ?XSTACK_DISP0_8
   \   0001E3   8582..       MOV     ?V0 + 8,DPL
   \   0001E6   8583..       MOV     ?V0 + 9,DPH
   \   0001E9   78..         MOV     R0,#?V0 + 8
   \   0001EB   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001EE   75..04       MOV     ?V0 + 8,#0x4
   \   0001F1   75..00       MOV     ?V0 + 9,#0x0
   \   0001F4   78..         MOV     R0,#?V0 + 8
   \   0001F6   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001F9   75..07       MOV     ?V0 + 8,#0x7
   \   0001FC   75..00       MOV     ?V0 + 9,#0x0
   \   0001FF   78..         MOV     R0,#?V0 + 8
   \   000201   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000204   7920         MOV     R1,#0x20
   \   000206   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000208   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   00020A   7A..         MOV     R2,#SampleApp_Periodic_DstAddr & 0xff
   \   00020C   7B..         MOV     R3,#(SampleApp_Periodic_DstAddr >> 8) & 0xff
   \   00020E   12....       LCALL   ??AF_DataRequest?relay
   \   000211   7409         MOV     A,#0x9
   \   000213   12....       LCALL   ?DEALLOC_XSTACK8
   \   000216   E9           MOV     A,R1
   1641              {
   1642              }
   1643              else
   1644              {
   1645                // Error occurred in request to send.
   1646              }
   1647            }
   1648            
   1649            //处理心跳包。看是否还在线
   1650            
   1651            for(uint8 j=0;j<NWK_MAX_DEVICES;j++)
   \                     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_7:
   \   000217   7B00         MOV     R3,#0x0
   \                     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_8:
   \   000219   EB           MOV     A,R3
   \   00021A   C3           CLR     C
   \   00021B   9415         SUBB    A,#0x15
   \   00021D   4003         JC      $+5
   \   00021F   02....       LJMP    ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_9 & 0xFFFF
   1652            {
   1653              nr =  AssociatedDevList[j].nodeRelation;
   \   000222   EB           MOV     A,R3
   \   000223   F8           MOV     R0,A
   \   000224   7900         MOV     R1,#0x0
   \   000226   E8           MOV     A,R0
   \   000227   75F012       MOV     B,#0x12
   \   00022A   A4           MUL     AB
   \   00022B   C8           XCH     A,R0
   \   00022C   AAF0         MOV     R2,B
   \   00022E   75F000       MOV     B,#0x0
   \   000231   A4           MUL     AB
   \   000232   2A           ADD     A,R2
   \   000233   FA           MOV     R2,A
   \   000234   75F012       MOV     B,#0x12
   \   000237   E9           MOV     A,R1
   \   000238   A4           MUL     AB
   \   000239   2A           ADD     A,R2
   \   00023A   F9           MOV     R1,A
   \   00023B   74..         MOV     A,#(AssociatedDevList + 4) & 0xff
   \   00023D   28           ADD     A,R0
   \   00023E   F582         MOV     DPL,A
   \   000240   74..         MOV     A,#((AssociatedDevList + 4) >> 8) & 0xff
   \   000242   39           ADDC    A,R1
   \   000243   F583         MOV     DPH,A
   \   000245   E0           MOVX    A,@DPTR
   \   000246   F5..         MOV     ?V0 + 5,A
   1654              if (nr == CHILD_RFD || nr == CHILD_RFD_RX_IDLE)// || nr == CHILD_FFD || nr == CHILD_FFD_RX_IDLE)    
   \   000248   7401         MOV     A,#0x1
   \   00024A   65..         XRL     A,?V0 + 5
   \   00024C   6006         JZ      ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_10
   \   00024E   7402         MOV     A,#0x2
   \   000250   65..         XRL     A,?V0 + 5
   \   000252   7056         JNZ     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_11
   1655              {
   1656                if(AssociatedDevList[j].shortAddr==Child_short_adress)
   \                     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_10:
   \   000254   EB           MOV     A,R3
   \   000255   F8           MOV     R0,A
   \   000256   7900         MOV     R1,#0x0
   \   000258   E8           MOV     A,R0
   \   000259   75F012       MOV     B,#0x12
   \   00025C   A4           MUL     AB
   \   00025D   C8           XCH     A,R0
   \   00025E   AAF0         MOV     R2,B
   \   000260   75F000       MOV     B,#0x0
   \   000263   A4           MUL     AB
   \   000264   2A           ADD     A,R2
   \   000265   FA           MOV     R2,A
   \   000266   75F012       MOV     B,#0x12
   \   000269   E9           MOV     A,R1
   \   00026A   A4           MUL     AB
   \   00026B   2A           ADD     A,R2
   \   00026C   F9           MOV     R1,A
   \   00026D   74..         MOV     A,#AssociatedDevList & 0xff
   \   00026F   28           ADD     A,R0
   \   000270   F582         MOV     DPL,A
   \   000272   74..         MOV     A,#(AssociatedDevList >> 8) & 0xff
   \   000274   39           ADDC    A,R1
   \   000275   F583         MOV     DPH,A
   \   000277   E0           MOVX    A,@DPTR
   \   000278   65..         XRL     A,?V0 + 2
   \   00027A   7004         JNZ     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_12
   \   00027C   A3           INC     DPTR
   \   00027D   E0           MOVX    A,@DPTR
   \   00027E   65..         XRL     A,?V0 + 3
   \                     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_12:
   \   000280   7028         JNZ     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_11
   1657                {
   1658                  Child_list[j].heart_count=0; 
   \   000282   EB           MOV     A,R3
   \   000283   F8           MOV     R0,A
   \   000284   7900         MOV     R1,#0x0
   \   000286   E8           MOV     A,R0
   \   000287   75F002       MOV     B,#0x2
   \   00028A   A4           MUL     AB
   \   00028B   C8           XCH     A,R0
   \   00028C   AAF0         MOV     R2,B
   \   00028E   75F000       MOV     B,#0x0
   \   000291   A4           MUL     AB
   \   000292   2A           ADD     A,R2
   \   000293   FA           MOV     R2,A
   \   000294   75F002       MOV     B,#0x2
   \   000297   E9           MOV     A,R1
   \   000298   A4           MUL     AB
   \   000299   2A           ADD     A,R2
   \   00029A   F9           MOV     R1,A
   \   00029B   74..         MOV     A,#(Child_list + 1) & 0xff
   \   00029D   28           ADD     A,R0
   \   00029E   F582         MOV     DPL,A
   \   0002A0   74..         MOV     A,#((Child_list + 1) >> 8) & 0xff
   \   0002A2   39           ADDC    A,R1
   \   0002A3   F583         MOV     DPH,A
   \   0002A5   7400         MOV     A,#0x0
   \   0002A7   F0           MOVX    @DPTR,A
   1659                  //  Child_list[j].isActive=true;//收到心跳了在线的
   1660                  break;
   \   0002A8   8004         SJMP    ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_9
   1661                }
   1662              }
   1663            }
   \                     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_11:
   \   0002AA   0B           INC     R3
   \   0002AB   02....       LJMP    ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_8 & 0xFFFF
   1664          }
   \                     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data_9:
   \   0002AE   7408         MOV     A,#0x8
   \   0002B0   12....       LCALL   ?DEALLOC_XSTACK8
   \   0002B3   7F0A         MOV     R7,#0xa
   \   0002B5   02....       LJMP    ?BANKED_LEAVE_XDATA
   1665          
   1666          
   1667          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1668          void APP_OS_DEAL_WITH(uint16 poll_rate_value)
   \                     APP_OS_DEAL_WITH:
   1669          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
   1670             if(OS_FLAG==0)
   \   000009   90....       MOV     DPTR,#OS_FLAG
   \   00000C   E0           MOVX    A,@DPTR
   \   00000D   7005         JNZ     ??APP_OS_DEAL_WITH_0
   1671              {
   1672               SystemResetSoft();
   \   00000F                ; Setup parameters for call to function Onboard_soft_reset
   \   00000F   12....       LCALL   Onboard_soft_reset & 0xFFFF
   \   000012   8007         SJMP    ??APP_OS_DEAL_WITH_1
   1673              }
   1674              else
   1675              {  
   1676               NLME_SetPollRate( poll_rate_value );     
   \                     ??APP_OS_DEAL_WITH_0:
   \   000014                ; Setup parameters for call to function NLME_SetPollRate
   \   000014   EE           MOV     A,R6
   \   000015   FA           MOV     R2,A
   \   000016   EF           MOV     A,R7
   \   000017   FB           MOV     R3,A
   \   000018   12....       LCALL   ??NLME_SetPollRate?relay
   1677              }
   1678          }
   \                     ??APP_OS_DEAL_WITH_1:
   \   00001B   7F01         MOV     R7,#0x1
   \   00001D   02....       LJMP    ?BANKED_LEAVE_XDATA
   1679          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1680          uint8 APP_ENDDEVICE_ACK(uint8 a,uint8 b,uint8 c)
   \                     APP_ENDDEVICE_ACK:
   1681          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
   \   000000   E9           MOV     A,R1
   \   000001   F8           MOV     R0,A
   1682            if( (a==1) && (b==2) && (c==3) )
   \   000002   7401         MOV     A,#0x1
   \   000004   68           XRL     A,R0
   \   000005   700E         JNZ     ??APP_ENDDEVICE_ACK_0
   \   000007   7402         MOV     A,#0x2
   \   000009   6A           XRL     A,R2
   \   00000A   7009         JNZ     ??APP_ENDDEVICE_ACK_0
   \   00000C   7403         MOV     A,#0x3
   \   00000E   6B           XRL     A,R3
   \   00000F   7004         JNZ     ??APP_ENDDEVICE_ACK_0
   1683            {
   1684             return 1;
   \   000011   7901         MOV     R1,#0x1
   \   000013   8002         SJMP    ??APP_ENDDEVICE_ACK_1
   1685            }
   1686            else
   1687            {
   1688             return 0;
   \                     ??APP_ENDDEVICE_ACK_0:
   \   000015   7900         MOV     R1,#0x0
   \                     ??APP_ENDDEVICE_ACK_1:
   \   000017   02....       LJMP    ?BRET
   1689            } 
   1690          
   1691          }
   1692          
   1693          
   1694          
   1695          // active send the rs message
   1696          // type1_id 1or 0 1 enddevice 0 router
   1697          // type2_id device id
   1698          // data_len RS有效数据长度
   1699          // data RS有效数据

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1700          void sampleAPP_sendRS_periodMessage(uint8 type1_id,uint8 type2_id,uint8 data_len,uint8 *data)
   \                     sampleAPP_sendRS_periodMessage:
   1701          {
   \   000000   74EE         MOV     A,#-0x12
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 18
   \   000005                ; Auto size: 46
   \   000005   74D2         MOV     A,#-0x2e
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   89..         MOV     ?V0 + 5,R1
   \   00000C   8A..         MOV     ?V0 + 4,R2
   \   00000E   8B..         MOV     ?V0 + 3,R3
   \   000010   8C..         MOV     ?V0 + 6,R4
   \   000012   8D..         MOV     ?V0 + 7,R5
   1702            uint8 str[45];
   1703            uint8 *Sample_Cmd_shorAddr;
   1704            uint8 *Sample_extendaddr;
   1705            
   1706            Sample_Cmd_shorAddr=SampleApp_GetShortAddr();
   \   000014                ; Setup parameters for call to function SampleApp_GetShortAddr
   \   000014   12....       LCALL   ??SampleApp_GetShortAddr?relay
   \   000017   8A..         MOV     ?V0 + 8,R2
   \   000019   8B..         MOV     ?V0 + 9,R3
   \   00001B   AE..         MOV     R6,?V0 + 8
   \   00001D   AF..         MOV     R7,?V0 + 9
   1707            str[0]=*Sample_Cmd_shorAddr++;
   \   00001F   8E82         MOV     DPL,R6
   \   000021   8F83         MOV     DPH,R7
   \   000023   E0           MOVX    A,@DPTR
   \   000024   C0E0         PUSH    A
   \   000026   7401         MOV     A,#0x1
   \   000028   12....       LCALL   ?XSTACK_DISP0_8
   \   00002B   D0E0         POP     A
   \   00002D   F0           MOVX    @DPTR,A
   \   00002E   8E82         MOV     DPL,R6
   \   000030   8F83         MOV     DPH,R7
   \   000032   A3           INC     DPTR
   \   000033   AE82         MOV     R6,DPL
   \   000035   AF83         MOV     R7,DPH
   1708            str[1]=*Sample_Cmd_shorAddr++;
   \   000037   8E82         MOV     DPL,R6
   \   000039   8F83         MOV     DPH,R7
   \   00003B   E0           MOVX    A,@DPTR
   \   00003C   C0E0         PUSH    A
   \   00003E   7402         MOV     A,#0x2
   \   000040   12....       LCALL   ?XSTACK_DISP0_8
   \   000043   D0E0         POP     A
   \   000045   F0           MOVX    @DPTR,A
   \   000046   8E82         MOV     DPL,R6
   \   000048   8F83         MOV     DPH,R7
   \   00004A   A3           INC     DPTR
   \   00004B   AE82         MOV     R6,DPL
   \   00004D   AF83         MOV     R7,DPH
   1709            str[2]=*Sample_Cmd_shorAddr++;
   \   00004F   8E82         MOV     DPL,R6
   \   000051   8F83         MOV     DPH,R7
   \   000053   E0           MOVX    A,@DPTR
   \   000054   C0E0         PUSH    A
   \   000056   7403         MOV     A,#0x3
   \   000058   12....       LCALL   ?XSTACK_DISP0_8
   \   00005B   D0E0         POP     A
   \   00005D   F0           MOVX    @DPTR,A
   \   00005E   8E82         MOV     DPL,R6
   \   000060   8F83         MOV     DPH,R7
   \   000062   A3           INC     DPTR
   \   000063   AE82         MOV     R6,DPL
   \   000065   AF83         MOV     R7,DPH
   1710            str[3]=*Sample_Cmd_shorAddr;
   \   000067   8E82         MOV     DPL,R6
   \   000069   8F83         MOV     DPH,R7
   \   00006B   E0           MOVX    A,@DPTR
   \   00006C   C0E0         PUSH    A
   \   00006E   7404         MOV     A,#0x4
   \   000070   12....       LCALL   ?XSTACK_DISP0_8
   \   000073   D0E0         POP     A
   \   000075   F0           MOVX    @DPTR,A
   1711            osal_mem_free( shortddr_mem );
   \   000076                ; Setup parameters for call to function osal_mem_free
   \   000076   90....       MOV     DPTR,#shortddr_mem
   \   000079   E0           MOVX    A,@DPTR
   \   00007A   FA           MOV     R2,A
   \   00007B   A3           INC     DPTR
   \   00007C   E0           MOVX    A,@DPTR
   \   00007D   FB           MOV     R3,A
   \   00007E   12....       LCALL   ??osal_mem_free?relay
   1712          
   1713            str[4]='/';
   \   000081   7405         MOV     A,#0x5
   \   000083   12....       LCALL   ?XSTACK_DISP0_8
   \   000086   742F         MOV     A,#0x2f
   \   000088   F0           MOVX    @DPTR,A
   1714            str[5]='C';
   \   000089   7406         MOV     A,#0x6
   \   00008B   12....       LCALL   ?XSTACK_DISP0_8
   \   00008E   7443         MOV     A,#0x43
   \   000090   F0           MOVX    @DPTR,A
   1715            str[6]='/';
   \   000091   7407         MOV     A,#0x7
   \   000093   12....       LCALL   ?XSTACK_DISP0_8
   \   000096   742F         MOV     A,#0x2f
   \   000098   F0           MOVX    @DPTR,A
   1716            str[7]='U';
   \   000099   7408         MOV     A,#0x8
   \   00009B   12....       LCALL   ?XSTACK_DISP0_8
   \   00009E   7455         MOV     A,#0x55
   \   0000A0   F0           MOVX    @DPTR,A
   1717            str[8]='U';
   \   0000A1   7409         MOV     A,#0x9
   \   0000A3   12....       LCALL   ?XSTACK_DISP0_8
   \   0000A6   7455         MOV     A,#0x55
   \   0000A8   F0           MOVX    @DPTR,A
   1718            str[9]='R';
   \   0000A9   740A         MOV     A,#0xa
   \   0000AB   12....       LCALL   ?XSTACK_DISP0_8
   \   0000AE   7452         MOV     A,#0x52
   \   0000B0   F0           MOVX    @DPTR,A
   1719          
   1720             uint8 i;
   1721            str[10]=type1_id;
   \   0000B1   E5..         MOV     A,?V0 + 5
   \   0000B3   740B         MOV     A,#0xb
   \   0000B5   12....       LCALL   ?XSTACK_DISP0_8
   \   0000B8   E5..         MOV     A,?V0 + 5
   \   0000BA   F0           MOVX    @DPTR,A
   1722            str[11]=type2_id;//
   \   0000BB   E5..         MOV     A,?V0 + 4
   \   0000BD   740C         MOV     A,#0xc
   \   0000BF   12....       LCALL   ?XSTACK_DISP0_8
   \   0000C2   E5..         MOV     A,?V0 + 4
   \   0000C4   F0           MOVX    @DPTR,A
   1723           
   1724            Sample_extendaddr=SampleApp_GetExtendAddr();
   \   0000C5                ; Setup parameters for call to function SampleApp_GetExtendAddr
   \   0000C5   12....       LCALL   ??SampleApp_GetExtendAddr?relay
   \   0000C8   8A..         MOV     ?V0 + 8,R2
   \   0000CA   8B..         MOV     ?V0 + 9,R3
   \   0000CC   85....       MOV     ?V0 + 0,?V0 + 8
   \   0000CF   85....       MOV     ?V0 + 1,?V0 + 9
   1725            for(i=0;i<16;i++)
   \   0000D2   75..00       MOV     ?V0 + 2,#0x0
   \                     ??sampleAPP_sendRS_periodMessage_0:
   \   0000D5   E5..         MOV     A,?V0 + 2
   \   0000D7   C3           CLR     C
   \   0000D8   9410         SUBB    A,#0x10
   \   0000DA   503C         JNC     ??sampleAPP_sendRS_periodMessage_1
   1726            {
   1727              str[i+12]=*Sample_extendaddr++;
   \   0000DC   85..82       MOV     DPL,?V0 + 0
   \   0000DF   85..83       MOV     DPH,?V0 + 1
   \   0000E2   E0           MOVX    A,@DPTR
   \   0000E3   C0E0         PUSH    A
   \   0000E5   85....       MOV     ?V0 + 8,?V0 + 2
   \   0000E8   75..00       MOV     ?V0 + 9,#0x0
   \   0000EB   7401         MOV     A,#0x1
   \   0000ED   12....       LCALL   ?XSTACK_DISP0_8
   \   0000F0   E582         MOV     A,DPL
   \   0000F2   25..         ADD     A,?V0 + 8
   \   0000F4   F8           MOV     R0,A
   \   0000F5   E583         MOV     A,DPH
   \   0000F7   35..         ADDC    A,?V0 + 9
   \   0000F9   F9           MOV     R1,A
   \   0000FA   E8           MOV     A,R0
   \   0000FB   240C         ADD     A,#0xc
   \   0000FD   F582         MOV     DPL,A
   \   0000FF   E9           MOV     A,R1
   \   000100   3400         ADDC    A,#0x0
   \   000102   F583         MOV     DPH,A
   \   000104   D0E0         POP     A
   \   000106   F0           MOVX    @DPTR,A
   \   000107   85..82       MOV     DPL,?V0 + 0
   \   00010A   85..83       MOV     DPH,?V0 + 1
   \   00010D   A3           INC     DPTR
   \   00010E   8582..       MOV     ?V0 + 0,DPL
   \   000111   8583..       MOV     ?V0 + 1,DPH
   1728            }
   \   000114   05..         INC     ?V0 + 2
   \   000116   80BD         SJMP    ??sampleAPP_sendRS_periodMessage_0
   1729             osal_mem_free( extendaddr_mem );
   \                     ??sampleAPP_sendRS_periodMessage_1:
   \   000118                ; Setup parameters for call to function osal_mem_free
   \   000118   90....       MOV     DPTR,#extendaddr_mem
   \   00011B   E0           MOVX    A,@DPTR
   \   00011C   FA           MOV     R2,A
   \   00011D   A3           INC     DPTR
   \   00011E   E0           MOVX    A,@DPTR
   \   00011F   FB           MOV     R3,A
   \   000120   12....       LCALL   ??osal_mem_free?relay
   1730             str[28]=0;
   \   000123   741D         MOV     A,#0x1d
   \   000125   12....       LCALL   ?XSTACK_DISP0_8
   \   000128   7400         MOV     A,#0x0
   \   00012A   F0           MOVX    @DPTR,A
   1731             for(uint8 i=0;i<data_len;i++)
   \   00012B   7A00         MOV     R2,#0x0
   \                     ??sampleAPP_sendRS_periodMessage_2:
   \   00012D   EA           MOV     A,R2
   \   00012E   C3           CLR     C
   \   00012F   95..         SUBB    A,?V0 + 3
   \   000131   5038         JNC     ??sampleAPP_sendRS_periodMessage_3
   1732             {
   1733              str[29+i]=data[i];
   \   000133   8A..         MOV     ?V0 + 8,R2
   \   000135   75..00       MOV     ?V0 + 9,#0x0
   \   000138   E5..         MOV     A,?V0 + 6
   \   00013A   25..         ADD     A,?V0 + 8
   \   00013C   F582         MOV     DPL,A
   \   00013E   E5..         MOV     A,?V0 + 7
   \   000140   35..         ADDC    A,?V0 + 9
   \   000142   F583         MOV     DPH,A
   \   000144   E0           MOVX    A,@DPTR
   \   000145   C0E0         PUSH    A
   \   000147   8A..         MOV     ?V0 + 8,R2
   \   000149   75..00       MOV     ?V0 + 9,#0x0
   \   00014C   7401         MOV     A,#0x1
   \   00014E   12....       LCALL   ?XSTACK_DISP0_8
   \   000151   E582         MOV     A,DPL
   \   000153   25..         ADD     A,?V0 + 8
   \   000155   F8           MOV     R0,A
   \   000156   E583         MOV     A,DPH
   \   000158   35..         ADDC    A,?V0 + 9
   \   00015A   F9           MOV     R1,A
   \   00015B   E8           MOV     A,R0
   \   00015C   241D         ADD     A,#0x1d
   \   00015E   F582         MOV     DPL,A
   \   000160   E9           MOV     A,R1
   \   000161   3400         ADDC    A,#0x0
   \   000163   F583         MOV     DPH,A
   \   000165   D0E0         POP     A
   \   000167   F0           MOVX    @DPTR,A
   1734             }
   \   000168   0A           INC     R2
   \   000169   80C2         SJMP    ??sampleAPP_sendRS_periodMessage_2
   1735             
   1736             
   1737              SampleApp_SPI_SendCommand_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \                     ??sampleAPP_sendRS_periodMessage_3:
   \   00016B   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 8
   \   00016E   7402         MOV     A,#0x2
   \   000170   F0           MOVX    @DPTR,A
   1738              SampleApp_SPI_SendCommand_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   000171   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr + 9
   \   000174   7414         MOV     A,#0x14
   \   000176   F0           MOVX    @DPTR,A
   1739              SampleApp_SPI_SendCommand_DstAddr.addr.shortAddr = 0X0000;
   \   000177   90....       MOV     DPTR,#SampleApp_SPI_SendCommand_DstAddr
   \   00017A   7400         MOV     A,#0x0
   \   00017C   F0           MOVX    @DPTR,A
   \   00017D   A3           INC     DPTR
   \   00017E   7400         MOV     A,#0x0
   \   000180   F0           MOVX    @DPTR,A
   1740          
   1741              if ( AF_DataRequest( &SampleApp_SPI_SendCommand_DstAddr,
   1742                                   (endPointDesc_t *)&SampleApp_epDesc,
   1743                                    SAMPLEAPP_COMMAND_CLUSTERID, //终端传过去，协调器处理了
   1744                                    29+data_len, str,
   1745                                    &SampleApp_TransID, 
   1746                                    AF_DISCV_ROUTE, 
   1747                                    AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000181                ; Setup parameters for call to function AF_DataRequest
   \   000181   75..0F       MOV     ?V0 + 8,#0xf
   \   000184   78..         MOV     R0,#?V0 + 8
   \   000186   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000189   75....       MOV     ?V0 + 8,#SampleApp_TransID & 0xff
   \   00018C   75....       MOV     ?V0 + 9,#(SampleApp_TransID >> 8) & 0xff
   \   00018F   78..         MOV     R0,#?V0 + 8
   \   000191   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000194   7404         MOV     A,#0x4
   \   000196   12....       LCALL   ?XSTACK_DISP0_8
   \   000199   8582..       MOV     ?V0 + 8,DPL
   \   00019C   8583..       MOV     ?V0 + 9,DPH
   \   00019F   78..         MOV     R0,#?V0 + 8
   \   0001A1   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001A4   85....       MOV     ?V0 + 8,?V0 + 3
   \   0001A7   75..00       MOV     ?V0 + 9,#0x0
   \   0001AA   E5..         MOV     A,?V0 + 8
   \   0001AC   241D         ADD     A,#0x1d
   \   0001AE   F5..         MOV     ?V0 + 8,A
   \   0001B0   E5..         MOV     A,?V0 + 9
   \   0001B2   3400         ADDC    A,#0x0
   \   0001B4   F5..         MOV     ?V0 + 9,A
   \   0001B6   78..         MOV     R0,#?V0 + 8
   \   0001B8   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001BB   75..04       MOV     ?V0 + 8,#0x4
   \   0001BE   75..00       MOV     ?V0 + 9,#0x0
   \   0001C1   78..         MOV     R0,#?V0 + 8
   \   0001C3   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001C6   7920         MOV     R1,#0x20
   \   0001C8   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   0001CA   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   0001CC   7A..         MOV     R2,#SampleApp_SPI_SendCommand_DstAddr & 0xff
   \   0001CE   7B..         MOV     R3,#(SampleApp_SPI_SendCommand_DstAddr >> 8) & 0xff
   \   0001D0   12....       LCALL   ??AF_DataRequest?relay
   \   0001D3   7409         MOV     A,#0x9
   \   0001D5   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001D8   E9           MOV     A,R1
   \   0001D9   85..82       MOV     DPL,?XSP + 0
   \   0001DC   85..83       MOV     DPH,?XSP + 1
   \   0001DF   F0           MOVX    @DPTR,A
   1748              {
   1749              }
   1750              else
   1751              {
   1752              }   
   1753              
   1754              
   1755             
   1756          }
   \   0001E0   742E         MOV     A,#0x2e
   \   0001E2   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001E5   7F0A         MOV     R7,#0xa
   \   0001E7   02....       LJMP    ?BANKED_LEAVE_XDATA
   1757          
   1758          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1759          void Change_Net_Set(void)
   \                     Change_Net_Set:
   1760          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
   1761           
   1762            if(New_Net_flag == 1)
   \   000004   90....       MOV     DPTR,#New_Net_flag
   \   000007   E0           MOVX    A,@DPTR
   \   000008   6401         XRL     A,#0x1
   \   00000A   7044         JNZ     ??Change_Net_Set_0
   1763              {
   1764                   // 先发送出去再考虑切换频道
   1765                  if((New_Channel_list>=0x0B) && (New_Channel_list<=0x1A))
   \   00000C   90....       MOV     DPTR,#New_Channel_list
   \   00000F   E0           MOVX    A,@DPTR
   \   000010   C3           CLR     C
   \   000011   940B         SUBB    A,#0xb
   \   000013   4033         JC      ??Change_Net_Set_1
   \   000015   90....       MOV     DPTR,#New_Channel_list
   \   000018   E0           MOVX    A,@DPTR
   \   000019   C3           CLR     C
   \   00001A   941B         SUBB    A,#0x1b
   \   00001C   502A         JNC     ??Change_Net_Set_1
   1766                  {  
   1767                    _NIB.nwkLogicalChannel = New_Channel_list;
   \   00001E   90....       MOV     DPTR,#New_Channel_list
   \   000021   E0           MOVX    A,@DPTR
   \   000022   90....       MOV     DPTR,#_NIB + 22
   \   000025   F0           MOVX    @DPTR,A
   1768                    ZMacSetReq( ZMacChannel, &New_Channel_list );
   \   000026                ; Setup parameters for call to function ZMacSetReq
   \   000026   7A..         MOV     R2,#New_Channel_list & 0xff
   \   000028   7B..         MOV     R3,#(New_Channel_list >> 8) & 0xff
   \   00002A   79E1         MOV     R1,#-0x1f
   \   00002C   12....       LCALL   ??ZMacSetReq?relay
   \   00002F   E9           MOV     A,R1
   1769          
   1770                    ZDApp_NwkStateUpdateCB();
   \   000030                ; Setup parameters for call to function ZDApp_NwkStateUpdateCB
   \   000030   12....       LCALL   ??ZDApp_NwkStateUpdateCB?relay
   1771                    _NIB.nwkTotalTransmissions = 0;
   \   000033   90....       MOV     DPTR,#_NIB + 107
   \   000036   7400         MOV     A,#0x0
   \   000038   F0           MOVX    @DPTR,A
   \   000039   A3           INC     DPTR
   \   00003A   7400         MOV     A,#0x0
   \   00003C   F0           MOVX    @DPTR,A
   1772                    nwkTransmissionFailures( TRUE );
   \   00003D                ; Setup parameters for call to function nwkTransmissionFailures
   \   00003D   7901         MOV     R1,#0x1
   \   00003F   12....       LCALL   ??nwkTransmissionFailures?relay
   1773                    New_Channel_list = 0;
   \   000042   90....       MOV     DPTR,#New_Channel_list
   \   000045   7400         MOV     A,#0x0
   \   000047   F0           MOVX    @DPTR,A
   1774                  }
   1775                   New_Net_flag = 0;
   \                     ??Change_Net_Set_1:
   \   000048   90....       MOV     DPTR,#New_Net_flag
   \   00004B   7400         MOV     A,#0x0
   \   00004D   F0           MOVX    @DPTR,A
   \   00004E   806C         SJMP    ??Change_Net_Set_2
   1776                 
   1777              }
   1778              else if(New_Net_flag == 2)
   \                     ??Change_Net_Set_0:
   \   000050   90....       MOV     DPTR,#New_Net_flag
   \   000053   E0           MOVX    A,@DPTR
   \   000054   6402         XRL     A,#0x2
   \   000056   705A         JNZ     ??Change_Net_Set_3
   1779              {
   1780                 if ( (New_Panid != 0xFFFF) || (New_Panid != INVALID_PAN_ID) )
   \   000058   90....       MOV     DPTR,#New_Panid
   \   00005B   E0           MOVX    A,@DPTR
   \   00005C   64FF         XRL     A,#0xff
   \   00005E   7004         JNZ     ??Change_Net_Set_4
   \   000060   A3           INC     DPTR
   \   000061   E0           MOVX    A,@DPTR
   \   000062   64FF         XRL     A,#0xff
   \                     ??Change_Net_Set_4:
   \   000064   700E         JNZ     ??Change_Net_Set_5
   \   000066   90....       MOV     DPTR,#New_Panid
   \   000069   E0           MOVX    A,@DPTR
   \   00006A   64FE         XRL     A,#0xfe
   \   00006C   7004         JNZ     ??Change_Net_Set_6
   \   00006E   A3           INC     DPTR
   \   00006F   E0           MOVX    A,@DPTR
   \   000070   64FF         XRL     A,#0xff
   \                     ??Change_Net_Set_6:
   \   000072   6036         JZ      ??Change_Net_Set_7
   1781                    {    
   1782                      _NIB.nwkPanId = New_Panid;
   \                     ??Change_Net_Set_5:
   \   000074   90....       MOV     DPTR,#New_Panid
   \   000077   E0           MOVX    A,@DPTR
   \   000078   F8           MOV     R0,A
   \   000079   A3           INC     DPTR
   \   00007A   E0           MOVX    A,@DPTR
   \   00007B   F9           MOV     R1,A
   \   00007C   90....       MOV     DPTR,#_NIB + 33
   \   00007F   E8           MOV     A,R0
   \   000080   F0           MOVX    @DPTR,A
   \   000081   A3           INC     DPTR
   \   000082   E9           MOV     A,R1
   \   000083   F0           MOVX    @DPTR,A
   1783                      ZMacSetReq( ZMacPanId, (byte*)&(_NIB.nwkPanId) );
   \   000084                ; Setup parameters for call to function ZMacSetReq
   \   000084   7A..         MOV     R2,#(_NIB + 33) & 0xff
   \   000086   7B..         MOV     R3,#((_NIB + 33) >> 8) & 0xff
   \   000088   7950         MOV     R1,#0x50
   \   00008A   12....       LCALL   ??ZMacSetReq?relay
   \   00008D   E9           MOV     A,R1
   1784                      ZDApp_NwkStateUpdateCB();
   \   00008E                ; Setup parameters for call to function ZDApp_NwkStateUpdateCB
   \   00008E   12....       LCALL   ??ZDApp_NwkStateUpdateCB?relay
   1785                      _NIB.nwkTotalTransmissions = 0;
   \   000091   90....       MOV     DPTR,#_NIB + 107
   \   000094   7400         MOV     A,#0x0
   \   000096   F0           MOVX    @DPTR,A
   \   000097   A3           INC     DPTR
   \   000098   7400         MOV     A,#0x0
   \   00009A   F0           MOVX    @DPTR,A
   1786                      nwkTransmissionFailures( TRUE );
   \   00009B                ; Setup parameters for call to function nwkTransmissionFailures
   \   00009B   7901         MOV     R1,#0x1
   \   00009D   12....       LCALL   ??nwkTransmissionFailures?relay
   1787                      New_Panid = 0xFFFF;
   \   0000A0   90....       MOV     DPTR,#New_Panid
   \   0000A3   74FF         MOV     A,#-0x1
   \   0000A5   F0           MOVX    @DPTR,A
   \   0000A6   A3           INC     DPTR
   \   0000A7   74FF         MOV     A,#-0x1
   \   0000A9   F0           MOVX    @DPTR,A
   1788                    }
   1789                 New_Net_flag = 0;
   \                     ??Change_Net_Set_7:
   \   0000AA   90....       MOV     DPTR,#New_Net_flag
   \   0000AD   7400         MOV     A,#0x0
   \   0000AF   F0           MOVX    @DPTR,A
   \   0000B0   800A         SJMP    ??Change_Net_Set_2
   1790                 
   1791              }
   1792              else
   1793              { 
   1794              //  SystemResetSoft();
   1795                  HAL_SYSTEM_RESET(); 
   \                     ??Change_Net_Set_3:
   \   0000B2   C2AF         CLR     0xa8.7
   \   0000B4   75C9AB       MOV     0xc9,#-0x55
   \   0000B7   75C95B       MOV     0xc9,#0x5b
   \                     ??Change_Net_Set_8:
   \   0000BA   80FE         SJMP    ??Change_Net_Set_8
   1796              } 
   1797          
   1798          }
   \                     ??Change_Net_Set_2:
   \   0000BC   D083         POP     DPH
   \   0000BE   D082         POP     DPL
   \   0000C0   02....       LJMP    ?BRET
   \   0000C3                REQUIRE _A_IEN0
   \   0000C3                REQUIRE WDCTL

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for Heart_mesg_flag>`:
   \   000000   01           DB 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for defaultKey>`:
   \   000000   03           DB 3
   \   000001   03           DB 3
   \   000002   05           DB 5
   \   000003   07           DB 7
   \   000004   09           DB 9
   \   000005   0B           DB 11
   \   000006   0D           DB 13
   \   000007   0F           DB 15
   \   000008   02           DB 2
   \   000009   02           DB 2
   \   00000A   04           DB 4
   \   00000B   06           DB 6
   \   00000C   08           DB 8
   \   00000D   0A           DB 10
   \   00000E   0C           DB 12
   \   00000F   0D           DB 13

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ZDApp_NwkDescListProcessing?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ZDApp_NwkDescListProcessing

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ZDO_DEVICE_DISC?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ZDO_DEVICE_DISC

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ZDO_REJOIN_ERROR?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ZDO_REJOIN_ERROR

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ZDO_ACK_DEAL_WITH?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ZDO_ACK_DEAL_WITH

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??APP_JOIN_INIT?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    APP_JOIN_INIT

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??APP_JOIN_DEAL_WITH?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    APP_JOIN_DEAL_WITH

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??APP_JOIN_START_EVT?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    APP_JOIN_START_EVT

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SendNwkaddrMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SendNwkaddrMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??APPLY_TO_JOIN_OF_KEY?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    APPLY_TO_JOIN_OF_KEY

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??RESTORE_TO_FACTORY?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    RESTORE_TO_FACTORY

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SendPeriodicMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SendPeriodicMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zb_ReadConfiguration?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zb_ReadConfiguration

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zb_WriteConfiguration?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zb_WriteConfiguration

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_GetShortAddr?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_GetShortAddr

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_GetExtendAddr?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_GetExtendAddr

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??hextoword1?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    hextoword1

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??hextoword2?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    hextoword2

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??wordtohex?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    wordtohex

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??APP_NORMAL_COMMAND?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    APP_NORMAL_COMMAND

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zb_StartRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zb_StartRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??APP_DEAL_WITH_ASSOCIATED?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    APP_DEAL_WITH_ASSOCIATED

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_ProcessNwkaddrMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_ProcessNwkaddrMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??RemoveStaleNode?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    RemoveStaleNode

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??RemoveStaleRouter?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    RemoveStaleRouter

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data?:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_ROUTER_ProcessPeriodicMessage_Data

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??APP_OS_DEAL_WITH?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    APP_OS_DEAL_WITH

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??APP_ENDDEVICE_ACK?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    APP_ENDDEVICE_ACK

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??sampleAPP_sendRS_periodMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    sampleAPP_sendRS_periodMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Change_Net_Set?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Change_Net_Set

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {1, 2, 3}>`:
   \   000000   01           DB 1
   \   000001   02           DB 2
   \   000002   03           DB 3

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_318c800:
   \   000000   00C81803     DD 51955712

   Maximum stack usage in bytes:

     Function                       ISTACK PSTACK XSTACK
     --------                       ------ ------ ------
     APPLY_TO_JOIN_OF_KEY               2      0      1
       -> zb_ReadConfiguration          4      0      2
       -> zb_WriteConfiguration         4      0      2
       -> osal_start_timerEx            4      0      2
     APP_DEAL_WITH_ASSOCIATED           0      0      9
       -> RemoveStaleNode               0      0     18
       -> RemoveStaleNode               0      0     18
       -> osal_start_timerEx            0      0     18
     APP_ENDDEVICE_ACK                  0      0      0
     APP_JOIN_DEAL_WITH                 0      0     23
       -> NLME_PermitJoiningRequest     0      0     38
       -> osal_start_timerEx            0      0     38
       -> osal_rand                     0      0     38
       -> osal_start_timerEx            0      0     38
       -> osal_rand                     0      0     38
       -> osal_start_timerEx            0      0     38
       -> NLME_PermitJoiningRequest     0      0     38
       -> ZDP_MgmtPermitJoinReq         0      0     38
       -> osal_nv_item_init             0      0     42
       -> osal_nv_write                 0      0     46
       -> osal_start_timerEx            0      0     38
     APP_JOIN_INIT                      0      0     15
       -> zb_ReadConfiguration          0      0     22
       -> zb_StartRequest               0      0     22
       -> osal_nv_item_init             0      0     26
       -> osal_nv_read                  0      0     30
       -> osal_nv_item_init             0      0     26
       -> osal_nv_read                  0      0     30
       -> osal_start_timerEx            0      0     22
       -> osal_start_timerEx            0      0     22
       -> osal_nv_item_init             0      0     26
       -> osal_nv_read                  0      0     30
     APP_JOIN_START_EVT                 2      0      1
       -> zb_ReadConfiguration          4      0      2
       -> zb_WriteConfiguration         4      0      2
       -> Onboard_soft_reset            4      0      2
       -> osal_start_timerEx            4      0      2
     APP_NORMAL_COMMAND                 2      0     93
       -> AssocCount                    0      0    168
       -> osal_mem_alloc                0      0    168
       -> osal_mem_alloc                0      0    168
       -> NLME_GetCoordShortAddr        0      0    168
       -> AF_DataRequest                0      0    186
       -> osal_mem_free                 0      0    168
       -> osal_mem_free                 0      0    168
       -> osal_mem_alloc                0      0    168
       -> AF_DataRequest                0      0    186
       -> osal_mem_free                 0      0    168
       -> osal_mem_free                 0      0    168
       -> osal_start_timerEx            0      0    168
       -> HalLedBlink                   0      0    168
       -> osal_nv_item_init             0      0    172
       -> osal_nv_write                 0      0    176
       -> osal_nv_item_init             0      0    172
       -> osal_nv_write                 0      0    176
       -> osal_nv_item_init             0      0    172
       -> osal_nv_write                 0      0    176
       -> AF_DataRequest                0      0    186
       -> osal_nv_item_init             0      0    172
       -> osal_nv_write                 0      0    176
       -> osal_start_timerEx            0      0    168
       -> ZMacSetTransmitPower          0      0    168
       -> ZMacSetTransmitPower          0      0    168
       -> ZMacSetTransmitPower          0      0    168
       -> ZMacSetTransmitPower          0      0    168
       -> NLME_SetPollRate              0      0    168
       -> osal_nv_item_init             0      0    172
       -> osal_nv_write                 0      0    176
       -> AF_DataRequest                0      0    186
       -> AF_DataRequest                0      0    186
       -> osal_start_timerEx            0      0    168
       -> AF_DataRequest                0      0    186
       -> osal_start_timerEx            0      0    168
       -> AF_DataRequest                0      0    186
     APP_OS_DEAL_WITH                   0      0      9
       -> Onboard_soft_reset            0      0     18
       -> NLME_SetPollRate              0      0     18
     Change_Net_Set                     2      0      0
       -> ZMacSetReq                    4      0      0
       -> ZDApp_NwkStateUpdateCB        4      0      0
       -> nwkTransmissionFailures       4      0      0
       -> ZMacSetReq                    4      0      0
       -> ZDApp_NwkStateUpdateCB        4      0      0
       -> nwkTransmissionFailures       4      0      0
     RESTORE_TO_FACTORY                 1      0     33
       -> SampleApp_GetShortAddr        0      0     48
       -> AF_DataRequest                0      0     66
       -> osal_nv_item_init             0      0     52
       -> osal_nv_write                 0      0     56
       -> osal_nv_item_init             0      0     52
       -> osal_nv_write                 0      0     56
       -> osal_nv_item_init             0      0     52
       -> osal_nv_write                 0      0     56
     RemoveStaleNode                    0      0     36
       -> AddrMgrEntryGet               0      0     54
       -> NLME_LeaveReq                 0      0     54
     RemoveStaleRouter                  0      0     27
       -> AddrMgrEntryGet               0      0     54
       -> NLME_LeaveReq                 0      0     54
     SampleApp_GetExtendAddr            1      0     78
       -> osal_mem_alloc                0      0     28
       -> NLME_GetExtAddr               0      0     28
       -> hextoword1                    0      0     28
       -> hextoword2                    0      0     28
     SampleApp_GetShortAddr             1      0     78
       -> osal_mem_alloc                0      0     28
       -> NLME_GetShortAddr             0      0     28
       -> hextoword1                    0      0     28
       -> hextoword2                    0      0     28
       -> hextoword1                    0      0     28
       -> hextoword2                    0      0     28
     SampleApp_ProcessNwkaddrMessage
                                        2      0     26
       -> AF_DataRequest                0      0     52
       -> wordtohex                     0      0     34
       -> wordtohex                     0      0     34
       -> AF_DataRequest                0      0     52
     SampleApp_ROUTER_ProcessPeriodicMessage_Data
                                        2      0     35
       -> NLME_GetShortAddr             0      0     52
       -> AF_DataRequest                0      0     70
     SampleApp_SendNwkaddrMessage       1      0     51
       -> SampleApp_GetShortAddr        0      0     84
       -> osal_mem_free                 0      0     84
       -> SampleApp_GetExtendAddr       0      0     84
       -> osal_mem_free                 0      0     84
       -> NLME_GetCoordShortAddr        0      0     84
       -> AF_DataRequest                0      0    102
     SampleApp_SendPeriodicMessage      1      0     26
       -> SampleApp_GetShortAddr        0      0     34
       -> osal_mem_free                 0      0     34
       -> AF_DataRequest                0      0     52
       -> NLME_GetCoordShortAddr        0      0     34
       -> AF_DataRequest                0      0     52
     ZDApp_NwkDescListProcessing        0      0     24
       -> nwk_getNwkDescList            0      0     48
       -> nwk_getNwkDescList            0      0     48
       -> nwk_getNwkDescList            0      0     48
       -> nwk_ExtPANIDValid             0      0     48
       -> sAddrExtCmp                   0      0     48
     ZDO_ACK_DEAL_WITH                  2      0      0
       -> nwkNeighborInitTable          4      0      0
       -> ZDApp_SendMsg                 4      0      0
     ZDO_DEVICE_DISC                    0      0     12
       -> osal_pwrmgr_device            0      0     24
       -> osal_rand                     0      0     24
       -> ZDApp_NetworkInit             0      0     24
       -> osal_pwrmgr_device            0      0     24
       -> osal_rand                     0      0     24
       -> ZDApp_NetworkInit             0      0     24
       -> osal_pwrmgr_device            0      0     24
       -> osal_rand                     0      0     24
       -> ZDApp_NetworkInit             0      0     24
     ZDO_REJOIN_ERROR                   0      0      0
       -> Onboard_soft_reset            0      0      0
     hextoword1                         0      0     14
     hextoword2                         1      0     14
     sampleAPP_sendRS_periodMessage     1      0     73
       -> SampleApp_GetShortAddr        0      0    128
       -> osal_mem_free                 0      0    128
       -> SampleApp_GetExtendAddr       0      0    128
       -> osal_mem_free                 0      0    128
       -> AF_DataRequest                0      0    146
     wordtohex                          0      0     17
     zb_ReadConfiguration               0      0     28
       -> osal_nv_item_len              0      0     26
       -> osal_nv_read                  0      0     34
     zb_StartRequest                    0      0     21
       -> ZDOInitDevice                 0      0     20
     zb_WriteConfiguration              0      0     17
       -> osal_nv_write                 0      0     32


   Segment part sizes:

     Function/Label                                  Bytes
     --------------                                  -----
     _A_IEN0                                            1
     WDCTL                                              1
     SampleApp_TransID                                  1
     SampleApp_TaskID                                   1
     SampleApp_epDesc                                   6
     shortddr_mem                                       2
     extendaddr_mem                                     2
     OS_FLAG                                            1
     RTR_NWK_FLAG                                       1
     POWER_SAVING_FLAG                                  1
     POWER_PA_FLAG                                      1
     LEAVE_NET_SET_FLAG                                 1
     New_join_role_flag                                 1
     New_join_delay_time                                1
     Minitue_join_delay_time                            1
     Second_join_delay_time                             1
     Join_isset_flag                                    1
     Heart_mesg_flag                                    1
     defaultKey                                        16
     Child_list                                        42
     New_Panid                                          2
     New_Channel_list                                   1
     New_Net_flag                                       1
     HEART_NEED_ACK_FLAG                                1
     ZDApp_NwkDescListProcessing                      615
     ZDO_DEVICE_DISC                                  388
     ZDO_REJOIN_ERROR                                   6
     ZDO_ACK_DEAL_WITH                                 30
     APP_JOIN_INIT                                    516
     APP_JOIN_DEAL_WITH                               328
     APP_JOIN_START_EVT                               110
     SampleApp_SendNwkaddrMessage                     385
     APPLY_TO_JOIN_OF_KEY                              83
     RESTORE_TO_FACTORY                               536
     SampleApp_SendPeriodicMessage                    377
     zb_ReadConfiguration                              79
     zb_WriteConfiguration                             54
     SampleApp_GetShortAddr                           165
     SampleApp_GetExtendAddr                          147
     hextoword1                                        29
     hextoword2                                        35
     wordtohex                                         49
     APP_NORMAL_COMMAND                              4503
     zb_StartRequest                                   31
     APP_DEAL_WITH_ASSOCIATED                         404
     SampleApp_ProcessNwkaddrMessage
                                                      562
     RemoveStaleNode                                  123
     RemoveStaleRouter                                123
     SampleApp_ROUTER_ProcessPeriodicMessage_Data
                                                      696
     APP_OS_DEAL_WITH                                  32
     APP_ENDDEVICE_ACK                                 26
     sampleAPP_sendRS_periodMessage                   490
     Change_Net_Set                                   195
     ?<Initializer for Heart_mesg_flag>                 1
     ?<Initializer for defaultKey>                     16
     ??ZDApp_NwkDescListProcessing?relay                6
     ??ZDO_DEVICE_DISC?relay                            6
     ??ZDO_REJOIN_ERROR?relay                           6
     ??ZDO_ACK_DEAL_WITH?relay                          6
     ??APP_JOIN_INIT?relay                              6
     ??APP_JOIN_DEAL_WITH?relay                         6
     ??APP_JOIN_START_EVT?relay                         6
     ??SampleApp_SendNwkaddrMessage?relay               6
     ??APPLY_TO_JOIN_OF_KEY?relay                       6
     ??RESTORE_TO_FACTORY?relay                         6
     ??SampleApp_SendPeriodicMessage?relay              6
     ??zb_ReadConfiguration?relay                       6
     ??zb_WriteConfiguration?relay                      6
     ??SampleApp_GetShortAddr?relay                     6
     ??SampleApp_GetExtendAddr?relay                    6
     ??hextoword1?relay                                 6
     ??hextoword2?relay                                 6
     ??wordtohex?relay                                  6
     ??APP_NORMAL_COMMAND?relay                         6
     ??zb_StartRequest?relay                            6
     ??APP_DEAL_WITH_ASSOCIATED?relay                   6
     ??SampleApp_ProcessNwkaddrMessage?relay            6
     ??RemoveStaleNode?relay                            6
     ??RemoveStaleRouter?relay                          6
     ??SampleApp_ROUTER_ProcessPeriodicMessage_Data?    6
     ??APP_OS_DEAL_WITH?relay                           6
     ??APP_ENDDEVICE_ACK?relay                          6
     ??sampleAPP_sendRS_periodMessage?relay             6
     ??Change_Net_Set?relay                             6
     ?<Constant {1, 2, 3}>                              3
     __Constant_318c800                                 4

 
 11 117 bytes in segment BANKED_CODE
    174 bytes in segment BANK_RELAYS
      2 bytes in segment SFR_AN
     17 bytes in segment XDATA_I
     17 bytes in segment XDATA_ID
      7 bytes in segment XDATA_ROM_C
     69 bytes in segment XDATA_Z
 
 11 308 bytes of CODE  memory
      3 bytes of CONST memory (+ 4 bytes shared)
      0 bytes of DATA  memory (+ 2 bytes shared)
     86 bytes of XDATA memory

Errors: none
Warnings: none
