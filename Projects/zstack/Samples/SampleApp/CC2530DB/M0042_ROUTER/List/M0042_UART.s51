///////////////////////////////////////////////////////////////////////////////
//                                                                            /
// IAR C/C++ Compiler V8.10.1.10194/W32 for 8051        08/Jan/2015  18:55:05 /
// Copyright 2004-2011 IAR Systems AB.                                        /
//                                                                            /
//    Core               =  plain                                             /
//    Code model         =  banked                                            /
//    Data model         =  large                                             /
//    Calling convention =  xdata reentrant                                   /
//    Constant location  =  data_rom                                          /
//    Dptr setup         =  1,16                                              /
//    Source file        =  D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta /
//                          ck\Samples\SampleApp\Source\M0042_ROUTER\M0042_UA /
//                          RT.c                                              /
//    Command line       =  -f "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\ /
//                          zstack\Samples\SampleApp\CC2530DB\..\..\..\Tools\ /
//                          CC2530DB\f8wRouter.cfg" (-DCPU32MHZ               /
//                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TR /
//                          UE -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8     /
//                          -DMAC_CFG_RX_MAX=5 -DRTR_NWK) -f                  /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\Tools\CC2 /
//                          530DB\f8wConfig.cfg" (-DZIGBEEPRO -DSECURE=1      /
//                          -DZG_SECURE_DYNAMIC=0 -DREFLECTOR                 /
//                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                      /
//                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_M /
//                          ASK=0x007F -DBEACON_REQUEST_DELAY=100             /
//                          -DBEACON_REQ_DELAY_MASK=0x00FF                    /
//                          -DLINK_STATUS_JITTER_MASK=0x007F                  /
//                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_P /
//                          OLLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=60          /
//                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3   /
//                          -DNWK_MAX_DATA_RETRIES=2                          /
//                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9        /
//                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=30          /
//                          -DNWK_MAX_BINDING_ENTRIES=10                      /
//                          -DMAX_BINDING_CLUSTER_IDS=4 -DASSERT_RESET        /
//                          -DMAC_MAX_FRAME_SIZE=116                          /
//                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const    /
//                          __code" -DGENERIC=__generic                       /
//                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=8000       /
//                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=1000) /
//                           -DREJOIN_POLL_RATE=440                           /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\Source\M0042_ROUTER\M0042_U /
//                          ART.c" -D NV_INIT -D NV_RESTORE -D                /
//                          HOLD_AUTO_START -D MT_TASK -D MT_APP_FUNC -D      /
//                          MT_SYS_FUNC -D MT_ZDO_FUNC -D MT_ZDO_MGMT -D      /
//                          ISR_KEYINTERRUPT -D WDT_IN_PM1 -D                 /
//                          xOSC32K_CRYSTAL_INSTALLED=0 -D xLARGER_NETWORK    /
//                          -D POWER_PA -D M0042 -lC                          /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\M0042_ROUTER\List\ /
//                          " -lA "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projec /
//                          ts\zstack\Samples\SampleApp\CC2530DB\M0042_ROUTER /
//                          \List\" --diag_suppress Pe001,Pa010 -o            /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\M0042_ROUTER\Obj\" /
//                           -e --no_cse --no_unroll --no_inline              /
//                          --no_code_motion --no_tbaa --debug --core=plain   /
//                          --dptr=16,1 --data_model=large                    /
//                          --code_model=banked --calling_convention=xdata_re /
//                          entrant --place_constants=data_rom                /
//                          --nr_virtual_regs 16 -I                           /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\" -I               /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\Source\" -I     /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\Source\M0042_RO /
//                          UTER\" -I "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Pr /
//                          ojects\zstack\Samples\SampleApp\CC2530DB\..\..\.. /
//                          \ZMain\TI2530DB\" -I "D:\RE_1_2_0_FORMAL_APP(251) /
//                          -14-12-8\Projects\zstack\Samples\SampleApp\CC2530 /
//                          DB\..\..\..\..\..\Components\hal\include\" -I     /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\hal\target\CC2530EB\" -I                  /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\mac\include\" -I                          /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\mac\high_level\" -I                       /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\mac\low_level\srf04\" -I                  /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\mac\low_level\srf04\single_chip\" -I      /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\mt\" -I "D:\RE_1_2_0_FORMAL_APP(251)-14-1 /
//                          2-8\Projects\zstack\Samples\SampleApp\CC2530DB\.. /
//                          \..\..\..\..\Components\osal\include\" -I         /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\services\saddr\" -I                       /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\services\sdata\" -I                       /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\stack\af\" -I "D:\RE_1_2_0_FORMAL_APP(251 /
//                          )-14-12-8\Projects\zstack\Samples\SampleApp\CC253 /
//                          0DB\..\..\..\..\..\Components\stack\nwk\" -I      /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\stack\sapi\" -I                           /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\stack\sec\" -I "D:\RE_1_2_0_FORMAL_APP(25 /
//                          1)-14-12-8\Projects\zstack\Samples\SampleApp\CC25 /
//                          30DB\..\..\..\..\..\Components\stack\sys\" -I     /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\stack\zdo\" -I "D:\RE_1_2_0_FORMAL_APP(25 /
//                          1)-14-12-8\Projects\zstack\Samples\SampleApp\CC25 /
//                          30DB\..\..\..\..\..\Components\zmac\" -I          /
//                          "D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zst /
//                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Com /
//                          ponents\zmac\f8w\" -On --require_prototypes       /
//    List file          =  D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zsta /
//                          ck\Samples\SampleApp\CC2530DB\M0042_ROUTER\List\M /
//                          0042_UART.s51                                     /
//                                                                            /
//                                                                            /
///////////////////////////////////////////////////////////////////////////////

        NAME M0042_UART

        RTMODEL "__SystemLibrary", "CLib"
        RTMODEL "__calling_convention", "xdata_reentrant"
        RTMODEL "__code_model", "banked"
        RTMODEL "__core", "plain"
        RTMODEL "__data_model", "large"
        RTMODEL "__dptr_size", "16"
        RTMODEL "__extended_stack", "disabled"
        RTMODEL "__location_for_constants", "data"
        RTMODEL "__number_of_dptrs", "1"
        RTMODEL "__rt_version", "1"

        RSEG DOVERLAY:DATA:NOROOT(0)
        RSEG IOVERLAY:IDATA:NOROOT(0)
        RSEG ISTACK:IDATA:NOROOT(0)
        RSEG PSTACK:XDATA:NOROOT(0)
        RSEG XSTACK:XDATA:NOROOT(0)

        EXTERN ?BANKED_ENTER_XDATA
        EXTERN ?BANKED_LEAVE_XDATA
        EXTERN ?BDISPATCH
        EXTERN ?BRET
        EXTERN ?INTERRUPT_ENTER_XSP
        EXTERN ?INTERRUPT_LEAVE_XSP
        EXTERN ?US_DIV_MOD
        EXTERN ?V0
        EXTERN __INIT_XDATA_I
        EXTERN __INIT_XDATA_Z

        PUBLIC ??M0042_uartRXFrameAnalysis?relay
        FUNCTION ??M0042_uartRXFrameAnalysis?relay,0203H
        PUBWEAK `??halUSART0RxIsr??INTVEC 19`
        PUBLIC ??hal_USART0Init?relay
        FUNCTION ??hal_USART0Init?relay,0203H
        PUBLIC ??hal_USART0Read?relay
        FUNCTION ??hal_USART0Read?relay,0203H
        PUBLIC ??hal_USART0Write?relay
        FUNCTION ??hal_USART0Write?relay,0203H
        PUBLIC ??hal_USART1Init?relay
        FUNCTION ??hal_USART1Init?relay,0203H
        PUBLIC ??hal_USART1Write?relay
        FUNCTION ??hal_USART1Write?relay,0203H
        PUBLIC M0042_UART0_DatBuf_Tem
        PUBLIC M0042_UARTRx_datCnt
        PUBLIC M0042_uartRXFrameAnalysis
        FUNCTION M0042_uartRXFrameAnalysis,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 10, STACK
        PUBWEAK P0SEL
        PUBLIC RT_cycleMode
        PUBLIC RT_download
        PUBLIC RT_indexSong_H
        PUBLIC RT_indexSong_L
        PUBLIC RT_listUpdateFlag
        PUBLIC RT_nwkLocState
        PUBLIC RT_playMode
        PUBLIC RT_playState
        PUBLIC RT_totalSong
        PUBLIC RT_totalSongPre
        PUBLIC RT_totalSong_H
        PUBLIC RT_totalSong_L
        PUBLIC RT_voiceValue
        PUBWEAK U0BAUD
        PUBWEAK U0CSR
        PUBWEAK U0DBUF
        PUBWEAK U0GCR
        PUBWEAK U1BAUD
        PUBWEAK U1DBUF
        PUBWEAK U1GCR
        PUBWEAK U1UCR
        PUBWEAK _A_IEN0
        PUBWEAK _A_IRCON2
        PUBWEAK _A_TCON
        PUBWEAK _A_U1CSR
        PUBLIC delay4uart
        PUBLIC halUSART0RxIsr
        FUNCTION halUSART0RxIsr,021233H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 16, STACK
        PUBLIC hal_USART0Init
        FUNCTION hal_USART0Init,0203H
        ARGFRAME XSTACK, 0, STACK
        PUBLIC hal_USART0Read
        FUNCTION hal_USART0Read,0203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 10, STACK
        PUBLIC hal_USART0Write
        FUNCTION hal_USART0Write,0203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC hal_USART1Init
        FUNCTION hal_USART1Init,0203H
        ARGFRAME XSTACK, 0, STACK
        PUBLIC hal_USART1Write
        FUNCTION hal_USART1Write,0203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC uart0RecDataType
        
        CFI Names cfiNames0
        CFI StackFrame CFA_SP SP IDATA
        CFI StackFrame CFA_PSP16 PSP16 XDATA
        CFI StackFrame CFA_XSP16 XSP16 XDATA
        CFI StaticOverlayFrame CFA_IOVERLAY IOVERLAY
        CFI StaticOverlayFrame CFA_DOVERLAY DOVERLAY
        CFI Resource `PSW.CY`:1, `B.BR0`:1, `B.BR1`:1, `B.BR2`:1, `B.BR3`:1
        CFI Resource `B.BR4`:1, `B.BR5`:1, `B.BR6`:1, `B.BR7`:1, `VB.BR8`:1
        CFI Resource `VB.BR9`:1, `VB.BR10`:1, `VB.BR11`:1, `VB.BR12`:1
        CFI Resource `VB.BR13`:1, `VB.BR14`:1, `VB.BR15`:1, VB:8, B:8, A:8
        CFI Resource PSW:8, DPL0:8, DPH0:8, R0:8, R1:8, R2:8, R3:8, R4:8, R5:8
        CFI Resource R6:8, R7:8, V0:8, V1:8, V2:8, V3:8, V4:8, V5:8, V6:8, V7:8
        CFI Resource V8:8, V9:8, V10:8, V11:8, V12:8, V13:8, V14:8, V15:8, SP:8
        CFI Resource PSPH:8, PSPL:8, PSP16:16, XSPH:8, XSPL:8, XSP16:16
        CFI VirtualResource ?RET:24
        CFI Resource ?BRET_EXT:8
        CFI VirtualResource ?RET_HIGH:8, ?RET_LOW:8
        CFI ResourceParts PSP16 PSPH, PSPL
        CFI ResourceParts XSP16 XSPH, XSPL
        CFI ResourceParts ?RET ?BRET_EXT, ?RET_HIGH, ?RET_LOW
        CFI EndNames cfiNames0
        
        CFI Common cfiCommon0 Using cfiNames0
        CFI CodeAlign 1
        CFI DataAlign -1
        CFI ReturnAddress ?RET CODE
        CFI CFA_DOVERLAY Used
        CFI CFA_IOVERLAY Used
        CFI CFA_SP SP+-3
        CFI CFA_PSP16 PSP16+0
        CFI CFA_XSP16 XSP16+0
        CFI `PSW.CY` SameValue
        CFI `B.BR0` SameValue
        CFI `B.BR1` SameValue
        CFI `B.BR2` SameValue
        CFI `B.BR3` SameValue
        CFI `B.BR4` SameValue
        CFI `B.BR5` SameValue
        CFI `B.BR6` SameValue
        CFI `B.BR7` SameValue
        CFI `VB.BR8` SameValue
        CFI `VB.BR9` SameValue
        CFI `VB.BR10` SameValue
        CFI `VB.BR11` SameValue
        CFI `VB.BR12` SameValue
        CFI `VB.BR13` SameValue
        CFI `VB.BR14` SameValue
        CFI `VB.BR15` SameValue
        CFI VB SameValue
        CFI B Undefined
        CFI A Undefined
        CFI PSW SameValue
        CFI DPL0 SameValue
        CFI DPH0 SameValue
        CFI R0 Undefined
        CFI R1 Undefined
        CFI R2 Undefined
        CFI R3 Undefined
        CFI R4 Undefined
        CFI R5 Undefined
        CFI R6 SameValue
        CFI R7 SameValue
        CFI V0 SameValue
        CFI V1 SameValue
        CFI V2 SameValue
        CFI V3 SameValue
        CFI V4 SameValue
        CFI V5 SameValue
        CFI V6 SameValue
        CFI V7 SameValue
        CFI V8 SameValue
        CFI V9 SameValue
        CFI V10 SameValue
        CFI V11 SameValue
        CFI V12 SameValue
        CFI V13 SameValue
        CFI V14 SameValue
        CFI V15 SameValue
        CFI PSPH Undefined
        CFI PSPL Undefined
        CFI XSPH Undefined
        CFI XSPL Undefined
        CFI ?RET Concat
        CFI ?BRET_EXT Frame(CFA_SP, 3)
        CFI ?RET_HIGH Frame(CFA_SP, 2)
        CFI ?RET_LOW Frame(CFA_SP, 1)
        CFI EndCommon cfiCommon0
        
        
        CFI Common cfiCommon1 Using cfiNames0
        CFI CodeAlign 1
        CFI DataAlign -1
        CFI ReturnAddress ?RET CODE
        CFI CFA_DOVERLAY Used
        CFI CFA_IOVERLAY Used
        CFI CFA_SP SP+-2
        CFI CFA_PSP16 PSP16+0
        CFI CFA_XSP16 XSP16+0
        CFI `PSW.CY` SameValue
        CFI `B.BR0` SameValue
        CFI `B.BR1` SameValue
        CFI `B.BR2` SameValue
        CFI `B.BR3` SameValue
        CFI `B.BR4` SameValue
        CFI `B.BR5` SameValue
        CFI `B.BR6` SameValue
        CFI `B.BR7` SameValue
        CFI `VB.BR8` SameValue
        CFI `VB.BR9` SameValue
        CFI `VB.BR10` SameValue
        CFI `VB.BR11` SameValue
        CFI `VB.BR12` SameValue
        CFI `VB.BR13` SameValue
        CFI `VB.BR14` SameValue
        CFI `VB.BR15` SameValue
        CFI VB SameValue
        CFI B SameValue
        CFI A SameValue
        CFI PSW SameValue
        CFI DPL0 SameValue
        CFI DPH0 SameValue
        CFI R0 SameValue
        CFI R1 SameValue
        CFI R2 SameValue
        CFI R3 SameValue
        CFI R4 SameValue
        CFI R5 SameValue
        CFI R6 SameValue
        CFI R7 SameValue
        CFI V0 SameValue
        CFI V1 SameValue
        CFI V2 SameValue
        CFI V3 SameValue
        CFI V4 SameValue
        CFI V5 SameValue
        CFI V6 SameValue
        CFI V7 SameValue
        CFI V8 SameValue
        CFI V9 SameValue
        CFI V10 SameValue
        CFI V11 SameValue
        CFI V12 SameValue
        CFI V13 SameValue
        CFI V14 SameValue
        CFI V15 SameValue
        CFI PSPH Undefined
        CFI PSPL Undefined
        CFI XSPH Undefined
        CFI XSPL Undefined
        CFI ?RET Concat
        CFI ?BRET_EXT SameValue
        CFI ?RET_HIGH Frame(CFA_SP, 2)
        CFI ?RET_LOW Frame(CFA_SP, 1)
        CFI EndCommon cfiCommon1
        
osal_start_timerEx  SYMBOL "osal_start_timerEx"
??osal_start_timerEx?relay SYMBOL "?relay", osal_start_timerEx
M0042_uartRXFrameAnalysis SYMBOL "M0042_uartRXFrameAnalysis"
??M0042_uartRXFrameAnalysis?relay SYMBOL "?relay", M0042_uartRXFrameAnalysis
halUSART0RxIsr      SYMBOL "halUSART0RxIsr"
`??halUSART0RxIsr??INTVEC 19` SYMBOL "??INTVEC 19", halUSART0RxIsr
hal_USART0Init      SYMBOL "hal_USART0Init"
??hal_USART0Init?relay SYMBOL "?relay", hal_USART0Init
hal_USART0Read      SYMBOL "hal_USART0Read"
??hal_USART0Read?relay SYMBOL "?relay", hal_USART0Read
hal_USART0Write     SYMBOL "hal_USART0Write"
??hal_USART0Write?relay SYMBOL "?relay", hal_USART0Write
hal_USART1Init      SYMBOL "hal_USART1Init"
??hal_USART1Init?relay SYMBOL "?relay", hal_USART1Init
hal_USART1Write     SYMBOL "hal_USART1Write"
??hal_USART1Write?relay SYMBOL "?relay", hal_USART1Write

        EXTERN osal_start_timerEx
        FUNCTION osal_start_timerEx,0202H
        ARGFRAME ISTACK, 15, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ??osal_start_timerEx?relay
        FUNCTION ??osal_start_timerEx?relay,00H
        EXTERN DeviceModel
        EXTERN DeviceModelLen
        EXTERN ManufacturerAndDeviceKind
        EXTERN ProductID
        EXTERN ProductLicence
        EXTERN UserApp_TaskID
        EXTERN dataLenReportUp
        EXTERN dataReportUp

// D:\RE_1_2_0_FORMAL_APP(251)-14-12-8\Projects\zstack\Samples\SampleApp\Source\M0042_ROUTER\M0042_UART.c
//    1 /***************************************************************************************************
//    2   Filename:       MT_UART.c
//    3   Revised:        $Date: 2009-03-12 16:25:22 -0700 (Thu, 12 Mar 2009) $
//    4   Revision:       $Revision: 19404 $
//    5 
//    6   Description:  This module handles anything dealing with the serial port.
//    7 
//    8   Copyright 2007 Texas Instruments Incorporated. All rights reserved.
//    9 
//   10   IMPORTANT: Your use of this Software is limited to those specific rights
//   11   granted under the terms of a software license agreement between the user
//   12   who downloaded the software, his/her employer (which must be your employer)
//   13   and Texas Instruments Incorporated (the "License").  You may not use this
//   14   Software unless you agree to abide by the terms of the License. The License
//   15   limits your use, and you acknowledge, that the Software may not be modified,
//   16   copied or distributed unless embedded on a Texas Instruments microcontroller
//   17   or used solely and exclusively in conjunction with a Texas Instruments radio
//   18   frequency transceiver, which is integrated into your product.  Other than for
//   19   the foregoing purpose, you may not use, reproduce, copy, prepare derivative
//   20   works of, modify, distribute, perform, display or sell this Software and/or
//   21   its documentation for any purpose.
//   22 
//   23   YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
//   24   PROVIDED AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
//   25   INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
//   26   NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
//   27   TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
//   28   NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
//   29   LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
//   30   INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
//   31   OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
//   32   OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
//   33   (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
//   34 
//   35   Should you have any questions regarding your right to use this Software,
//   36   contact Texas Instruments Incorporated at www.TI.com.
//   37 ***************************************************************************************************/
//   38 
//   39 /***************************************************************************************************
//   40  * INCLUDES
//   41  ***************************************************************************************************/
//   42 
//   43 #include "M0042_UART.h"

        ASEGN SFR_AN:DATA:NOROOT,086H
// unsigned char volatile __sfr U0CSR
U0CSR:
        DATA8
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,088H
// union <unnamed> volatile __sfr _A_TCON
_A_TCON:
        DATA8
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,0a8H
// union <unnamed> volatile __sfr _A_IEN0
_A_IEN0:
        DATA8
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,0c1H
// unsigned char volatile __sfr U0DBUF
U0DBUF:
        DATA8
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,0c2H
// unsigned char volatile __sfr U0BAUD
U0BAUD:
        DATA8
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,0c5H
// unsigned char volatile __sfr U0GCR
U0GCR:
        DATA8
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,0e8H
// union <unnamed> volatile __sfr _A_IRCON2
_A_IRCON2:
        DATA8
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,0f3H
// unsigned char volatile __sfr P0SEL
P0SEL:
        DATA8
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,0f8H
// union <unnamed> volatile __sfr _A_U1CSR
_A_U1CSR:
        DATA8
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,0f9H
// unsigned char volatile __sfr U1DBUF
U1DBUF:
        DATA8
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,0faH
// unsigned char volatile __sfr U1BAUD
U1BAUD:
        DATA8
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,0fbH
// unsigned char volatile __sfr U1UCR
U1UCR:
        DATA8
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,0fcH
// unsigned char volatile __sfr U1GCR
U1GCR:
        DATA8
        DS 1
//   44 
//   45 #include "OSAL.h"
//   46 #include "OSAL_Nv.h"
//   47 #include "OSAL_PwrMgr.h"
//   48 #include "device.h"
//   49 
//   50 
//   51 #include <stdio.h>
//   52 #include <stdlib.h>
//   53 #include <string.h>
//   54 //#include <malloc.h>
//   55 //#include <memory.h>
//   56 
//   57 #if defined(M0042)
//   58 extern uint8  UserApp_TaskID;
//   59 
//   60 
//   61 

        RSEG XDATA_I:XDATA:NOROOT(0)
//   62 uint16 delay4uart = 10;
delay4uart:
        DATA16
        DS 2
        REQUIRE `?<Initializer for delay4uart>`
        REQUIRE __INIT_XDATA_I
//   63 
//   64 

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   65 uint8 uart0RecDataType;
uart0RecDataType:
        DS 1
        REQUIRE __INIT_XDATA_Z
//   66 
//   67 
//   68 #endif
//   69 

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   70 uint8 RT_nwkLocState;//bb
RT_nwkLocState:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   71 uint8 RT_voiceValue;//cc
RT_voiceValue:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   72 uint8 RT_playState;
RT_playState:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   73 uint8 RT_indexSong_H;
RT_indexSong_H:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   74 uint8 RT_indexSong_L;
RT_indexSong_L:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   75 uint8 RT_totalSong_H;
RT_totalSong_H:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   76 uint8 RT_totalSong_L;//ii
RT_totalSong_L:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   77 uint8 RT_cycleMode;
RT_cycleMode:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   78 uint8 RT_playMode;
RT_playMode:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   79 uint8 RT_download;   
RT_download:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   80 uint8 RT_listUpdateFlag;   
RT_listUpdateFlag:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA16
//   81 uint16 RT_totalSong;   
RT_totalSong:
        DS 2
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA16
//   82 uint16 RT_totalSongPre;   
RT_totalSongPre:
        DS 2
        REQUIRE __INIT_XDATA_Z
//   83 
//   84 

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   85 uint8 M0042_UART0_DatBuf_Tem[250];
M0042_UART0_DatBuf_Tem:
        DS 250
        REQUIRE __INIT_XDATA_Z
//   86 //uint8 SHORT_ADRESS[100];
//   87 void hal_USART0Init(void);
//   88 void hal_USART1Init(void);
//   89 
//   90 void hal_USART0Write ( uint8 *datBuf, uint8 DatLen);
//   91 void hal_USART1Write ( uint8 *datBuf, uint8 DatLen);
//   92 
//   93 void hal_USART0Act(void);
//   94 void hal_USART1Act(void);
//   95 void hal_USART0Sleep(void);
//   96 void hal_USART1Sleep(void);
//   97 

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA16
//   98 uint16 M0042_UARTRx_datCnt = 0;
M0042_UARTRx_datCnt:
        DS 2
        REQUIRE __INIT_XDATA_Z
//   99 void M0042_uartRXFrameAnalysis(void);
//  100 
//  101 
//  102 void control_volume(uint8 a);
//  103 void get_list(uint8 index_begin,uint8 index_begin_1);
//  104 void cut_song_index(uint8 song_L , uint8 song_H);
//  105 
//  106 int utf8_to_unicode(uint8 *in, uint16 **out, int *outsize);
//  107 
//  108 
//  109 extern void Delay_1m(uint16 millisecond);
//  110 
//  111 extern uint8 dataReportUp[100];
//  112 
//  113 extern uint8 ProductLicence[8];
//  114 extern uint8 ProductID[3];
//  115 extern uint8 ManufacturerAndDeviceKind[4];
//  116 extern uint8 DeviceModel[50];
//  117 
//  118 
//  119 extern uint8 dataLenReportUp;
//  120 
//  121 extern uint8 DeviceModelLen;
//  122 
//  123 /***************************************************************************************************
//  124  *                                         GLOBAL VARIABLES
//  125  ***************************************************************************************************/
//  126 /* Used to indentify the application ID for osal task */
//  127 
//  128 

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  129 void hal_USART0Init(void)
hal_USART0Init:
        CFI Block cfiBlock0 Using cfiCommon0
        CFI Function hal_USART0Init
        CODE
//  130 {
        ; Saved register size: 0
        ; Auto size: 0
//  131        P0SEL |= 0x0C;  //使用P0_2,P0_3作为串口
        ORL     0xf3,#0xc
//  132        U0CSR |= 0x80;  //0x82串口模式,
        ORL     0x86,#0x80
//  133         
//  134        U0GCR  |= 0x0A;
        ORL     0xc5,#0xa
//  135        U0BAUD |= 0xD8;  //波特率：57600bps  
        ORL     0xc2,#0xd8
//  136        
//  137        UTX0IF =1;
        SETB    0xe8.1
//  138        IEN0 |= 0x84;    //接收中断使能
        ORL     0xa8,#0x84
//  139        U0CSR |= 0x40;  //
        ORL     0x86,#0x40
//  140    
//  141 }
        LJMP    ?BRET
        CFI EndBlock cfiBlock0
        REQUIRE P0SEL
        REQUIRE U0CSR
        REQUIRE U0GCR
        REQUIRE U0BAUD
        REQUIRE _A_IRCON2
        REQUIRE _A_IEN0
//  142 
//  143 
//  144 

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  145 void hal_USART1Init(void)
hal_USART1Init:
        CFI Block cfiBlock1 Using cfiCommon0
        CFI Function hal_USART1Init
        CODE
//  146 {
        ; Saved register size: 0
        ; Auto size: 0
//  147 	P0SEL |= 0x10; //P0.4 peripherel
        ORL     0xf3,#0x10
//  148 	P0SEL |= 0x20; //P0.5 peripherel
        ORL     0xf3,#0x20
//  149 	//P0DIR |= 0x08; //P0.3 output
//  150 	
//  151 	//PERCFG |= 0x01;	
//  152 		
//  153 	U1BAUD = 216;
        MOV     0xfa,#-0x28
//  154 	U1UCR = 0x02;
        MOV     0xfb,#0x2
//  155 	U1GCR = 0x0B;
        MOV     0xfc,#0xb
//  156 	U1CSR = 0x82;	//0xC2;
        MOV     0xf8,#-0x7e
//  157 	IEN0 |= 0x08;
        SETB    0xa8.3
//  158 	URX1IE = 1;
        SETB    0xa8.3
//  159 	//IEN2 |= 0x08;//UTX0IE = 1;
//  160 	EA =1;
        SETB    0xa8.7
//  161 	U1CSR |= 0x40;	//0xC2;
        SETB    0xf8.6
//  162 	U1CSR &= ~(0x04);//清楚标志位
        CLR     0xf8.2
//  163 }
        LJMP    ?BRET
        CFI EndBlock cfiBlock1
        REQUIRE P0SEL
        REQUIRE U1BAUD
        REQUIRE U1UCR
        REQUIRE U1GCR
        REQUIRE _A_U1CSR
        REQUIRE _A_IEN0
//  164 

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  165 void hal_USART0Write ( uint8 *datBuf, uint8 DatLen)
hal_USART0Write:
        CFI Block cfiBlock2 Using cfiCommon0
        CFI Function hal_USART0Write
        CODE
//  166 {
        PUSH    DPL
        CFI DPL0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        PUSH    DPH
        CFI DPH0 Frame(CFA_SP, 5)
        CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
//  167 	uint8 datCnt;
//  168 	//EA = 0;
//  169 	for(datCnt = 0; datCnt < DatLen; datCnt++)
        MOV     R0,#0x0
??hal_USART0Write_0:
        MOV     A,R0
        CLR     C
        SUBB    A,R1
        JNC     ??hal_USART0Write_1
//  170 	{
//  171 		while(U0CSR & 0x01);
??hal_USART0Write_2:
        MOV     A,0x86
        MOV     C,0xE0 /* A   */.0
        JC      ??hal_USART0Write_2
//  172 		U0DBUF = *datBuf;
        MOV     DPL,R2
        MOV     DPH,R3
        MOVX    A,@DPTR
        MOV     0xc1,A
//  173 		while(0 == (U0CSR &(1<<1)));	//直到发送完成
??hal_USART0Write_3:
        MOV     A,0x86
        MOV     C,0xE0 /* A   */.1
        JNC     ??hal_USART0Write_3
//  174 		U0CSR |= (0x02);				//清楚标志位
        ORL     0x86,#0x2
//  175 		datBuf++;
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        MOV     R2,DPL
        MOV     R3,DPH
//  176 	}
        INC     R0
        SJMP    ??hal_USART0Write_0
//  177 	//EA = 1;
//  178 }
??hal_USART0Write_1:
        POP     DPH
        CFI DPH0 SameValue
        CFI CFA_SP SP+-4
        POP     DPL
        CFI DPL0 SameValue
        CFI CFA_SP SP+-3
        LJMP    ?BRET
        CFI EndBlock cfiBlock2
        REQUIRE U0CSR
        REQUIRE U0DBUF
//  179 

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  180 void hal_USART1Write ( uint8 *datBuf, uint8 DatLen)
hal_USART1Write:
        CFI Block cfiBlock3 Using cfiCommon0
        CFI Function hal_USART1Write
        CODE
//  181 {
        PUSH    DPL
        CFI DPL0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        PUSH    DPH
        CFI DPH0 Frame(CFA_SP, 5)
        CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
//  182 	uint8 datCnt;
//  183 	//EA = 0;
//  184 	for(datCnt = 0; datCnt < DatLen; datCnt++)
        MOV     R0,#0x0
??hal_USART1Write_0:
        MOV     A,R0
        CLR     C
        SUBB    A,R1
        JNC     ??hal_USART1Write_1
//  185 	{
//  186 		while(U1CSR & 0x01);
??hal_USART1Write_2:
        MOV     C,0xf8.0
        JC      ??hal_USART1Write_2
//  187 		U1DBUF = *datBuf;
        MOV     DPL,R2
        MOV     DPH,R3
        MOVX    A,@DPTR
        MOV     0xf9,A
//  188 		while(0 == (U1CSR &(1<<1)));	//直到发送完成
??hal_USART1Write_3:
        MOV     C,0xf8.1
        JNC     ??hal_USART1Write_3
//  189 		U1CSR |= (0x02);				//清楚标志位
        SETB    0xf8.1
//  190 		datBuf++;
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        MOV     R2,DPL
        MOV     R3,DPH
//  191 	}
        INC     R0
        SJMP    ??hal_USART1Write_0
//  192 	//EA = 1;
//  193 }
??hal_USART1Write_1:
        POP     DPH
        CFI DPH0 SameValue
        CFI CFA_SP SP+-4
        POP     DPL
        CFI DPL0 SameValue
        CFI CFA_SP SP+-3
        LJMP    ?BRET
        CFI EndBlock cfiBlock3
        REQUIRE _A_U1CSR
        REQUIRE U1DBUF
//  194 
//  195 

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  196 void hal_USART0Read ( uint8 *datBuf)
hal_USART0Read:
        CFI Block cfiBlock4 Using cfiCommon0
        CFI Function hal_USART0Read
        CODE
//  197 {
        MOV     A,#-0xa
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 0
//  198 	uint8 Cnt = 0;
        MOV     R4,#0x0
//  199 	while(1)
//  200 	{
//  201 		while(!(U1CSR & 0x04));				//清楚标志位
??hal_USART0Read_0:
        MOV     C,0xf8.2
        JNC     ??hal_USART0Read_0
//  202 		datBuf[Cnt] = U1DBUF;
        MOV     A,0xf9
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     ?V0 + 0,R4
        MOV     ?V0 + 1,#0x0
        MOV     A,R2
        ADD     A,?V0 + 0
        MOV     DPL,A
        MOV     A,R3
        ADDC    A,?V0 + 1
        MOV     DPH,A
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
//  203 		if(0x0A == datBuf[Cnt])// && (0x0D == UARTDatBuf[datCnt - 1]))
        MOV     ?V0 + 0,R4
        MOV     ?V0 + 1,#0x0
        MOV     A,R2
        ADD     A,?V0 + 0
        MOV     DPL,A
        MOV     A,R3
        ADDC    A,?V0 + 1
        MOV     DPH,A
        MOVX    A,@DPTR
        XRL     A,#0xa
        JNZ     ??hal_USART0Read_1
//  204 		{
//  205 			if(0x0D == datBuf[Cnt - 1])
        MOV     ?V0 + 0,R4
        MOV     ?V0 + 1,#0x0
        MOV     A,R2
        ADD     A,?V0 + 0
        MOV     R0,A
        MOV     A,R3
        ADDC    A,?V0 + 1
        MOV     R1,A
        MOV     A,R0
        ADD     A,#-0x1
        MOV     DPL,A
        MOV     A,R1
        ADDC    A,#-0x1
        MOV     DPH,A
        MOVX    A,@DPTR
        XRL     A,#0xd
        JZ      ??hal_USART0Read_2
//  206 			{
//  207 				//receviced
//  208 				//osal_set_event(SampleApp_TaskID,UART_RX_CMD_CB_EVT);
//  209 				return;
//  210 			}
//  211 		}
//  212 		Cnt++;
??hal_USART0Read_1:
        INC     R4
        SJMP    ??hal_USART0Read_0
//  213 	}
??hal_USART0Read_2:
        MOV     R7,#0x2
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock4
        REQUIRE _A_U1CSR
        REQUIRE U1DBUF
//  214 }
//  215 
//  216 
//  217 
//  218 

        RSEG NEAR_CODE:CODE:NOROOT(0)
//  219 HAL_ISR_FUNCTION( halUSART0RxIsr, URX0_VECTOR )
halUSART0RxIsr:
        CFI Block cfiBlock5 Using cfiCommon1
        CFI Function halUSART0RxIsr
        CODE
//  220 {
        FUNCALL halUSART0RxIsr, osal_start_timerEx
        LOCFRAME ISTACK, 15, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 15, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUSH    A
        CFI A Frame(CFA_SP, 3)
        CFI CFA_SP SP+-3
        MOV     A,#-0xe
        LCALL   ?INTERRUPT_ENTER_XSP
        CFI B load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI PSW load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI R5 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R4 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI R3 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI R2 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI R1 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI R0 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI CFA_XSP16 add(XSP16, 14)
        ; Saved register size: 15
        ; Auto size: 0
//  221 	//HAL_ENTER_ISR();
//  222 	EA = 0;
        CLR     0xa8.7
//  223 	TCON &= ~(0x08);//08
        CLR     0x88.3
//  224 	U0CSR &= ~(1<<2);				//清楚标志位
        ANL     0x86,#0xfb
//  225 	M0042_UART0_DatBuf_Tem[M0042_UARTRx_datCnt] = U0DBUF;
        MOV     A,0xc1
        PUSH    A
        CFI CFA_SP SP+-4
        MOV     DPTR,#M0042_UARTRx_datCnt
        MOVX    A,@DPTR
        ADD     A,#M0042_UART0_DatBuf_Tem & 0xff
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,#(M0042_UART0_DatBuf_Tem >> 8) & 0xff
        MOV     R1,A
        MOV     DPL,R0
        MOV     DPH,R1
        POP     A
        CFI CFA_SP SP+-3
        MOVX    @DPTR,A
//  226 	//BPM_UART0_ISR_CB();
//  227   	M0042_UARTRx_datCnt++;
        MOV     DPTR,#M0042_UARTRx_datCnt
        MOVX    A,@DPTR
        ADD     A,#0x1
        MOVX    @DPTR,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,#0x0
        MOVX    @DPTR,A
//  228         M0042_UARTRx_datCnt %= 250;
        MOV     DPTR,#M0042_UARTRx_datCnt
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     R2,#-0x6
        MOV     R3,#0x0
        LCALL   ?US_DIV_MOD
        MOV     DPTR,#M0042_UARTRx_datCnt
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
//  229 	//osal_stop_timerEx( SampleApp_TaskID,BPM_UART_RX_COMPLETED );
//  230 	osal_start_timerEx( UserApp_TaskID,M0042_UART_RX_COMPLETED,50 );
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#0x32
        MOV     R5,#0x0
        MOV     R2,#-0x80
        MOV     R3,#0x0
        MOV     DPTR,#UserApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
//  231 	//osal_start_reload_timer( SampleApp_TaskID,EEP_UART_RX_COMPLETED,50 );
//  232 	//HAL_EXIT_ISR();
//  233 	EA = 1;
        SETB    0xa8.7
//  234 }
        MOV     R7,#0x1
        LJMP    ?INTERRUPT_LEAVE_XSP
        CFI EndBlock cfiBlock5
        REQUIRE _A_IEN0
        REQUIRE _A_TCON
        REQUIRE U0CSR
        REQUIRE U0DBUF
//  235 
//  236 

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  237 void M0042_uartRXFrameAnalysis(void)
M0042_uartRXFrameAnalysis:
        CFI Block cfiBlock6 Using cfiCommon0
        CFI Function M0042_uartRXFrameAnalysis
        CODE
//  238 {
        FUNCALL M0042_uartRXFrameAnalysis, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL M0042_uartRXFrameAnalysis, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL M0042_uartRXFrameAnalysis, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL M0042_uartRXFrameAnalysis, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xa
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 0
//  239   uint8 cnt;
//  240   //if(uart0RecDataType == NAME_TYPE)
//  241   dataLenReportUp = M0042_UART0_DatBuf_Tem[2] - 3;
        MOV     DPTR,#M0042_UART0_DatBuf_Tem + 2
        MOVX    A,@DPTR
        ADD     A,#-0x3
        MOV     DPTR,#dataLenReportUp
        MOVX    @DPTR,A
//  242   if((M0042_UART0_DatBuf_Tem[3] == 0x00)&&(M0042_UART0_DatBuf_Tem[4] == 0x01))
        MOV     DPTR,#M0042_UART0_DatBuf_Tem + 3
        MOVX    A,@DPTR
        JNZ     ??M0042_uartRXFrameAnalysis_0
        MOV     DPTR,#M0042_UART0_DatBuf_Tem + 4
        MOVX    A,@DPTR
        XRL     A,#0x1
        JNZ     ??M0042_uartRXFrameAnalysis_0
//  243   {
//  244     
//  245     for(cnt = 0;cnt < dataLenReportUp; cnt++)
        MOV     R6,#0x0
??M0042_uartRXFrameAnalysis_1:
        MOV     DPTR,#dataLenReportUp
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     A,R6
        CLR     C
        SUBB    A,R0
        JNC     ??M0042_uartRXFrameAnalysis_2
//  246     {
//  247       dataReportUp[cnt] = M0042_UART0_DatBuf_Tem[5 + cnt];
        MOV     ?V0 + 0,R6
        MOV     ?V0 + 1,#0x0
        MOV     A,#(M0042_UART0_DatBuf_Tem + 5) & 0xff
        ADD     A,?V0 + 0
        MOV     DPL,A
        MOV     A,#((M0042_UART0_DatBuf_Tem + 5) >> 8) & 0xff
        ADDC    A,?V0 + 1
        MOV     DPH,A
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     ?V0 + 0,R6
        MOV     ?V0 + 1,#0x0
        MOV     A,#dataReportUp & 0xff
        ADD     A,?V0 + 0
        MOV     DPL,A
        MOV     A,#(dataReportUp >> 8) & 0xff
        ADDC    A,?V0 + 1
        MOV     DPH,A
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
//  248     }
        INC     R6
        SJMP    ??M0042_uartRXFrameAnalysis_1
//  249    osal_start_timerEx( UserApp_TaskID,M0042_SENT_DATA_EVT,10);
??M0042_uartRXFrameAnalysis_2:
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#0xa
        MOV     R5,#0x0
        MOV     R2,#0x0
        MOV     R3,#0x1
        MOV     DPTR,#UserApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
        LJMP    ??M0042_uartRXFrameAnalysis_3 & 0xFFFF
//  250   }
//  251   else if((M0042_UART0_DatBuf_Tem[3] == 0x00)&&(M0042_UART0_DatBuf_Tem[4] == 0x03))
??M0042_uartRXFrameAnalysis_0:
        MOV     DPTR,#M0042_UART0_DatBuf_Tem + 3
        MOVX    A,@DPTR
        JNZ     ??M0042_uartRXFrameAnalysis_4
        MOV     DPTR,#M0042_UART0_DatBuf_Tem + 4
        MOVX    A,@DPTR
        XRL     A,#0x3
        JNZ     $+5
        LJMP    ??M0042_uartRXFrameAnalysis_3 & 0xFFFF
//  252   {
//  253     
//  254   }
//  255   else if((M0042_UART0_DatBuf_Tem[3] == 0x00)&&(M0042_UART0_DatBuf_Tem[4] == 0x04))
??M0042_uartRXFrameAnalysis_4:
        MOV     DPTR,#M0042_UART0_DatBuf_Tem + 3
        MOVX    A,@DPTR
        JNZ     ??M0042_uartRXFrameAnalysis_5
        MOV     DPTR,#M0042_UART0_DatBuf_Tem + 4
        MOVX    A,@DPTR
        XRL     A,#0x4
        JNZ     ??M0042_uartRXFrameAnalysis_5
//  256   {
//  257     //IDL
//  258     ProductID[0] =  M0042_UART0_DatBuf_Tem[5];
        MOV     DPTR,#M0042_UART0_DatBuf_Tem + 5
        MOVX    A,@DPTR
        MOV     DPTR,#ProductID
        MOVX    @DPTR,A
//  259     ProductID[1] =  M0042_UART0_DatBuf_Tem[6];
        MOV     DPTR,#M0042_UART0_DatBuf_Tem + 6
        MOVX    A,@DPTR
        MOV     DPTR,#ProductID + 1
        MOVX    @DPTR,A
//  260     ProductID[2] =  M0042_UART0_DatBuf_Tem[7];    
        MOV     DPTR,#M0042_UART0_DatBuf_Tem + 7
        MOVX    A,@DPTR
        MOV     DPTR,#ProductID + 2
        MOVX    @DPTR,A
//  261     for(cnt = 0;cnt < 8; cnt++)
        MOV     R6,#0x0
??M0042_uartRXFrameAnalysis_6:
        MOV     A,R6
        CLR     C
        SUBB    A,#0x8
        JNC     ??M0042_uartRXFrameAnalysis_7
//  262     {
//  263       ProductLicence[cnt] = M0042_UART0_DatBuf_Tem[8 + cnt];
        MOV     ?V0 + 0,R6
        MOV     ?V0 + 1,#0x0
        MOV     A,#(M0042_UART0_DatBuf_Tem + 8) & 0xff
        ADD     A,?V0 + 0
        MOV     DPL,A
        MOV     A,#((M0042_UART0_DatBuf_Tem + 8) >> 8) & 0xff
        ADDC    A,?V0 + 1
        MOV     DPH,A
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     ?V0 + 0,R6
        MOV     ?V0 + 1,#0x0
        MOV     A,#ProductLicence & 0xff
        ADD     A,?V0 + 0
        MOV     DPL,A
        MOV     A,#(ProductLicence >> 8) & 0xff
        ADDC    A,?V0 + 1
        MOV     DPH,A
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
//  264     } 
        INC     R6
        SJMP    ??M0042_uartRXFrameAnalysis_6
//  265     osal_start_timerEx( UserApp_TaskID,M0042_SENT_IDL_EVT,10);
??M0042_uartRXFrameAnalysis_7:
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#0xa
        MOV     R5,#0x0
        MOV     R2,#0x10
        MOV     R3,#0x0
        MOV     DPTR,#UserApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
        LJMP    ??M0042_uartRXFrameAnalysis_3 & 0xFFFF
//  266     
//  267   }
//  268   else if((M0042_UART0_DatBuf_Tem[3] == 0x00)&&(M0042_UART0_DatBuf_Tem[4] == 0x05))
??M0042_uartRXFrameAnalysis_5:
        MOV     DPTR,#M0042_UART0_DatBuf_Tem + 3
        MOVX    A,@DPTR
        JNZ     ??M0042_uartRXFrameAnalysis_8
        MOV     DPTR,#M0042_UART0_DatBuf_Tem + 4
        MOVX    A,@DPTR
        XRL     A,#0x5
        JNZ     ??M0042_uartRXFrameAnalysis_8
//  269   {
//  270     //manufacturer device kind
//  271     ManufacturerAndDeviceKind[0] =  M0042_UART0_DatBuf_Tem[5];
        MOV     DPTR,#M0042_UART0_DatBuf_Tem + 5
        MOVX    A,@DPTR
        MOV     DPTR,#ManufacturerAndDeviceKind
        MOVX    @DPTR,A
//  272     ManufacturerAndDeviceKind[1] =  M0042_UART0_DatBuf_Tem[6];
        MOV     DPTR,#M0042_UART0_DatBuf_Tem + 6
        MOVX    A,@DPTR
        MOV     DPTR,#ManufacturerAndDeviceKind + 1
        MOVX    @DPTR,A
//  273     ManufacturerAndDeviceKind[2] =  M0042_UART0_DatBuf_Tem[7];    
        MOV     DPTR,#M0042_UART0_DatBuf_Tem + 7
        MOVX    A,@DPTR
        MOV     DPTR,#ManufacturerAndDeviceKind + 2
        MOVX    @DPTR,A
//  274     ManufacturerAndDeviceKind[3] =  M0042_UART0_DatBuf_Tem[8];    
        MOV     DPTR,#M0042_UART0_DatBuf_Tem + 8
        MOVX    A,@DPTR
        MOV     DPTR,#ManufacturerAndDeviceKind + 3
        MOVX    @DPTR,A
//  275     osal_start_timerEx( UserApp_TaskID,M0042_SENT_MDK_EVT,10);
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#0xa
        MOV     R5,#0x0
        MOV     R2,#0x20
        MOV     R3,#0x0
        MOV     DPTR,#UserApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
        SJMP    ??M0042_uartRXFrameAnalysis_3
//  276   }
//  277   else if((M0042_UART0_DatBuf_Tem[3] == 0x00)&&(M0042_UART0_DatBuf_Tem[4] == 0x06))
??M0042_uartRXFrameAnalysis_8:
        MOV     DPTR,#M0042_UART0_DatBuf_Tem + 3
        MOVX    A,@DPTR
        JNZ     ??M0042_uartRXFrameAnalysis_3
        MOV     DPTR,#M0042_UART0_DatBuf_Tem + 4
        MOVX    A,@DPTR
        XRL     A,#0x6
        JNZ     ??M0042_uartRXFrameAnalysis_3
//  278   {
//  279     //model
//  280     DeviceModelLen = M0042_UART0_DatBuf_Tem[2] - 3;
        MOV     DPTR,#M0042_UART0_DatBuf_Tem + 2
        MOVX    A,@DPTR
        ADD     A,#-0x3
        MOV     DPTR,#DeviceModelLen
        MOVX    @DPTR,A
//  281     for(cnt = 0;cnt < DeviceModelLen; cnt++)
        MOV     R6,#0x0
??M0042_uartRXFrameAnalysis_9:
        MOV     DPTR,#DeviceModelLen
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     A,R6
        CLR     C
        SUBB    A,R0
        JNC     ??M0042_uartRXFrameAnalysis_10
//  282     {
//  283       DeviceModel[cnt] = M0042_UART0_DatBuf_Tem[5 + cnt];
        MOV     ?V0 + 0,R6
        MOV     ?V0 + 1,#0x0
        MOV     A,#(M0042_UART0_DatBuf_Tem + 5) & 0xff
        ADD     A,?V0 + 0
        MOV     DPL,A
        MOV     A,#((M0042_UART0_DatBuf_Tem + 5) >> 8) & 0xff
        ADDC    A,?V0 + 1
        MOV     DPH,A
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     ?V0 + 0,R6
        MOV     ?V0 + 1,#0x0
        MOV     A,#DeviceModel & 0xff
        ADD     A,?V0 + 0
        MOV     DPL,A
        MOV     A,#(DeviceModel >> 8) & 0xff
        ADDC    A,?V0 + 1
        MOV     DPH,A
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
//  284     } 
        INC     R6
        SJMP    ??M0042_uartRXFrameAnalysis_9
//  285     osal_start_timerEx( UserApp_TaskID,M0042_SENT_DM_EVT,10);
??M0042_uartRXFrameAnalysis_10:
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#0xa
        MOV     R5,#0x0
        MOV     R2,#0x40
        MOV     R3,#0x0
        MOV     DPTR,#UserApp_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
//  286   }
//  287   
//  288   uart0RecDataType = 0;
??M0042_uartRXFrameAnalysis_3:
        MOV     DPTR,#uart0RecDataType
        MOV     A,#0x0
        MOVX    @DPTR,A
//  289   M0042_UARTRx_datCnt = 0;
        MOV     DPTR,#M0042_UARTRx_datCnt
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
//  290   //osal_start_timerEx( SampleApp_TaskID,EEP_UART_SEND_POLL_PARA_EVT,10);
//  291 }
        MOV     R7,#0x2
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock6

        COMMON INTVEC:CODE:ROOT(0)
        ORG 19
`??halUSART0RxIsr??INTVEC 19`:
        LJMP       (halUSART0RxIsr)

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for delay4uart>`:
        DATA16
        DW 10

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??hal_USART0Init?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    hal_USART0Init

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??hal_USART1Init?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    hal_USART1Init

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??hal_USART0Write?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    hal_USART0Write

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??hal_USART1Write?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    hal_USART1Write

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??hal_USART0Read?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    hal_USART0Read

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??M0042_uartRXFrameAnalysis?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    M0042_uartRXFrameAnalysis

        END
//  292 
//  293 
//  294 
//  295 /***************************************************************************************************
//  296 ***************************************************************************************************/
// 
// 654 bytes in segment BANKED_CODE
//  36 bytes in segment BANK_RELAYS
//   3 bytes in segment INTVEC
//  96 bytes in segment NEAR_CODE
//  13 bytes in segment SFR_AN
//   2 bytes in segment XDATA_I
//   2 bytes in segment XDATA_ID
// 268 bytes in segment XDATA_Z
// 
// 788 bytes of CODE  memory (+  3 bytes shared)
//   0 bytes of DATA  memory (+ 13 bytes shared)
// 270 bytes of XDATA memory
//
//Errors: none
//Warnings: none
